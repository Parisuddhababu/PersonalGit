"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[9461],{75289:(e,t,a)=>{a.d(t,{A:()=>o});var l=a(65043),n=a(74117),s=a(41290),r=a(33556),i=a(70579);const o=e=>{let{onClose:t,action:a,show:o,warningText:d,disabled:c,isLoading:u}=e;const{t:m}=(0,n.Bd)(),[v,x]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{o&&setTimeout((()=>{x(!0)}),100)}),[o]),(0,i.jsxs)(i.Fragment,{children:[u&&(0,i.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%]"}),(0,i.jsxs)("div",{className:"".concat(o?"":"hidden"," absolute top-0 left-0 right-0 z-[1000] h-full bg-modal"),children:["Are you sure want to delete this record ?"!==d&&"Are you sure want to change status ?"!==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(v?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,i.jsxs)("div",{className:"relative bg-white shadow rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-5 py-6 border-b bg-accents-2 rounded-t-xl",children:[(0,i.jsxs)("div",{className:"flex items-center ",children:[(0,i.jsx)(r.io,{className:"inline-block mr-3 fill-baseColor",fontSize:"20"}),(0,i.jsx)("span",{className:"text-xl font-bold text-baseColor",children:m("Confirmation")})]}),(0,i.jsx)(s.A,{onClick:t,label:"",children:(0,i.jsx)(r.YY,{className:"text-error",fontSize:"14"})})]}),(0,i.jsx)("div",{className:"p-5 space-y-6 font-normal text-center border-b border-solid border-border-primary",children:(0,i.jsx)("p",{children:m(d)})}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 md:space-x-3 md:flex-row",children:[(0,i.jsx)(s.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[160px]",onClick:a,label:m("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(s.A,{className:"btn-secondary btn-normal w-full md:w-auto min-w-[160px]",onClick:t,label:m("No"),title:"No"})]})]})})}),"Are you sure want to change status ?"==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(v?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[(0,i.jsx)("span",{className:"p-[10px] bg-primary min-w-min rounded-full mb-3 overflow-hidden text-xl-44 md:text-6xl",children:(0,i.jsx)(r.ZI,{className:"fill-white bg-primary"})}),(0,i.jsx)("h4",{children:m("Confirmation")})]}),(0,i.jsx)("h6",{className:"font-semibold text-center mb-7 md:mb-10",children:m(d)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(s.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:a,label:m("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(s.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:t,label:m("No"),title:"No"})]})]})})}),"Are you sure want to delete this record ?"==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(v?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsx)("div",{className:"flex justify-center mb-5",children:(0,i.jsx)("span",{className:"p-[22px] md:p-[26px] rounded-full bg-error text-xl-35 md:text-5xl",children:(0,i.jsx)(r.Vl,{className:"stroke-2 fill-white"})})}),(0,i.jsx)("h6",{className:"font-bold text-center mb-7 md:mb-10",children:m(d)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(s.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:a,label:m("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(s.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:t,label:m("No"),title:"No"})]})]})})})]})]})}},51842:(e,t,a)=>{a.d(t,{A:()=>w});var l=a(65043),n=a(33556),s=a(41290),r=a(42145),i=a(86213),o=a(64526),d=a(73216),c=a(35475),u=a(79456),m=a(75289),v=a(88250),x=a(31881),p=a(71007),b=a(97803),h=a(24108),f=a(70579);const w=e=>{var t,a,w,g,j,C,y,N,_,A,k,D,S,E,$,I,P,R,z,T,U,J,q;let{tabs:L,containerMinimize:M}=e;const Y=(0,l.useRef)(null),[O,B]=(0,l.useState)(0),[F,V]=(0,l.useState)(!1),[Z,G]=(0,l.useState)(!1),[H,K]=(0,l.useState)(!1),[Q,W]=(0,l.useState)(null),[X,ee]=(0,l.useState)(null),[te,ae]=(0,l.useState)(!1),le=(0,d.Zp)(),[ne]=(0,c.ok)(location.search),se=ne.get("uuid"),re=ne.get("isViewAsLearner"),{id:ie}=(0,d.g)(),{data:oe}=(0,v.I)(h.Ai,{variables:{courseId:se},fetchPolicy:"network-only"}),{courseDetailsPage:de,overview:ce}=(0,u.d4)((e=>e.coursesManagement)),{userProfileData:ue}=(0,u.d4)((e=>e.userProfile)),[me,{loading:ve}]=(0,x.n)(p.L),[xe,{loading:pe}]=(0,x.n)(b.k2),be=null!==(t=null===ue||void 0===ue||null===(a=ue.getProfile)||void 0===a||null===(w=a.data)||void 0===w?void 0:w.user_type)&&void 0!==t?t:"",he=null===ue||void 0===ue||null===(g=ue.getProfile)||void 0===g||null===(j=g.data)||void 0===j?void 0:j.is_course_creator,fe=(0,l.useCallback)((()=>{i.A.get("".concat(r.hV,"/download-zip/").concat(null!==se&&void 0!==se?se:ie),{responseType:"blob"}).then((e=>{var t,a,l,n;const s=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=s,r.setAttribute("download","".concat(null===de||void 0===de||null===(t=de.getCourseDetailOverview)||void 0===t||null===(a=t.data)||void 0===a||null===(l=a.overview)||void 0===l?void 0:l.title,".zip")),document.body.appendChild(r),r.click(),o.oR.success(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)})).catch((e=>{o.oR.error(e.message)}))}),[null===de||void 0===de||null===(C=de.getCourseDetailOverview)||void 0===C||null===(y=C.data)||void 0===y||null===(N=y.overview)||void 0===N?void 0:N.title]),we=null===de||void 0===de||null===(_=de.getCourseDetailOverview)||void 0===_||null===(A=_.data)||void 0===A||null===(k=A.contents)||void 0===k?void 0:k.some((e=>{var t;return null===e||void 0===e||null===(t=e.lessons)||void 0===t?void 0:t.some((e=>null===e||void 0===e?void 0:e.attachment))})),ge=(0,l.useCallback)((()=>{ae(!1),null!==ce&&void 0!==ce&&ce.is_published?V(!0):le("/".concat(r.bw.app,"/").concat(r.bw.updateEducationAndEngagement,"/?uuid=").concat(se))}),[ce]),je=(0,l.useCallback)((()=>{G(!0),ae(!1),W(se)}),[]),Ce=(0,l.useCallback)((()=>{K(!0),ae(!1),ee(se)}),[]),ye=(0,l.useCallback)((()=>{Q&&""!==Q&&me({variables:{archive:{archive_flag:r.n_.isDoArchive,course_id:Q}}}).then((e=>{var t,a;o.oR.success(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.updateCourseArchiveState)||void 0===a?void 0:a.message),_e(),le("/".concat(r.bw.app,"/").concat(r.bw.allCourses))})).catch((e=>{var t,a,l;o.oR.error(null===e||void 0===e||null===(t=e.networkError)||void 0===t||null===(a=t.result)||void 0===a||null===(l=a.errors[0])||void 0===l?void 0:l.message)}))}),[Q]),Ne=(0,l.useCallback)((()=>{X&&""!==X&&xe({variables:{courseId:X}}).then((e=>{var t,a;o.oR.success(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.deleteCourse)||void 0===a?void 0:a.message),_e(),le("/".concat(r.bw.app,"/").concat(r.bw.allCourses))})).catch((e=>{var t,a,l;o.oR.error(null===e||void 0===e||null===(t=e.networkError)||void 0===t||null===(a=t.result)||void 0===a||null===(l=a.errors[0])||void 0===l?void 0:l.message)}))}),[X]),_e=(0,l.useCallback)((()=>{G(!1),K(!1),V(!1),ee(null),W(null)}),[]),Ae=e=>{Y.current&&!Y.current.contains(e.target)&&ae(!1)},ke=(0,l.useCallback)((()=>{V(!1),le("/".concat(r.bw.app,"/").concat(r.bw.updateEducationAndEngagement,"/?uuid=").concat(se))}),[se]);return(0,l.useEffect)((()=>(document.addEventListener("mousedown",Ae),()=>{document.removeEventListener("mousedown",Ae)})),[]),(0,f.jsxs)("div",{className:"tab",children:[(0,f.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-5 lg:flex-nowrap md:gap-5",children:[(0,f.jsx)("ul",{className:"flex w-full gap-3 md:w-auto tab-list md:gap-5",children:L.map(((e,t)=>(0,f.jsx)("li",{className:"tab-item w-full btn md:w-[120px] ".concat(O===t?"btn-primary":"btn-normal"),onClick:()=>(e=>{B(e)})(t),children:e.label},"tab-list-".concat(e.id))))}),!re&&((null===oe||void 0===oe||null===(D=oe.getCoursePermissions)||void 0===D||null===(S=D.data)||void 0===S?void 0:S.is_edit)||(null===oe||void 0===oe||null===(E=oe.getCoursePermissions)||void 0===E||null===($=E.data)||void 0===$?void 0:$.is_archive)||(null===oe||void 0===oe||null===(I=oe.getCoursePermissions)||void 0===I||null===(P=I.data)||void 0===P?void 0:P.is_delete))&&([null===r.ve||void 0===r.ve?void 0:r.ve.SUPER_ADMIN,null===r.ve||void 0===r.ve?void 0:r.ve.SUBSCRIBER_ADMIN].includes(be)||he)&&(0,f.jsx)("div",{className:"relative",ref:Y,children:te?(0,f.jsxs)("ul",{className:"absolute flex flex-col items-start -top-12 right-0 bg-white rounded-xl overflow-hidden border border-gray-300 min-w-48",children:[(null===oe||void 0===oe||null===(R=oe.getCoursePermissions)||void 0===R||null===(z=R.data)||void 0===z?void 0:z.is_edit)&&(0,f.jsx)("li",{className:"w-full h-full  px-4 py-4 border-b border-gray-300 last:border-0",children:(0,f.jsxs)(s.A,{type:"button",label:"",onClick:ge,className:"flex items-center w-full gap-3 lg:w-auto -order-1 lg:order-2",title:"Edit",children:[(0,f.jsx)(n.ff,{fontSize:"18",className:"fill-primary"}),(0,f.jsx)("span",{className:"text-xl text-black hover:underline hover:text-primary ",children:"Edit"})]})}),(null===oe||void 0===oe||null===(T=oe.getCoursePermissions)||void 0===T||null===(U=T.data)||void 0===U?void 0:U.is_archive)&&(0,f.jsx)("li",{className:"w-full h-full px-4 py-4 border-b border-gray-300 last:border-0",children:(0,f.jsxs)(s.A,{type:"button",label:"",onClick:je,className:"flex items-center w-full gap-3 lg:w-auto -order-1 lg:order-2",title:"Archive",children:[(0,f.jsx)(n.Td,{fontSize:"18",className:"fill-primary"}),(0,f.jsx)("span",{className:"text-xl text-black hover:underline hover:text-primary",children:"Archive"})]})}),(null===oe||void 0===oe||null===(J=oe.getCoursePermissions)||void 0===J||null===(q=J.data)||void 0===q?void 0:q.is_delete)&&(0,f.jsx)("li",{className:"w-full h-full  px-4 py-4 border-b border-gray-300 last:border-0",children:(0,f.jsxs)(s.A,{type:"button",label:"",onClick:Ce,className:"flex items-center w-full gap-3 lg:w-auto -order-1 lg:order-2",title:"Delete",children:[(0,f.jsx)(n.lM,{fontSize:"18",className:"fill-primary"}),(0,f.jsx)("span",{className:"text-xl text-black hover:underline hover:text-primary",children:"Delete"})]})})]}):(0,f.jsx)(s.A,{type:"button",label:"",title:"Menu",onClick:()=>ae(!0),children:(0,f.jsx)("span",{className:"text-2xl",children:(0,f.jsx)(n.Rt,{className:"fill-black "})})})}),we&&(0,f.jsxs)(s.A,{type:"button",label:"",onClick:()=>fe(),className:"flex items-center w-full gap-1 lg:w-auto -order-1 lg:order-2",title:"Download",children:[(0,f.jsx)(n.f5,{fontSize:"16",className:"fill-primary"}),(0,f.jsx)("span",{className:"text-primary hover:underline",children:"Download Resources"})]})]}),(0,f.jsx)("div",{className:"".concat(M?"2lg:w-[calc(60%-10px)] xl:w-[calc(66%-14px)]":""," float-left w-full mb-5 overflow-hidden border border-solid border-border-primary rounded-xl tab-content md:mb-7"),children:L.map(((e,t)=>(0,f.jsx)("div",{className:"tab-panel ".concat(O===t?"active py-3 bg-transparent":""),children:O===t&&e.content},"tab-content-".concat(e.id))))}),(Z||H)&&(0,f.jsx)(m.A,{warningText:H?r.jl:r.aJ,onClose:()=>_e(),action:H?Ne:ye,show:Z||H,disabled:pe||ve}),F&&(0,f.jsx)(m.A,{warningText:r.Ur,onClose:()=>_e(),action:ke,show:F})]})}},71007:(e,t,a)=>{a.d(t,{L:()=>i,k:()=>o});var l,n,s=a(57528),r=a(70459);const i=(0,r.J1)(l||(l=(0,s.A)(["mutation UpdateCourseArchiveState($archive: GetArchiveCourseDto!) {\n  updateCourseArchiveState(archive: $archive) {\n    message\n  }\n}"]))),o=(0,r.J1)(n||(n=(0,s.A)(["mutation DeleteCourse($courseId: String!) {\n  deleteCourse(courseId: $courseId) {\n    message\n  }\n}"])))},97803:(e,t,a)=>{a.d(t,{BL:()=>m,FH:()=>b,dE:()=>p,fE:()=>h,k2:()=>x,uk:()=>v});var l,n,s,r,i,o,d,c=a(57528),u=a(70459);const m=(0,u.J1)(l||(l=(0,c.A)(["\nmutation CreatePlaylist($playlistData: CreatePlaylistDto!) {\n    createPlaylist(playlistData: $playlistData) {\n        data {\n          uuid\n          name\n        }\n        message\n    }\n  }\n"]))),v=(0,u.J1)(n||(n=(0,c.A)(["\n mutation CourseCreateStepFour($courseData: CreateCourseStepFourDto!) {\n  courseCreateStepFour(courseData: $courseData) {\n    message\n  }\n}\n"]))),x=((0,u.J1)(s||(s=(0,c.A)(["\n  mutation UpdateCourse($courseData: UpdateCourseDto!) {\n    updateCourse(courseData: $courseData) {\n      message\n      data {\n        description\n        image\n        instructor_name\n        instructor_profile\n        instructor_qualification\n        is_certification\n        is_template\n        level\n        prerequisite\n        reward_point\n        subtitle\n        thumbnails\n        title\n        total_duration\n        uuid\n      }\n    }\n  }\n"]))),(0,u.J1)(r||(r=(0,c.A)(["\n  mutation DeleteCourse($courseId: String!) {\n    deleteCourse(courseId: $courseId) {\n      message   \n    }\n  }\n"])))),p=(0,u.J1)(i||(i=(0,c.A)(["\nmutation CourseCreateStepOne($courseData: CreateCourseDto!) {\n  courseCreateStepOne(courseData: $courseData) {\n    message\n    data {\n      uuid\n      title\n      description\n      category {\n        name\n        uuid\n      }\n      prerequisite\n      course_image\n      banner_image\n      instructor_profile\n      instructor_name\n      instructor_qualification\n      is_template\n      is_draft\n      createdAt\n      highlights {\n        id\n        uuid\n        name\n      }\n    }\n  }\n}"]))),b=(0,u.J1)(o||(o=(0,c.A)(["mutation CourseCreateStepTwo($courseData: CreateCourseStepOneDto!) {\n  courseCreateStepTwo(courseData: $courseData) {\n    message\n    data {\n      course_chapters {\n        chapter_content {\n          image\n          uuid\n          description\n          youtube_url\n          pdf_url\n        }\n        uuid\n        title\n        type\n        order\n        user_course_progress {\n          uuid\n          video_last_check_time\n          is_chapter_completed\n        }\n        chapter_quiz {\n          uuid\n          question\n          order\n          type\n          quiz_question {\n            uuid\n            option\n            is_correct\n            order\n          }\n        }\n      }\n      uuid\n      is_draft\n      category {\n        uuid\n        name\n        description\n        status\n        image_url\n      }\n      is_template\n    }\n  }\n}"]))),h=(0,u.J1)(d||(d=(0,c.A)(["mutation CourseCreateStepThree($courseData: CreateCourseStepThreeDto!) {\n  courseCreateStepThree(courseData: $courseData) {\n    message\n    data {\n      id\n      uuid\n      question\n      answer\n      order\n    }\n  }\n}"])))}}]);
//# sourceMappingURL=9461.15627e90.chunk.js.map