"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[3021],{23021:(e,s,a)=>{a.r(s),a.d(s,{default:()=>f});var r,l=a(65043),t=a(73216),o=a(74117),d=a(64526),n=a(42145),i=a(41290),c=a(34764),u=a(33556),w=a(63516),m=a(12352),h=a(66925),b=a(85290),g=a(82806),x=a(31881),p=a(57528);const v=(0,a(70459).J1)(r||(r=(0,p.A)(["\nmutation ChangePassword($userData: ChangePasswordDto!) {\n    changePassword(userData: $userData) {\n      message\n    }\n  }\n"])));var P=a(79456),N=a(70579);const f=()=>{var e,s,a;const{t:r}=(0,o.Bd)(),p=(0,t.Zp)(),[f]=(0,x.n)(v),[j,C]=(0,l.useState)(!1),[y,k]=(0,l.useState)(!1),[S,_]=(0,l.useState)(!1),{changePasswordValidationSchema:A}=(0,m.A)(),{userProfileData:R}=(0,P.d4)((e=>e.userProfile)),D=null!==(e=null===R||void 0===R||null===(s=R.getProfile)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.user_type)&&void 0!==e?e:"",{isIntroductoryPage:I}=(0,P.d4)((e=>e.userProfile)),U=(0,l.useCallback)((()=>{p((0,h.Go)(D,n.ve.SUPER_ADMIN,"/".concat(n.bw.app,"/").concat(n.bw.dashboard),"/".concat(n.bw.app,"/").concat(n.bw.subscriber)))}),[]),B=(0,w.Wx)({initialValues:{oldPassword:"",newPassword:"",confirmPassword:""},validationSchema:A,onSubmit:e=>{f({variables:{userData:{oldPassword:e.oldPassword,newPassword:e.newPassword}}}).then((e=>{var s;if(d.oR.success(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message),!I&&D===n.ve.SUBSCRIBER_ADMIN)return p("/".concat(n.bw.introductory));p((0,h.Go)(D,n.ve.SUPER_ADMIN,"/".concat(n.bw.app,"/").concat(n.bw.dashboard),"/".concat(n.bw.app,"/").concat(n.bw.subscriber))),U()})).catch((e=>{d.oR.error(e.networkError.result.errors[0].message)}))}});(0,l.useEffect)((()=>{var e,s,a,r,l,t,o,d;return null!==R&&void 0!==R&&null!==(e=R.getProfile)&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.is_required_reset_password||null===R||void 0===R||null===(a=R.getProfile)||void 0===a||null===(r=a.data)||void 0===r||!r.introductory_page||D===n.ve.SUBSCRIBER_ADMIN?null!==R&&void 0!==R&&null!==(l=R.getProfile)&&void 0!==l&&null!==(t=l.data)&&void 0!==t&&t.is_required_reset_password||null!==R&&void 0!==R&&null!==(o=R.getProfile)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&d.introductory_page||D!==n.ve.SUBSCRIBER_ADMIN?void 0:p("/".concat(n.bw.introductory)):p((0,h.Go)(D,n.ve.SUPER_ADMIN,"/".concat(n.bw.app,"/").concat(n.bw.dashboard),"/".concat(n.bw.app,"/").concat(n.bw.subscriber)))}),[R]);const E=(0,l.useCallback)((e=>{B.setFieldValue(e.target.name,(0,h.AW)(e))}),[]),M=(0,l.useCallback)((()=>{C((e=>!e))}),[]),q=(0,l.useCallback)((()=>{k((e=>!e))}),[]),G=(0,l.useCallback)((()=>{_((e=>!e))}),[]);return(0,N.jsxs)("div",{className:"flex w-full h-screen bg-white nm",children:[(0,N.jsx)("img",{className:"hidden object-cover md:block md:w-1/2",src:b,alt:"LoginImage",title:"loginimage",height:981,width:961}),(0,N.jsx)("div",{className:"flex items-center justify-center w-full px-5 md:w-1/2 md:px-12",children:(0,N.jsxs)("form",{className:"w-full max-w-[486px] bg-white",onSubmit:B.handleSubmit,children:[(0,N.jsx)("picture",{children:(0,N.jsx)("img",{className:"max-w-[302px] mb-5 md:mb-[30px] w-full mx-auto",src:g,alt:"logo",title:"logo",height:80,width:302})}),(0,N.jsx)("h1",{className:"mb-3 text-center md:mb-5 text-primary",children:r("Change Your Password")}),(0,N.jsxs)("div",{className:"relative mb-3 md:mb-5",children:[(0,N.jsx)(c.A,{required:!0,id:"oldPassword",onBlur:E,type:j?"text":"password",label:r("Current Password"),value:B.values.oldPassword,onChange:B.handleChange,placeholder:r("Current Password")}),(0,N.jsx)(i.A,{className:"absolute bg-transparent right-3 top-11",onClick:M,label:"",title:"",children:j?(0,N.jsx)(u.kU,{className:"text-light-grey"}):(0,N.jsx)(u.h3,{className:"text-light-grey"})}),B.touched.newPassword&&B.errors.oldPassword&&(0,N.jsx)("p",{className:"text-red-400",children:B.errors.oldPassword})]}),(0,N.jsxs)("div",{className:"relative mb-3 md:mb-5",children:[(0,N.jsx)(c.A,{required:!0,onBlur:E,id:"newPassword",type:y?"text":"password",label:r("New Password"),value:B.values.newPassword,onChange:B.handleChange,placeholder:r("New Password")}),(0,N.jsx)(i.A,{onClick:q,className:"absolute bg-transparent right-3 top-11",label:"",title:"",children:y?(0,N.jsx)(u.kU,{className:"text-light-grey"}):(0,N.jsx)(u.h3,{className:"text-light-grey"})}),B.touched.newPassword&&B.errors.newPassword&&(0,N.jsx)("p",{className:"text-red-400",children:B.errors.newPassword})]}),(0,N.jsxs)("div",{className:"relative mb-5 md:mb-[30px]",children:[(0,N.jsx)(c.A,{required:!0,onBlur:E,id:"confirmPassword",type:S?"text":"password",label:r("Re-enter New Password"),value:B.values.confirmPassword,onChange:B.handleChange,placeholder:r("Re-enter New Password")}),(0,N.jsx)(i.A,{onClick:G,className:"absolute bg-transparent right-3 top-11",label:"",title:"",children:S?(0,N.jsx)(u.kU,{className:"text-light-grey"}):(0,N.jsx)(u.h3,{className:"text-light-grey"})}),B.touched.confirmPassword&&B.errors.confirmPassword&&(0,N.jsx)("p",{className:"text-red-400",children:B.errors.confirmPassword})]}),(0,N.jsx)(i.A,{className:"w-full btn-primary btn-normal btn-login",type:"submit",label:r("Update Password"),title:"".concat(r("Update Password"))})]})})]})}}}]);
//# sourceMappingURL=3021.03c6782e.chunk.js.map