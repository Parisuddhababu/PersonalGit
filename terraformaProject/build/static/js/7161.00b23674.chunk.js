"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[7161],{7648:(e,s,l)=>{l.d(s,{A:()=>u});var a=l(65043),n=l(74117),r=l(73216),t=l(35475),i=l(42145),c=l(79456),d=l(66925),o=l(70579);const x=()=>{var e,s,l;const{t:x}=(0,n.Bd)(),u=(0,r.zy)(),m=new URLSearchParams(u.search).get("uuid"),{id:b}=(0,r.g)(),{userProfileData:p}=(0,c.d4)((e=>e.userProfile)),h=null!==(e=null===p||void 0===p||null===(s=p.getProfile)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.user_type)&&void 0!==e?e:"",v=e=>{var s;let l="";if(null!==(s=e.split("/")[2])&&void 0!==s&&s.includes("-")){return e.split("/")[2].split("-").forEach((e=>{var s;return l=l+(null===(s=e[0])||void 0===s?void 0:s.toUpperCase())+e.slice(1)+" ",l})),l}var a;return l=(null===(a=e.split("/")[2][0])||void 0===a?void 0:a.toUpperCase())+e.split("/")[2].slice(1),l},f=e=>{let s="";if(null!==e&&void 0!==e&&e.includes("-")){s=null===e||void 0===e?void 0:e.replace(/-|\s/g," ");const l=s.split(" ");for(let e=0;e<l.length;e++)l[e]=l[e][0].toUpperCase()+l[e].substring(1);return s=l.join(" "),s}var l;return s=(null===e||void 0===e||null===(l=e[0])||void 0===l?void 0:l.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" ",s},j=e=>{let s="";return null!==e&&void 0!==e&&e.includes("-")||(s=(null===e||void 0===e||null===(l=e[0])||void 0===l?void 0:l.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" "),s;var l},N=u.pathname.split("/"),g=(0,a.useCallback)((()=>{if((null===N||void 0===N?void 0:N.length)>0){const e=null===N||void 0===N?void 0:N.length;if(e<4)return(0,o.jsx)("span",{className:"text-primary",children:N[2]&&"".concat(x(f(N[2])))});if(e<5)return""!==N[3]?N[3].length>32?(0,o.jsxs)(o.Fragment,{children:[j(N[3])&&(0,o.jsx)("span",{className:"text-primary",children:(0,o.jsx)(t.k2,{to:"/".concat(i.bw.app,"/").concat(N[2]),className:"text-light-grey hover:underline",children:"".concat(x(v(u.pathname)))})}),j(N[3])&&(0,o.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),!j(N[3])&&(0,o.jsx)("span",{className:"text-primary",children:N[2]&&"".concat(x(f(N[2])))}),(0,o.jsx)("span",{className:"text-primary",children:N[3]&&"".concat(x(j(N[3])))})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"text-primary",children:(0,o.jsx)(t.k2,{to:"/".concat(i.bw.app,"/").concat(N[2]),className:"text-light-grey hover:underline",children:"".concat(x(v(u.pathname)))})}),(0,o.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,o.jsx)("span",{className:"text-primary",children:N[3]&&"".concat(x(f(N[3])))})]}):(0,o.jsx)("span",{className:"text-primary",children:N[2]&&"".concat(x(f(N[2])))});if(e<6)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"text-primary",children:(0,o.jsx)(t.k2,{to:"/".concat(i.bw.app,"/").concat(N[2]),className:"text-light-grey hover:underline",children:"".concat(x(v(u.pathname)))})}),(0,o.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,o.jsx)("span",{className:"text-primary",children:N[3]&&"".concat(x(f(N[3])))})]});if(e<7){let e="";return m?e="?uuid=".concat(m):b&&(e="?uuid=".concat(b)),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"text-primary",children:(0,o.jsx)(t.k2,{to:"/".concat(i.bw.app,"/").concat(N[2]),className:"text-light-grey hover:underline",children:x(f(N[2]))})}),(0,o.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,o.jsx)("span",{className:"text-primary",children:(0,o.jsx)(t.k2,{to:"/".concat(i.bw.app,"/").concat(N[2],"/").concat(N[3],"/").concat((""!==m||""!==b)&&e),className:"text-light-grey hover:underline",children:x(f(N[3]))})}),(0,o.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,o.jsx)("span",{className:"text-primary",children:N[5]&&"".concat(x(f(N[4])))})]})}}}),[N]);return(0,o.jsx)("div",{className:"w-full",children:(0,o.jsxs)("p",{className:"max-xs:text-xs text-xs-14 max-md:truncate",children:[(0,o.jsxs)("span",{children:[(0,o.jsx)(t.k2,{to:(0,d.Go)(h,i.ve.SUPER_ADMIN,"/".concat(i.bw.app,"/").concat(i.bw.dashboard),"/".concat(i.bw.app,"/").concat(i.bw.subscriber)),className:"cursor-pointer text-light-grey hover:underline",children:x("Home")}),(0,o.jsx)("span",{className:"mx-2 text-light-grey",children:">"})]}),g()]})})},u=a.memo(x)},75289:(e,s,l)=>{l.d(s,{A:()=>c});var a=l(65043),n=l(74117),r=l(41290),t=l(33556),i=l(70579);const c=e=>{let{onClose:s,action:l,show:c,warningText:d,disabled:o,isLoading:x}=e;const{t:u}=(0,n.Bd)(),[m,b]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{c&&setTimeout((()=>{b(!0)}),100)}),[c]),(0,i.jsxs)(i.Fragment,{children:[x&&(0,i.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%]"}),(0,i.jsxs)("div",{className:"".concat(c?"":"hidden"," absolute top-0 left-0 right-0 z-[1000] h-full bg-modal"),children:["Are you sure want to delete this record ?"!==d&&"Are you sure want to change status ?"!==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(m?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,i.jsxs)("div",{className:"relative bg-white shadow rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-5 py-6 border-b bg-accents-2 rounded-t-xl",children:[(0,i.jsxs)("div",{className:"flex items-center ",children:[(0,i.jsx)(t.io,{className:"inline-block mr-3 fill-baseColor",fontSize:"20"}),(0,i.jsx)("span",{className:"text-xl font-bold text-baseColor",children:u("Confirmation")})]}),(0,i.jsx)(r.A,{onClick:s,label:"",children:(0,i.jsx)(t.YY,{className:"text-error",fontSize:"14"})})]}),(0,i.jsx)("div",{className:"p-5 space-y-6 font-normal text-center border-b border-solid border-border-primary",children:(0,i.jsx)("p",{children:u(d)})}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 md:space-x-3 md:flex-row",children:[(0,i.jsx)(r.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[160px]",onClick:l,label:u("Yes"),disabled:o,title:"Yes"}),(0,i.jsx)(r.A,{className:"btn-secondary btn-normal w-full md:w-auto min-w-[160px]",onClick:s,label:u("No"),title:"No"})]})]})})}),"Are you sure want to change status ?"==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(m?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[(0,i.jsx)("span",{className:"p-[10px] bg-primary min-w-min rounded-full mb-3 overflow-hidden text-xl-44 md:text-6xl",children:(0,i.jsx)(t.ZI,{className:"fill-white bg-primary"})}),(0,i.jsx)("h4",{children:u("Confirmation")})]}),(0,i.jsx)("h6",{className:"font-semibold text-center mb-7 md:mb-10",children:u(d)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(r.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:l,label:u("Yes"),disabled:o,title:"Yes"}),(0,i.jsx)(r.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:s,label:u("No"),title:"No"})]})]})})}),"Are you sure want to delete this record ?"==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(m?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsx)("div",{className:"flex justify-center mb-5",children:(0,i.jsx)("span",{className:"p-[22px] md:p-[26px] rounded-full bg-error text-xl-35 md:text-5xl",children:(0,i.jsx)(t.Vl,{className:"stroke-2 fill-white"})})}),(0,i.jsx)("h6",{className:"font-bold text-center mb-7 md:mb-10",children:u(d)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(r.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:l,label:u("Yes"),disabled:o,title:"Yes"}),(0,i.jsx)(r.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:s,label:u("No"),title:"No"})]})]})})})]})]})}},12209:(e,s,l)=>{l.d(s,{A:()=>x});var a=l(65043),n=l(74117),r=l(73216),t=l(7648),i=l(33556),c=l(79456),d=l(75214),o=l(70579);const x=e=>{let{headerActionConst:s,headerTitle:l}=e;const{t:x}=(0,n.Bd)(),u=(0,c.wA)(),{show:m}=(0,c.d4)((e=>e.coursesManagement)),b=(0,r.zy)(),p=(0,a.useCallback)((()=>{u((0,d.oM)(!m))}),[m]);return(0,o.jsxs)("header",{className:"sticky top-0 z-20 flex bg-white border-b shadow-header xl:shadow-none xl:h-auto xl:block border-border-primary xl:px-2 xl:pt-0",children:[(0,o.jsx)("div",{onClick:p,className:"pt-5 cursor-pointer text-xl-22 xl:hidden",children:(0,o.jsx)(i.Rt,{className:"ml-4"})}),(0,o.jsx)("div",{className:"p-2.5 xl:p-[18px] xl:shadow-header max-xl:w-[calc(100%-47px)]",children:(0,o.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:[(0,o.jsxs)("div",{className:"w-full xl:w-auto",children:[(0,o.jsx)("h1",{className:"mb-1 text-2xl max-xl:truncate xl:text-3xl",children:x(null!==l&&void 0!==l?l:(e=>{let s="";if(e.split("/")[2].includes("-")){return e.split("/")[2].split("-").forEach((e=>(s=s+e[0].toUpperCase()+e.slice(1)+" ",s))),s}return s=e.split("/")[2][0].toUpperCase()+e.split("/")[2].slice(1),s})(b.pathname))}),(0,o.jsx)(t.A,{})]}),s&&(0,o.jsx)("div",{className:"flex gap-2.5 max-xl:w-[calc(100%+40px)] lg:gap-5",children:(()=>{if(s)return s()})()})]})})]})}},93496:(e,s,l)=>{l.d(s,{Fw:()=>o,Po:()=>u,jZ:()=>x,y:()=>d});var a,n,r,t,i=l(57528),c=l(70459);const d=(0,c.J1)(a||(a=(0,i.A)(["\nmutation CreateSubscriber($subscriberData: CreateSubscriberDto!) {\n  createSubscriber(subscriberData: $subscriberData) {\n    message\n    data {\n      uuid\n      first_name\n      last_name\n      company_name\n      address\n      phone_number\n      country_code {\n        name\n        phoneCode\n      }\n      logo\n      subscribe_start\n      subscribe_end\n      status\n    }\n  }\n}\n"]))),o=(0,c.J1)(n||(n=(0,i.A)(["\nmutation BlockSubscriber($status: Float!, $subscribersId: String!) {\n  blockSubscriber(status: $status, subscribersId: $subscribersId) {\n    message\n    data {\n      uuid\n      first_name\n      last_name\n      company_name\n      address\n      phone_number\n      logo\n      subscribe_start\n      subscribe_end\n      status\n    }\n  }\n}\n"]))),x=(0,c.J1)(r||(r=(0,i.A)(["\nmutation DeleteSubscriber($subscribersId: String!) {\n  deleteSubscriber(subscribersId: $subscribersId) {\n    message\n  }\n}\n"]))),u=(0,c.J1)(t||(t=(0,i.A)(["\nmutation UpdateSubscriber($subscriberData: UpdateSubscriberDto!, $subscriberId: String!) {\n  updateSubscriber(subscriberData: $subscriberData, subscriberId: $subscriberId) {\n    message\n    data {\n      uuid\n      first_name\n      last_name\n      company_name\n      address\n      phone_number\n      country_code {\n        id\n        uuid\n        name\n        countryCode\n        phoneCode\n      }\n      logo\n      subscribe_start\n      subscribe_end\n      status\n      subscriber_branch {\n        uuid\n        location\n      }\n    }\n  }\n}\n"])))},47161:(e,s,l)=>{l.r(s),l.d(s,{default:()=>f});var a=l(65043),n=l(73216),r=l(74117),t=l(64526),i=l(41290),c=l(75958),d=l(88250),o=l(31881),x=l(42145),u=l(85408),m=l(12209),b=l(93496),p=l(75289),h=l(79456),v=l(70579);const f=()=>{var e,s,l,f,j,N,g,y,w,S,C,_,k,A,I,D,U,P,E,$,F,M,R,Y,B,z,Z,T,J,L,X,G,H,V,W,q,K;const{t:O}=(0,r.Bd)(),Q=(0,n.g)(),{data:ee,refetch:se}=(0,d.I)(u.e9,{variables:{subscribersId:Q.id}}),[le]=(0,o.n)(b.jZ),[ae,ne]=(0,a.useState)(!1),re=(0,n.Zp)(),{userProfileData:te}=(0,h.d4)((e=>e.userProfile)),ie=null!==(e=null===te||void 0===te||null===(s=te.getProfile)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.user_type)&&void 0!==e?e:"";(0,a.useEffect)((()=>{null!==Q&&void 0!==Q&&Q.id&&se({subscribersId:Q.id}).catch((e=>t.oR.error(e)))}),[null===Q||void 0===Q?void 0:Q.id]);const ce=(0,a.useCallback)((()=>{re("/".concat(x.bw.app,"/").concat(x.bw.subscriber))}),[]),de=null!==ee&&void 0!==ee&&null!==(f=ee.getSubscriber)&&void 0!==f&&null!==(j=f.data)&&void 0!==j&&j.logo.startsWith(x.ZX)?null===ee||void 0===ee||null===(N=ee.getSubscriber)||void 0===N||null===(g=N.data)||void 0===g?void 0:g.logo:"".concat(x.ZX,"/").concat(null===ee||void 0===ee||null===(y=ee.getSubscriber)||void 0===y||null===(w=y.data)||void 0===w?void 0:w.logo),oe=null===ee||void 0===ee||null===(S=ee.getSubscriber)||void 0===S||null===(C=S.data)||void 0===C||null===(_=C.subscriber_branch)||void 0===_?void 0:_.map((e=>null===e||void 0===e?void 0:e.location)),xe=null===ee||void 0===ee||null===(k=ee.getSubscriber)||void 0===k||null===(A=k.data)||void 0===A||null===(I=A.subscriber_branch)||void 0===I?void 0:I.map((e=>null===e||void 0===e?void 0:e.city)),ue=(0,a.useCallback)((()=>{ne(!1)}),[]),me=(0,a.useCallback)((()=>{le({variables:{subscribersId:Q.id}}).then((e=>{const s=e.data;t.oR.success(s.deleteSubscriber.message),ne(!1),re(-1)})).catch((e=>{t.oR.error(e.networkError.result.errors[0].message)}))}),[Q.id]),be=(0,a.useCallback)((()=>{ne(!0)}),[]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(m.A,{headerActionConst:()=>(0,v.jsx)(i.A,{className:"btn-secondary btn-normal text-bold md:min-w-[120px]",label:O("Back"),onClick:ce,title:"Back"}),headerTitle:"Subscriber Details"}),(0,v.jsxs)("div",{className:"w-calc(100%-56px) items-center justify-center rounded-xl border border-solid border-border-primary",children:[(0,v.jsxs)("div",{className:"flex p-5",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h6",{className:"mb-4",children:O("Profile Photo")}),de?(0,v.jsx)("img",{src:de,alt:"profile",className:"rounded-md"}):(0,v.jsx)("img",{src:c,alt:"profile",className:"w-48 h-48 rounded-md"})]}),(0,v.jsx)("div",{className:"w-full flex justify-end",children:ie===(null===x.ve||void 0===x.ve?void 0:x.ve.SUPER_ADMIN)&&(0,v.jsx)(i.A,{label:"Delete",className:"btn-error btn-normal mb-3 md:mb-0 w-full md:w-[160px]",type:"button",onClick:be,title:"Delete"})})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 px-5 pb-5 md:gap-x-2 2lg:grid-cols-2 ",children:[(0,v.jsxs)("div",{className:"flex pb-2",children:[(0,v.jsx)("p",{className:"flex-1 font-bold",children:O("Subscribed Company Name")}),(0,v.jsx)("p",{className:"flex-1 px-3",children:null===ee||void 0===ee||null===(D=ee.getSubscriber)||void 0===D||null===(U=D.data)||void 0===U?void 0:U.company_name})]}),(0,v.jsxs)("div",{className:"flex pb-2",children:[(0,v.jsx)("p",{className:"flex-1 font-bold",children:O("Subscriber Name")}),(0,v.jsx)("p",{className:"flex-1 px-3",children:(null===ee||void 0===ee||null===(P=ee.getSubscriber)||void 0===P||null===(E=P.data)||void 0===E?void 0:E.first_name)+" "+(null===ee||void 0===ee||null===($=ee.getSubscriber)||void 0===$||null===(F=$.data)||void 0===F?void 0:F.last_name)})]}),(0,v.jsxs)("div",{className:"flex pb-2",children:[(0,v.jsx)("p",{className:"flex-1 font-bold",children:O("CountryCode")}),(0,v.jsx)("p",{className:"flex-1 px-3",children:"".concat(null===ee||void 0===ee||null===(M=ee.getSubscriber)||void 0===M||null===(R=M.data)||void 0===R||null===(Y=R.country_code)||void 0===Y?void 0:Y.phoneCode," ").concat(null===ee||void 0===ee||null===(B=ee.getSubscriber)||void 0===B||null===(z=B.data)||void 0===z||null===(Z=z.country_code)||void 0===Z?void 0:Z.name)})]}),(0,v.jsxs)("div",{className:"flex pb-2",children:[(0,v.jsx)("p",{className:"flex-1 font-bold",children:O("Phone Number")}),(0,v.jsx)("p",{className:"flex-1 px-3",children:null===ee||void 0===ee||null===(T=ee.getSubscriber)||void 0===T||null===(J=T.data)||void 0===J?void 0:J.phone_number})]}),(0,v.jsxs)("div",{className:"flex pb-2",children:[(0,v.jsx)("p",{className:"flex-1 font-bold",children:O("Email")}),(0,v.jsx)("p",{className:"flex-1 px-3 break-all",children:null===ee||void 0===ee||null===(L=ee.getSubscriber)||void 0===L||null===(X=L.data)||void 0===X?void 0:X.email})]}),(0,v.jsxs)("div",{className:"flex pb-2",children:[(0,v.jsx)("p",{className:"flex-1 font-bold",children:O("Address")}),(0,v.jsx)("p",{className:"flex-1 px-3 break-all",children:null===ee||void 0===ee||null===(G=ee.getSubscriber)||void 0===G||null===(H=G.data)||void 0===H?void 0:H.address})]}),(0,v.jsxs)("div",{className:"flex pb-2",children:[(0,v.jsx)("p",{className:"flex-1 font-bold",children:O("Start Date")}),(0,v.jsx)("p",{className:"flex-1 px-3",children:null===ee||void 0===ee||null===(V=ee.getSubscriber)||void 0===V||null===(W=V.data)||void 0===W?void 0:W.subscribe_start})]}),(0,v.jsxs)("div",{className:"flex pb-2",children:[(0,v.jsx)("p",{className:"flex-1 font-bold",children:O("End Date")}),(0,v.jsx)("p",{className:"flex-1 px-3",children:null===ee||void 0===ee||null===(q=ee.getSubscriber)||void 0===q||null===(K=q.data)||void 0===K?void 0:K.subscribe_end})]}),(0,v.jsxs)("div",{className:"flex pb-2",children:[(0,v.jsx)("p",{className:"flex-1 font-bold",children:"Location"}),(0,v.jsx)("p",{className:"flex-1",children:oe?oe.join(", "):""})]}),(0,v.jsxs)("div",{className:"flex pb-2",children:[(0,v.jsx)("p",{className:"flex-1 font-bold",children:"City"}),(0,v.jsx)("p",{className:"flex-1",children:xe?xe.join(", "):""})]})]}),ae&&ie===(null===x.ve||void 0===x.ve?void 0:x.ve.SUPER_ADMIN)&&(0,v.jsx)(p.A,{warningText:x.jl,onClose:ue,action:me,show:ae})]})]})}}}]);
//# sourceMappingURL=7161.00b23674.chunk.js.map