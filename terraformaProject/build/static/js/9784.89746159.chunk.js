"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[9784],{59784:(e,l,t)=>{t.d(l,{A:()=>_});var r=t(65043),a=t(74117),i=t(85290),s=t(75958),o=t(33556),n=t(41290),d=t(92382),c=(t(4430),t(69078),t(12209)),u=t(73216),m=t(42145),v=t(97178),p=t(88250),g=t(79456),x=t(63516),b=t(64526),h=t(24108),f=t(10959),y=t(8848),w=t(75214),j=t(62245),C=t(34764),N=t(70579);const _=e=>{var l,t,_,S,A,$,k,F,I,E,B;let{slider:O}=e;const{t:R}=(0,a.Bd)(),T=(0,u.Zp)(),D=(0,g.wA)(),P=new URLSearchParams(location.search).get("category_uuid"),{data:M,refetch:J,loading:z}=(0,p.I)(h.v7,{variables:{courseData:{limit:8,page:1,sortField:"createdAt",sortOrder:"descend",search:"",category_id:"",course_type:null}}}),{data:G}=(0,p.I)(v.fk,{variables:{limit:10,page:1,sortField:"name",sortOrder:"",search:""}}),[U,q]=(0,r.useState)({limit:8,page:1,sortField:"createdAt",sortOrder:"descend",search:"",course_type:null,category_id:P||""}),[L,Z]=(0,r.useState)([]),[V,W]=(0,r.useState)(!1),[H,Y]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(!1),[X,ee]=(0,r.useState)([]),{userProfileData:le}=(0,g.d4)((e=>e.userProfile)),te=null!==(l=null===le||void 0===le||null===(t=le.getProfile)||void 0===t||null===(_=t.data)||void 0===_?void 0:_.user_type)&&void 0!==l?l:"",re=null===le||void 0===le||null===(S=le.getProfile)||void 0===S||null===(A=S.data)||void 0===A?void 0:A.is_course_creator,ae=(0,x.Wx)({initialValues:{selectedCategory:"",title:"",course_type:""},onSubmit:()=>{}});(0,r.useEffect)((()=>{var e,l,t;const r=[];null===G||void 0===G||null===(e=G.getActiveCategories)||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.categories)||void 0===t||t.map((e=>{r.push({name:null===e||void 0===e?void 0:e.name,key:null===e||void 0===e?void 0:e.uuid})})),Z(r)}),[G]),(0,r.useEffect)((()=>{var e,l,t;const r=[];null===M||void 0===M||null===(e=M.getCourses)||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.courses)||void 0===t||t.map((e=>{r.push(e)})),H?(ee([...X,...r]),Y(null!==H&&void 0!==H?H:!H)):ee(r)}),[M]);const ie=(0,r.useCallback)((()=>{var e,l,t,r,a;Y(!1),q({...U,page:1,category_id:null!==ae&&void 0!==ae&&null!==(e=ae.values)&&void 0!==e&&e.selectedCategory?null===ae||void 0===ae||null===(l=ae.values)||void 0===l?void 0:l.selectedCategory:"",course_type:""===(null===ae||void 0===ae||null===(t=ae.values)||void 0===t?void 0:t.course_type)?null:+(null===ae||void 0===ae||null===(r=ae.values)||void 0===r?void 0:r.course_type),search:null===ae||void 0===ae||null===(a=ae.values)||void 0===a?void 0:a.title})}),[U,ae]),se=e=>{T("/".concat(m.bw.app,"/").concat(m.bw.tfsCoursesTemplates,"/").concat(m.bw.courseDetails,"/?uuid=").concat(e))};(0,r.useEffect)((()=>{U&&(async()=>{Q(!0);try{await J({courseData:{...U}})}catch(a){var e,l,t,r;b.oR.error(null===a||void 0===a||null===(e=a.networkError)||void 0===e||null===(l=e.result)||void 0===l||null===(t=l.errors)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.message)}finally{Q(!1),Y(null!==H&&void 0!==H?H:!H)}})()}),[U]);const oe=(0,r.useCallback)((()=>{D((0,w.Dt)()),T("/".concat(m.bw.app,"/").concat(m.bw.educationAndEngagement))}),[]),ne=(0,r.useCallback)((()=>{T("/".concat(m.bw.app,"/").concat(m.bw.allCourses))}),[]),de=(0,r.useCallback)((()=>{null===ae||void 0===ae||ae.resetForm(),q({...U,page:1,search:"",course_type:null,category_id:""})}),[U]),ce=e=>{var l,t,r,a,i;return[null===m.ve||void 0===m.ve?void 0:m.ve.SUPER_ADMIN,null===m.ve||void 0===m.ve?void 0:m.ve.SUBSCRIBER_ADMIN].includes(+(null===e||void 0===e||null===(l=e.created_by)||void 0===l?void 0:l.user_type))||(null===le||void 0===le||null===(t=le.getProfile)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.is_course_admin)||(null===le||void 0===le||null===(a=le.getProfile)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.is_course_creator)};return(0,N.jsxs)(N.Fragment,{children:[!O&&(0,N.jsx)(c.A,{headerActionConst:()=>[null===m.ve||void 0===m.ve?void 0:m.ve.SUPER_ADMIN,null===m.ve||void 0===m.ve?void 0:m.ve.SUBSCRIBER_ADMIN].includes(te)||re?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(n.A,{className:" ".concat(V?"btn-primary":"btn-secondary"," btn-normal md:w-[50px]"),label:"",onClick:()=>W(!V),title:"Filter",children:(0,N.jsx)(o.dJ,{})}),(0,N.jsx)(n.A,{label:"+ Create Course",className:"btn-primary  btn-normal md:w-[150px] whitespace-nowrap",onClick:()=>oe(),title:"Create Course"})]}):(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(n.A,{className:" ".concat(V?"btn-primary":"btn-secondary"," btn-normal md:w-[50px]"),label:"",onClick:()=>W(!V),title:"Filter",children:(0,N.jsx)(o.dJ,{})})})}),(0,N.jsx)("div",{className:"mb-7",children:(0,N.jsxs)("div",{className:"p-5 border border-solid border-border-primary rounded-xl",children:[(0,N.jsxs)("div",{className:"flex flex-wrap justify-between gap-3 mb-5 md:gap-5",children:[(0,N.jsx)("h6",{children:R("All Courses")}),O&&(0,N.jsx)(n.A,{className:"btn btn-normal bg-primary text-white text-xs w-full sm:w-[80px] h-[36px] whitespace-nowrap",type:"button",label:R("View All"),onClick:()=>ne(),title:"".concat(R("View All"))})]}),!O&&(0,N.jsx)(N.Fragment,{children:z||K&&!H?(0,N.jsx)(f.A,{}):(0,N.jsxs)(N.Fragment,{children:[V&&(0,N.jsxs)("div",{className:"flex justify-start flex-wrap 2xl:flex-nowrap p-5 mb-5 border border-border-primary rounded-xl bg-light-blue gap-1 md:gap-2 2xl:gap-[18px] xl:gap-y-2 xl:gap-3 lg:gap-0.5 lg:gap-x-2.5 items-end",children:[(0,N.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,N.jsx)(C.A,{value:ae.values.title,placeholder:"Search",type:"text",id:"title",name:"title",onChange:ae.handleChange})}),(0,N.jsx)(y.A,{placeholder:"Course Type",className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",label:"",name:"course_type",onChange:ae.handleChange,value:ae.values.course_type,options:te===(null===m.ve||void 0===m.ve?void 0:m.ve.SUPER_ADMIN)?m.mS:m.oD,id:"courseType"}),(0,N.jsx)(y.A,{placeholder:"Category",className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",label:"",name:"selectedCategory",onChange:ae.handleChange,value:ae.values.selectedCategory,options:L,id:"selectedCategory"}),(0,N.jsx)(n.A,{className:"btn-primary btn-normal w-full md:min-w-[160px] md:w-auto mt-2 lg:mt-0",label:R("Search"),type:"button",onClick:()=>ie(),title:"".concat(R("Search"))}),(0,N.jsx)(n.A,{className:"btn-secondary btn-normal w-full md:min-w-[160px] md:w-auto mt-2 lg:mt-0",label:R("Reset"),type:"button",onClick:()=>de(),title:"".concat(R("Reset"))})]}),(0,N.jsx)("div",{className:"flex flex-wrap items-start justify-center gap-5 mb-7 sm:justify-start",children:(null===M||void 0===M||null===($=M.getCourses)||void 0===$||null===(k=$.data)||void 0===k?void 0:k.count)>0?(0,N.jsx)(N.Fragment,{children:null===X||void 0===X?void 0:X.map((e=>{var l,t;return(0,N.jsxs)("div",{className:"2xl:w-[calc(25%-15px)] text-left xl:w-[calc(33.3%-15px)] lg:w-[calc(50%-15px)] w-full border-border-primary h-full rounded-t-xl",children:[(0,N.jsx)("picture",{className:"w-full block relative border-b border-solid border-border-primary",children:(0,N.jsx)("img",{src:null!==e&&void 0!==e&&e.course_image&&""!==(null===e||void 0===e?void 0:e.course_image)?"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(e.course_image):i,alt:"Course Image",title:"Course Image",className:"object-cover w-full h-full rounded-t-xl"})}),(0,N.jsx)("div",{className:"flex flex-col w-full p-5 border-b border-solid border-x border-border-primary rounded-b-xl min-h-340px",children:(0,N.jsxs)("div",{className:"".concat(te!==m.ve.SUBSCRIBER_EMPLOYEE?"cursor-pointer":"pointer-events-auto"," flex flex-col flex-1"),onClick:()=>se(e.uuid),children:[(0,N.jsxs)("div",{className:"flex-wrap flex items-center justify-between mb-2.5 gap-2",children:[(0,N.jsx)("div",{children:(null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.name)&&(0,N.jsx)("span",{className:"h-9 flex items-center justify-center bg-p-list-box-btn font-bold text-white md:mb-0 px-4 rounded-xl min-w-[100px] text-sm mr-4",children:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.name})}),ce(e)&&(0,N.jsxs)("div",{className:"relative group",children:[(0,N.jsx)(o.mo,{className:"text-base md:text-lg cursor-pointer fill-primary"}),(0,N.jsx)("p",{className:"absolute whitespace-nowrap left-auto shadow-infos p-1.5 md:p-2.5 bg-white border border-border-primary rounded-xl md:right-0 xd:left-1 -top-[68px] md:-top-14 hidden group-hover:inline-block z-10",children:null!==e&&void 0!==e&&e.is_editable?"Editable Course":"Non-Editable Course"})]})]}),(0,N.jsx)("h4",{className:"text-base hover:text-primary mb-2.5 truncate",children:null===e||void 0===e?void 0:e.title}),(0,N.jsx)("p",{className:"leading-6 mb-3 md:mb-5 w-full text-ellipsis line-clamp-4 break-words",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.description}}),(0,N.jsxs)("div",{className:"flex justify-between items-center gap-2 mt-auto flex-wrap",children:[(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsx)("picture",{className:"flex items-center justify-center w-[40px] h-[40px]  rounded-full overflow-hidden border border-solid border-border-primary",children:(0,N.jsx)("img",{src:null!==e&&void 0!==e&&e.instructor_profile&&""!==(null===e||void 0===e?void 0:e.instructor_profile)?"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(null===e||void 0===e?void 0:e.instructor_profile):s,alt:"profile",title:"profile",width:40,height:40,className:"object-cover w-full h-full"})}),(0,N.jsx)("p",{className:"text-base text-ellipsis break-words font-semibold ",children:null===e||void 0===e?void 0:e.instructor_name})]}),(0,N.jsx)("div",{className:"time max-xmd:my-2.5",children:(0,N.jsxs)("span",{className:"flex text-xs",children:[(0,N.jsx)("span",{className:"mr-1 text-base",children:(0,N.jsx)(o.zD,{className:"fill-secondary"})}),(0,N.jsx)("span",{children:"".concat((0,m.bZ)(null===e||void 0===e?void 0:e.estimate_time).hours," h ").concat((0,m.bZ)(null===e||void 0===e?void 0:e.estimate_time).minutes," m")})]})})]})]})})]},null===e||void 0===e?void 0:e.uuid)}))}):(0,N.jsx)("div",{children:"No Records Found!!!"})})]})}),!O&&(0,N.jsx)("div",{className:"flex items-center justify-center",children:(0,N.jsx)(j.A,{className:"btn-secondary btn-normal w-full md:w-[120px]",label:R(K&&H?"Loading...!":"Load More"),onClick:()=>(()=>{var e;Y(!0),q({...U,page:U.page+1,category_id:null===ae||void 0===ae||null===(e=ae.values)||void 0===e?void 0:e.selectedCategory})})(),disabled:z||K||(null===M||void 0===M||null===(F=M.getCourses)||void 0===F||null===(I=F.data)||void 0===I?void 0:I.count)===X.length,title:"".concat(R("Load More"))})}),O&&(0,N.jsx)(d.A,{dots:!1,infinite:!1,arrows:!0,speed:500,slidesToShow:4,slidesToScroll:1,initialSlide:0,responsive:[{breakpoint:1400,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0}},{breakpoint:1199,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:991,settings:{slidesToShow:1,slidesToScroll:1}}],children:(null===M||void 0===M||null===(E=M.getCourses)||void 0===E||null===(B=E.data)||void 0===B?void 0:B.count)>0&&(null===X||void 0===X?void 0:X.map((e=>{var l,t;return(0,N.jsx)("div",{className:"px-2.5 cursor-pointer",onClick:()=>se(null===e||void 0===e?void 0:e.uuid),children:(0,N.jsxs)("div",{className:"h-full border-border-primary rounded-t-xl",children:[(0,N.jsx)("picture",{className:"w-full block relative border-b border-solid border-border-primary",children:(0,N.jsx)("img",{src:null!==e&&void 0!==e&&e.course_image&&""!==(null===e||void 0===e?void 0:e.course_image)?"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(e.course_image):i,alt:"logo",title:"logo",className:"object-cover w-full h-full rounded-t-xl"})}),(0,N.jsx)("div",{className:"w-full p-5 border-b border-solid border-x border-border-primary rounded-b-xl min-h-340px flex flex-col",children:(0,N.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,N.jsxs)("div",{className:"flex flex-wrap items-center justify-between mb-2.5 gap-2",children:[(0,N.jsx)("div",{children:(null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.name)&&(0,N.jsx)("span",{className:"h-9 flex items-center justify-center bg-p-list-box-btn font-bold text-white md:mb-0 px-4 rounded-xl min-w-[100px] text-sm mr-4",children:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.name})}),ce(e)&&(0,N.jsxs)("div",{className:"relative group",children:[(0,N.jsx)(o.mo,{className:"text-base md:text-lg cursor-pointer fill-primary"}),(0,N.jsx)("p",{className:"absolute whitespace-nowrap left-auto shadow-infos p-1.5 md:p-2.5 bg-white border border-border-primary rounded-xl md:right-0 xd:left-1 -top-[68px] md:-top-14 hidden group-hover:inline-block z-10",children:null!==e&&void 0!==e&&e.is_editable?"Editable Course":"Non-Editable Course"})]})]}),(0,N.jsx)("h4",{className:"text-base hover:text-primary mb-2.5 truncate",children:null===e||void 0===e?void 0:e.title}),(0,N.jsx)("p",{className:"leading-6 mb-3 md:mb-5 w-full text-ellipsis line-clamp-3 break-words",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.description}}),(0,N.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-auto justify-between",children:[(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsx)("picture",{className:"w-[40px] h-[40px] flex items-center rounded-full overflow-hidden border border-solid border-border-primary justify-center",children:(0,N.jsx)("img",{src:null!==e&&void 0!==e&&e.instructor_profile&&""!==(null===e||void 0===e?void 0:e.instructor_profile)?"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(null===e||void 0===e?void 0:e.instructor_profile):s,alt:"profile",title:"profile",width:40,height:40,className:"object-cover w-full h-full"})}),(0,N.jsx)("p",{className:"break-words font-semibold text-base text-ellipsis",children:null===e||void 0===e?void 0:e.instructor_name})]}),(0,N.jsx)("div",{className:"time max-xmd:my-2.5",children:(0,N.jsxs)("span",{className:"flex text-xs",children:[(0,N.jsx)("span",{className:"mr-1 text-base",children:(0,N.jsx)(o.zD,{className:"fill-secondary"})}),(0,N.jsx)("span",{children:"".concat((0,m.bZ)(null===e||void 0===e?void 0:e.estimate_time).hours," h ").concat((0,m.bZ)(null===e||void 0===e?void 0:e.estimate_time).minutes," m")})]})})]})]})})]})},null===e||void 0===e?void 0:e.uuid)})))})]})})]})}},62245:(e,l,t)=>{t.d(l,{A:()=>s});var r=t(65043),a=t(70579);const i=e=>{let{label:l,onClick:t,type:i="button",primary:s,secondary:o,warning:n,className:d,children:c,disabled:u=!1,title:m}=e;const v=r.useMemo((()=>s?"bg-primary":o?"bg-secondary":n?"bg-warning":"bg-default"),[]);return(0,a.jsxs)("button",{className:"btn ".concat(v," ").concat(d," "),type:i,title:m,onClick:t,disabled:u,children:[c,l]})},s=r.memo(i)},97178:(e,l,t)=>{t.d(l,{Go:()=>m,OU:()=>p,fk:()=>v,gT:()=>g});var r,a,i,s,o,n,d,c=t(57528),u=t(70459);(0,u.J1)(r||(r=(0,c.A)(["\n  query GetSubCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n    getSubCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n      data {\n        subCategories {\n          uuid\n          name\n          image_url\n          description\n          status\n          category {\n            uuid\n            name\n            description\n            image_url\n            status\n          }\n        }\n        count\n      }\n    }\n  }\n  "])));const m=(0,u.J1)(a||(a=(0,c.A)(["\n    query GetCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n      getCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n        data {\n          categories {\n            description\n            image_url\n            name\n            uuid\n            status\n          }\n          count\n        }\n        message\n      }\n    }\n  "]))),v=(0,u.J1)(i||(i=(0,c.A)(["\n  query GetActiveCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n    getActiveCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n      data {\n        categories {\n          description\n          image_url\n          name\n          uuid\n          status\n        }\n        count\n      }\n      message\n    }\n  }\n"]))),p=(0,u.J1)(s||(s=(0,c.A)(["\n  query GetCategoriesAndCourseCountWithPagination($limit: Float!, $page: Float!, $search: String!) {\n    getCategoriesAndCourseCountWithPagination(limit: $limit, page: $page, search: $search) {\n      message\n      data {\n        count\n        categories {\n          uuid\n          status\n          name\n          description\n          image_url\n          course_count\n        }\n      }\n    }\n  }\n"]))),g=((0,u.J1)(o||(o=(0,c.A)(["\n  query GetSubCategoryById($getSubCategoryByIdId: String!) {\n    getSubCategoryById(id: $getSubCategoryByIdId) {\n      data {\n        uuid\n        name\n        image_url\n        description\n        status\n        category {\n          name\n          uuid\n          image_url\n          status\n        }\n      }\n      message\n    }\n  }\n"]))),(0,u.J1)(n||(n=(0,c.A)(["\n  query GetCategoryById($categoryId: String!) {\n    getCategoryById(categoryId: $categoryId) {\n      data {\n        uuid\n        name\n        image_url\n        description\n        status\n      }\n      message\n    }\n  }\n"]))));(0,u.J1)(d||(d=(0,c.A)(["\nquery GetActiveSubCategoriesByCategoryId($categoryId: String!) {\n  getActiveSubCategoriesByCategoryId(category_id: $categoryId) {\n    data {\n      uuid\n      name\n      image_url\n      description\n      status\n    }\n    message\n  }\n}\n"])))}}]);
//# sourceMappingURL=9784.89746159.chunk.js.map