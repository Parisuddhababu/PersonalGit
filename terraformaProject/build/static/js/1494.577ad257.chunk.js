"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[1494,9230],{7648:(e,a,t)=>{t.d(a,{A:()=>u});var l=t(65043),n=t(74117),s=t(73216),r=t(35475),i=t(42145),o=t(79456),d=t(66925),c=t(70579);const m=()=>{var e,a,t;const{t:m}=(0,n.Bd)(),u=(0,s.zy)(),x=new URLSearchParams(u.search).get("uuid"),{id:h}=(0,s.g)(),{userProfileData:p}=(0,o.d4)((e=>e.userProfile)),g=null!==(e=null===p||void 0===p||null===(a=p.getProfile)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.user_type)&&void 0!==e?e:"",v=e=>{var a;let t="";if(null!==(a=e.split("/")[2])&&void 0!==a&&a.includes("-")){return e.split("/")[2].split("-").forEach((e=>{var a;return t=t+(null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+e.slice(1)+" ",t})),t}var l;return t=(null===(l=e.split("/")[2][0])||void 0===l?void 0:l.toUpperCase())+e.split("/")[2].slice(1),t},b=e=>{let a="";if(null!==e&&void 0!==e&&e.includes("-")){a=null===e||void 0===e?void 0:e.replace(/-|\s/g," ");const t=a.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e][0].toUpperCase()+t[e].substring(1);return a=t.join(" "),a}var t;return a=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" ",a},f=e=>{let a="";return null!==e&&void 0!==e&&e.includes("-")||(a=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" "),a;var t},j=u.pathname.split("/"),y=(0,l.useCallback)((()=>{if((null===j||void 0===j?void 0:j.length)>0){const e=null===j||void 0===j?void 0:j.length;if(e<4)return(0,c.jsx)("span",{className:"text-primary",children:j[2]&&"".concat(m(b(j[2])))});if(e<5)return""!==j[3]?j[3].length>32?(0,c.jsxs)(c.Fragment,{children:[f(j[3])&&(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(r.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:"".concat(m(v(u.pathname)))})}),f(j[3])&&(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),!f(j[3])&&(0,c.jsx)("span",{className:"text-primary",children:j[2]&&"".concat(m(b(j[2])))}),(0,c.jsx)("span",{className:"text-primary",children:j[3]&&"".concat(m(f(j[3])))})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(r.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:"".concat(m(v(u.pathname)))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:j[3]&&"".concat(m(b(j[3])))})]}):(0,c.jsx)("span",{className:"text-primary",children:j[2]&&"".concat(m(b(j[2])))});if(e<6)return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(r.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:"".concat(m(v(u.pathname)))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:j[3]&&"".concat(m(b(j[3])))})]});if(e<7){let e="";return x?e="?uuid=".concat(x):h&&(e="?uuid=".concat(h)),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(r.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:m(b(j[2]))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(r.k2,{to:"/".concat(i.bw.app,"/").concat(j[2],"/").concat(j[3],"/").concat((""!==x||""!==h)&&e),className:"text-light-grey hover:underline",children:m(b(j[3]))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:j[5]&&"".concat(m(b(j[4])))})]})}}}),[j]);return(0,c.jsx)("div",{className:"w-full",children:(0,c.jsxs)("p",{className:"max-xs:text-xs text-xs-14 max-md:truncate",children:[(0,c.jsxs)("span",{children:[(0,c.jsx)(r.k2,{to:(0,d.Go)(g,i.ve.SUPER_ADMIN,"/".concat(i.bw.app,"/").concat(i.bw.dashboard),"/".concat(i.bw.app,"/").concat(i.bw.subscriber)),className:"cursor-pointer text-light-grey hover:underline",children:m("Home")}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"})]}),y()]})})},u=l.memo(m)},38133:(e,a,t)=>{t.d(a,{A:()=>r});t(65043);var l=t(41290),n=t(33556),s=t(70579);const r=e=>{let{data:a,onClick:t,className:r,setData:i}=e;return(0,s.jsx)(l.A,{className:"bg-transparent btn-default ".concat(r),onClick:()=>{t(null===a||void 0===a?void 0:a.uuid),i&&i(a)},label:"",title:"Edit",children:(0,s.jsx)(n.ff,{})})}},75289:(e,a,t)=>{t.d(a,{A:()=>o});var l=t(65043),n=t(74117),s=t(41290),r=t(33556),i=t(70579);const o=e=>{let{onClose:a,action:t,show:o,warningText:d,disabled:c,isLoading:m}=e;const{t:u}=(0,n.Bd)(),[x,h]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{o&&setTimeout((()=>{h(!0)}),100)}),[o]),(0,i.jsxs)(i.Fragment,{children:[m&&(0,i.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%]"}),(0,i.jsxs)("div",{className:"".concat(o?"":"hidden"," absolute top-0 left-0 right-0 z-[1000] h-full bg-modal"),children:["Are you sure want to delete this record ?"!==d&&"Are you sure want to change status ?"!==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,i.jsxs)("div",{className:"relative bg-white shadow rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-5 py-6 border-b bg-accents-2 rounded-t-xl",children:[(0,i.jsxs)("div",{className:"flex items-center ",children:[(0,i.jsx)(r.io,{className:"inline-block mr-3 fill-baseColor",fontSize:"20"}),(0,i.jsx)("span",{className:"text-xl font-bold text-baseColor",children:u("Confirmation")})]}),(0,i.jsx)(s.A,{onClick:a,label:"",children:(0,i.jsx)(r.YY,{className:"text-error",fontSize:"14"})})]}),(0,i.jsx)("div",{className:"p-5 space-y-6 font-normal text-center border-b border-solid border-border-primary",children:(0,i.jsx)("p",{children:u(d)})}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 md:space-x-3 md:flex-row",children:[(0,i.jsx)(s.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[160px]",onClick:t,label:u("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(s.A,{className:"btn-secondary btn-normal w-full md:w-auto min-w-[160px]",onClick:a,label:u("No"),title:"No"})]})]})})}),"Are you sure want to change status ?"==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[(0,i.jsx)("span",{className:"p-[10px] bg-primary min-w-min rounded-full mb-3 overflow-hidden text-xl-44 md:text-6xl",children:(0,i.jsx)(r.ZI,{className:"fill-white bg-primary"})}),(0,i.jsx)("h4",{children:u("Confirmation")})]}),(0,i.jsx)("h6",{className:"font-semibold text-center mb-7 md:mb-10",children:u(d)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(s.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:t,label:u("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(s.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:a,label:u("No"),title:"No"})]})]})})}),"Are you sure want to delete this record ?"==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsx)("div",{className:"flex justify-center mb-5",children:(0,i.jsx)("span",{className:"p-[22px] md:p-[26px] rounded-full bg-error text-xl-35 md:text-5xl",children:(0,i.jsx)(r.Vl,{className:"stroke-2 fill-white"})})}),(0,i.jsx)("h6",{className:"font-bold text-center mb-7 md:mb-10",children:u(d)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(s.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:t,label:u("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(s.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:a,label:u("No"),title:"No"})]})]})})})]})]})}},62500:(e,a,t)=>{t.d(a,{A:()=>i});var l=t(65043),n=t(41290),s=t(33556),r=t(70579);const i=e=>{let{data:a,setObj:t,setIsDelete:i,className:o,customClick:d}=e;const c=(0,l.useCallback)((()=>{t(a),!d&&i(!0),d&&d(a)}),[]);return(0,r.jsx)(n.A,{className:"bg-transparent cursor-pointer btn-default btn-icon ".concat(o),onClick:c,label:"",title:"Delete",children:(0,r.jsx)(s.lM,{className:"fill-error"})})}},12209:(e,a,t)=>{t.d(a,{A:()=>m});var l=t(65043),n=t(74117),s=t(73216),r=t(7648),i=t(33556),o=t(79456),d=t(75214),c=t(70579);const m=e=>{let{headerActionConst:a,headerTitle:t}=e;const{t:m}=(0,n.Bd)(),u=(0,o.wA)(),{show:x}=(0,o.d4)((e=>e.coursesManagement)),h=(0,s.zy)(),p=(0,l.useCallback)((()=>{u((0,d.oM)(!x))}),[x]);return(0,c.jsxs)("header",{className:"sticky top-0 z-20 flex bg-white border-b shadow-header xl:shadow-none xl:h-auto xl:block border-border-primary xl:px-2 xl:pt-0",children:[(0,c.jsx)("div",{onClick:p,className:"pt-5 cursor-pointer text-xl-22 xl:hidden",children:(0,c.jsx)(i.Rt,{className:"ml-4"})}),(0,c.jsx)("div",{className:"p-2.5 xl:p-[18px] xl:shadow-header max-xl:w-[calc(100%-47px)]",children:(0,c.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:[(0,c.jsxs)("div",{className:"w-full xl:w-auto",children:[(0,c.jsx)("h1",{className:"mb-1 text-2xl max-xl:truncate xl:text-3xl",children:m(null!==t&&void 0!==t?t:(e=>{let a="";if(e.split("/")[2].includes("-")){return e.split("/")[2].split("-").forEach((e=>(a=a+e[0].toUpperCase()+e.slice(1)+" ",a))),a}return a=e.split("/")[2][0].toUpperCase()+e.split("/")[2].slice(1),a})(h.pathname))}),(0,c.jsx)(r.A,{})]}),a&&(0,c.jsx)("div",{className:"flex gap-2.5 max-xl:w-[calc(100%+40px)] lg:gap-5",children:(()=>{if(a)return a()})()})]})})]})}},90053:(e,a,t)=>{t.d(a,{CA:()=>d,E8:()=>c,Tr:()=>o});var l,n,s,r=t(57528),i=t(70459);const o=(0,i.J1)(l||(l=(0,r.A)(["\nmutation CreateManualCategory($manualCategoryData: CreateManualCategoryDto!) {\n    createManualCategory(manualCategoryData: $manualCategoryData) {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n        parent {\n          uuid\n          name\n          description\n          image_url\n        }\n      }\n    }\n  }\n"]))),d=(0,i.J1)(n||(n=(0,r.A)(["\nmutation UpdateManualCategory($categoryId: String!, $manualCategoryData: UpdateManualCategoryDto!) {\n    updateManualCategory(categoryId: $categoryId, manualCategoryData: $manualCategoryData) {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n      }\n    }\n  }\n"]))),c=(0,i.J1)(s||(s=(0,r.A)(["\nmutation DeleteManualCategory($manualCategoryId: String!) {\n  deleteManualCategory(manualCategoryId: $manualCategoryId) {\n    message\n    data {\n      uuid\n      name\n      description\n      image_url\n      parent {\n        uuid\n        name\n        description\n        image_url\n      }\n    }\n  }\n}"])))},57981:(e,a,t)=>{t.d(a,{AH:()=>d,jP:()=>m,sv:()=>u,xq:()=>c});var l,n,s,r,i=t(57528),o=t(70459);const d=(0,o.J1)(l||(l=(0,i.A)(["\nquery GetManualCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n  getManualCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n    message\n    data {\n      manualCategories {\n        uuid\n        name\n        description\n        image_url\n      \n      }\n      count\n    }\n  }\n}\n  "]))),c=(0,o.J1)(n||(n=(0,i.A)(["\n  query GetAllParentCategory {\n    getAllParentCategory {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n      }\n    }\n  }"]))),m=(0,o.J1)(s||(s=(0,i.A)(["\n  query GetManualCategoryById($manualCategoryId: String!) {\n    getManualCategoryById(manualCategoryId: $manualCategoryId) {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n        parent {\n          uuid\n          name\n          description\n          image_url\n        }\n      }\n    }\n  }"]))),u=(0,o.J1)(r||(r=(0,i.A)(["\n  query GetManualParentCategoryById($manualCategoryId: String!) {\n    getManualParentCategoryById(manualCategoryId: $manualCategoryId) {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n        children {\n          uuid\n          name\n          description\n          image_url\n        }\n      }\n    }\n  }"])))},8452:(e,a,t)=>{t.r(a),t.d(a,{default:()=>F});var l,n,s,r=t(65043),i=t(74117),o=t(64526),d=t(73216),c=t(79456),m=t(42145),u=t(41290),x=t(75289),h=t(33556),p=t(34764),g=t(32254),v=t(77654),b=t(62500),f=t(31881),j=t(88250),y=t(93852),C=t(90053),N=t(57528),w=t(70459);const A=(0,w.J1)(l||(l=(0,N.A)(["\nquery GetAllChildCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n  getAllChildCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n    message\n    data {\n      childCategories {\n        uuid\n        name\n        description\n        image_url\n        parent {\n          uuid\n          name\n          description\n          image_url\n        }\n      }\n      count\n    }\n  }\n}\n  "])));(0,w.J1)(n||(n=(0,N.A)(["\n  query GetAllParentCategory {\n    getAllParentCategory {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n      }\n    }\n  }"]))),(0,w.J1)(s||(s=(0,N.A)(["\n  query GetManualCategoryById($manualCategoryId: String!) {\n    getManualCategoryById(manualCategoryId: $manualCategoryId) {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n        parent {\n          uuid\n          name\n          description\n          image_url\n        }\n      }\n    }\n  }"])));var k=t(38133),S=t(12209),_=t(70579);const F=()=>{var e,a,t,l,n,s,N,w,F;const[I,M]=(0,r.useState)({}),[D,$]=(0,r.useState)(!1),[P,R]=(0,r.useState)({}),[E,O]=(0,f.n)(C.E8),{t:U}=(0,i.Bd)(),B=(0,d.Zp)(),[z,q]=(0,r.useState)(!1),[J,T]=(0,r.useState)(!1),[Y,G]=(0,r.useState)(""),{technicalManualsGuides:V}=(0,c.d4)((e=>e.rolesManagement)),[L,W]=(0,r.useState)({limit:m.Wt,page:m.k2,sortField:"createdAt",sortOrder:"descend",search:"",index:0}),{data:H,refetch:Z}=(0,j.I)(A,{variables:{sortOrder:L.sortOrder,limit:L.limit,page:L.page,search:L.search,sortField:L.sortField}}),[X,K]=(0,r.useState)(L.limit),Q=[{name:U("Sr.No"),sortable:!1},{name:U("Image"),sortable:!1,fieldName:"image_url"},{name:U("Name"),sortable:!0,fieldName:"name"},{name:U("Parent Categories Name"),sortable:!0,fieldName:"parent.name"},{name:U("Description"),sortable:!0,fieldName:"description"}];(0,r.useEffect)((()=>{var e;null!==H&&void 0!==H&&H.getAllChildCategories&&M(null===H||void 0===H||null===(e=H.getAllChildCategories)||void 0===e?void 0:e.data)}),[null===H||void 0===H?void 0:H.getAllChildCategories]);const ee=(0,r.useCallback)((()=>{$(!1)}),[]),ae=(0,r.useCallback)((e=>{W({...L,search:e.target.value})}),[]),te=(0,r.useCallback)((()=>{E({variables:{manualCategoryId:P.uuid}}).then((e=>{const a=e.data;o.oR.success(a.deleteManualCategory.message),Z(L).catch((e=>o.oR.error(e))),$(!1)})).catch((e=>{400===e.networkError.statusCode?(o.oR.error(e.networkError.result.errors[0].message),$(!1)):o.oR.error(e.networkError.result.errors[0].message)}))}),[D]);(0,r.useEffect)((()=>{Z(L).catch((e=>o.oR.error(e)))}),[L]);const le=(null===H||void 0===H||null===(e=H.getAllChildCategories)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.count)||0,ne=Math.ceil(le/X),se=(0,r.useCallback)((e=>{const a={...L,page:e,index:(e-1)*L.limit};W(a),g.A.saveState("filterCategoryManagementList",JSON.stringify(a))}),[L.limit]);function re(){B("/".concat(m.bw.app,"/").concat(m.bw.subTechnicalManualsGuides,"/").concat(m.bw.userManual))}(0,r.useEffect)((()=>{K(L.limit)}),[L.limit]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(S.A,{headerActionConst:()=>(0,_.jsxs)(_.Fragment,{children:[(null===V||void 0===V?void 0:V.write)&&(0,_.jsx)(u.A,{className:"btn-normal btn btn-secondary ",onClick:()=>q(!0),type:"button",label:U("Create Technical Manuals")}),(null===V||void 0===V?void 0:V.write)&&(0,_.jsx)(u.A,{className:"btn-normal btn btn-secondary ",onClick:re,type:"button",label:U("Add Manuals")})]})}),(0,_.jsxs)("div",{className:"p-3 mb-3 overflow-auto bg-white border rounded-xl border-border-primary mx-7 md:p-5",children:[(0,_.jsxs)("div",{className:"flex flex-col justify-between gap-3 mb-3 md:items-center md:gap-5 md:mb-5 btn-group md:flex-row",children:[(0,_.jsx)("h6",{children:U("Sub-Categories")}),(0,_.jsxs)("div",{className:"flex flex-wrap w-full md:w-auto ",children:[(0,_.jsx)("div",{className:"flex flex-col justify-start text-slate-700 w-full md:w-auto md:max-w-[487px]",children:(0,_.jsx)(p.A,{placeholder:U("Search"),name:"search",type:"text",onChange:ae,inputIcon:(0,_.jsx)(h.vj,{fontSize:"18",className:"font-normal"})})}),(0,_.jsx)("div",{className:"flex flex-col w-full gap-3 xl:gap-5 md:w-auto md:flex-row",children:z&&(0,_.jsx)(y.default,{onCloseAddForm:()=>q(!1),onData:Z})})]})]}),(0,_.jsxs)("div",{className:"w-full mb-3 overflow-auto bg-white border sm:w-auto rounded-t-xl custom-dataTable border-border-primary",children:[(0,_.jsxs)("table",{children:[(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{children:[null===Q||void 0===Q?void 0:Q.map(((e,a)=>(0,_.jsx)("th",{scope:"col",className:"items-center",children:(0,_.jsxs)("div",{className:"flex items-center ".concat(e.name==U("Status")||e.name==U("Sr.No")?"justify-center":""),children:[e.name,e.sortable&&(0,_.jsxs)("button",{onClick:()=>{return a=e.fieldName,void W({...L,sortField:a,sortOrder:"ascend"===L.sortOrder?"descend":"ascend"});var a},children:[(""===L.sortOrder||L.sortField!==e.fieldName)&&(0,_.jsx)(h.xs,{className:"fill-white"}),"ascend"===L.sortOrder&&L.sortField===e.fieldName&&(0,_.jsx)(h.xD,{className:"ml-1 fill-white"}),"descend"===L.sortOrder&&L.sortField===e.fieldName&&(0,_.jsx)(h.xR,{className:"ml-1 fill-white"})]})]})},"".concat(a+1)))),(0,_.jsx)("th",{className:"items-center",scope:"col",children:(0,_.jsx)("div",{className:"flex items-center justify-center",children:"Action"})})]})}),(0,_.jsx)("tbody",{children:null===H||void 0===H||null===(t=H.getAllChildCategories)||void 0===t||null===(l=t.data)||void 0===l||null===(n=l.childCategories)||void 0===n?void 0:n.map(((e,a)=>{var t,l,n;const s=null!==e&&void 0!==e&&null!==(t=e.image_url)&&void 0!==t&&t.startsWith(m.ZX)?null===e||void 0===e?void 0:e.image_url:"".concat(m.ZX,"/").concat(null===e||void 0===e?void 0:e.image_url),r=(null===L||void 0===L?void 0:L.index)+a+1;return(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{className:"text-center",scope:"row",children:r}),(0,_.jsx)("td",{className:"text-left border-none",children:(0,_.jsx)("div",{className:"w-[60px] h-[60px] rounded-md overflow-hidden",children:(0,_.jsx)("img",{src:s,alt:e.name,className:"object-cover"})})}),(0,_.jsx)("td",{className:"text-left",children:e.name}),(0,_.jsx)("td",{className:"text-left",children:null!==(l=null===(n=e.parent)||void 0===n?void 0:n.name)&&void 0!==l?l:"No Parent Category"}),(0,_.jsx)("td",{className:"text-left",children:e.description}),(0,_.jsx)("td",{children:(0,_.jsxs)("div",{className:"flex justify-center gap-2 btn-group",children:[(null===V||void 0===V?void 0:V.update)&&(0,_.jsx)(k.A,{data:e,onClick:()=>function(e){G(e),T(!0)}(e)}),(null===V||void 0===V?void 0:V.delete)&&(0,_.jsx)(b.A,{data:e,setObj:R,setIsDelete:$})]})})]},"".concat(e.uuid,"-child-").concat(a+1))}))})]}),(0===(null===H||void 0===H||null===(s=H.getAllChildCategories)||void 0===s||null===(N=s.data)||void 0===N?void 0:N.count)||null===(null===H||void 0===H||null===(w=H.getAllChildCategories)||void 0===w||null===(F=w.data)||void 0===F?void 0:F.childCategories))&&(0,_.jsx)("div",{className:"flex justify-center",children:(0,_.jsx)("div",{children:U("No Data")})})]}),(0,_.jsxs)("div",{className:"flex flex-wrap items-center gap-5 mt-2",children:[(0,_.jsx)("span",{className:"text-xs text-slate-400",children:"".concat(null===(null===I||void 0===I?void 0:I.count)||void 0===(null===I||void 0===I?void 0:I.count)?"0":null===I||void 0===I?void 0:I.count)+U(" Total Records")}),(0,_.jsxs)("div",{className:"flex items-center",children:[(0,_.jsx)("span",{className:"text-sm font-normal text-gray-700 ",children:U("Per Page")}),(0,_.jsx)("select",{className:"border border-border-primary rounded-xl ml-2 px-3 text-sm py-1.5 text-gray-500 w-[70px] h-[36px] appearance-none bg-white",onChange:e=>(e=>{K(Number(e));const a={...L,limit:parseInt(e),page:1,search:"",index:0};W(a),g.A.saveState("filterCategoryManagementList",JSON.stringify(a))})(e.target.value),value:L.limit,children:null===m.aj||void 0===m.aj?void 0:m.aj.map((e=>(0,_.jsx)("option",{children:e},e)))})]}),(0,_.jsx)(v.A,{currentPage:L.page,totalPages:ne,onPageChange:se,recordsPerPage:X})]})]}),D&&(0,_.jsx)(x.A,{warningText:m.jl,onClose:ee,action:te,show:D,disabled:null===O||void 0===O?void 0:O.loading}),J&&(0,_.jsx)(y.default,{onCloseAddForm:()=>T(!1),onData:Y,dataRefetch:()=>Z()})]})}},93852:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var l=t(65043),n=t(63516),s=t(72096),r=t(73216),i=t(64526),o=t(55797),d=(t(15675),t(59140),t(82485)),c=(t(9686),t(25263)),m=t(33556),u=t(8848),x=t(34764),h=t(41290),p=t(88250),g=t(31881),v=t(57981),b=t(90053),f=t(42145),j=t(12352),y=t(66925),C=t(70579);const N=e=>{var a;const[t,N]=(0,l.useState)([]),w=(0,r.g)(),{data:A,refetch:k}=(0,p.I)(v.xq),[S]=(0,g.n)(b.Tr),[_]=(0,g.n)(b.CA),{data:F,refetch:I}=(0,p.I)(v.jP,{variables:{subscribersId:w.id},skip:!w.id}),{addTechnicalManualChildValidationSchema:M}=(0,j.A)(),[D,$]=(0,l.useState)(!1),[P,R]=(0,l.useState)(!1),[E,O]=(0,l.useState)(""),U=(0,l.createRef)(),[B,z]=(0,l.useState)(!1),[q,J]=(0,l.useState)(!1),T=(0,l.useRef)(null),[Y,G]=(0,l.useState)(!1),V=(0,n.Wx)({initialValues:{name:"",description:"",image_url:"",parent_id:""},validationSchema:M,onSubmit:async a=>{if(e.onData.uuid){const t={name:a.name,description:a.description,parent_id:a.parent_id,image_url:a.image_url};_({variables:{manualCategoryData:t,categoryId:String(e.onData.uuid)}}).then((a=>{var t;const l=a.data;i.oR.success(null===l||void 0===l||null===(t=l.updateManualCategory)||void 0===t?void 0:t.message),V.resetForm(),e.dataRefetch(),X(),e.onCloseAddForm()})).catch((e=>{var a,t,l;i.oR.error(null===e||void 0===e||null===(a=e.networkError)||void 0===a||null===(t=a.result)||void 0===t||null===(l=t.errors[0])||void 0===l?void 0:l.message)}))}else S({variables:{manualCategoryData:{name:a.name,description:a.description,parent_id:a.parent_id,image_url:a.image_url}}}).then((a=>{var t;const l=a.data;i.oR.success(null===l||void 0===l||null===(t=l.createManualCategory)||void 0===t?void 0:t.message),V.resetForm(),e.onCloseAddForm(),e.onData(I)})).catch((e=>{var a,t,l;i.oR.error(null===e||void 0===e||null===(a=e.networkError)||void 0===a||null===(t=a.result)||void 0===t||null===(l=t.errors[0])||void 0===l?void 0:l.message)}))}});(0,l.useEffect)((()=>{var a;$(!0),R(!0),null!==e&&void 0!==e&&null!==(a=e.onData)&&void 0!==a&&a.uuid&&J(!0)}),[e]),(0,l.useEffect)((()=>{e.onData.uuid&&I({manualCategoryId:e.onData.uuid}).catch((e=>i.oR.error(e)))}),[e.onData.uuid]),(0,l.useEffect)((()=>{var e,a;k();const t=[];null===A||void 0===A||null===(e=A.getAllParentCategory)||void 0===e||null===(a=e.data)||void 0===a||a.map((e=>{t.push({name:null===e||void 0===e?void 0:e.name,key:null===e||void 0===e?void 0:e.uuid})})),N(t)}),[A]);const L=(0,l.useCallback)((e=>{V.handleChange(e)}),[]),W=(0,l.useCallback)((e=>{e.preventDefault();const a=e.target.files;if(a&&a.length>0){const e=a[0];if(e.type.startsWith("image/"))if(e.size>5242880)i.oR.error("Image size must be less than 5MB");else{const a=new FileReader;a.onload=()=>{O(a.result),z(!0)},a.readAsDataURL(e)}else i.oR.error("Please select a valid image file")}T.current&&(T.current.value="")}),[]),H=e=>V.errors[e]&&V.touched[e]?V.errors[e]:"",Z=(0,l.useCallback)((e=>{V.setFieldValue(e.target.name,(0,y.AW)(e))}),[]);(0,l.useEffect)((()=>{e.onData.uuid&&V.setValues({name:e.onData.name,description:e.onData.description,parent_id:e.onData.parent.uuid,image_url:e.onData.image_url})}),[F]);const X=(0,l.useCallback)((()=>{$(!1),e.onCloseAddForm()}),[]),K=()=>(0,C.jsxs)("div",{className:"flex justify-end gap-3 md:gap-5",children:[(0,C.jsx)(h.A,{className:"btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Cancel",onClick:()=>z(!1),title:"".concat((0,s.t)("Cancel"))}),(0,C.jsx)(h.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Save",disabled:Y,onClick:()=>(async()=>{var e;if("undefined"!==typeof(null===(e=U.current)||void 0===e?void 0:e.cropper)){var a;await G(!0);let e=null;const t=(0,f.Si)(null===(a=U.current)||void 0===a?void 0:a.cropper.getCroppedCanvas().toDataURL(),"image.png"),l=new FormData;l.append("image",t),e=await(0,f.V6)(l,""),e&&(V.setFieldValue("image_url",e),z(!1)),await G(!1)}})(),title:"".concat((0,s.t)("Save"))})]});return(0,C.jsxs)(C.Fragment,{children:[D&&(0,C.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(D?"":"hidden"),children:(0,C.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(P?"":"opacity-0 transform -translate-y-full scale-150 "," transition-all duration-300 "),children:(0,C.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,C.jsxs)("div",{className:"relative bg-white rounded-xl",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between p-5 border-b md:py-6 bg-accents-2 rounded-t-xl",children:[(0,C.jsx)("h6",{children:q?"Update Manual":"Add Manual"}),q?(0,C.jsxs)(C.Fragment,{children:["     ",(0,C.jsx)(h.A,{onClick:X,label:(0,s.t)(""),title:"".concat((0,s.t)("Close")),children:(0,C.jsx)("span",{className:"text-xl-22",children:(0,C.jsx)(m.YY,{className:"text-error"})})})]}):(0,C.jsxs)(C.Fragment,{children:["     ",(0,C.jsx)(h.A,{onClick:e.onCloseAddForm,label:(0,s.t)(""),title:"".concat((0,s.t)("Close")),children:(0,C.jsx)("span",{className:"text-xl-22",children:(0,C.jsx)(m.YY,{className:"text-error"})})})]})]}),(0,C.jsx)("div",{className:"w-full ",children:(0,C.jsxs)("form",{onSubmit:V.handleSubmit,children:[(0,C.jsxs)("div",{className:"p-5 bg-white max-h-[calc(100vh-260px)] overflow-auto",children:[(0,C.jsxs)("div",{className:"mb-2 text-right",children:[(0,s.t)("Fields marked with")," ",(0,C.jsx)("span",{className:"text-red-500",children:"*"})," ",(0,s.t)("are mandatory.")]}),(0,C.jsxs)("div",{className:"mb-3",children:[(0,C.jsxs)("div",{className:"box-border flex flex-col items-center justify-center p-5 mb-5 border border-solid border-border-primary rounded-xl",children:[(0,C.jsxs)("label",{htmlFor:"image_url",className:"relative flex flex-col items-center justify-center",children:[(0,C.jsx)("div",{className:"flex items-center justify-center w-32 h-32 overflow-hidden border border-gray-300 border-solid rounded-full cursor-pointer sm:w-44 sm:h-44",children:null!==V&&void 0!==V&&null!==(a=V.values)&&void 0!==a&&a.image_url?(0,C.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(V.values.image_url),alt:"image_url",className:"object-contain w-full h-full bg-black"}):(0,C.jsx)("img",{src:c,alt:"image_url",className:"object-contain w-full h-full bg-black"})}),(0,C.jsx)("input",{type:"file",id:"image_url",name:"image_url",accept:"image/*",onChange:W,ref:T,className:"hidden"}),(0,C.jsx)("div",{className:"absolute bottom-0 p-2 text-2xl font-bold text-white rounded-full right-1 sm:right-2 bg-primary",children:(0,C.jsx)(m.i7,{})})]}),V.errors.image_url&&V.touched.image_url?(0,C.jsx)("span",{className:"relative mt-2 md:text-xs-15 error",children:V.errors.image_url}):""]}),(0,C.jsx)("div",{className:"mb-4",children:(0,C.jsx)(u.A,{placeholder:(0,s.t)("Select Parent Category"),required:!0,name:"parent_id",onChange:L,value:V.values.parent_id,id:"parentCategory",label:(0,s.t)("Parent Category"),options:t,error:H("parent_id")})})]}),(0,C.jsx)("div",{className:"mb-3",children:(0,C.jsx)(x.A,{onBlur:Z,placeholder:(0,s.t)("Name"),required:!0,name:"name",onChange:V.handleChange,label:(0,s.t)("Name"),value:V.values.name,error:H("name")})}),(0,C.jsx)("div",{className:"mb-3",children:(0,C.jsx)(x.A,{onBlur:Z,placeholder:(0,s.t)("Description"),required:!0,name:"description",onChange:V.handleChange,label:(0,s.t)("Description"),value:V.values.description,error:H("description")})})]}),(0,C.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 border-t border-solid md:space-x-3 md:flex-row border-border-primary",children:[(0,C.jsx)(h.A,{className:"btn-primary btn-normal mb-3 md:mb-0 w-full md:w-[160px]",type:"submit",label:(0,s.t)("Save"),title:"".concat((0,s.t)("Save"))}),q?(0,C.jsx)(h.A,{className:"btn-secondary btn-normal w-full md:w-[160px]",label:(0,s.t)("Cancel"),onClick:X,title:"".concat((0,s.t)("Cancel"))}):(0,C.jsx)(h.A,{className:"btn-secondary btn-normal w-full md:w-[160px]",label:(0,s.t)("Cancel"),onClick:e.onCloseAddForm,title:"".concat((0,s.t)("Cancel"))})]})]})})]})})})}),(0,C.jsx)(o.l,{className:"custom-dialog",header:"Crop Image",visible:B,style:{width:"50vw"},onHide:()=>z(!1),footer:()=>K(),children:E&&(0,C.jsx)(d.A,{ref:U,style:{height:400,width:"100%"},zoomTo:.5,aspectRatio:1,preview:".img-preview",src:E,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0,cropBoxResizable:!1})})]})}},25263:(e,a,t)=>{e.exports=t.p+"static/media/sidebar-logo.d6fce7850bbfb0f38fbe.png"}}]);
//# sourceMappingURL=1494.577ad257.chunk.js.map