"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[6685],{90870:(e,a,l)=>{l.d(a,{F:()=>d,h:()=>r});var n,t,s=l(57528),o=l(70459);const r=(0,o.J1)(n||(n=(0,s.A)(["\n  mutation CreateCompanyBranch($companyBranchData: CreateCompanyBranchDto!) {\n    createCompanyBranch(companyBranchData: $companyBranchData) {\n      message\n      data {\n        uuid\n      }\n    }\n  }\n"]))),d=(0,o.J1)(t||(t=(0,s.A)(["\n  mutation DeleteSubscriberEmployeeUser($subscriberUserId: String!, $userData: DeleteUserDto) {\n    deleteSubscriberEmployeeUser(subscriberUserId: $subscriberUserId, userData: $userData) {\n      message\n    }\n  }\n"])))},96789:(e,a,l)=>{l.d(a,{En:()=>u,IE:()=>h,Qm:()=>v,ev:()=>p,hm:()=>m,jB:()=>x});var n,t,s,o,r,d,i=l(57528),c=l(70459);const u=(0,c.J1)(n||(n=(0,i.A)(["\n  query GetCompanyBranches($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!, $companyId: String!) {\n    getCompanyBranches(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search, companyId: $companyId) {\n      message\n      data {\n        count\n        branches {          \n          uuid\n          branch {\n            location\n            uuid\n          }\n        }\n      }\n    }\n  }\n"]))),m=(0,c.J1)(t||(t=(0,i.A)(["\n  query GetCompanyTenantDetails($companyId: String!, $branchId: String!) {\n    getCompanyTenantDetails(company_id: $companyId, branch_id: $branchId) {\n      message\n      data {\n        email\n        company_name\n        website\n        authorized_person\n        industry_type\n        type        \n        phone_number\n        country_code\n        location\n        total_employees\n      }\n    }\n  }\n"]))),p=(0,c.J1)(s||(s=(0,i.A)(["\nquery GetCompanyContractorDetails($branchId: String!, $companyId: String!) {\n  getCompanyContractorDetails(branch_id: $branchId, company_id: $companyId) {\n    message\n    data {\n      authorized_person\n      company_name\n      email\n      industry_type\n      location\n      total_employees\n      phone_number\n      country_code\n      type\n      website\n    }\n  }\n}\n"]))),v=(0,c.J1)(o||(o=(0,i.A)(["\nquery GetCompanyTenantEmployeeList($userData: GetSubscriberDto!) {\n  getCompanyTenantEmployeeList(userData: $userData) {\n    data {\n      employee {\n        email\n        uuid\n        status\n        first_name\n        last_name\n        phone_number\n        country_code {\n          name\n          id\n          uuid\n          countryCode\n          phoneCode\n        }\n        department\n        user_type\n        company_id {\n          uuid\n          name\n          description\n          type\n          attachments          \n          website_url          \n          industryType {\n            name\n            uuid\n            description\n          }\n        }\n      }\n      count\n    }\n  }\n}\n"]))),x=(0,c.J1)(r||(r=(0,i.A)(["\nquery GetCompanyContractorsList($userData: GetSubscriberDto!) {\n  getCompanyContractorsList(userData: $userData) {\n    message\n    data {\n      employee {\n        email\n        uuid\n        status\n        first_name\n        last_name\n        phone_number\n        country_code {         \n          uuid\n          name\n          phoneCode\n        }        \n        department\n        user_type\n        company_id {\n          uuid\n          name\n          description\n          type\n          attachments\n          website_url          \n          industryType {\n            uuid\n            name            \n          }\n          tenantContractorType {\n            uuid\n            name            \n            type\n          }\n        }\n        user_roles {\n          uuid\n          role_id {\n            uuid\n            name\n            description\n            status\n          }\n        }\n      }\n      count\n    }\n  }\n}\n"]))),h=(0,c.J1)(d||(d=(0,i.A)(["\n  query GetUserById($userId: String!) {\n    getUserById(userId: $userId) {\n      message\n      data {\n        user {\n          country_code {\n            countryCode\n            name\n            phoneCode\n            uuid\n          }\n          position\n          email\n          educational_interests\n          first_name\n          last_name\n          user_type\n          is_required_reset_password\n          organization\n          phone_number\n          preferred_language\n          profile_picture\n          role_name\n          uuid\n          pronounce\n          reporting_manager_id {\n            uuid\n            profile_picture\n            last_name\n            first_name\n            location\n            organization\n          }\n          department\n          location\n        }\n        location\n        role_id {\n          name\n          status\n          uuid\n        }\n        role\n      }\n    }\n  }\n"])))},66685:(e,a,l)=>{l.r(a),l.d(a,{default:()=>E});var n=l(65043),t=l(74117),s=l(31881),o=l(88250),r=l(42145),d=l(64526),i=l(41290),c=l(33556),u=l(34764),m=l(75289),p=l(32254),v=l(77654),x=l(79456),h=l(73216),b=l(75214),f=l(70579);const y=function(e){let{companyId:a,locationId:l}=e;const{t:n}=(0,t.Bd)(),s=(0,h.Zp)(),o=(0,x.wA)();return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"w-full lg:w-[calc(50%-10px)] h-full bg-border-secondary p-5 min-h-[227px] justify-center rounded-xl border border-solid border-border-light-blue-shade flex flex-col items-center",children:[(0,f.jsxs)("div",{className:"mb-[30px]",children:[(0,f.jsx)("p",{className:"font-bold text-center",children:n("No employees has been added yet.")}),(0,f.jsx)("p",{className:"font-bold text-center",children:n("Please add employees by clicking Add new button.")})]}),(0,f.jsx)(i.A,{className:"btn btn-primary text-white whitespace-nowrap w-[160px]",label:n("Add New"),type:"button",onClick:()=>(o((0,b.NL)(1)),void s("/".concat(r.bw.app,"/").concat(r.bw.createNewAccount,"/?company_uuid=").concat(a,"&branch_id=").concat(l,"&contractor-details-page=true"))),title:"".concat(n("Add New"))})]})})};const N=function(){var e,a,l,n,s,o,d,i,c,u,m,p,v;const{t:h}=(0,t.Bd)(),{getCompanyContractorDetails:b}=(0,x.d4)((e=>e.tenantDetails));return(0,f.jsxs)("div",{className:"p-5 mb-5 border border-border-primary rounded-xl bg-light-blue md:mb-7",children:["object"===typeof b&&0!==(null===(e=Object.keys(b))||void 0===e?void 0:e.length)&&(0,f.jsx)("h6",{className:"mb-5 leading-7",children:h(null===b||void 0===b||null===(a=b.data)||void 0===a?void 0:a.company_name)}),"object"===typeof b&&0!==(null===(l=Object.keys(b))||void 0===l?void 0:l.length)&&(0,f.jsxs)("div",{className:"flex flex-wrap justify-between gap-3 lg:gap-5",children:[(0,f.jsxs)("p",{className:"break-words w-full md:w-[calc(50%-10px)]",children:[h("Type: "),(0,f.jsx)("span",{className:"block font-bold lg:inline-block",children:h("1"===(null===b||void 0===b||null===(n=b.data)||void 0===n?void 0:n.type)?"Tenant":"Contractor")})]}),(0,f.jsxs)("p",{className:"break-words w-full md:w-[calc(50%-10px)]",children:[h("Location: "),(0,f.jsx)("span",{className:"block font-bold lg:inline-block",children:h(null===b||void 0===b||null===(s=b.data)||void 0===s?void 0:s.location)})]}),(0,f.jsxs)("p",{className:"break-words w-full md:w-[calc(50%-10px)]",children:[h("Contact Information: "),(0,f.jsx)("span",{className:"block font-bold lg:inline-block",children:(0,r.lb)(null===b||void 0===b||null===(o=b.data)||void 0===o?void 0:o.phone_number,null===b||void 0===b||null===(d=b.data)||void 0===d?void 0:d.country_code)})]}),(0,f.jsxs)("p",{className:"break-words w-full md:w-[calc(50%-10px)]",children:[h("Authorized Person: "),(0,f.jsx)("span",{className:"block font-bold lg:inline-block",children:h(null===b||void 0===b||null===(i=b.data)||void 0===i||null===(c=i.authorized_person)||void 0===c?void 0:c.join(", "))})]}),(0,f.jsxs)("p",{className:"break-words w-full md:w-[calc(50%-10px)]",children:[h("Website: "),(0,f.jsx)("span",{className:"block font-bold break-all lg:inline-block",children:h(null===b||void 0===b||null===(u=b.data)||void 0===u?void 0:u.website)})]}),(0,f.jsxs)("p",{className:"break-words w-full md:w-[calc(50%-10px)]",children:[h("Employees: "),(0,f.jsx)("span",{className:"block font-bold lg:inline-block",children:null===b||void 0===b||null===(m=b.data)||void 0===m?void 0:m.total_employees})]}),(0,f.jsxs)("p",{className:"break-words w-full md:w-[calc(50%-10px)]",children:[h("Email ID: "),(0,f.jsx)("span",{className:"block font-bold lg:inline-block",children:h(null===b||void 0===b||null===(p=b.data)||void 0===p||null===(v=p.email)||void 0===v?void 0:v.join(", "))})]})]})]})};var j=l(92073),g=l(13960);const C=function(e){var a;let{companyId:l,locationId:s,onImportCallBack:o}=e;const{t:r}=(0,t.Bd)(),d=(0,n.useRef)(null),[u,m]=(0,n.useState)(!1),[p,v]=(0,n.useState)({successCount:0,rejectCount:0,totalCount:0,rejectedUsers:[]}),x=[{name:r("Sr.No"),sortable:!1},{name:r("First Name"),sortable:!0,fieldName:"first_name"},{name:r("Last Name"),sortable:!0,fieldName:"last_name"},{name:r("email"),sortable:!0,fieldName:"email"},{name:r("Phone Number"),sortable:!0,fieldName:"phone_number"},{name:r("Role"),sortable:!0,fieldName:"role"},{name:r("Reason"),sortable:!0,fieldName:"reason"}],[h,b]=(0,n.useState)(!1),y=(0,n.useCallback)((async e=>{b(!1);const a=e.currentTarget.files;await(0,g.gv)({files:a,companyId:l,branchId:s,onImportCallBack:o,setRejectedUserPopup:m,setRejectedUsersData:v,employeeType:"2"})}),[l,s]),N=()=>{b(!1),m(!1)},C=(0,n.useCallback)((()=>{b((e=>!e))}),[h]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"w-full lg:w-[calc(50%-10px)] h-full bg-border-secondary p-5 min-h-[227px] justify-center rounded-xl border border-solid border-border-light-blue-shade flex flex-col items-center",children:[(0,f.jsxs)("div",{className:"mb-[30px]",children:[(0,f.jsx)("p",{className:"font-bold text-center",children:r("You can import your employees details by clicking import button.")}),(0,f.jsx)("p",{className:"font-bold text-center",children:r("It supports CSV format.")})]}),(0,f.jsx)(i.A,{className:"btn btn-primary text-white whitespace-nowrap w-[220px]",type:"button",label:"Import Employees List",onClick:()=>C(),title:"".concat(r("Import Employee List"))})]}),u&&(0,f.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(u?"":"hidden"),children:(0,f.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(u?"":"opacity-0 transform -translate-y-full scale-150 "," transition-all duration-300 "),children:(0,f.jsx)("div",{className:"w-full mx-5 sm:max-w-[1200px]",children:(0,f.jsxs)("div",{className:"relative bg-white rounded-xl",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b md:py-6 bg-accents-2 rounded-t-xl",children:[(0,f.jsx)("p",{className:"text-lg font-bold md:text-xl text-baseColor",children:"Uploaded Employee Details"}),(0,f.jsx)(i.A,{onClick:()=>N(),label:"",title:"".concat(r("Close")),children:(0,f.jsx)("span",{className:"text-xl-22",children:(0,f.jsx)(c.YY,{className:"text-error"})})})]}),(0,f.jsxs)("div",{className:"flex flex-wrap justify-center gap-3 p-5 md:gap-10",children:[(0,f.jsxs)("p",{className:"font-bold max-md:px-5",children:["Total User: ",(0,f.jsx)("span",{className:"font-regular",children:p.totalCount})]}),(0,f.jsxs)("p",{className:"font-bold text-success max-md:px-5",children:["Success User: ",(0,f.jsx)("span",{className:"font-regular",children:p.successCount})]}),(0,f.jsxs)("p",{className:"font-bold text-error max-md:px-5",children:["Rejected User: ",(0,f.jsx)("span",{className:"font-regular",children:p.rejectCount})]})]}),(0,f.jsx)("div",{className:"flex items-center justify-between px-5",children:(0,f.jsx)("p",{className:"text-lg font-bold md:text-xl text-baseColor",children:"Rejected Employee List"})}),(0,f.jsx)("div",{className:"w-full p-5 max-h-[calc(100vh-260px)] overflow-auto",children:(0,f.jsx)("div",{className:"overflow-auto custom-dataTable",children:(0,f.jsxs)("table",{children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{children:null===x||void 0===x?void 0:x.map(((e,a)=>(0,f.jsx)("th",{scope:"col",className:"whitespace-nowrap",children:(0,f.jsx)("div",{className:"flex items-center",children:e.name})},"".concat(a+1))))})}),(0,f.jsx)("tbody",{children:null===(a=p.rejectedUsers)||void 0===a?void 0:a.map(((e,a)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"text-left pl-7",scope:"row",children:a+1}),(0,f.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.first_name}),(0,f.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.last_name}),(0,f.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.email}),(0,f.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.phone_number}),(0,f.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.role}),(0,f.jsx)("td",{className:"text-left min-w-[300px]",children:null===e||void 0===e?void 0:e.reason})]},null===e||void 0===e?void 0:e.uuid)))})]})})})]})})})}),h&&(0,f.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(h?"":"hidden"),children:(0,f.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(h?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,f.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,f.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,f.jsx)("h6",{className:"mb-6 font-bold leading-normal text-center md:mb-10",children:r("Before you upload the list, the roles should be created")}),(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,f.jsxs)("label",{id:"importCsv",className:"btn btn-primary btn-normal w-full md:w-auto md:min-w-[160px] mb-0",children:["Okay",(0,f.jsx)("input",{id:"importCsv",type:"file",name:"importCsv",multiple:!0,ref:d,className:"hidden focus:bg-transparent",accept:".csv",onChange:e=>y(e)},(0,j.A)())]}),(0,f.jsx)(i.A,{className:"btn-secondary btn-normal w-full md:w-auto md:min-w-[160px]",label:r("Cancel"),onClick:N,title:"".concat(r("Cancel"))})]})]})})})})]})};var w=l(12209),_=l(96789),S=l(90870),I=l(86213),A=l(8848),R=l(9852),k=l(63516),B=l(5937),U=l(81410),D=l(43114),T=l(41709);const E=()=>{var e,a,l,E,L,O,$,M,F,P,z,J,V,q,G,Y,Q,W,Z,H,K,X,ee;const ae=(0,x.wA)(),{t:le}=(0,t.Bd)(),ne=(0,h.Zp)(),te=(0,n.useRef)(null),se=new URLSearchParams(location.search),oe=se.get("company_uuid"),re=se.get("branch_id"),[de,ie]=(0,s.n)(S.F),[ce,ue]=(0,n.useState)(!1),[me,pe]=(0,n.useState)(!1),[ve,xe]=(0,n.useState)(!1),{contractor:he}=(0,x.d4)((e=>e.rolesManagement)),{userProfileData:be}=(0,x.d4)((e=>e.userProfile)),[fe,ye]=(0,n.useState)({successCount:0,rejectCount:0,totalCount:0,rejectedUsers:[]}),[Ne,je]=(0,n.useState)({uuid:"",userType:""}),[ge,Ce]=(0,n.useState)(!1),[we,_e]=(0,n.useState)(!1),[Se,Ie]=(0,n.useState)(!1),[Ae,Re]=(0,n.useState)(!1),[ke,Be]=(0,n.useState)([]),[Ue,De]=(0,s.n)(S.h),{data:Te,refetch:Ee}=(0,o.I)(_.En,{variables:{limit:10,page:1,sortField:"createdAt",sortOrder:"descend",search:"",companyId:oe}}),[Le,Oe]=(0,n.useState)([]),{data:$e,refetch:Me}=(0,o.I)(B.B,{variables:{companyId:""}}),[Fe,Pe]=(0,s.n)(D.tq),[ze,Je]=(0,n.useState)(!1),[Ve,qe]=(0,n.useState)({}),[Ge,Ye]=(0,n.useState)(!1),Qe=[{name:le("Sr.No"),sortable:!1},{name:le("Employee First Name"),sortable:!0,fieldName:"first_name"},{name:le("Employee Last Name"),sortable:!0,fieldName:"last_name"},{name:le("Department"),sortable:!0,fieldName:"department"},{name:le("User Type"),sortable:!0,fieldName:"user.user_type"},{name:le("email"),sortable:!0,fieldName:"email"},{name:le("Phone Number"),sortable:!0,fieldName:"phone_number"},{name:le("Status"),sortable:!0,fieldName:"user.status"}],[We,Ze]=(0,n.useState)([]),He=(0,k.Wx)({initialValues:{locationName:"",userLocation:""},onSubmit:()=>{_e(!1),Ie(!1)}});(0,n.useEffect)((()=>{$e&&Me()}),[]);const{data:Ke,refetch:Xe}=(0,o.I)(_.ev,{skip:!He.values.userLocation,fetchPolicy:"no-cache",variables:{companyId:oe,branchId:null===He||void 0===He||null===(e=He.values)||void 0===e?void 0:e.userLocation}}),{data:ea,refetch:aa}=(0,o.I)(_.jB,{skip:!He.values.userLocation,fetchPolicy:"no-cache",variables:{userData:{limit:10,page:1,sortField:"createdAt",sortOrder:"descend",search:"",company_id:oe,branch_id:null===He||void 0===He||null===(a=He.values)||void 0===a?void 0:a.userLocation}}}),[la,na]=(0,n.useState)({limit:10,page:1,sortField:"createdAt",sortOrder:"descend",search:"",company_id:oe,branch_id:null===He||void 0===He||null===(l=He.values)||void 0===l?void 0:l.userLocation,index:0});(0,n.useEffect)((()=>{var e;null!==Ke&&void 0!==Ke&&null!==(e=Ke.getCompanyContractorDetails)&&void 0!==e&&e.data&&ae((0,R.b4)(null===Ke||void 0===Ke?void 0:Ke.getCompanyContractorDetails))}),[null===Ke||void 0===Ke||null===(E=Ke.getCompanyContractorDetails)||void 0===E?void 0:E.data]),(0,n.useEffect)((()=>{var e,a;null!==He&&void 0!==He&&null!==(e=He.values)&&void 0!==e&&e.userLocation&&((0,r.Be)(He.values.userLocation),na({...la,branch_id:null===He||void 0===He||null===(a=He.values)||void 0===a?void 0:a.userLocation}))}),[He.values.userLocation]),(0,n.useEffect)((()=>{if(null!==la&&void 0!==la&&la.branch_id){const{index:e,...a}=la;aa({userData:{...a}}).catch((e=>d.oR.error(e)))}}),[la,He.values.userLocation]),(0,n.useEffect)((()=>{var e,a;(null===ea||void 0===ea||null===(e=ea.getCompanyContractorsList)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.count)>0&&Ce(!0)}),[null===ea||void 0===ea||null===(L=ea.getCompanyContractorsList)||void 0===L||null===(O=L.data)||void 0===O?void 0:O.count]);const[ta,sa]=(0,n.useState)(la.limit),oa=(null===ea||void 0===ea||null===($=ea.getCompanyContractorsList)||void 0===$||null===(M=$.data)||void 0===M?void 0:M.count)||0,ra=Math.ceil(oa/ta),da=(0,n.useCallback)((e=>{const a={...la,page:e,index:(e-1)*la.limit};na(a),p.A.saveState("filterContractorUserManagement",JSON.stringify(a))}),[]);(0,n.useEffect)((()=>{sa(la.limit)}),[la.limit]);const ia=(0,n.useCallback)(((e,a)=>{ue(!0),je({uuid:e,userType:a})}),[]),ca=(0,n.useCallback)(((e,a)=>{var l;ne("/".concat(r.bw.app,"/").concat(r.bw.userDetails,"/?uuid=").concat(e,"&company_id=").concat(oe,"&branchId=").concat(null===He||void 0===He||null===(l=He.values)||void 0===l?void 0:l.userLocation,"&userCompanyType=2&Is_subAdmin=").concat(a===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR))}),[He.values.userLocation]),ua=(0,n.useCallback)(((e,a)=>{var l;ne("/".concat(r.bw.app,"/").concat(r.bw.userDetails,"/?uuid=").concat(e,"&read_Data=true&company_id=").concat(oe,"&branchId=").concat(null===He||void 0===He||null===(l=He.values)||void 0===l?void 0:l.userLocation,"&userCompanyType=2&Is_subAdmin=").concat(a===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR))}),[He.values.userLocation]),ma=(0,n.useCallback)((()=>{ue(!1)}),[]),pa=(0,n.useCallback)((()=>{de({variables:{subscriberUserId:null===Ne||void 0===Ne?void 0:Ne.uuid,userData:{user_type:null===Ne||void 0===Ne?void 0:Ne.userType}}}).then((e=>{const a=e.data.courseData;d.oR.success(null===a||void 0===a?void 0:a.message),ue(!1),aa(),Xe()})).catch((e=>{var a,l,n,t;d.oR.error(null===e||void 0===e||null===(a=e.networkError)||void 0===a||null===(l=a.result)||void 0===l||null===(n=l.errors)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.message)}))}),[Ne]),va=(0,n.useCallback)((e=>{na({...la,search:e.target.value})}),[]),xa=(0,n.useCallback)((()=>{I.A.get("".concat(r.JR,"users/export-company-contractor-users-csv/?company_id=").concat(oe),{headers:{authorization:r.Sh?"Bearer ".concat(r.Sh):""},responseType:"blob"}).then((e=>{var a;const l=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=l,n.setAttribute("download","Contractor-Users.csv"),document.body.appendChild(n),n.click(),d.oR.success(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)})).catch((e=>{d.oR.error(e.message)}))}),[]),ha=(0,n.useCallback)((async e=>{Ye(!1);const a=e.currentTarget.files;await(0,g.gv)({files:a,companyId:oe,branchId:re,onImportCallBack:Ia,setRejectedVendorUserPopup:xe,setRejectedVendorUsersData:ye,employeeType:"2"}),te.current&&(te.current.value="")}),[oe,null===He||void 0===He||null===(F=He.values)||void 0===F?void 0:F.userLocation]),ba=()=>{xe(!1),Ye(!1)},fa=(0,n.useCallback)((()=>{_e(!0),Ie(!0)}),[]),ya=(0,n.useCallback)((()=>{I.A.get("".concat(r.JR,"media/download-csv/contractor"),{headers:{authorization:r.Sh?"Bearer ".concat(r.Sh):""},responseType:"blob"}).then((e=>{var a;const l=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=l,n.setAttribute("download","Contractor-Sample.csv"),document.body.appendChild(n),n.click(),d.oR.success(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)})).catch((e=>{d.oR.error(e.message)}))}),[]),Na=null!==(P=null===be||void 0===be||null===(z=be.getProfile)||void 0===z||null===(J=z.data)||void 0===J?void 0:J.user_type)&&void 0!==P?P:"";(0,n.useEffect)((()=>{const e=[];if(null!==Te&&void 0!==Te&&Te.getCompanyBranches){var a,l,n,t,s,o,r,d;let v="";if(re)v=re;else if(null!==Te&&void 0!==Te&&null!==(a=Te.getCompanyBranches)&&void 0!==a&&null!==(l=a.data)&&void 0!==l&&null!==(n=l.branches)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&null!==(s=t.branch)&&void 0!==s&&s.uuid){var i,c,u,m,p;v=null===Te||void 0===Te||null===(i=Te.getCompanyBranches)||void 0===i||null===(c=i.data)||void 0===c||null===(u=c.branches)||void 0===u||null===(m=u[0])||void 0===m||null===(p=m.branch)||void 0===p?void 0:p.uuid}null===Te||void 0===Te||null===(o=Te.getCompanyBranches)||void 0===o||null===(r=o.data)||void 0===r||null===(d=r.branches)||void 0===d||d.map((a=>{var l,n;e.push({name:null===a||void 0===a||null===(l=a.branch)||void 0===l?void 0:l.location,key:null===a||void 0===a||null===(n=a.branch)||void 0===n?void 0:n.uuid})})),Be(e),He.setFieldValue("userLocation",v)}}),[Te,re]);const ja=(0,n.useCallback)((()=>{_e(!1),He.setFieldValue("locationName",""),Ie(!1)}),[]),ga=(0,n.useCallback)((()=>{Ue({variables:{companyBranchData:{company_id:oe,branch_id:He.values.locationName}}}).then((e=>{const a=e.data.courseData;d.oR.success(null===a||void 0===a?void 0:a.message),Ee(),_e(!1),He.resetForm()})).catch((e=>{var a,l,n,t;d.oR.error(null===e||void 0===e||null===(a=e.networkError)||void 0===a||null===(l=a.result)||void 0===l||null===(n=l.errors)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.message),_e(!1)}))}),[He.values.locationName]);(0,n.useEffect)((()=>{if(null!==$e&&void 0!==$e&&$e.subscriberLocations){var e,a;const l=[];null===$e||void 0===$e||null===(e=$e.subscriberLocations)||void 0===e||null===(a=e.data)||void 0===a||a.map((e=>{l.push({name:e.location,key:null===e||void 0===e?void 0:e.uuid})})),Oe(l)}}),[$e]),(0,n.useEffect)((()=>{if((null===ke||void 0===ke?void 0:ke.length)>0&&(null===Le||void 0===Le?void 0:Le.length)>0){const e=null===Le||void 0===Le?void 0:Le.filter((e=>!ke.some((a=>a.key===e.key))));Ze(e),Re(0===(null===e||void 0===e?void 0:e.length))}}),[ke,Le]);const Ca=(0,n.useCallback)((e=>{Je(!0),qe(e)}),[]),wa=(0,n.useCallback)((()=>{Fe({variables:{subscriberUserId:Ve.uuid}}).then((e=>{const a=e.data;d.oR.success(a.activeInactiveEmployee.message),Je(!1),aa()})).catch((e=>{var a,l,n;d.oR.error(null===e||void 0===e||null===(a=e.networkError)||void 0===a||null===(l=a.result)||void 0===l||null===(n=l.errors[0])||void 0===n?void 0:n.message)}))}),[ze]),_a=(0,n.useCallback)((()=>{Je(!1)}),[]),Sa=(0,n.useCallback)((()=>{Ye(!0)}),[Ge]),Ia=(0,n.useCallback)((e=>{pe(e),me||aa()}),[ea]);return(0,f.jsxs)(f.Fragment,{children:[me&&(0,f.jsx)(U.A,{}),(0,f.jsx)(w.A,{headerActionConst:()=>{var e;return(0,f.jsx)(f.Fragment,{children:Na===r.ve.SUBSCRIBER_ADMIN&&(null===he||void 0===he?void 0:he.write)&&(0,f.jsxs)("div",{className:"flex w-full gap-3 xmd:gap-5 lg:w-auto ".concat(me?"pointer-events-none":""),children:[(0,f.jsx)(i.A,{className:"btn-normal btn-secondary whitespace-nowrap",label:le("+ Add New Location"),onClick:fa}),(0,f.jsx)(A.A,{placeholder:"Select Location",className:"w-[212px] -mt-2 max-md:mr-2",label:"",inputIcon:(0,f.jsx)(c.T5,{fontSize:"18"}),name:"userLocation",onChange:He.handleChange,value:He.values.userLocation,error:null===He||void 0===He||null===(e=He.errors)||void 0===e?void 0:e.userLocation,options:ke,id:"userLocation"})]})})}}),(0,f.jsxs)("div",{children:[(0,f.jsx)(N,{}),!ge&&(Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR?Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR:null===he||void 0===he?void 0:he.write)&&(0,f.jsxs)("div",{className:"flex flex-wrap gap-3 mb-5 md:mb-7",children:[(0,f.jsx)(y,{companyId:oe,locationId:null===He||void 0===He||null===(V=He.values)||void 0===V?void 0:V.userLocation}),(0,f.jsx)(C,{companyId:oe,locationId:null===He||void 0===He||null===(q=He.values)||void 0===q?void 0:q.userLocation,onImportCallBack:Ia})]}),(0,f.jsx)("div",{className:"flex justify-end pb-5 md:pb-7",children:(0,f.jsx)("button",{className:"btn bg-default btn-secondary btn-normal w-full md:w-[220px] ",type:"button",onClick:()=>ya(),title:"".concat(le("Download Sample CSV")),children:"Download Sample CSV"})}),ge&&(0,f.jsxs)("div",{className:"p-5 overflow-auto border border-solid rounded-xl border-border-primary",children:[(0,f.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-5 md:gap-5",children:[(0,f.jsx)("h6",{className:"w-full md:w-auto",children:le("".concat(null===Ke||void 0===Ke||null===(G=Ke.getCompanyContractorDetails)||void 0===G||null===(Y=G.data)||void 0===Y?void 0:Y.company_name," Employee Details"))}),(0,f.jsxs)("div",{className:"flex flex-wrap w-full gap-3 md:flex-nowrap md:gap-5 md:w-auto",children:[(Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR?Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR:null===he||void 0===he?void 0:he.write)&&(0,f.jsx)(i.A,{className:"btn btn-primary text-white whitespace-nowrap w-[160px]",label:le("Add New"),type:"button",onClick:()=>(()=>{var e;ae((0,b.NL)(1)),ne("/".concat(r.bw.app,"/").concat(r.bw.createNewAccount,"/?company_uuid=").concat(oe,"&branch_id=").concat(null===He||void 0===He||null===(e=He.values)||void 0===e?void 0:e.userLocation,"&contractor-details-page=true"))})(),title:"".concat(le("Add New"))}),(Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR?Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR:null===he||void 0===he?void 0:he.write)&&(0,f.jsx)(i.A,{className:"w-full btn btn-gray sm:w-[260px] p-3.5 text-xs-14 md:text-base",label:le("Import Employees List"),onClick:Sa,title:"".concat(le("Import Employee List")),children:(0,f.jsx)(c.OP,{className:"order-2 ml-auto "})}),(0,f.jsxs)("button",{className:"w-full btn btn-gray md:w-[260px] p-3.5",onClick:()=>xa(),title:"".concat(le("Export Employee List")),children:["Export Employees List  ",(0,f.jsx)(c.OP,{className:"order-2 ml-auto "})]}),(0,f.jsx)(u.A,{placeholder:le("Search Employee"),type:"text",id:"table-search",value:la.search,onChange:va,inputIcon:(0,f.jsx)(c.vj,{fontSize:"18"})}),(0,f.jsx)("div",{className:"w-full xmd:w-[150px]",children:(0,f.jsx)(A.A,{className:"w-full -mt-2",label:"",inputIcon:(0,f.jsx)(c.Jh,{className:"order-2"}),name:"filterDrpData",onChange:e=>{const a=e.target.value,[l,n]=a.split(":");na({...la,sortField:l,sortOrder:n})},value:la.sortField+":"+la.sortOrder,error:"",options:r.Qi,id:"filterDrpData"})})]})]}),(0,f.jsxs)("div",{className:"overflow-auto custom-dataTable",children:[(0,f.jsxs)("table",{children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[null===Qe||void 0===Qe?void 0:Qe.map(((e,a)=>(0,f.jsx)("th",{scope:"col",className:"whitespace-nowrap ".concat(e.name==le("Sr.No")?"justify-start pl-7 w-[13%]":""),children:(0,f.jsxs)("div",{className:"flex items-center",children:[e.name,e.sortable&&(0,f.jsxs)("button",{className:"cursor-pointer",onClick:()=>{return a=e.fieldName,void na({...la,sortField:a,sortOrder:"ascend"===la.sortOrder?"descend":"ascend"});var a},type:"button",children:[(""===la.sortOrder||la.sortField!==e.fieldName)&&(0,f.jsx)(c.xs,{className:"fill-white"}),"ascend"===la.sortOrder&&la.sortField===e.fieldName&&(0,f.jsx)(c.xD,{className:"ml-1 fill-white"}),"descend"===la.sortOrder&&la.sortField===e.fieldName&&(0,f.jsx)(c.xR,{className:"ml-1 fill-white"})]})]})},"".concat(a+1)))),(0,f.jsx)("th",{scope:"col",children:(0,f.jsx)("div",{className:"flex items-center",children:le("Action")})})]})}),(0,f.jsx)("tbody",{children:null===ea||void 0===ea||null===(Q=ea.getCompanyContractorsList)||void 0===Q||null===(W=Q.data)||void 0===W||null===(Z=W.employee)||void 0===Z?void 0:Z.map(((e,a)=>{const l=(null===la||void 0===la?void 0:la.index)+a+1;return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"text-left pl-7",scope:"row",children:l}),(0,f.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.first_name}),(0,f.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.last_name}),(0,f.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.department}),(0,f.jsx)("td",{className:"text-left border-none",children:(0,f.jsx)("div",{className:"flex",children:(null===e||void 0===e?void 0:e.user_type)!==r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR?(0,f.jsx)("span",{className:"text-bright-green-shade",children:"User"}):(0,f.jsx)("span",{className:"text-error",children:"Sub Admin"})})}),(0,f.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.email}),(0,f.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.phone_number}),(0,f.jsx)("td",{className:"text-left border-none",children:(0,f.jsx)("div",{className:"flex",children:(null===e||void 0===e?void 0:e.status)===r.UP.ACTIVE?(0,f.jsx)("span",{className:"text-bright-green-shade",children:"Active"}):(0,f.jsx)("span",{className:"text-error",children:"Inactive"})})}),(0,f.jsx)("td",{children:(0,f.jsxs)("div",{className:"flex",children:[(Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR?Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR:null===he||void 0===he?void 0:he.read)&&(0,f.jsx)(i.A,{className:"mx-1 mr-2 bg-transparent btn-default",onClick:()=>ua(null===e||void 0===e?void 0:e.uuid,null===e||void 0===e?void 0:e.user_type),label:"",children:(0,f.jsx)(c.kU,{className:"text-success"})}),(Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR?Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR:null===he||void 0===he?void 0:he.update)&&(0,f.jsx)(i.A,{className:"mr-2 bg-transparent btn-default",onClick:()=>ca(null===e||void 0===e?void 0:e.uuid,null===e||void 0===e?void 0:e.user_type),label:"",children:(0,f.jsx)(c.ff,{})}),(Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR?Na===r.ve.SUBSCRIBER_SUB_ADMIN_CONTRACTOR:null===he||void 0===he?void 0:he.delete)&&(0,f.jsx)(i.A,{className:"mr-2 bg-transparent cursor-pointer btn-default",onClick:()=>ia(null===e||void 0===e?void 0:e.uuid,null===e||void 0===e?void 0:e.user_type),label:"",disabled:null===ie||void 0===ie?void 0:ie.loading,children:(0,f.jsx)(c.lM,{className:"fill-error"})}),(0,f.jsx)("div",{className:"flex justify-center",children:(Na===r.ve.SUBSCRIBER_TENANT_SUB_ADMIN?Na===r.ve.SUBSCRIBER_TENANT_SUB_ADMIN:null===he||void 0===he?void 0:he.update)&&(0,f.jsx)("span",{className:"font-medium text-blue-600 hover:underline",children:(0,f.jsxs)("label",{className:"relative inline-flex items-center mb-0 cursor-pointer",children:[(0,f.jsx)("input",{type:"checkbox",className:"sr-only peer",value:null===e||void 0===e?void 0:e.status,onChange:()=>Ca(e),checked:(null===e||void 0===e?void 0:e.status)===r.UP.ACTIVE}),(0,f.jsx)("div",{className:"w-[30px] h-[14px] bg-secondary rounded-full peer peer-focus:ring-3 peer-focus:ring-red-200 peer-checked:after:translate-x-full peer-checked:after:border-white after:content- after:absolute after:top-[-1px] after:left-0 after:bg-white after:drop-shadow-outline-2 after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})})})]})})]},e.uuid)}))})]}),(0===(null===ea||void 0===ea||null===(H=ea.getCompanyContractorsList)||void 0===H||null===(K=H.data)||void 0===K?void 0:K.count)||null===(null===ea||void 0===ea||null===(X=ea.getCompanyContractorsList)||void 0===X?void 0:X.data))&&(0,f.jsx)("div",{className:"flex justify-center",children:(0,f.jsx)("div",{children:le("No Data")})})]}),(0,f.jsxs)("div",{className:"flex flex-wrap items-center px-6 mt-3 gap-y-3 gap-x-6",children:[(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("span",{className:"text-sm font-normal text-gray-700 ",children:le("Per Page")}),(0,f.jsx)("select",{className:"border border-border-primary rounded-xl ml-2 px-3 text-sm py-1.5 text-gray-500 w-[70px] h-[36px] appearance-none bg-white",onChange:e=>(e=>{sa(Number(e));const a={...la,limit:parseInt(e),page:1,search:"",index:0};na(a),p.A.saveState("filterContractorUserManagement",JSON.stringify(a))})(e.target.value),value:la.limit,children:null===r.aj||void 0===r.aj?void 0:r.aj.map((e=>(0,f.jsx)("option",{children:e},e)))})]}),(0,f.jsx)(v.A,{currentPage:la.page,totalPages:ra,onPageChange:da,recordsPerPage:ta})]})]})]}),we&&(0,f.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(we?"":"hidden"),children:(0,f.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(Se?"":"opacity-0 transform -translate-y-full scale-150 "," transition-all duration-300 "),children:(0,f.jsx)("div",{className:"w-full mx-5 sm:max-w-[400px]",children:(0,f.jsxs)("div",{className:"relative bg-white rounded-xl",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b md:py-6 bg-accents-2 rounded-t-xl",children:[(0,f.jsx)("p",{className:"text-lg font-bold md:text-xl text-baseColor",children:"Add New Location"}),(0,f.jsx)(i.A,{onClick:ja,label:le(""),title:"".concat(le("Close")),children:(0,f.jsx)("span",{className:"text-xl-22",children:(0,f.jsx)(c.YY,{className:"text-error"})})})]}),!Ae&&(0,f.jsx)("div",{className:"w-full",children:(0,f.jsxs)("form",{onSubmit:He.handleSubmit,children:[(0,f.jsx)("div",{className:"p-5 max-h-[calc(100vh-260px)] overflow-auto",children:(0,f.jsx)("div",{className:"mb-4",children:(0,f.jsx)(A.A,{placeholder:le("Select Location"),className:"w-full",label:le("Location"),inputIcon:(0,f.jsx)("span",{className:"text-xs",children:(0,f.jsx)(c.jN,{className:"fill-dark-grey"})}),onChange:He.handleChange,value:He.values.locationName,error:null===He||void 0===He||null===(ee=He.errors)||void 0===ee?void 0:ee.locationName,options:We,name:"locationName",id:"locationName",required:!0})})}),(0,f.jsx)("div",{className:"flex flex-col items-center justify-end p-5 border-t border-solid md:space-x-3 md:flex-row border-border-primary",children:(0,f.jsx)(i.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[90px]",type:"button",label:le("Add"),onClick:()=>ga(),disabled:De.loading})})]})}),Ae&&(0,f.jsx)("div",{className:"mx-5 py-5",children:(0,f.jsx)("h6",{className:"error",children:"This user has been chosen for all locations."})})]})})})}),(0,f.jsx)(T.A,{rejectedUserPopup:ve,rejectedUsersData:fe,oncancel:ba}),ce&&(0,f.jsx)(m.A,{warningText:r.jl,onClose:ma,action:()=>pa(),show:ce}),Ge&&(0,f.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(Ge?"":"hidden"),children:(0,f.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(Ge?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,f.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,f.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,f.jsx)("h6",{className:"mb-6 font-bold leading-normal text-center md:mb-10",children:le("Before you upload the list, the roles should be created")}),(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,f.jsxs)("label",{id:"importCsv",className:"btn btn-primary btn-normal w-full md:w-auto md:min-w-[160px] mb-0",children:["Okay",(0,f.jsx)("input",{id:"importCsv",type:"file",name:"importCsv",multiple:!0,ref:te,className:"hidden focus:bg-transparent",accept:".csv",onChange:e=>ha(e)},(0,j.A)())]}),(0,f.jsx)(i.A,{className:"btn-secondary btn-normal w-full md:w-auto md:min-w-[160px]",label:le("Cancel"),onClick:ba,title:"".concat(le("Cancel"))})]})]})})})}),ze&&(0,f.jsx)(m.A,{warningText:r.lN,onClose:_a,action:wa,show:ze,disabled:null===Pe||void 0===Pe?void 0:Pe.loading,isLoading:null===Pe||void 0===Pe?void 0:Pe.loading})]})}}}]);
//# sourceMappingURL=6685.73e72996.chunk.js.map