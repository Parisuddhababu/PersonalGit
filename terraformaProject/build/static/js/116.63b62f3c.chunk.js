"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[116],{90870:(e,a,n)=>{n.d(a,{F:()=>i,h:()=>r});var t,l,s=n(57528),o=n(70459);const r=(0,o.J1)(t||(t=(0,s.A)(["\n  mutation CreateCompanyBranch($companyBranchData: CreateCompanyBranchDto!) {\n    createCompanyBranch(companyBranchData: $companyBranchData) {\n      message\n      data {\n        uuid\n      }\n    }\n  }\n"]))),i=(0,o.J1)(l||(l=(0,s.A)(["\n  mutation DeleteSubscriberEmployeeUser($subscriberUserId: String!, $userData: DeleteUserDto) {\n    deleteSubscriberEmployeeUser(subscriberUserId: $subscriberUserId, userData: $userData) {\n      message\n    }\n  }\n"])))},96789:(e,a,n)=>{n.d(a,{En:()=>u,IE:()=>b,Qm:()=>v,ev:()=>p,hm:()=>m,jB:()=>h});var t,l,s,o,r,i,d=n(57528),c=n(70459);const u=(0,c.J1)(t||(t=(0,d.A)(["\n  query GetCompanyBranches($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!, $companyId: String!) {\n    getCompanyBranches(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search, companyId: $companyId) {\n      message\n      data {\n        count\n        branches {          \n          uuid\n          branch {\n            location\n            uuid\n          }\n        }\n      }\n    }\n  }\n"]))),m=(0,c.J1)(l||(l=(0,d.A)(["\n  query GetCompanyTenantDetails($companyId: String!, $branchId: String!) {\n    getCompanyTenantDetails(company_id: $companyId, branch_id: $branchId) {\n      message\n      data {\n        email\n        company_name\n        website\n        authorized_person\n        industry_type\n        type        \n        phone_number\n        country_code\n        location\n        total_employees\n      }\n    }\n  }\n"]))),p=(0,c.J1)(s||(s=(0,d.A)(["\nquery GetCompanyContractorDetails($branchId: String!, $companyId: String!) {\n  getCompanyContractorDetails(branch_id: $branchId, company_id: $companyId) {\n    message\n    data {\n      authorized_person\n      company_name\n      email\n      industry_type\n      location\n      total_employees\n      phone_number\n      country_code\n      type\n      website\n    }\n  }\n}\n"]))),v=(0,c.J1)(o||(o=(0,d.A)(["\nquery GetCompanyTenantEmployeeList($userData: GetSubscriberDto!) {\n  getCompanyTenantEmployeeList(userData: $userData) {\n    data {\n      employee {\n        email\n        uuid\n        status\n        first_name\n        last_name\n        phone_number\n        country_code {\n          name\n          id\n          uuid\n          countryCode\n          phoneCode\n        }\n        department\n        user_type\n        company_id {\n          uuid\n          name\n          description\n          type\n          attachments          \n          website_url          \n          industryType {\n            name\n            uuid\n            description\n          }\n        }\n      }\n      count\n    }\n  }\n}\n"]))),h=(0,c.J1)(r||(r=(0,d.A)(["\nquery GetCompanyContractorsList($userData: GetSubscriberDto!) {\n  getCompanyContractorsList(userData: $userData) {\n    message\n    data {\n      employee {\n        email\n        uuid\n        status\n        first_name\n        last_name\n        phone_number\n        country_code {         \n          uuid\n          name\n          phoneCode\n        }        \n        department\n        user_type\n        company_id {\n          uuid\n          name\n          description\n          type\n          attachments\n          website_url          \n          industryType {\n            uuid\n            name            \n          }\n          tenantContractorType {\n            uuid\n            name            \n            type\n          }\n        }\n        user_roles {\n          uuid\n          role_id {\n            uuid\n            name\n            description\n            status\n          }\n        }\n      }\n      count\n    }\n  }\n}\n"]))),b=(0,c.J1)(i||(i=(0,d.A)(["\n  query GetUserById($userId: String!) {\n    getUserById(userId: $userId) {\n      message\n      data {\n        user {\n          country_code {\n            countryCode\n            name\n            phoneCode\n            uuid\n          }\n          position\n          email\n          educational_interests\n          first_name\n          last_name\n          user_type\n          is_required_reset_password\n          organization\n          phone_number\n          preferred_language\n          profile_picture\n          role_name\n          uuid\n          pronounce\n          reporting_manager_id {\n            uuid\n            profile_picture\n            last_name\n            first_name\n            location\n            organization\n          }\n          department\n          location\n        }\n        location\n        role_id {\n          name\n          status\n          uuid\n        }\n        role\n      }\n    }\n  }\n"])))},10116:(e,a,n)=>{n.r(a),n.d(a,{default:()=>P});var t=n(65043),l=n(92073),s=n(41290),o=n(74117),r=n(13960),i=n(41709),d=n(70579);const c=function(e){let{companyId:a,branchId:n,onImportCallBack:c}=e;const u=(0,t.useRef)(null),{t:m}=(0,o.Bd)(),[p,v]=(0,t.useState)(!1),[h,b]=(0,t.useState)(!1),[x,f]=(0,t.useState)({successCount:0,rejectCount:0,totalCount:0,rejectedUsers:[]}),y=(0,t.useCallback)((async e=>{b(!1);const t=e.currentTarget.files;await(0,r.gv)({files:t,companyId:a,branchId:n,onImportCallBack:c,setRejectedUserPopup:v,setRejectedUsersData:f}),u.current&&(u.current.value="")}),[a,n]),N=(0,t.useCallback)((()=>{b((e=>!e))}),[h]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"bg-border-secondary px-5 py-5 md:py-[36px] lg:py-[50px] h-full rounded-xl border border-solid border-border-light-blue-shade flex flex-col items-center",children:[(0,d.jsxs)("div",{className:"mb-5 md:mb-[30px]",children:[(0,d.jsx)("p",{className:"font-bold text-center",children:"You can import your employees details by clicking import button."}),(0,d.jsx)("p",{className:"font-bold text-center",children:"It supports CSV format."})]}),(0,d.jsx)(s.A,{className:"btn btn-primary text-white whitespace-nowrap w-[220px]",type:"button",label:"Import Employees List",onClick:()=>N(),title:"Import Employee List"})]}),(0,d.jsx)(i.A,{rejectedUserPopup:p,rejectedUsersData:x,oncancel:()=>{b(!1),v(!1)}}),h&&(0,d.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(h?"":"hidden"),children:(0,d.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(h?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,d.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,d.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,d.jsx)("h6",{className:"mb-6 font-bold leading-normal text-center md:mb-10",children:m("Before you upload the list, the roles should be created")}),(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,d.jsxs)("label",{id:"importCsv",className:"btn btn-primary btn-normal w-full md:w-auto md:min-w-[160px] mb-0",children:["Okay",(0,d.jsx)("input",{id:"importCsv",type:"file",name:"importCsv",multiple:!0,ref:u,className:"hidden focus:bg-transparent",accept:".csv",onChange:e=>y(e)},(0,l.A)())]}),(0,d.jsx)(s.A,{className:"btn-secondary btn-normal w-full md:w-auto md:min-w-[160px]",label:m("Cancel"),onClick:oncancel,title:"".concat(m("Cancel"))})]})]})})})})]})};var u=n(42145),m=n(79456),p=n(73216),v=n(75214);const h=function(e){let{companyId:a,branchId:n}=e;const t=(0,p.Zp)(),l=(0,m.wA)();return(0,d.jsxs)("div",{className:"bg-border-secondary px-5 py-5 md:py-[36px] lg:py-[50px] h-full rounded-xl border border-solid border-border-light-blue-shade flex flex-col items-center",children:[(0,d.jsxs)("div",{className:"mb-5 md:mb-[30px]",children:[(0,d.jsx)("p",{className:"font-bold text-center",children:"No employees has been added yet."}),(0,d.jsx)("p",{className:"font-bold text-center",children:"Please add employees by clicking Add new button."})]}),(0,d.jsx)("button",{className:"btn btn-primary text-white whitespace-nowrap w-[160px] ",type:"button",onClick:()=>(l((0,v.NL)(1)),void t("/".concat(u.bw.app,"/").concat(u.bw.createNewAccount,"/?company_uuid=").concat(a,"&branch_id=").concat(n,"&tenant-details-page=true"))),title:"Add New",children:"Add New"})]})};const b=function(){var e,a,n,t;const{t:l}=(0,o.Bd)(),{getCompanyTenantDetails:s}=(0,m.d4)((e=>e.tenantDetails)),r=(null===s||void 0===s||null===(e=s.email)||void 0===e?void 0:e.length)>0&&(null===s||void 0===s||null===(a=s.email)||void 0===a?void 0:a.join(", ")),i=(null===s||void 0===s||null===(n=s.authorized_person)||void 0===n?void 0:n.length)>0&&(null===s||void 0===s||null===(t=s.authorized_person)||void 0===t?void 0:t.join(", "));return(0,d.jsxs)("div",{className:"p-3 border border-border-primary rounded-xl bg-light-blue md:p-",children:[(0,d.jsx)("h6",{className:"mb-3 leading-7 md:mb-5",children:null===s||void 0===s?void 0:s.company_name}),(0,d.jsxs)("div",{className:"flex flex-wrap justify-between gap-y-3 md:gap-y-5",children:[(0,d.jsxs)("p",{className:"w-full md:w-[calc(50%-10px)]",children:[l("Type: "),(0,d.jsx)("span",{className:"block font-bold lg:inline-block",children:"1"==(null===s||void 0===s?void 0:s.type)?"Tenant":"Contractor"})]}),(0,d.jsxs)("p",{className:"w-full md:w-[calc(50%-10px)]",children:[l("Location: "),(0,d.jsx)("span",{className:"block font-bold lg:inline-block",children:null===s||void 0===s?void 0:s.location})]}),(0,d.jsxs)("p",{className:"w-full md:w-[calc(50%-10px)]",children:[l("Authorized Person: "),(0,d.jsx)("span",{className:"block font-bold lg:inline-block",children:i})]}),(0,d.jsxs)("p",{className:"w-full md:w-[calc(50%-10px)]",children:[l("Contact Information: "),(0,d.jsxs)("span",{className:"block font-bold lg:inline-block",children:[" ",(0,u.lb)(null===s||void 0===s?void 0:s.phone_number,null===s||void 0===s?void 0:s.country_code)]})]}),(null===s||void 0===s?void 0:s.website)&&(0,d.jsxs)("p",{className:"w-full md:w-[calc(50%-10px)]",children:[l("Website: "),(0,d.jsx)("span",{className:"block font-bold break-all lg:inline-block",children:null===s||void 0===s?void 0:s.website})]}),(0,d.jsxs)("p",{className:"w-full md:w-[calc(50%-10px)]",children:[l("Employees: "),(0,d.jsx)("span",{className:"block font-bold lg:inline-block",children:null===s||void 0===s?void 0:s.total_employees})]}),(0,d.jsxs)("p",{className:"w-full md:w-[calc(50%-10px)]",children:[l("Email ID: "),(0,d.jsx)("span",{className:"block font-bold break-all lg:inline-block",children:r})]})]})]})};var x=n(31881),f=n(88250),y=n(77654),N=n(33556),g=n(64526),j=n(32254),C=n(8848),w=n(34764),_=n(63516),S=n(90870),I=n(96789),A=n(9852),k=n(75289),B=n(86213),T=n(77578),E=n(12209),D=n(5937),U=(n(15675),n(59140),n(81410));const L=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return a.filter(Boolean).length>0?a.filter(Boolean).join(" "):null};function R(e){return(0,d.jsx)("span",{className:L("".concat(["text-white text-base bg-black invisible transition-opacity duration-500 ease-in-out opacity-0 group-hover:opacity-100 group-hover:visible absolute z-50 px-4 py-2 left-1/2 top-8 -translate-x-1/2 w-72 sm:w-[375px] after:content-[''] after:absolute after:border-8 after:border-transparent after:border-b-black after:-top-4 after:left-2/4 after:-translate-x-1/2"]),"".concat("right"===(null===e||void 0===e?void 0:e.align)?"md:left-[calc(100%+1rem)] md:-translate-x-0 md:!top-2/4  md:after:!-left-4 md:-translate-y-1/2 md:after:!border-b-transparent md:after:!border-r-black md:after:!top-2/4  md:after:-translate-y-1/2 md:after:!translate-x-0":""),"".concat("left"===(null===e||void 0===e?void 0:e.align)?"md:right-[calc(100%+1rem)] md:-translate-x-0 md:top-2/4 md:-translate-y-1/2 md:left-auto md:after:!border-b-transparent md:after:!border-l-black md:after:!-right-4 md:after:left-auto md:after:!top-2/4 md:after:-translate-y-1/2 md:after:!translate-x-0":""),"".concat("top"===(null===e||void 0===e?void 0:e.align)?"md:top-auto md:bottom-[calc(100%+1rem)] md:after:!border-b-transparent md:after:!border-t-black md:after:!-bottom-4 md:after:top-auto":""),"".concat("none"===(null===e||void 0===e?void 0:e.align)?"hidden":"")),children:null===e||void 0===e?void 0:e.tooltipText})}const M=function(e){let{toolTipPosition:a,infoTipText:n,infoText:t,onClick:l,onLabelClick:s,type:o}=e;const r="error"===o?"#D1444B":"#76767F",i="error"===o?"text-themeRed font-bold":"text-textGrey";return(0,d.jsxs)("div",{className:"relative flex items-center mt-2 cursor-pointer group",children:["success"===o?(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:l,children:(0,d.jsx)("path",{d:"M10 20C4.477 20 0 15.523 0 10C0 4.477 4.477 0 10 0C15.523 0 20 4.477 20 10C20 15.523 15.523 20 10 20ZM10 18C12.1217 18 14.1566 17.1571 15.6569 15.6569C17.1571 14.1566 18 12.1217 18 10C18 7.87827 17.1571 5.84344 15.6569 4.34315C14.1566 2.84285 12.1217 2 10 2C7.87827 2 5.84344 2.84285 4.34315 4.34315C2.84285 5.84344 2 7.87827 2 10C2 12.1217 2.84285 14.1566 4.34315 15.6569C5.84344 17.1571 7.87827 18 10 18V18ZM9.003 14L4.76 9.757L6.174 8.343L9.003 11.172L14.659 5.515L16.074 6.929L9.003 14Z",fill:"#248565"})}):(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:l,children:(0,d.jsx)("path",{d:"M8 15.5C3.85775 15.5 0.5 12.1423 0.5 8C0.5 3.85775 3.85775 0.5 8 0.5C12.1423 0.5 15.5 3.85775 15.5 8C15.5 12.1423 12.1423 15.5 8 15.5ZM8 14C9.5913 14 11.1174 13.3679 12.2426 12.2426C13.3679 11.1174 14 9.5913 14 8C14 6.4087 13.3679 4.88258 12.2426 3.75736C11.1174 2.63214 9.5913 2 8 2C6.4087 2 4.88258 2.63214 3.75736 3.75736C2.63214 4.88258 2 6.4087 2 8C2 9.5913 2.63214 11.1174 3.75736 12.2426C4.88258 13.3679 6.4087 14 8 14ZM7.25 10.25H8.75V11.75H7.25V10.25ZM8.75 9.01625V9.5H7.25V8.375C7.25 8.17609 7.32902 7.98532 7.46967 7.84467C7.61032 7.70402 7.80109 7.625 8 7.625C8.21306 7.62499 8.42173 7.56447 8.60174 7.4505C8.78175 7.33652 8.9257 7.17377 9.01683 6.98119C9.10796 6.7886 9.14253 6.5741 9.11651 6.36263C9.0905 6.15117 9.00497 5.95144 8.86987 5.78668C8.73478 5.62193 8.55568 5.49892 8.35342 5.43198C8.15115 5.36503 7.93403 5.3569 7.72732 5.40853C7.52061 5.46016 7.33281 5.56942 7.18577 5.72361C7.03874 5.8778 6.93851 6.07057 6.89675 6.2795L5.42525 5.98475C5.51647 5.52881 5.72713 5.10528 6.03569 4.75744C6.34425 4.4096 6.73964 4.14994 7.18144 4.00499C7.62325 3.86004 8.09561 3.83501 8.55026 3.93246C9.00491 4.02991 9.42553 4.24634 9.76911 4.55962C10.1127 4.8729 10.3669 5.2718 10.5058 5.71555C10.6447 6.15929 10.6633 6.63196 10.5596 7.08523C10.456 7.5385 10.2338 7.95612 9.91589 8.2954C9.59794 8.63467 9.1956 8.88343 8.75 9.01625Z",fill:"".concat("success"===o?"#248565":r)})}),(0,d.jsx)(R,{align:a,tooltipText:n}),(0,d.jsx)("label",{htmlFor:"infoText",onClick:s,className:"text-xs ml-2.5 cursor-pointer ".concat("success"===o?"text-themeGreen font-bold":i),children:t})]})};var $=n(43114),F=n(75812);const P=function(){var e,a,n,L,R,P,O,z,J,V,q,G,Z,H,Q,Y,W,K;const X=(0,m.wA)(),{t:ee}=(0,o.Bd)(),ae=(0,p.Zp)(),ne=(0,t.useRef)(null),te=localStorage.getItem("authToken"),le=te&&(0,T.A)(te),se=new URLSearchParams(location.search),oe=se.get("company_uuid"),re=se.get("branch_id"),[ie,de]=(0,x.n)(S.h),[ce,ue]=(0,x.n)(S.F),{data:me,refetch:pe}=(0,f.I)(I.En,{variables:{limit:10,page:1,sortField:"createdAt",sortOrder:"descend",search:"",companyId:oe}}),{refetch:ve}=(0,f.I)(I.hm,{skip:!0}),[he,be]=(0,t.useState)([]),[xe,fe]=(0,t.useState)(!1),[ye,Ne]=(0,t.useState)(!1),[ge,je]=(0,t.useState)(!1),{tenant:Ce}=(0,m.d4)((e=>e.rolesManagement)),{userProfileData:we}=(0,m.d4)((e=>e.userProfile)),[_e,Se]=(0,t.useState)({successCount:0,rejectCount:0,totalCount:0,rejectedUsers:[]}),[Ie,Ae]=(0,t.useState)({uuid:"",userType:""}),[ke,Be]=(0,t.useState)(!1),{data:Te,refetch:Ee}=(0,f.I)(D.B,{variables:{companyId:""}}),[De,Ue]=(0,t.useState)([]),[Le,Re]=(0,t.useState)(!1),[Me,$e]=(0,t.useState)([]),[Fe,Pe]=(0,x.n)($.tq),[Oe,ze]=(0,t.useState)(!1),[Je,Ve]=(0,t.useState)({}),qe=[{name:ee("Sr.No"),sortable:!1},{name:ee("Employee First Name"),sortable:!0,fieldName:"first_name"},{name:ee("Employee Last Name"),sortable:!0,fieldName:"last_name"},{name:ee("Department"),sortable:!0,fieldName:"department"},{name:ee("User Type"),sortable:!0,fieldName:"user.user_type"},{name:ee("email"),sortable:!0,fieldName:"email"},{name:ee("Phone Number"),sortable:!0,fieldName:"phone_number"},{name:ee("Status"),sortable:!0,fieldName:"user.status"}],[Ge,Ze]=(0,t.useState)(!1),[He,Qe]=(0,t.useState)(!1),[Ye,We]=(0,t.useState)(!1),{getCompanyTenantDetails:Ke}=(0,m.d4)((e=>e.tenantDetails)),Xe=(0,_.Wx)({initialValues:{locationName:"",userLocation:""},onSubmit:()=>{Ze(!1),Qe(!1)}});(0,t.useEffect)((()=>{me&&pe()}),[]),(0,t.useEffect)((()=>{Te&&Ee()}),[]),(0,t.useEffect)((()=>{var e,a,n,t,l,s,o,r;const i=[];let d="";if(re)d=re;else if(null!==me&&void 0!==me&&null!==(e=me.getCompanyBranches)&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&null!==(n=a.branches)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&null!==(l=t.branch)&&void 0!==l&&l.uuid){var c,u,m,p,v;d=null===me||void 0===me||null===(c=me.getCompanyBranches)||void 0===c||null===(u=c.data)||void 0===u||null===(m=u.branches)||void 0===m||null===(p=m[0])||void 0===p||null===(v=p.branch)||void 0===v?void 0:v.uuid}null===me||void 0===me||null===(s=me.getCompanyBranches)||void 0===s||null===(o=s.data)||void 0===o||null===(r=o.branches)||void 0===r||r.map((e=>{var a,n;i.push({name:null===e||void 0===e||null===(a=e.branch)||void 0===a?void 0:a.location,key:null===e||void 0===e||null===(n=e.branch)||void 0===n?void 0:n.uuid})})),be(i),Xe.setFieldValue("userLocation",d)}),[me,re]);const ea=null===me||void 0===me||null===(e=me.getCompanyBranches)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.branches.map((e=>{var a;return null===e||void 0===e||null===(a=e.branch)||void 0===a?void 0:a.uuid})),{data:aa,refetch:na}=(0,f.I)(I.Qm,{skip:!Xe.values.userLocation,fetchPolicy:"no-cache",variables:{userData:{limit:10,page:1,sortField:"createdAt",sortOrder:"descend",search:"",company_id:oe,branch_id:Xe.values.userLocation}}}),[ta,la]=(0,t.useState)({limit:10,page:1,sortField:"createdAt",sortOrder:"descend",search:"",company_id:oe,branch_id:ea,index:0});(0,t.useEffect)((()=>{Xe.values.userLocation&&((0,u.Be)(Xe.values.userLocation),ve({companyId:oe,branchId:Xe.values.userLocation}).then((e=>{var a,n;X((0,A.uR)(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.getCompanyTenantDetails)||void 0===n?void 0:n.data))})).catch((e=>{g.oR.error(e.networkError.result.errors[0].message)})))}),[Xe.values.userLocation]);const sa=(0,t.useCallback)((()=>{Ze(!1),Xe.setFieldValue("locationName",""),Qe(!1)}),[]),oa=(0,t.useCallback)((()=>{Ze(!0),Qe(!0)}),[]);(0,t.useEffect)((()=>{if(Xe.values.userLocation){const{index:e,...a}=ta;na({userData:{...a,branch_id:Xe.values.userLocation}}).catch((e=>g.oR.error(e)))}}),[ta,Xe.values.userLocation]);const[ra,ia]=(0,t.useState)(ta.limit),da=(null===aa||void 0===aa||null===(n=aa.getCompanyTenantEmployeeList)||void 0===n||null===(L=n.data)||void 0===L?void 0:L.count)||0,ca=Math.ceil(da/ra),ua=(0,t.useCallback)((e=>{const a={...ta,page:e,index:(e-1)*ta.limit};la(a),j.A.saveState("filterTenantUserManagement",JSON.stringify(a))}),[]);(0,t.useEffect)((()=>{ia(ta.limit)}),[ta.limit]);const ma=(0,t.useCallback)((()=>{ie({variables:{companyBranchData:{company_id:oe,branch_id:Xe.values.locationName}}}).then((e=>{const a=e.data.courseData;g.oR.success(null===a||void 0===a?void 0:a.message),pe(),Ze(!1),Xe.resetForm()})).catch((e=>{var a,n,t,l;g.oR.error(null===e||void 0===e||null===(a=e.networkError)||void 0===a||null===(n=a.result)||void 0===n||null===(t=n.errors)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.message),Ze(!1)}))}),[Xe.values.locationName]),pa=(0,t.useCallback)(((e,a)=>{Ne(!0),Ae({uuid:e,userType:a})}),[]),va=(0,t.useCallback)(((e,a)=>{ae("/".concat(u.bw.app,"/").concat(u.bw.userDetails,"/?uuid=").concat(e,"&branchId=").concat(Xe.values.userLocation,"&company_id=").concat(oe,"&userCompanyType=1&Is_subAdmin=").concat(a===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN))}),[Xe.values.userLocation]),ha=(0,t.useCallback)(((e,a)=>{var n;ae("/".concat(u.bw.app,"/").concat(u.bw.userDetails,"/?uuid=").concat(e,"&read_Data=true&company_id=").concat(oe,"&branchId=").concat(null===Xe||void 0===Xe||null===(n=Xe.values)||void 0===n?void 0:n.userLocation,"&userCompanyType=1&Is_subAdmin=").concat(a===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN))}),[Xe.values.userLocation]),ba=(0,t.useCallback)((()=>{Ne(!1)}),[]);(0,t.useEffect)((()=>{var e,a;(null===aa||void 0===aa||null===(e=aa.getCompanyTenantEmployeeList)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.count)>0&&Be(!0)}),[null===aa||void 0===aa||null===(R=aa.getCompanyTenantEmployeeList)||void 0===R||null===(P=R.data)||void 0===P?void 0:P.count]);const xa=(0,t.useCallback)((()=>{ce({variables:{subscriberUserId:null===Ie||void 0===Ie?void 0:Ie.uuid,userData:{user_type:null===Ie||void 0===Ie?void 0:Ie.userType}}}).then((e=>{var a,n;na(),ve({companyId:oe,branchId:Xe.values.userLocation}).then((e=>{var a,n;X((0,A.uR)(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.getCompanyTenantDetails)||void 0===n?void 0:n.data))})).catch((e=>{g.oR.error(e.networkError.result.errors[0].message)}));const t=e.data.courseData;g.oR.success(null===t||void 0===t?void 0:t.message),pe(),Ne(!1),0===(null===t||void 0===t||null===(a=t.getCompanyTenantEmployeeList)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.count)&&Be(!0)})).catch((e=>{var a,n,t,l;g.oR.error(null===e||void 0===e||null===(a=e.networkError)||void 0===a||null===(n=a.result)||void 0===n||null===(t=n.errors)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.message)}))}),[Ie,null===aa||void 0===aa||null===(O=aa.getCompanyTenantEmployeeList)||void 0===O||null===(z=O.data)||void 0===z?void 0:z.count]),fa=(0,t.useCallback)((e=>{la({...ta,search:e.target.value})}),[]),ya=(0,t.useCallback)((()=>{B.A.get("".concat(u.JR,"users/export-company-tenant-users-csv/?company_id=").concat(oe,"&branch_id=").concat(Xe.values.userLocation),{headers:{authorization:le?"Bearer ".concat(le):""},responseType:"blob"}).then((e=>{var a;const n=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=n,t.setAttribute("download","Tenant-Users.csv"),document.body.appendChild(t),t.click(),g.oR.success(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)})).catch((e=>{g.oR.error(e.message)}))}),[Xe.values.userLocation]),Na=(0,t.useCallback)((()=>{F.J.getList("".concat(u.JR,"media/download-csv/tenant")).then((e=>{var a;const n=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=n,t.setAttribute("download","Tenant-Sample.csv"),document.body.appendChild(t),t.click(),g.oR.success(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)})).catch((e=>{g.oR.error(e.message)}))}),[]),ga=(0,t.useCallback)((e=>{fe(e),xe||na()}),[aa]),ja=(0,t.useCallback)((async e=>{We(!1);const a=e.currentTarget.files;await(0,r.gv)({files:a,companyId:oe,branchId:re,onImportCallBack:na,setRejectedUserPopup:je,setRejectedUsersData:Se}),ne.current&&(ne.current.value="")}),[oe,Xe.values.userLocation]),Ca=()=>{je(!1),We(!1)},wa=null!==(J=null===we||void 0===we||null===(V=we.getProfile)||void 0===V||null===(q=V.data)||void 0===q?void 0:q.user_type)&&void 0!==J?J:"";(0,t.useEffect)((()=>{if(null!==Te&&void 0!==Te&&Te.subscriberLocations){var e,a;const n=[];null===Te||void 0===Te||null===(e=Te.subscriberLocations)||void 0===e||null===(a=e.data)||void 0===a||a.map((e=>{n.push({name:e.location,key:null===e||void 0===e?void 0:e.uuid})})),Ue(n)}}),[Te]),(0,t.useEffect)((()=>{if((null===he||void 0===he?void 0:he.length)>0&&(null===De||void 0===De?void 0:De.length)>0){const e=null===De||void 0===De?void 0:De.filter((e=>!he.some((a=>a.key===e.key))));$e(e),Re(0===(null===e||void 0===e?void 0:e.length))}}),[he,De]);const _a=(0,t.useCallback)((e=>{ze(!0),Ve(e)}),[]),Sa=(0,t.useCallback)((()=>{Fe({variables:{subscriberUserId:Je.uuid}}).then((e=>{const a=e.data;g.oR.success(a.activeInactiveEmployee.message),ze(!1),na()})).catch((e=>{var a,n,t;g.oR.error(null===e||void 0===e||null===(a=e.networkError)||void 0===a||null===(n=a.result)||void 0===n||null===(t=n.errors[0])||void 0===t?void 0:t.message)}))}),[Oe]),Ia=(0,t.useCallback)((()=>{ze(!1)}),[]),Aa=(0,t.useCallback)((()=>{We((e=>!e))}),[Ye]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(E.A,{headerActionConst:()=>{var e;return(0,d.jsx)(d.Fragment,{children:wa===u.ve.SUBSCRIBER_ADMIN&&(null===Ce||void 0===Ce?void 0:Ce.write)&&(0,d.jsxs)("div",{className:"flex w-full gap-3 xmd:gap-5 lg:w-auto ".concat(xe?"pointer-events-none":""),children:[(0,d.jsx)(s.A,{className:"btn-normal btn-secondary whitespace-nowrap",label:ee("+ Add new location"),onClick:oa}),(0,d.jsx)(C.A,{placeholder:"Select Location",className:"w-[212px] -mt-2 max-md:mr-2",label:"",inputIcon:(0,d.jsx)(N.T5,{fontSize:"18"}),name:"userLocation",onChange:Xe.handleChange,value:Xe.values.userLocation,error:null===Xe||void 0===Xe||null===(e=Xe.errors)||void 0===e?void 0:e.userLocation,options:he,id:"userLocation"})]})})}}),xe&&(0,d.jsx)(U.A,{}),(0,d.jsx)(b,{}),!ke&&(wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN?wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN:null===Ce||void 0===Ce?void 0:Ce.write)&&(0,d.jsxs)("div",{className:"flex gap-5 md:gap-[30px] flex-wrap",children:[(0,d.jsx)("div",{className:"w-full lg:w-[calc(50%-15px)]",children:(0,d.jsx)(h,{companyId:oe,branchId:Xe.values.userLocation})}),(0,d.jsx)("div",{className:"w-full lg:w-[calc(50%-15px)]",children:(0,d.jsx)(c,{companyId:oe,branchId:Xe.values.userLocation,onImportCallBack:ga})})]}),(0,d.jsxs)("div",{className:"flex justify-end pb-5 md:pb-7",children:[(0,d.jsx)(M,{toolTipPosition:"left",infoTipText:"i Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sit quaerat iste, neque alias natus praesentium cum magnam ut beatae suscipit et nemo, earum autem, eligendi temporibus deserunt aspernatur asperiores corporis."}),(0,d.jsx)("button",{className:"btn bg-default btn-secondary btn-normal w-full md:w-[220px] ",type:"button",onClick:()=>Na(),title:"Download",children:"Download Sample CSV"})]}),ke&&(0,d.jsxs)("div",{className:"p-5 border border-solid rounded-xl border-border-primary",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center justify-between mb-5",children:[(0,d.jsxs)("h6",{className:"w-full mb-5 md:w-auto",children:[null===Ke||void 0===Ke?void 0:Ke.company_name," ",ee("Employee Details")]}),(0,d.jsxs)("div",{className:"flex flex-wrap w-full gap-y-3 gap-x-4 2xl:gap-5 md:w-auto",children:[(wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN?wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN:null===Ce||void 0===Ce?void 0:Ce.write)&&(0,d.jsx)("button",{className:"btn btn-primary text-white whitespace-nowrap w-full sm:w-[160px] ",type:"button",onClick:()=>(X((0,v.NL)(1)),void ae("/".concat(u.bw.app,"/").concat(u.bw.createNewAccount,"/?company_uuid=").concat(oe,"&branch_id=").concat(Xe.values.userLocation,"&tenant-details-page=true"))),children:"Add New"}),(wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN?wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN:null===Ce||void 0===Ce?void 0:Ce.write)&&(0,d.jsxs)("button",{className:"w-full btn btn-gray sm:w-[260px] p-3.5",onClick:()=>Aa(),children:["Import Employees List  ",(0,d.jsx)(N.OP,{className:"order-2 ml-auto"})]}),(0,d.jsxs)("button",{className:"w-full btn btn-gray sm:w-[260px] p-3.5",onClick:()=>ya(),children:["Export Employees List  ",(0,d.jsx)(N.OP,{className:"order-2 ml-auto"})]}),(0,d.jsx)(w.A,{placeholder:ee("Search Employee"),className:"max-sm:w-full",type:"text",id:"table-search",value:ta.search,onChange:fa,inputIcon:(0,d.jsx)(N.vj,{fontSize:"18"})}),(0,d.jsx)("div",{className:"w-full sm:w-[150px]",children:(0,d.jsx)(C.A,{className:"w-full -mt-2",label:"",inputIcon:(0,d.jsx)(N.Jh,{className:"order-2"}),name:"filterDrpData",onChange:e=>{const a=e.target.value,[n,t]=a.split(":");la({...ta,sortField:n,sortOrder:t})},value:ta.sortField+":"+ta.sortOrder,error:"",options:u.Qi,id:"filterDrpData"})})]})]}),(0,d.jsxs)("div",{className:"overflow-auto custom-dataTable",children:[(0,d.jsxs)("table",{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[null===qe||void 0===qe?void 0:qe.map(((e,a)=>(0,d.jsx)("th",{scope:"col",className:"whitespace-nowrap ".concat(e.name==ee("Sr.No")?"justify-start pl-7":""),children:(0,d.jsxs)("div",{className:"flex items-center",children:[e.name,e.sortable&&(0,d.jsxs)("button",{className:"cursor-pointer",onClick:()=>{return a=e.fieldName,void la({...ta,sortField:a,sortOrder:"ascend"===ta.sortOrder?"descend":"ascend"});var a},type:"button",children:[(""===ta.sortOrder||ta.sortField!==e.fieldName)&&(0,d.jsx)(N.xs,{className:"fill-white"}),"ascend"===ta.sortOrder&&ta.sortField===e.fieldName&&(0,d.jsx)(N.xD,{className:"ml-1 fill-white"}),"descend"===ta.sortOrder&&ta.sortField===e.fieldName&&(0,d.jsx)(N.xR,{className:"ml-1 fill-white"})]})]})},"".concat(a+1)))),(0,d.jsx)("th",{scope:"col",children:(0,d.jsx)("div",{className:"flex items-center",children:ee("Action")})})]})}),(0,d.jsx)("tbody",{children:null===aa||void 0===aa||null===(G=aa.getCompanyTenantEmployeeList)||void 0===G||null===(Z=G.data)||void 0===Z||null===(H=Z.employee)||void 0===H?void 0:H.map(((e,a)=>{const n=(null===ta||void 0===ta?void 0:ta.index)+a+1;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"text-left pl-7",scope:"row",children:n}),(0,d.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.first_name}),(0,d.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.last_name}),(0,d.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.department}),(0,d.jsx)("td",{className:"text-left border-none",children:(0,d.jsx)("div",{className:"flex",children:(null===e||void 0===e?void 0:e.user_type)!==u.ve.SUBSCRIBER_TENANT_SUB_ADMIN?(0,d.jsx)("span",{className:"text-bright-green-shade",children:"User"}):(0,d.jsx)("span",{className:"text-error",children:"Sub Admin"})})}),(0,d.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.email}),(0,d.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.phone_number}),(0,d.jsx)("td",{className:"text-left border-none",children:(0,d.jsx)("div",{className:"flex",children:(null===e||void 0===e?void 0:e.status)===u.UP.ACTIVE?(0,d.jsx)("span",{className:"text-bright-green-shade",children:"Active"}):(0,d.jsx)("span",{className:"text-error",children:"Inactive"})})}),(0,d.jsxs)("td",{className:"flex gap-2 text-left",children:[(wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN?wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN:null===Ce||void 0===Ce?void 0:Ce.read)&&(0,d.jsx)(s.A,{className:"mx-1 mr-2 bg-transparent btn-default",onClick:()=>ha(null===e||void 0===e?void 0:e.uuid,null===e||void 0===e?void 0:e.user_type),label:"",title:"",children:(0,d.jsx)(N.kU,{className:"text-success"})}),(wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN?wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN:null===Ce||void 0===Ce?void 0:Ce.update)&&(0,d.jsx)(s.A,{className:"mr-2 bg-transparent btn-default",onClick:()=>va(null===e||void 0===e?void 0:e.uuid,null===e||void 0===e?void 0:e.user_type),label:"",title:"",children:(0,d.jsx)(N.ff,{})}),(wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN?wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN:null===Ce||void 0===Ce?void 0:Ce.delete)&&(0,d.jsx)(s.A,{className:"mr-2 bg-transparent cursor-pointer btn-default",onClick:()=>pa(null===e||void 0===e?void 0:e.uuid,null===e||void 0===e?void 0:e.user_type),label:"",disabled:null===ue||void 0===ue?void 0:ue.loading,title:"",children:(0,d.jsx)(N.lM,{className:"fill-error"})}),(0,d.jsx)("div",{className:"flex justify-center",children:(wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN?wa===u.ve.SUBSCRIBER_TENANT_SUB_ADMIN:null===Ce||void 0===Ce?void 0:Ce.update)&&(0,d.jsx)("span",{className:"font-medium text-blue-600 hover:underline",children:(0,d.jsxs)("label",{className:"relative inline-flex items-center mb-0 cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",className:"sr-only peer",value:null===e||void 0===e?void 0:e.status,onChange:()=>_a(e),checked:(null===e||void 0===e?void 0:e.status)===u.UP.ACTIVE}),(0,d.jsx)("div",{className:"w-[30px] h-[14px] bg-secondary rounded-full peer peer-focus:ring-3 peer-focus:ring-red-200 peer-checked:after:translate-x-full peer-checked:after:border-white after:content- after:absolute after:top-[-1px] after:left-0 after:bg-white after:drop-shadow-outline-2 after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})})})]})]},e.uuid)}))})]}),(0===(null===aa||void 0===aa||null===(Q=aa.getCompanyTenantEmployeeList)||void 0===Q||null===(Y=Q.data)||void 0===Y?void 0:Y.count)||null===(null===aa||void 0===aa||null===(W=aa.getCompanyTenantEmployeeList)||void 0===W?void 0:W.data))&&(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsx)("div",{children:ee("No Data")})})]}),(0,d.jsxs)("div",{className:"flex flex-wrap items-center mt-2",children:[(0,d.jsxs)("div",{className:"flex items-center mr-3 md:mr-7",children:[(0,d.jsx)("span",{className:"text-sm font-normal text-gray-700 whitespace-nowrap",children:ee("Per Page")}),(0,d.jsx)("select",{className:"border border-border-primary rounded-xl ml-2 px-3 text-sm py-1.5 text-gray-500 w-[70px] h-[36px] appearance-none bg-white",onChange:e=>(e=>{ia(Number(e));const a={...ta,limit:parseInt(e),page:1,search:"",index:0};la(a),j.A.saveState("filterTenantUserManagement",JSON.stringify(a))})(e.target.value),value:ta.limit,children:null===u.aj||void 0===u.aj?void 0:u.aj.map((e=>(0,d.jsx)("option",{children:e},e)))})]}),(0,d.jsx)(y.A,{currentPage:ta.page,totalPages:ca,onPageChange:ua,recordsPerPage:ra})]})]}),Ge&&(0,d.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(Ge?"":"hidden"),children:(0,d.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(He?"":"opacity-0 transform -translate-y-full scale-150 "," transition-all duration-300 "),children:(0,d.jsx)("div",{className:"w-full mx-5 sm:max-w-[400px]",children:(0,d.jsxs)("div",{className:"relative bg-white rounded-xl",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b md:py-6 bg-accents-2 rounded-t-xl",children:[(0,d.jsx)("p",{className:"text-lg font-bold md:text-xl text-baseColor",children:"Add New Location"}),(0,d.jsx)(s.A,{onClick:sa,label:ee(""),title:"".concat(ee("Close")),children:(0,d.jsx)("span",{className:"text-xl-22",children:(0,d.jsx)(N.YY,{className:"text-error"})})})]}),!Le&&(0,d.jsx)("div",{className:"w-full",children:(0,d.jsxs)("form",{onSubmit:Xe.handleSubmit,children:[(0,d.jsx)("div",{className:"p-5 max-h-[calc(100vh-260px)] overflow-auto",children:(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)(C.A,{placeholder:ee("Select Location"),className:"w-full",label:ee("Location"),inputIcon:(0,d.jsx)("span",{className:"text-xs",children:(0,d.jsx)(N.jN,{className:"fill-dark-grey"})}),onChange:Xe.handleChange,value:Xe.values.locationName,error:null===Xe||void 0===Xe||null===(K=Xe.errors)||void 0===K?void 0:K.locationName,options:Me,name:"locationName",id:"locationName",required:!0})})}),(0,d.jsx)("div",{className:"flex flex-col items-center justify-end p-5 border-t border-solid md:space-x-3 md:flex-row border-border-primary",children:(0,d.jsx)(s.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[90px]",type:"button",label:ee("Add"),onClick:()=>ma(),disabled:de.loading})})]})}),Le&&(0,d.jsx)("div",{className:"mx-5 py-5",children:(0,d.jsx)("h6",{className:"error",children:"This user has been chosen for all locations."})})]})})})}),(0,d.jsx)(i.A,{rejectedUserPopup:ge,rejectedUsersData:_e,oncancel:Ca}),Ye&&(0,d.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(Ye?"":"hidden"),children:(0,d.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(Ye?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,d.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,d.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,d.jsx)("h6",{className:"mb-6 font-bold leading-normal text-center md:mb-10",children:ee("Before you upload the list, the roles should be created")}),(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,d.jsxs)("label",{id:"importCsv",className:"btn btn-primary btn-normal w-full md:w-auto md:min-w-[160px] mb-0",children:["Okay",(0,d.jsx)("input",{id:"importCsv",type:"file",name:"importCsv",multiple:!0,ref:ne,className:"hidden focus:bg-transparent",accept:".csv",onChange:e=>ja(e)},(0,l.A)())]}),(0,d.jsx)(s.A,{className:"btn-secondary btn-normal w-full md:w-auto md:min-w-[160px]",label:ee("Cancel"),onClick:Ca,title:"".concat(ee("Cancel"))})]})]})})})}),ye&&(0,d.jsx)(k.A,{warningText:u.jl,onClose:ba,action:()=>xa(),show:ye}),Oe&&(0,d.jsx)(k.A,{warningText:u.lN,onClose:Ia,action:Sa,show:Oe,disabled:null===Pe||void 0===Pe?void 0:Pe.loading,isLoading:null===Pe||void 0===Pe?void 0:Pe.loading})]})}}}]);
//# sourceMappingURL=116.63b62f3c.chunk.js.map