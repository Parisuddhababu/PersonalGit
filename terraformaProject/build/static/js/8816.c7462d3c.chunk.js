"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[8816],{79217:(e,a,l)=>{l.d(a,{A:()=>b});var t=l(41290),s=l(33556),i=l(34764),r=l(65043),n=l(63516),o=l(92073),d=l(66925),c=l(97803),u=l(86213),m=l(55797),p=l(82485),x=(l(15675),l(59140),l(9686),l(42145)),h=l(31881),v=l(64526),f=l(74117),g=l(70579);const b=function(e){var a,l;let{playList:b,playListCallBack:y}=e;const{t:w}=(0,f.Bd)(),N=(0,r.useRef)(null),[j,C]=(0,r.useState)(!1),[A,S]=(0,r.useState)(""),k=(0,r.createRef)(),[F,_]=(0,h.n)(c.BL),[L,I]=(0,r.useState)(!1),D=(0,n.Wx)({initialValues:{playlistName:"",playListImageUploadFileName:""},onSubmit:()=>{}}),P=(0,r.useCallback)((()=>{D.values.playlistName.length>1&&D.values.playlistName.length<31&&D.values.playListImageUploadFileName&&F({variables:{playlistData:{name:D.values.playlistName,image:D.values.playListImageUploadFileName}}}).then((e=>{const a=e.data.createPlaylist;v.oR.success(null===a||void 0===a?void 0:a.message),D.resetForm(),y(!1,{refetch:!0})})).catch((e=>{var a,l,t,s;v.oR.error(null===e||void 0===e||null===(a=e.networkError)||void 0===a||null===(l=a.result)||void 0===l||null===(t=l.errors)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.message)})),D.values.playlistName.length<2&&D.setFieldError("playlistName","Playlist Name must be at least 2 characters"),D.values.playlistName.length>100&&D.setFieldError("playlistName","Playlist Name must be at most 100 characters"),0===D.values.playlistName.length&&D.setFieldError("playlistName","Please Enter Playlist Name"),D.values.playListImageUploadFileName||D.setFieldError("playListImageUploadFileName","Please upload playlist image.")}),[D]),U=(0,r.useCallback)((e=>{D.setFieldValue(e.target.name,(0,d.AW)(e))}),[]),T=(0,r.useCallback)((async()=>{const e={fileName:D.values.playListImageUploadFileName};u.A.delete("".concat(x.hV,"/remove"),{data:e}).then((()=>{D.setFieldValue("playListImageUploadFileName","")})).catch((e=>{var a,l;v.oR.error(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)}))}),[D]),R=(0,r.useCallback)((e=>{var a;let l;if(e.preventDefault(),y(!1,{refetch:!1}),e.dataTransfer?l=e.dataTransfer.files:e.target&&(l=e.target.files),l&&(null===(a=l)||void 0===a?void 0:a.length)>0){const e=l[0];if(e.type.startsWith("image/"))if(e.size>x.w3)v.oR.error("Image size must be less than 5MB"),y(!0,{refetch:!1});else{const a=new FileReader;a.onload=()=>{S(a.result),C(!0)},a.readAsDataURL(e)}else v.oR.error("Please select a valid image file"),y(!0,{refetch:!1})}N.current&&(N.current.value="")}),[]),$=()=>(0,g.jsxs)("div",{className:"flex justify-end gap-3 md:gap-5",children:[(0,g.jsx)(t.A,{className:"btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Cancel",onClick:()=>C(!1),title:"Cancel"}),(0,g.jsx)(t.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Save",disabled:L,onClick:()=>(async()=>{var e;if("undefined"!==typeof(null===(e=k.current)||void 0===e?void 0:e.cropper)){var a;await I(!0);let e=null;const l=(0,x.Si)(null===(a=k.current)||void 0===a?void 0:a.cropper.getCroppedCanvas().toDataURL(),"PlaylistProfilePreview.png"),t=new FormData;t.append("image",l),e=await(0,x.V6)(t,"courseImage"),e&&(D.setFieldValue("playListImageUploadFileName",e),y(!0,{refetch:!1})),C(!1),await I(!1)}})(),title:"Save"})]});return(0,g.jsxs)(g.Fragment,{children:[b&&(0,g.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(b?"":"hidden"),children:(0,g.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(b?"":"opacity-0 transform -translate-y-full scale-150 "," transition-all duration-300 "),children:(0,g.jsx)("div",{className:"w-full mx-5 max-w-[700px]",children:(0,g.jsxs)("div",{className:"relative bg-white rounded-xl",children:[(0,g.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 p-5 border-b bg-accents-2 rounded-t-xl",children:[(0,g.jsx)("p",{className:"text-lg font-bold md:text-xl text-baseColor",children:"Add New Playlist"}),(0,g.jsx)(t.A,{onClick:()=>{y(!1,{refetch:!1}),D.resetForm()},label:w(""),title:"".concat(w("Close")),children:(0,g.jsx)("span",{className:"text-xl-22",children:(0,g.jsx)(s.YY,{className:"text-error"})})})]}),(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsx)("div",{className:"p-5 bg-white max-h-[calc(100vh-260px)] overflow-auto",children:(0,g.jsx)(i.A,{placeholder:w("Add Name"),name:"playlistName",onChange:D.handleChange,label:w("Playlist Name"),value:D.values.playlistName,id:"playlistName",required:!0,error:D.errors.playlistName,onBlur:U})}),(0,g.jsxs)("div",{className:"w-full flex flex-col h-[176px] lg:w-[calc(50%-10px)] xl:min-w-[480px] xl:w-[calc(33.3%-14px)] mx-auto",children:[(0,g.jsxs)("label",{htmlFor:"Playlist Profile Image",className:"relative flex items-center justify-center h-full p-5 overflow-hidden bg-white border border-solid cursor-pointer rounded-xl border-border-primary hover:bg-gray-100",children:[(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center h-full overflow-hidden rounded-xl",children:[!D.values.playListImageUploadFileName&&(0,g.jsx)("span",{className:"text-xl-50",children:(0,g.jsx)(s.tu,{className:"mb-2 fill-secondary"})}),D.values.playListImageUploadFileName&&(0,g.jsx)("img",{src:"https://terraforma-staging.s3.us-west-2.amazonaws.com/"+D.values.playListImageUploadFileName,alt:"Playlist Profile Image",className:"object-fill w-full h-full"}),!D.values.playListImageUploadFileName&&(0,g.jsx)("p",{className:"text-xl text-light-grey",children:w("Upload Image")})]}),D.values.playListImageUploadFileName&&(0,g.jsx)(t.A,{className:"absolute p-[6px] rounded-full cursor-pointer top-4 right-4 md:top-5 md:right-5 bg-error",type:"button",label:"",onClick:()=>T(),title:"".concat(w("Close")),children:(0,g.jsx)(s.YY,{className:"fill-white",fontSize:"12"})}),(0,g.jsx)("input",{id:"Playlist Profile Image",type:"file",accept:".png, .jpeg",ref:N,onChange:R,className:"hidden"},(0,o.A)())]}),null!==D&&void 0!==D&&null!==(a=D.errors)&&void 0!==a&&a.playListImageUploadFileName?(0,g.jsx)("span",{className:"-mt-1 md:text-xs-15 error",children:null===D||void 0===D||null===(l=D.errors)||void 0===l?void 0:l.playListImageUploadFileName}):""]}),(0,g.jsx)("div",{className:"flex flex-col items-center justify-end p-5 border-t border-solid md:space-x-3 md:flex-row border-border-primary",children:(0,g.jsx)(t.A,{className:"btn-primary btn-normal w-full md:w-[90px]",label:w("Add"),onClick:P,type:"button",disabled:_.loading,title:"".concat(w("Add"))})})]})]})})})}),(0,g.jsx)(m.l,{className:"custom-dialog",header:"Crop Image",visible:j,style:{width:"50vw",borderRadius:"12px"},onHide:()=>C(!1),footer:()=>$(),children:A&&(0,g.jsx)(p.A,{ref:k,style:{height:400,width:"100%"},zoomTo:.5,aspectRatio:1,preview:".img-preview",src:A,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0,cropBoxResizable:!1})})]})}},18816:(e,a,l)=>{l.d(a,{A:()=>y});var t=l(33556),s=l(34764),i=l(65043),r=l(74117),n=l(85290),o=l(41290),d=l(92382),c=(l(4430),l(69078),l(73216)),u=l(42145),m=l(88250),p=l(24108),x=l(12209),h=l(64526),v=l(79217),f=l(79456),g=l(62245),b=l(70579);const y=e=>{var a,l,y,w,N,j;let{slider:C}=e;const{t:A}=(0,r.Bd)(),S=(0,c.Zp)(),[k,F]=(0,i.useState)(!1),[_,L]=(0,i.useState)(!1),[I,D]=(0,i.useState)(!1),[P,U]=(0,i.useState)([]),{data:T,refetch:R,loading:$}=(0,m.I)(p.zq,{variables:{limit:8,page:1,sortField:"createdAt",sortOrder:"descend",search:""}}),[z,q]=(0,i.useState)({limit:8,page:1,sortField:"createdAt",sortOrder:"descend",search:""}),B=(0,i.useCallback)((e=>{S("/".concat(u.bw.app,"/").concat(u.bw.allPlayListCourse,"/?playlist_id=").concat(e))}),[]);(0,i.useEffect)((()=>{var e,a,l;const t=[];null===T||void 0===T||null===(e=T.getPlayLists)||void 0===e||null===(a=e.data)||void 0===a||null===(l=a.playlists)||void 0===l||l.map((e=>{t.push(e)})),k?(U((e=>[...e,...t])),F(null!==k&&void 0!==k?k:!k)):U(t)}),[T]);const E=(0,i.useCallback)((e=>{q({...z,search:e.target.value})}),[z]);(0,i.useEffect)((()=>{z&&(async()=>{L(!0);try{await R({...z})}catch(s){var e,a,l,t;h.oR.error(null===s||void 0===s||null===(e=s.networkError)||void 0===e||null===(a=e.result)||void 0===a||null===(l=a.errors)||void 0===l||null===(t=l[0])||void 0===t?void 0:t.message)}finally{L(!1),F(null!==k&&void 0!==k?k:!k)}})()}),[z]);const{templates:V}=(0,f.d4)((e=>e.rolesManagement)),M=(0,i.useCallback)(((e,a)=>{D(e),null!==a&&void 0!==a&&a.refetch&&R()}),[]);return(0,b.jsxs)(b.Fragment,{children:[!C&&(0,b.jsx)(x.A,{headerTitle:"Manage Course Playlists",headerActionConst:()=>(0,b.jsx)(b.Fragment,{children:(null===V||void 0===V?void 0:V.write)&&(0,b.jsx)(o.A,{className:"border-primary border btn-secondary btn ml-auto mr-2 px-6",type:"button",label:"Create new playlist",onClick:()=>{D(!0)}})})}),(0,b.jsxs)("div",{className:"p-5 border border-solid border-border-primary rounded-xl",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-5 md:gap-5",children:[(0,b.jsx)("h6",{children:A("All Playlists")}),C&&(0,b.jsx)(o.A,{className:"btn btn-normal bg-primary text-white text-xs w-full sm:w-[80px] h-[36px] whitespace-nowrap",label:A("View All"),type:"button",onClick:()=>S("/".concat(u.bw.app,"/").concat(u.bw.playlist)),title:"".concat(A("View All"))}),!C&&(0,b.jsx)(s.A,{placeholder:A("Search"),type:"text",id:"table-search",value:z.search,onChange:E,inputIcon:(0,b.jsx)(t.vj,{fontSize:"18"})})]}),!C&&(0,b.jsx)("div",{className:"flex flex-wrap justify-center gap-5 sm:justify-start",children:(null===T||void 0===T||null===(a=T.getPlayLists)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.count)>0?(0,b.jsx)(b.Fragment,{children:null===P||void 0===P?void 0:P.map((e=>(0,b.jsxs)("div",{onClick:()=>B(e.uuid),className:"2xl:w-[calc(25%-15px)] xl:w-[calc(33.3%-15px)] lg:w-[calc(50%-15px)] border-border-primary rounded-xl w-full relative flex flex-col rounded-t-xl",children:[(0,b.jsx)("picture",{className:"w-full h-[200px] block",children:(0,b.jsx)("img",{src:null!==e&&void 0!==e&&e.image&&""!==(null===e||void 0===e?void 0:e.image)?"https://terraforma-staging.s3.us-west-2.amazonaws.com/"+(null===e||void 0===e?void 0:e.image):n,alt:"image",title:"image",className:"object-cover w-full h-full rounded-t-xl"})}),(0,b.jsxs)("div",{className:"flex items-start justify-between w-full gap-2 p-5 border-b border-solid border-x border-border-primary rounded-b-xl",children:[(0,b.jsx)("span",{className:"font-bold leading-5 break-words max-w-[190px]",children:e.name}),(0,b.jsxs)("div",{className:"flex items-center min-w-[105px]",children:[(0,b.jsx)("span",{className:"text-xl-22",children:(0,b.jsx)(t._I,{className:"pt-1 fill-secondary"})}),(0,b.jsx)("span",{children:"".concat(null===e||void 0===e?void 0:e.course_count," Courses")})]})]}),(0,b.jsxs)("div",{className:"absolute top-0 left-0 flex flex-col items-center justify-center w-full h-full transition duration-300 ease-in-out opacity-0 rounded-xl bg-playlist hover:opacity-100 hover:transition hover:duration-300 hover:ease-in-out hover:cursor-pointer",children:[(0,b.jsx)(o.A,{type:"button",label:"",className:"bg-white w-[60px] h-[60px] rounded-full text-center p-2.5 block mb-2.5 play-btn",title:"".concat(A("Play")),children:(0,b.jsx)("span",{className:"text-xl-40",children:(0,b.jsx)(t.ud,{className:"fill-secondary"})})}),(0,b.jsx)("span",{className:"text-sm leading-5 text-white",children:"View All Courses"})]})]},e.uuid)))}):(0,b.jsx)("div",{children:"No Records Found!!!"})}),!C&&(0,b.jsx)("div",{className:"flex items-center justify-center my-6",children:(0,b.jsx)(g.A,{className:"btn-secondary btn-normal w-full md:w-[120px]",label:A(_&&k?"Loading...!":"Load More"),onClick:()=>(F(!0),void q({...z,page:z.page+1})),disabled:$||_||(null===T||void 0===T||null===(y=T.getPlayLists)||void 0===y||null===(w=y.data)||void 0===w?void 0:w.count)===(null===P||void 0===P?void 0:P.length),title:"".concat(A(_&&k?"Loading...!":"Load More"))})}),C&&(0,b.jsx)(d.A,{dots:!1,infinite:!1,arrows:!0,speed:500,slidesToShow:4,slidesToScroll:4,initialSlide:0,responsive:[{breakpoint:1600,settings:{slidesToShow:3,slidesToScroll:3,initialSlide:3}},{breakpoint:1199,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:991,settings:{slidesToShow:1,slidesToScroll:1,initialSlide:1}}],children:(null===T||void 0===T||null===(N=T.getPlayLists)||void 0===N||null===(j=N.data)||void 0===j?void 0:j.count)>0&&(null===P||void 0===P?void 0:P.map((e=>(0,b.jsx)("div",{className:"px-2 5",onClick:()=>B(e.uuid),children:(0,b.jsxs)("div",{className:"relative w-full h-full border-border-primary rounded-t-xl",children:[(0,b.jsx)("picture",{className:"w-full h-[200px] block",children:(0,b.jsx)("img",{src:null!==e&&void 0!==e&&e.image&&""!==(null===e||void 0===e?void 0:e.image)?"https://terraforma-staging.s3.us-west-2.amazonaws.com/"+(null===e||void 0===e?void 0:e.image):n,alt:"image",title:"image",className:"object-cover w-full h-full rounded-t-xl"})}),(0,b.jsxs)("div",{className:"flex items-start justify-between w-full gap-2 p-5 border-b border-solid border-x border-border-primary rounded-b-xl",children:[(0,b.jsx)("span",{className:"font-bold leading-5 break-words max-w-[190px]",children:e.name}),(0,b.jsxs)("div",{className:"flex items-center min-w-[105px]",children:[(0,b.jsx)("span",{className:"text-xl-22",children:(0,b.jsx)(t._I,{className:"pt-1 fill-secondary"})}),(0,b.jsx)("span",{children:"".concat(null===e||void 0===e?void 0:e.course_count," Courses")})]})]}),(0,b.jsxs)("div",{className:"absolute top-0 left-0 flex flex-col items-center justify-center w-full h-full transition duration-300 ease-in-out opacity-0 rounded-xl bg-playlist hover:opacity-100 hover:transition hover:duration-300 hover:ease-in-out hover:cursor-pointer",children:[(0,b.jsx)(o.A,{type:"button",label:"",className:"bg-white w-[60px] h-[60px] rounded-full text-center p-2.5 block mb-2.5 play-btn",children:(0,b.jsx)("span",{className:"text-xl-40",children:(0,b.jsx)(t.ud,{className:"fill-secondary"})})}),(0,b.jsx)("span",{className:"text-sm leading-5 text-white",children:"View All Courses"})]})]},null===e||void 0===e?void 0:e.uuid)},null===e||void 0===e?void 0:e.uuid))))})]}),(0,b.jsx)(v.A,{playListCallBack:M,playList:I})]})}},97803:(e,a,l)=>{l.d(a,{BL:()=>m,FH:()=>v,dE:()=>h,fE:()=>f,k2:()=>x,uk:()=>p});var t,s,i,r,n,o,d,c=l(57528),u=l(70459);const m=(0,u.J1)(t||(t=(0,c.A)(["\nmutation CreatePlaylist($playlistData: CreatePlaylistDto!) {\n    createPlaylist(playlistData: $playlistData) {\n        data {\n          uuid\n          name\n        }\n        message\n    }\n  }\n"]))),p=(0,u.J1)(s||(s=(0,c.A)(["\n mutation CourseCreateStepFour($courseData: CreateCourseStepFourDto!) {\n  courseCreateStepFour(courseData: $courseData) {\n    message\n  }\n}\n"]))),x=((0,u.J1)(i||(i=(0,c.A)(["\n  mutation UpdateCourse($courseData: UpdateCourseDto!) {\n    updateCourse(courseData: $courseData) {\n      message\n      data {\n        description\n        image\n        instructor_name\n        instructor_profile\n        instructor_qualification\n        is_certification\n        is_template\n        level\n        prerequisite\n        reward_point\n        subtitle\n        thumbnails\n        title\n        total_duration\n        uuid\n      }\n    }\n  }\n"]))),(0,u.J1)(r||(r=(0,c.A)(["\n  mutation DeleteCourse($courseId: String!) {\n    deleteCourse(courseId: $courseId) {\n      message   \n    }\n  }\n"])))),h=(0,u.J1)(n||(n=(0,c.A)(["\nmutation CourseCreateStepOne($courseData: CreateCourseDto!) {\n  courseCreateStepOne(courseData: $courseData) {\n    message\n    data {\n      uuid\n      title\n      description\n      category {\n        name\n        uuid\n      }\n      prerequisite\n      course_image\n      banner_image\n      instructor_profile\n      instructor_name\n      instructor_qualification\n      is_template\n      is_draft\n      createdAt\n      highlights {\n        id\n        uuid\n        name\n      }\n    }\n  }\n}"]))),v=(0,u.J1)(o||(o=(0,c.A)(["mutation CourseCreateStepTwo($courseData: CreateCourseStepOneDto!) {\n  courseCreateStepTwo(courseData: $courseData) {\n    message\n    data {\n      course_chapters {\n        chapter_content {\n          image\n          uuid\n          description\n          youtube_url\n          pdf_url\n        }\n        uuid\n        title\n        type\n        order\n        user_course_progress {\n          uuid\n          video_last_check_time\n          is_chapter_completed\n        }\n        chapter_quiz {\n          uuid\n          question\n          order\n          type\n          quiz_question {\n            uuid\n            option\n            is_correct\n            order\n          }\n        }\n      }\n      uuid\n      is_draft\n      category {\n        uuid\n        name\n        description\n        status\n        image_url\n      }\n      is_template\n    }\n  }\n}"]))),f=(0,u.J1)(d||(d=(0,c.A)(["mutation CourseCreateStepThree($courseData: CreateCourseStepThreeDto!) {\n  courseCreateStepThree(courseData: $courseData) {\n    message\n    data {\n      id\n      uuid\n      question\n      answer\n      order\n    }\n  }\n}"])))}}]);
//# sourceMappingURL=8816.c7462d3c.chunk.js.map