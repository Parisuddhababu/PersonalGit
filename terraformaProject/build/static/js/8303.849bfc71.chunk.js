"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[8303],{7648:(e,l,a)=>{a.d(l,{A:()=>m});var s=a(65043),r=a(74117),t=a(73216),n=a(35475),i=a(42145),o=a(79456),d=a(66925),c=a(70579);const u=()=>{var e,l,a;const{t:u}=(0,r.Bd)(),m=(0,t.zy)(),b=new URLSearchParams(m.search).get("uuid"),{id:x}=(0,t.g)(),{userProfileData:h}=(0,o.d4)((e=>e.userProfile)),v=null!==(e=null===h||void 0===h||null===(l=h.getProfile)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.user_type)&&void 0!==e?e:"",p=e=>{var l;let a="";if(null!==(l=e.split("/")[2])&&void 0!==l&&l.includes("-")){return e.split("/")[2].split("-").forEach((e=>{var l;return a=a+(null===(l=e[0])||void 0===l?void 0:l.toUpperCase())+e.slice(1)+" ",a})),a}var s;return a=(null===(s=e.split("/")[2][0])||void 0===s?void 0:s.toUpperCase())+e.split("/")[2].slice(1),a},f=e=>{let l="";if(null!==e&&void 0!==e&&e.includes("-")){l=null===e||void 0===e?void 0:e.replace(/-|\s/g," ");const a=l.split(" ");for(let e=0;e<a.length;e++)a[e]=a[e][0].toUpperCase()+a[e].substring(1);return l=a.join(" "),l}var a;return l=(null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" ",l},g=e=>{let l="";return null!==e&&void 0!==e&&e.includes("-")||(l=(null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" "),l;var a},j=m.pathname.split("/"),y=(0,s.useCallback)((()=>{if((null===j||void 0===j?void 0:j.length)>0){const e=null===j||void 0===j?void 0:j.length;if(e<4)return(0,c.jsx)("span",{className:"text-primary",children:j[2]&&"".concat(u(f(j[2])))});if(e<5)return""!==j[3]?j[3].length>32?(0,c.jsxs)(c.Fragment,{children:[g(j[3])&&(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(n.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:"".concat(u(p(m.pathname)))})}),g(j[3])&&(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),!g(j[3])&&(0,c.jsx)("span",{className:"text-primary",children:j[2]&&"".concat(u(f(j[2])))}),(0,c.jsx)("span",{className:"text-primary",children:j[3]&&"".concat(u(g(j[3])))})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(n.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:"".concat(u(p(m.pathname)))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:j[3]&&"".concat(u(f(j[3])))})]}):(0,c.jsx)("span",{className:"text-primary",children:j[2]&&"".concat(u(f(j[2])))});if(e<6)return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(n.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:"".concat(u(p(m.pathname)))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:j[3]&&"".concat(u(f(j[3])))})]});if(e<7){let e="";return b?e="?uuid=".concat(b):x&&(e="?uuid=".concat(x)),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(n.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:u(f(j[2]))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(n.k2,{to:"/".concat(i.bw.app,"/").concat(j[2],"/").concat(j[3],"/").concat((""!==b||""!==x)&&e),className:"text-light-grey hover:underline",children:u(f(j[3]))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:j[5]&&"".concat(u(f(j[4])))})]})}}}),[j]);return(0,c.jsx)("div",{className:"w-full",children:(0,c.jsxs)("p",{className:"max-xs:text-xs text-xs-14 max-md:truncate",children:[(0,c.jsxs)("span",{children:[(0,c.jsx)(n.k2,{to:(0,d.Go)(v,i.ve.SUPER_ADMIN,"/".concat(i.bw.app,"/").concat(i.bw.dashboard),"/".concat(i.bw.app,"/").concat(i.bw.subscriber)),className:"cursor-pointer text-light-grey hover:underline",children:u("Home")}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"})]}),y()]})})},m=s.memo(u)},75289:(e,l,a)=>{a.d(l,{A:()=>o});var s=a(65043),r=a(74117),t=a(41290),n=a(33556),i=a(70579);const o=e=>{let{onClose:l,action:a,show:o,warningText:d,disabled:c,isLoading:u}=e;const{t:m}=(0,r.Bd)(),[b,x]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{o&&setTimeout((()=>{x(!0)}),100)}),[o]),(0,i.jsxs)(i.Fragment,{children:[u&&(0,i.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%]"}),(0,i.jsxs)("div",{className:"".concat(o?"":"hidden"," absolute top-0 left-0 right-0 z-[1000] h-full bg-modal"),children:["Are you sure want to delete this record ?"!==d&&"Are you sure want to change status ?"!==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(b?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,i.jsxs)("div",{className:"relative bg-white shadow rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-5 py-6 border-b bg-accents-2 rounded-t-xl",children:[(0,i.jsxs)("div",{className:"flex items-center ",children:[(0,i.jsx)(n.io,{className:"inline-block mr-3 fill-baseColor",fontSize:"20"}),(0,i.jsx)("span",{className:"text-xl font-bold text-baseColor",children:m("Confirmation")})]}),(0,i.jsx)(t.A,{onClick:l,label:"",children:(0,i.jsx)(n.YY,{className:"text-error",fontSize:"14"})})]}),(0,i.jsx)("div",{className:"p-5 space-y-6 font-normal text-center border-b border-solid border-border-primary",children:(0,i.jsx)("p",{children:m(d)})}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 md:space-x-3 md:flex-row",children:[(0,i.jsx)(t.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[160px]",onClick:a,label:m("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(t.A,{className:"btn-secondary btn-normal w-full md:w-auto min-w-[160px]",onClick:l,label:m("No"),title:"No"})]})]})})}),"Are you sure want to change status ?"==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(b?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[(0,i.jsx)("span",{className:"p-[10px] bg-primary min-w-min rounded-full mb-3 overflow-hidden text-xl-44 md:text-6xl",children:(0,i.jsx)(n.ZI,{className:"fill-white bg-primary"})}),(0,i.jsx)("h4",{children:m("Confirmation")})]}),(0,i.jsx)("h6",{className:"font-semibold text-center mb-7 md:mb-10",children:m(d)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(t.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:a,label:m("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(t.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:l,label:m("No"),title:"No"})]})]})})}),"Are you sure want to delete this record ?"==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(b?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsx)("div",{className:"flex justify-center mb-5",children:(0,i.jsx)("span",{className:"p-[22px] md:p-[26px] rounded-full bg-error text-xl-35 md:text-5xl",children:(0,i.jsx)(n.Vl,{className:"stroke-2 fill-white"})})}),(0,i.jsx)("h6",{className:"font-bold text-center mb-7 md:mb-10",children:m(d)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(t.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:a,label:m("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(t.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:l,label:m("No"),title:"No"})]})]})})})]})]})}},43592:(e,l,a)=>{a.d(l,{A:()=>m});var s=a(65043),r=a(88250),t=a(47217),n=a(85408),i=a(79456),o=a(18998),d=a(73216),c=a(70579);const u=e=>{let{error:l}=e;const[a,u]=(0,s.useState)([]),m=(0,d.g)(),{data:b}=(0,r.I)(n.kA),x=(0,i.wA)(),{countryData:h}=(0,i.d4)((e=>e.country));return(0,s.useEffect)((()=>{if(null!==b&&void 0!==b&&b.getCountries){var e;const l=[];null===b||void 0===b||null===(e=b.getCountries)||void 0===e||e.data.map((e=>{l.push({value:e.uuid,label:"".concat(e.phoneCode," ").concat(e.name)})})),u(l)}}),[b]),(0,s.useEffect)((()=>{null!==m&&void 0!==m&&m.id||x((0,o.l)(null===a||void 0===a?void 0:a[0]))}),[a,m]),(0,c.jsxs)("div",{className:"inline-block w-full",children:[(0,c.jsx)(t.Ay,{options:a,value:h,onChange:e=>{x((0,o.l)(e))},placeholder:"Code",className:"[&>div]:rounded-xl [&_div]:my-0 [&>div]:py-px md:[&>div]:py-1.5 [&_input]:h-[32px] [&_div]:py-0]"}),l&&(0,c.jsx)("span",{className:"relative block mt-1 md:text-xs-15 error",children:l})]})},m=s.memo(u)},12209:(e,l,a)=>{a.d(l,{A:()=>u});var s=a(65043),r=a(74117),t=a(73216),n=a(7648),i=a(33556),o=a(79456),d=a(75214),c=a(70579);const u=e=>{let{headerActionConst:l,headerTitle:a}=e;const{t:u}=(0,r.Bd)(),m=(0,o.wA)(),{show:b}=(0,o.d4)((e=>e.coursesManagement)),x=(0,t.zy)(),h=(0,s.useCallback)((()=>{m((0,d.oM)(!b))}),[b]);return(0,c.jsxs)("header",{className:"sticky top-0 z-20 flex bg-white border-b shadow-header xl:shadow-none xl:h-auto xl:block border-border-primary xl:px-2 xl:pt-0",children:[(0,c.jsx)("div",{onClick:h,className:"pt-5 cursor-pointer text-xl-22 xl:hidden",children:(0,c.jsx)(i.Rt,{className:"ml-4"})}),(0,c.jsx)("div",{className:"p-2.5 xl:p-[18px] xl:shadow-header max-xl:w-[calc(100%-47px)]",children:(0,c.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:[(0,c.jsxs)("div",{className:"w-full xl:w-auto",children:[(0,c.jsx)("h1",{className:"mb-1 text-2xl max-xl:truncate xl:text-3xl",children:u(null!==a&&void 0!==a?a:(e=>{let l="";if(e.split("/")[2].includes("-")){return e.split("/")[2].split("-").forEach((e=>(l=l+e[0].toUpperCase()+e.slice(1)+" ",l))),l}return l=e.split("/")[2][0].toUpperCase()+e.split("/")[2].slice(1),l})(x.pathname))}),(0,c.jsx)(n.A,{})]}),l&&(0,c.jsx)("div",{className:"flex gap-2.5 max-xl:w-[calc(100%+40px)] lg:gap-5",children:(()=>{if(l)return l()})()})]})})]})}},93496:(e,l,a)=>{a.d(l,{Fw:()=>c,Po:()=>m,jZ:()=>u,y:()=>d});var s,r,t,n,i=a(57528),o=a(70459);const d=(0,o.J1)(s||(s=(0,i.A)(["\nmutation CreateSubscriber($subscriberData: CreateSubscriberDto!) {\n  createSubscriber(subscriberData: $subscriberData) {\n    message\n    data {\n      uuid\n      first_name\n      last_name\n      company_name\n      address\n      phone_number\n      country_code {\n        name\n        phoneCode\n      }\n      logo\n      subscribe_start\n      subscribe_end\n      status\n    }\n  }\n}\n"]))),c=(0,o.J1)(r||(r=(0,i.A)(["\nmutation BlockSubscriber($status: Float!, $subscribersId: String!) {\n  blockSubscriber(status: $status, subscribersId: $subscribersId) {\n    message\n    data {\n      uuid\n      first_name\n      last_name\n      company_name\n      address\n      phone_number\n      logo\n      subscribe_start\n      subscribe_end\n      status\n    }\n  }\n}\n"]))),u=(0,o.J1)(t||(t=(0,i.A)(["\nmutation DeleteSubscriber($subscribersId: String!) {\n  deleteSubscriber(subscribersId: $subscribersId) {\n    message\n  }\n}\n"]))),m=(0,o.J1)(n||(n=(0,i.A)(["\nmutation UpdateSubscriber($subscriberData: UpdateSubscriberDto!, $subscriberId: String!) {\n  updateSubscriber(subscriberData: $subscriberData, subscriberId: $subscriberId) {\n    message\n    data {\n      uuid\n      first_name\n      last_name\n      company_name\n      address\n      phone_number\n      country_code {\n        id\n        uuid\n        name\n        countryCode\n        phoneCode\n      }\n      logo\n      subscribe_start\n      subscribe_end\n      status\n      subscriber_branch {\n        uuid\n        location\n      }\n    }\n  }\n}\n"])))},72729:(e,l,a)=>{a.r(l),a.d(l,{default:()=>F});var s=a(65043),r=a(88250),t=a(31881),n=a(86178),i=a.n(n),o=a(64526),d=a(73216),c=a(55797),u=(a(15675),a(59140),a(82485)),m=(a(9686),a(74117)),b=a(63516),x=a(25263),h=a(34764),v=a(41290),p=a(91188),f=a(12352),g=a(33556),j=a(42145),y=a(66925),N=a(93496),w=a(85408),C=a(12209),_=a(79456),S=a(43592),A=a(18998),k=a(75289),D=a(92073),E=a(70579);const F=()=>{var e,l,a,n,F,I;const{t:P}=(0,m.Bd)(),L=(0,d.Zp)(),Y=(0,_.wA)(),R=(0,d.g)(),U=(0,s.useRef)(null),{addSubscriberValidationSchema:M}=(0,f.A)(),{data:V,refetch:B}=(0,r.I)(w.e9,{variables:{subscribersId:R.id},skip:!R.id}),[q,z]=(0,t.n)(N.y),[$,T]=(0,t.n)(N.Po),{countryData:W}=(0,_.d4)((e=>e.country)),J=(0,s.createRef)(),[Z,H]=(0,s.useState)(!1),[O,G]=(0,s.useState)(""),[X,K]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)([]),[le,ae]=(0,s.useState)([]),se=new Date,[re]=(0,t.n)(N.jZ),[te,ne]=(0,s.useState)(!1),{userProfileData:ie}=(0,_.d4)((e=>e.userProfile)),[oe,de]=(0,s.useState)(!1),ce=null!==(e=null===ie||void 0===ie||null===(l=ie.getProfile)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.user_type)&&void 0!==e?e:"",ue={firstName:"",lastName:"",Email:"",SubscribedCompany:"",Address:"",countryCode:"",Logo:"",PhoneNumber:"",StartDate:i()(se).format("MM/DD/YYYY"),ExpireDate:"",PlanStatus:"0",SubscribedPlan:1,status:"1",location:"",city:"",branch_data:"",editedIndex:null,uuid:"",branches:[],subscriber_id:"",thumbnail:""};(0,s.useEffect)((()=>{R.id&&B({subscribersId:R.id}).catch((e=>o.oR.error(e)))}),[R.id]),(0,s.useEffect)((()=>{W&&me.setFieldValue("countryCode",null===W||void 0===W?void 0:W.value)}),[W]);const me=(0,b.Wx)({initialValues:ue,validationSchema:M,onSubmit:async e=>{if(R.id){const l=Q.map((e=>({location:null===e||void 0===e?void 0:e.location,city:null===e||void 0===e?void 0:e.city,uuid:null===e||void 0===e?void 0:e.uuid}))),a={first_name:e.firstName,last_name:e.lastName,email:e.Email,company_name:e.SubscribedCompany,address:e.Address,phone_number:e.PhoneNumber,country_code:e.countryCode,logo:e.Logo,thumbnail:e.thumbnail,subscribe_start:i()(e.StartDate),subscribe_end:i()(e.ExpireDate),status:parseInt(e.status),branch_data:l,delete_branch_data:le,subscriber_id:e.subscriber_id};$({variables:{subscriberData:a,subscriberId:String(R.id)}}).then((e=>{var l;const a=e.data;o.oR.success(null===a||void 0===a||null===(l=a.updateSubscriber)||void 0===l?void 0:l.message),me.resetForm(),be()})).catch((e=>{o.oR.error(e.networkError.result.errors[0].message)}))}else{const l=Q.map((e=>({location:null===e||void 0===e?void 0:e.location,city:null===e||void 0===e?void 0:e.city})));q({variables:{subscriberData:{first_name:e.firstName,last_name:e.lastName,email:e.Email,company_name:e.SubscribedCompany,phone_number:e.PhoneNumber,subscribe_start:i()(e.StartDate),subscribe_end:i()(e.ExpireDate),address:e.Address,country_code:e.countryCode,logo:e.Logo,thumbnail:e.thumbnail,status:parseInt(e.status),branch_data:l,subscriber_id:null===e||void 0===e?void 0:e.subscriber_id}}}).then((e=>{var l;const a=e.data;o.oR.success(null===a||void 0===a||null===(l=a.createSubscriber)||void 0===l?void 0:l.message),me.resetForm(),be()})).catch((e=>{o.oR.error(e.networkError.result.errors[0].message)}))}}});(0,s.useEffect)((()=>{const e=i()().clone().add(1,"month").format("MM/DD/YYYY");me.setFieldValue("ExpireDate",e)}),[30]);const be=(0,s.useCallback)((()=>{L(-1)}),[]),xe=(0,s.useCallback)((()=>{Y((0,A.l)("")),L("/".concat(j.bw.app,"/").concat(j.bw.subscriber))}),[]),he=e=>me.errors[e]&&me.touched[e]?me.errors[e]:"",ve=(0,s.useCallback)((e=>{me.setFieldValue(e.target.name,(0,y.AW)(e))}),[]),pe=(0,s.useCallback)((e=>{e.preventDefault();const l=e.target.files;if(l&&l.length>0){const e=l[0];if(e.type.startsWith("image/"))if(e.size>5242880)o.oR.error("Image size must be less than 5MB");else{const l=new FileReader;l.onload=()=>{G(l.result),H(!0)},l.readAsDataURL(e)}else o.oR.error("Please select a valid image file")}U.current&&(U.current.value="")}),[]),fe=(0,s.useCallback)((e=>{e.preventDefault();const l=e.target.files;if(l&&l.length>0){const e=l[0];if(e.type.startsWith("image/"))if(e.size>5242880)o.oR.error("Image size must be less than 5MB");else{const l=new FileReader;l.onload=()=>{G(l.result),K(!0),H(!0)},l.readAsDataURL(e)}else o.oR.error("Please select a valid image file")}U.current&&(U.current.value="")}),[]),ge=(0,s.useCallback)((()=>{ne(!1)}),[]),je=(0,s.useCallback)((()=>{re({variables:{subscribersId:R.id}}).then((e=>{const l=e.data;o.oR.success(l.deleteSubscriber.message),ne(!1),L(-1)})).catch((e=>{o.oR.error(e.networkError.result.errors[0].message)}))}),[R.id]);(0,s.useEffect)((()=>{if(V&&R.id){var e,l,a,s,r;const t=null===V||void 0===V||null===(e=V.getSubscriber)||void 0===e?void 0:e.data,n=i()(t.subscribe_start),o=i()(t.subscribe_end).diff(n,"months");Y((0,A.l)({value:null===t||void 0===t||null===(l=t.country_code)||void 0===l?void 0:l.uuid,label:"".concat(null===t||void 0===t||null===(a=t.country_code)||void 0===a?void 0:a.phoneCode," ").concat(null===t||void 0===t||null===(s=t.country_code)||void 0===s?void 0:s.name)})),me.setValues({firstName:null===t||void 0===t?void 0:t.first_name,lastName:null===t||void 0===t?void 0:t.last_name,PhoneNumber:null===t||void 0===t?void 0:t.phone_number,SubscribedCompany:null===t||void 0===t?void 0:t.company_name,Logo:t.logo,thumbnail:t.thumbnail,countryCode:null===t||void 0===t||null===(r=t.country_code)||void 0===r?void 0:r.uuid,Email:null===t||void 0===t?void 0:t.email,StartDate:i()(null===t||void 0===t?void 0:t.subscribe_start).format("MM/DD/YYYY"),ExpireDate:i()(null===t||void 0===t?void 0:t.subscribe_end).format("MM/DD/YYYY"),Address:null===t||void 0===t?void 0:t.address,status:null===t||void 0===t?void 0:t.status,SubscribedPlan:+o,branch_data:null===t||void 0===t?void 0:t.subscriber_branch,subscriber_id:null===t||void 0===t?void 0:t.subscriber_id}),ee(null===t||void 0===t?void 0:t.subscriber_branch)}}),[V]);const ye=()=>(0,E.jsxs)("div",{className:"flex justify-end gap-3 md:gap-5",children:[(0,E.jsx)(v.A,{className:"btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Cancel",onClick:()=>H(!1)}),(0,E.jsx)(v.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",disabled:oe,label:"Save",onClick:()=>(async()=>{var e;if("undefined"!==typeof(null===(e=J.current)||void 0===e?void 0:e.cropper)){if(await de(!0),X){var l;let e=null;const a=(0,j.Si)(null===(l=J.current)||void 0===l?void 0:l.cropper.getCroppedCanvas().toDataURL(),"thumbnail.png"),s=new FormData;s.append("image",a),e=await(0,j.V6)(s,"profile"),e&&(me.setFieldValue("thumbnail",e),H(!1),K(!1))}else{var a;let e=null;const l=(0,j.Si)(null===(a=J.current)||void 0===a?void 0:a.cropper.getCroppedCanvas().toDataURL(),"image.png"),s=new FormData;s.append("image",l),e=await(0,j.V6)(s,"profile"),e&&(me.setFieldValue("Logo",e),H(!1))}await de(!1)}})()})]}),Ne=(0,s.useCallback)((()=>{ne(!0)}),[]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(C.A,{headerTitle:R.id?"Subscriber Edit Page":"Add New Subscriber"}),(0,E.jsxs)("div",{children:[(0,E.jsxs)("form",{children:[(0,E.jsxs)("div",{className:"flex flex-wrap items-start justify-start p-3 mb-5 border border-solid md:p-5 md:mb-7 border-border-primary rounded-xl",children:[(0,E.jsxs)("div",{className:"font-medium text-sm text-black",children:[(0,E.jsx)("label",{children:"Subscriber Logo"}),(0,E.jsx)("div",{className:"flex items-center justify-center w-full md:max-w-[400px] lg:mr-5 max-h-[385px] aspect-square lg:w-1/3 lg:max-w-[487px] lg:min-w-[320px] xl:min-w-[410px] border border-border-primary border-solid rounded-xl mb-5 md:mb-8 lg:mb-0",children:(0,E.jsxs)("div",{className:"box-border flex flex-col items-center justify-center",children:[(0,E.jsxs)("label",{htmlFor:"logo",className:"relative flex flex-col items-center justify-center",children:[(0,E.jsx)("div",{className:"flex items-center justify-center overflow-hidden border border-solid rounded-full cursor-pointer border-border-primary w-44 h-44",children:null!==me&&void 0!==me&&null!==(n=me.values)&&void 0!==n&&n.Logo?(0,E.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(me.values.Logo),alt:"Logo",className:"object-contain w-full h-full bg-black"}):(0,E.jsx)("img",{src:x,alt:"Logo",className:"object-contain w-full h-full bg-black"})}),(0,E.jsx)("input",{type:"file",id:"logo",name:"Logo",accept:"image/*",onChange:pe,ref:U,className:"hidden"},(0,D.A)()),(0,E.jsx)("div",{className:"absolute bottom-0 p-2 text-2xl font-bold text-white rounded-full right-1 sm:right-2 bg-primary cursor-pointer",children:(0,E.jsx)(g.i7,{})})]}),me.errors.Logo&&me.touched.Logo?(0,E.jsx)("span",{className:"relative mt-2 md:text-xs-15 error",children:me.errors.Logo}):""]})})]}),(0,E.jsxs)("div",{className:"font-medium text-sm text-black",children:[(0,E.jsx)("label",{children:"Subscriber Thumbnail"}),(0,E.jsx)("div",{className:"flex items-center justify-center w-full md:max-w-[400px] lg:mr-5 max-h-[385px] aspect-square lg:w-1/3 lg:max-w-[487px] lg:min-w-[320px] xl:min-w-[410px] border border-border-primary border-solid rounded-xl mb-5 md:mb-8 lg:mb-0",children:(0,E.jsxs)("div",{className:"box-border flex flex-col items-center justify-center",children:[(0,E.jsxs)("label",{htmlFor:"thumbnail",className:"relative flex flex-col items-center justify-center",children:[(0,E.jsx)("div",{className:"flex items-center justify-center overflow-hidden border border-solid rounded-full cursor-pointer border-border-primary w-44 h-44",children:null!==me&&void 0!==me&&null!==(F=me.values)&&void 0!==F&&F.thumbnail?(0,E.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(me.values.thumbnail),alt:"thumbnail",className:"object-contain w-full h-full bg-black"}):(0,E.jsx)("img",{src:x,alt:"thumbnail",className:"object-contain w-full h-full bg-black"})}),(0,E.jsx)("input",{type:"file",id:"thumbnail",name:"thumbnail",accept:"image/*",onChange:fe,ref:U,className:"hidden"},(0,D.A)()),(0,E.jsx)("div",{className:"absolute bottom-0 p-2 text-2xl font-bold text-white rounded-full right-1 sm:right-2 bg-primary cursor-pointer",children:(0,E.jsx)(g.i7,{})})]}),me.errors.thumbnail&&me.touched.thumbnail?(0,E.jsx)("span",{className:"relative mt-2 md:text-xs-15 error",children:me.errors.thumbnail}):""]})})]}),(0,E.jsxs)("div",{className:"flex flex-wrap w-full mt-3 gap-3 md:gap-5 lg:w-2/3",children:[(0,E.jsx)("div",{className:"inline-block w-full 2xl:w-[calc(50%-10px)]",children:(0,E.jsx)(h.A,{onBlur:ve,placeholder:P("Subscribed Company Name"),required:!0,label:P("Subscribed Company Name"),name:"SubscribedCompany",type:"text",onChange:me.handleChange,value:me.values.SubscribedCompany,error:he("SubscribedCompany")})}),(0,E.jsx)("div",{className:"inline-block w-full 2xl:w-[calc(50%-10px)]",children:(0,E.jsx)(h.A,{onBlur:ve,placeholder:P("Subscriber Id"),name:"subscriber_id",required:!0,label:P("Subscriber Id"),type:"text",onChange:me.handleChange,value:me.values.subscriber_id,error:he("subscriber_id")})}),(0,E.jsx)("div",{className:"inline-block w-full 2xl:w-[calc(50%-10px)]",children:(0,E.jsx)(h.A,{onBlur:ve,placeholder:P("First Name"),name:"firstName",required:!0,label:P("First Name"),type:"text",onChange:me.handleChange,value:me.values.firstName,error:he("firstName")})}),(0,E.jsx)("div",{className:"inline-block w-full 2xl:w-[calc(50%-10px)]",children:(0,E.jsx)(h.A,{onBlur:ve,placeholder:P("Last Name"),name:"lastName",required:!0,label:P("Last Name"),type:"text",onChange:me.handleChange,value:me.values.lastName,error:he("lastName")})}),(0,E.jsxs)("div",{className:"inline-block w-full 2xl:w-[calc(50%-10px)]",children:[(0,E.jsx)("label",{children:"Phone Number"}),(0,E.jsxs)("div",{className:"flex gap-2.5",children:[(0,E.jsx)("div",{className:"w-[120px]",children:(0,E.jsx)(S.A,{error:null===me||void 0===me||null===(I=me.errors)||void 0===I?void 0:I.countryCode})}),(0,E.jsx)("div",{className:"w-[calc(100%-120px)]",children:(0,E.jsx)(h.A,{onBlur:ve,placeholder:P("Phone Number"),name:"PhoneNumber",required:!0,type:"tel",onChange:me.handleChange,value:me.values.PhoneNumber,error:he("PhoneNumber")})})]})]}),(0,E.jsx)("div",{className:"inline-block w-full 2xl:w-[calc(50%-10px)]",children:(0,E.jsx)(h.A,{disabled:ce!==j.ve.SUPER_ADMIN,onBlur:ve,placeholder:P("Email"),name:"Email",required:!0,onChange:me.handleChange,value:me.values.Email,label:P("Email"),error:he("Email")})}),(0,E.jsx)("div",{className:"inline-block w-full 2xl:w-[calc(50%-10px)]",children:(0,E.jsx)(h.A,{onBlur:ve,placeholder:P("Address"),name:"Address",required:!0,label:P("Address"),type:"text",onChange:me.handleChange,value:me.values.Address,error:he("Address")})}),(0,E.jsx)("div",{className:"inline-block w-full",children:(0,E.jsx)(p.A,{required:!0,checked:me.values.SubscribedPlan,onChange:e=>{me.handleChange(e);const l=j.s_.find((l=>l.key===parseInt(e.target.value,10)));if(l){const e=i()().clone().add(null===l||void 0===l?void 0:l.key,"month").format("MM/DD/YYYY");me.setFieldValue("ExpireDate",e)}},name:"SubscribedPlan",radioOptions:j.s_,label:P("Subscription Duration"),error:he("SubscribedPlan")})}),(0,E.jsx)("div",{className:"inline-block w-full 2xl:w-[calc(50%-10px)]",children:(0,E.jsx)(h.A,{disabled:!0,onBlur:ve,required:!0,type:"text",placeholder:P("Start Date"),name:"StartDate",onChange:me.handleChange,label:P("Start Date"),value:me.values.StartDate})}),(0,E.jsx)("div",{className:"inline-block w-full 2xl:w-[calc(50%-10px)]",children:(0,E.jsx)(h.A,{disabled:!0,onBlur:ve,required:!0,type:"text",placeholder:P("End Date"),name:"ExpireDate",onChange:me.handleChange,label:P("End Date"),value:me.values.ExpireDate})}),(0,E.jsx)("div",{className:"inline-block w-full 2xl:w-[calc(50%-10px)]",children:(0,E.jsx)(p.A,{required:!0,checked:me.values.status,onChange:me.handleChange,name:"status",radioOptions:j.UX,label:P("Plan Status"),error:he("status")})}),(0,E.jsxs)("div",{className:"flex flex-wrap w-full",children:[(0,E.jsxs)("div",{className:"flex flex-wrap w-full",children:[(0,E.jsxs)("label",{className:"w-full",children:["Location & City",(0,E.jsx)("span",{className:"error",children:"*"})]}),(0,E.jsxs)("div",{className:"flex w-[calc(100%-123px)] md:w-[calc(100%-140px)]",children:[(0,E.jsx)("div",{className:"[&_input]:rounded-r-none w-1/2",children:(0,E.jsx)(h.A,{placeholder:P("Enter Location"),type:"text",id:"location",name:"location",value:me.values.location,onChange:me.handleChange,required:!0,error:he("location"),onBlur:ve})}),(0,E.jsx)("div",{className:"[&_input]:rounded-none w-1/2",children:(0,E.jsx)(h.A,{placeholder:P("Enter City"),type:"text",id:"city",name:"city",value:me.values.city,onChange:me.handleChange,required:!0,error:he("city"),onBlur:ve})})]}),(0,E.jsx)("div",{className:"[&_button]:rounded-l-none",children:(0,E.jsx)(v.A,{className:"btn-primary btn-normal md:mb-0 w-full md:w-[140px]",type:"button",onClick:()=>{const{editedIndex:e}=me.values,l=[...Q];if((()=>{var e,l,a,s,r,t,n,i,o,d,c,u;return me.values.location||me.values.city?null!==me&&void 0!==me&&null!==(e=me.values)&&void 0!==e&&e.location&&(null===me||void 0===me||null===(l=me.values)||void 0===l||null===(a=l.location)||void 0===a?void 0:a.length)<3?(me.setFieldError("location","Location should not be less than 3 characters"),!1):null!==me&&void 0!==me&&null!==(s=me.values)&&void 0!==s&&s.city&&(null===me||void 0===me||null===(r=me.values)||void 0===r||null===(t=r.city)||void 0===t?void 0:t.length)<3?(me.setFieldError("city","City should not be less than 3 characters"),!1):null!==me&&void 0!==me&&null!==(n=me.values)&&void 0!==n&&n.location&&(null===me||void 0===me||null===(i=me.values)||void 0===i||null===(o=i.location)||void 0===o?void 0:o.length)>100?(me.setFieldError("location","Location should not be more than 100 characters"),!1):!(null!==me&&void 0!==me&&null!==(d=me.values)&&void 0!==d&&d.city&&(null===me||void 0===me||null===(c=me.values)||void 0===c||null===(u=c.city)||void 0===u?void 0:u.length)>100)||(me.setFieldError("city","City should not be more than 100 characters"),!1):(me.setFieldError("location","Please enter location."),me.setFieldError("city","Please enter city."),!1)})()){var a;if(void 0!==e&&null!==e)l[e]={city:me.values.city,location:me.values.location,uuid:null!==(a=me.values.uuid)&&void 0!==a?a:""};else l.push({city:me.values.city,location:me.values.location,uuid:""});ee(l),me.setFieldValue("city",""),me.setFieldValue("location",""),me.setFieldValue("uuid",""),me.setFieldValue("editedIndex",null),me.setFieldValue("branches",l)}},label:P(null===me.values.editedIndex?"Add Location":"Update Location"),title:"Update Location"})}),me.errors.branches&&me.touched.branches&&(0,E.jsx)("p",{className:"mt-1 md:text-xs-15 error",children:me.errors.branches})]}),Q&&(0,E.jsxs)("div",{className:"w-full px-2 mt-3",children:[(null===Q||void 0===Q?void 0:Q.length)>0&&(0,E.jsxs)("div",{className:"flex w-[calc(100%-48px)]",children:[(0,E.jsx)("p",{className:"w-1/2 font-bold truncate",children:"Location"}),(0,E.jsx)("p",{className:"w-1/2 font-bold truncate",children:"City"})]}),null===Q||void 0===Q?void 0:Q.map(((e,l)=>(0,E.jsxs)("div",{className:"flex items-center py-2 border-b",children:[(0,E.jsx)("p",{className:"w-[calc(50%-24px)] truncate ",children:null===e||void 0===e?void 0:e.location}),(0,E.jsx)("p",{className:"w-[calc(50%-24px)] truncate ",children:null===e||void 0===e?void 0:e.city}),(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)(v.A,{className:"mr-4 bg-transparent btn-default",onClick:()=>(e=>{const l=null===Q||void 0===Q?void 0:Q[e];me.setFieldValue("city",null===l||void 0===l?void 0:l.city),me.setFieldValue("location",null===l||void 0===l?void 0:l.location),me.setFieldValue("uuid",null===l||void 0===l?void 0:l.uuid),me.setFieldValue("editedIndex",e)})(l),label:"",children:(0,E.jsx)(g.ff,{className:"fill-primary"})}),(0,E.jsx)(v.A,{className:"bg-transparent cursor-pointer btn-default",onClick:()=>(e=>{const l=null===Q||void 0===Q?void 0:Q.filter(((l,a)=>a!==e)),a=null===Q||void 0===Q?void 0:Q[e];ee(l),ae([...le,null===a||void 0===a?void 0:a.uuid]),me.setFieldValue("branches",l)})(l),label:"",children:(0,E.jsx)(g.lM,{className:"fill-error"})})]})]},"".concat(l+1))))]})]})]})]}),(0,E.jsxs)("div",{className:"".concat(null!==R&&void 0!==R&&R.id?"":"flex gap-5"),children:[(0,E.jsx)(v.A,{className:"btn-secondary btn-normal w-full md:w-[160px]",label:P("Cancel"),onClick:xe,title:"Cancel"}),(0,E.jsxs)("div",{className:"".concat(null!==R&&void 0!==R&&R.id?"float-right":""),children:[(0,E.jsx)(v.A,{className:"mr-5 btn-primary btn-normal mb-3 md:mb-0 w-full md:w-[160px]",type:"button",onClick:()=>me.handleSubmit(),label:P("Save"),disabled:(null===z||void 0===z?void 0:z.loading)||T.loading,title:"Save"}),(null===R||void 0===R?void 0:R.id)&&ce===(null===j.ve||void 0===j.ve?void 0:j.ve.SUPER_ADMIN)&&(0,E.jsx)(v.A,{label:"Delete",className:"btn-error btn-normal mb-3 md:mb-0 w-full md:w-[160px]",type:"button",onClick:Ne,title:"Delete"})]})]})]}),te&&ce===(null===j.ve||void 0===j.ve?void 0:j.ve.SUPER_ADMIN)&&(0,E.jsx)(k.A,{warningText:j.jl,onClose:ge,action:je,show:te})]}),(0,E.jsx)(c.l,{className:"custom-dialog",header:"Crop Image",visible:Z,style:{width:"50vw"},onHide:()=>H(!1),footer:()=>ye(),children:O&&(0,E.jsx)(u.A,{ref:J,style:{height:400,width:"100%"},zoomTo:.5,aspectRatio:X?7/8:3,preview:".img-preview",src:O,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0,cropBoxResizable:!1})})]})}},25263:(e,l,a)=>{e.exports=a.p+"static/media/sidebar-logo.d6fce7850bbfb0f38fbe.png"}}]);
//# sourceMappingURL=8303.849bfc71.chunk.js.map