"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[186],{7648:(e,s,a)=>{a.d(s,{A:()=>u});var t=a(65043),l=a(74117),r=a(73216),n=a(35475),i=a(42145),c=a(79456),o=a(66925),d=a(70579);const m=()=>{var e,s,a;const{t:m}=(0,l.Bd)(),u=(0,r.zy)(),x=new URLSearchParams(u.search).get("uuid"),{id:b}=(0,r.g)(),{userProfileData:h}=(0,c.d4)((e=>e.userProfile)),p=null!==(e=null===h||void 0===h||null===(s=h.getProfile)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.user_type)&&void 0!==e?e:"",f=e=>{var s;let a="";if(null!==(s=e.split("/")[2])&&void 0!==s&&s.includes("-")){return e.split("/")[2].split("-").forEach((e=>{var s;return a=a+(null===(s=e[0])||void 0===s?void 0:s.toUpperCase())+e.slice(1)+" ",a})),a}var t;return a=(null===(t=e.split("/")[2][0])||void 0===t?void 0:t.toUpperCase())+e.split("/")[2].slice(1),a},v=e=>{let s="";if(null!==e&&void 0!==e&&e.includes("-")){s=null===e||void 0===e?void 0:e.replace(/-|\s/g," ");const a=s.split(" ");for(let e=0;e<a.length;e++)a[e]=a[e][0].toUpperCase()+a[e].substring(1);return s=a.join(" "),s}var a;return s=(null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" ",s},j=e=>{let s="";return null!==e&&void 0!==e&&e.includes("-")||(s=(null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" "),s;var a},w=u.pathname.split("/"),N=(0,t.useCallback)((()=>{if((null===w||void 0===w?void 0:w.length)>0){const e=null===w||void 0===w?void 0:w.length;if(e<4)return(0,d.jsx)("span",{className:"text-primary",children:w[2]&&"".concat(m(v(w[2])))});if(e<5)return""!==w[3]?w[3].length>32?(0,d.jsxs)(d.Fragment,{children:[j(w[3])&&(0,d.jsx)("span",{className:"text-primary",children:(0,d.jsx)(n.k2,{to:"/".concat(i.bw.app,"/").concat(w[2]),className:"text-light-grey hover:underline",children:"".concat(m(f(u.pathname)))})}),j(w[3])&&(0,d.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),!j(w[3])&&(0,d.jsx)("span",{className:"text-primary",children:w[2]&&"".concat(m(v(w[2])))}),(0,d.jsx)("span",{className:"text-primary",children:w[3]&&"".concat(m(j(w[3])))})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"text-primary",children:(0,d.jsx)(n.k2,{to:"/".concat(i.bw.app,"/").concat(w[2]),className:"text-light-grey hover:underline",children:"".concat(m(f(u.pathname)))})}),(0,d.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,d.jsx)("span",{className:"text-primary",children:w[3]&&"".concat(m(v(w[3])))})]}):(0,d.jsx)("span",{className:"text-primary",children:w[2]&&"".concat(m(v(w[2])))});if(e<6)return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"text-primary",children:(0,d.jsx)(n.k2,{to:"/".concat(i.bw.app,"/").concat(w[2]),className:"text-light-grey hover:underline",children:"".concat(m(f(u.pathname)))})}),(0,d.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,d.jsx)("span",{className:"text-primary",children:w[3]&&"".concat(m(v(w[3])))})]});if(e<7){let e="";return x?e="?uuid=".concat(x):b&&(e="?uuid=".concat(b)),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"text-primary",children:(0,d.jsx)(n.k2,{to:"/".concat(i.bw.app,"/").concat(w[2]),className:"text-light-grey hover:underline",children:m(v(w[2]))})}),(0,d.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,d.jsx)("span",{className:"text-primary",children:(0,d.jsx)(n.k2,{to:"/".concat(i.bw.app,"/").concat(w[2],"/").concat(w[3],"/").concat((""!==x||""!==b)&&e),className:"text-light-grey hover:underline",children:m(v(w[3]))})}),(0,d.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,d.jsx)("span",{className:"text-primary",children:w[5]&&"".concat(m(v(w[4])))})]})}}}),[w]);return(0,d.jsx)("div",{className:"w-full",children:(0,d.jsxs)("p",{className:"max-xs:text-xs text-xs-14 max-md:truncate",children:[(0,d.jsxs)("span",{children:[(0,d.jsx)(n.k2,{to:(0,o.Go)(p,i.ve.SUPER_ADMIN,"/".concat(i.bw.app,"/").concat(i.bw.dashboard),"/".concat(i.bw.app,"/").concat(i.bw.subscriber)),className:"cursor-pointer text-light-grey hover:underline",children:m("Home")}),(0,d.jsx)("span",{className:"mx-2 text-light-grey",children:">"})]}),N()]})})},u=t.memo(m)},86607:(e,s,a)=>{a.d(s,{A:()=>o});var t=a(65043),l=a(73216),r=a(41290),n=a(33556),i=a(42145),c=a(70579);const o=e=>{let{data:s,route:a}=e;const o=(0,l.Zp)(),d=(0,t.useCallback)((()=>{o("/".concat(i.bw.app,"/").concat(a,"/edit/").concat(null===s||void 0===s?void 0:s.uuid))}),[]);return(0,c.jsx)(r.A,{className:"bg-transparent btn-default btn-icon",onClick:d,label:"",title:"Edit",children:(0,c.jsx)(n.ff,{})})}},75289:(e,s,a)=>{a.d(s,{A:()=>c});var t=a(65043),l=a(74117),r=a(41290),n=a(33556),i=a(70579);const c=e=>{let{onClose:s,action:a,show:c,warningText:o,disabled:d,isLoading:m}=e;const{t:u}=(0,l.Bd)(),[x,b]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{c&&setTimeout((()=>{b(!0)}),100)}),[c]),(0,i.jsxs)(i.Fragment,{children:[m&&(0,i.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%]"}),(0,i.jsxs)("div",{className:"".concat(c?"":"hidden"," absolute top-0 left-0 right-0 z-[1000] h-full bg-modal"),children:["Are you sure want to delete this record ?"!==o&&"Are you sure want to change status ?"!==o&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,i.jsxs)("div",{className:"relative bg-white shadow rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-5 py-6 border-b bg-accents-2 rounded-t-xl",children:[(0,i.jsxs)("div",{className:"flex items-center ",children:[(0,i.jsx)(n.io,{className:"inline-block mr-3 fill-baseColor",fontSize:"20"}),(0,i.jsx)("span",{className:"text-xl font-bold text-baseColor",children:u("Confirmation")})]}),(0,i.jsx)(r.A,{onClick:s,label:"",children:(0,i.jsx)(n.YY,{className:"text-error",fontSize:"14"})})]}),(0,i.jsx)("div",{className:"p-5 space-y-6 font-normal text-center border-b border-solid border-border-primary",children:(0,i.jsx)("p",{children:u(o)})}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 md:space-x-3 md:flex-row",children:[(0,i.jsx)(r.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[160px]",onClick:a,label:u("Yes"),disabled:d,title:"Yes"}),(0,i.jsx)(r.A,{className:"btn-secondary btn-normal w-full md:w-auto min-w-[160px]",onClick:s,label:u("No"),title:"No"})]})]})})}),"Are you sure want to change status ?"==o&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[(0,i.jsx)("span",{className:"p-[10px] bg-primary min-w-min rounded-full mb-3 overflow-hidden text-xl-44 md:text-6xl",children:(0,i.jsx)(n.ZI,{className:"fill-white bg-primary"})}),(0,i.jsx)("h4",{children:u("Confirmation")})]}),(0,i.jsx)("h6",{className:"font-semibold text-center mb-7 md:mb-10",children:u(o)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(r.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:a,label:u("Yes"),disabled:d,title:"Yes"}),(0,i.jsx)(r.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:s,label:u("No"),title:"No"})]})]})})}),"Are you sure want to delete this record ?"==o&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsx)("div",{className:"flex justify-center mb-5",children:(0,i.jsx)("span",{className:"p-[22px] md:p-[26px] rounded-full bg-error text-xl-35 md:text-5xl",children:(0,i.jsx)(n.Vl,{className:"stroke-2 fill-white"})})}),(0,i.jsx)("h6",{className:"font-bold text-center mb-7 md:mb-10",children:u(o)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(r.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:a,label:u("Yes"),disabled:d,title:"Yes"}),(0,i.jsx)(r.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:s,label:u("No"),title:"No"})]})]})})})]})]})}},62500:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(65043),l=a(41290),r=a(33556),n=a(70579);const i=e=>{let{data:s,setObj:a,setIsDelete:i,className:c,customClick:o}=e;const d=(0,t.useCallback)((()=>{a(s),!o&&i(!0),o&&o(s)}),[]);return(0,n.jsx)(l.A,{className:"bg-transparent cursor-pointer btn-default btn-icon ".concat(c),onClick:d,label:"",title:"Delete",children:(0,n.jsx)(r.lM,{className:"fill-error"})})}},67008:(e,s,a)=>{a.d(s,{A:()=>o});var t=a(65043),l=a(73216),r=a(42145),n=a(41290),i=a(33556),c=a(70579);const o=e=>{let{data:s,route:a}=e;const o=(0,l.Zp)(),d=(0,t.useCallback)((()=>{o("/".concat(r.bw.app,"/").concat(a,"/view/").concat(s.uuid))}),[]);return(0,c.jsx)(n.A,{className:"mx-1 bg-transparent btn-default btn-icon",onClick:d,label:"",title:"View",children:(0,c.jsx)(i.kU,{className:"text-success"})})}},12209:(e,s,a)=>{a.d(s,{A:()=>m});var t=a(65043),l=a(74117),r=a(73216),n=a(7648),i=a(33556),c=a(79456),o=a(75214),d=a(70579);const m=e=>{let{headerActionConst:s,headerTitle:a}=e;const{t:m}=(0,l.Bd)(),u=(0,c.wA)(),{show:x}=(0,c.d4)((e=>e.coursesManagement)),b=(0,r.zy)(),h=(0,t.useCallback)((()=>{u((0,o.oM)(!x))}),[x]);return(0,d.jsxs)("header",{className:"sticky top-0 z-20 flex bg-white border-b shadow-header xl:shadow-none xl:h-auto xl:block border-border-primary xl:px-2 xl:pt-0",children:[(0,d.jsx)("div",{onClick:h,className:"pt-5 cursor-pointer text-xl-22 xl:hidden",children:(0,d.jsx)(i.Rt,{className:"ml-4"})}),(0,d.jsx)("div",{className:"p-2.5 xl:p-[18px] xl:shadow-header max-xl:w-[calc(100%-47px)]",children:(0,d.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:[(0,d.jsxs)("div",{className:"w-full xl:w-auto",children:[(0,d.jsx)("h1",{className:"mb-1 text-2xl max-xl:truncate xl:text-3xl",children:m(null!==a&&void 0!==a?a:(e=>{let s="";if(e.split("/")[2].includes("-")){return e.split("/")[2].split("-").forEach((e=>(s=s+e[0].toUpperCase()+e.slice(1)+" ",s))),s}return s=e.split("/")[2][0].toUpperCase()+e.split("/")[2].slice(1),s})(b.pathname))}),(0,d.jsx)(n.A,{})]}),s&&(0,d.jsx)("div",{className:"flex gap-2.5 max-xl:w-[calc(100%+40px)] lg:gap-5",children:(()=>{if(s)return s()})()})]})})]})}},93496:(e,s,a)=>{a.d(s,{Fw:()=>d,Po:()=>u,jZ:()=>m,y:()=>o});var t,l,r,n,i=a(57528),c=a(70459);const o=(0,c.J1)(t||(t=(0,i.A)(["\nmutation CreateSubscriber($subscriberData: CreateSubscriberDto!) {\n  createSubscriber(subscriberData: $subscriberData) {\n    message\n    data {\n      uuid\n      first_name\n      last_name\n      company_name\n      address\n      phone_number\n      country_code {\n        name\n        phoneCode\n      }\n      logo\n      subscribe_start\n      subscribe_end\n      status\n    }\n  }\n}\n"]))),d=(0,c.J1)(l||(l=(0,i.A)(["\nmutation BlockSubscriber($status: Float!, $subscribersId: String!) {\n  blockSubscriber(status: $status, subscribersId: $subscribersId) {\n    message\n    data {\n      uuid\n      first_name\n      last_name\n      company_name\n      address\n      phone_number\n      logo\n      subscribe_start\n      subscribe_end\n      status\n    }\n  }\n}\n"]))),m=(0,c.J1)(r||(r=(0,i.A)(["\nmutation DeleteSubscriber($subscribersId: String!) {\n  deleteSubscriber(subscribersId: $subscribersId) {\n    message\n  }\n}\n"]))),u=(0,c.J1)(n||(n=(0,i.A)(["\nmutation UpdateSubscriber($subscriberData: UpdateSubscriberDto!, $subscriberId: String!) {\n  updateSubscriber(subscriberData: $subscriberData, subscriberId: $subscriberId) {\n    message\n    data {\n      uuid\n      first_name\n      last_name\n      company_name\n      address\n      phone_number\n      country_code {\n        id\n        uuid\n        name\n        countryCode\n        phoneCode\n      }\n      logo\n      subscribe_start\n      subscribe_end\n      status\n      subscriber_branch {\n        uuid\n        location\n      }\n    }\n  }\n}\n"])))},80186:(e,s,a)=>{a.r(s),a.d(s,{default:()=>I});var t=a(65043),l=a(74117),r=a(73216),n=a(64526),i=a(79456),c=a(34764),o=a(67008),d=a(86607),m=a(77654),u=a(41290),x=a(32254),b=a(62500),h=a(75289),p=a(42145),f=a(33556),v=a(31881),j=a(88250),w=a(85408),N=a(93496),g=a(12209),y=a(66925),C=a(63516),k=a(12352),S=a(50103),A=a(70579);const P=e=>{let{openPopUp:s,data:a,onClose:r}=e;const{t:i}=(0,l.Bd)(),{changePasswordSubscriberValidationSchema:o}=(0,k.A)(),[d,m]=(0,t.useState)({showOldPassword:!1,showNewPassword:!1,showConfirmPassword:!1}),[x,{loading:b}]=(0,v.n)(S.Fp),[h,p]=(0,t.useState)(!1),j=(0,C.Wx)({validationSchema:o,initialValues:{newPassword:"",confirmPassword:""},onSubmit:async e=>{x({variables:{userData:{password:e.newPassword,re_enter_password:e.confirmPassword,user_id:null===a||void 0===a?void 0:a.uuid}}}).then((e=>{var s,a;n.oR.success(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(a=s.superAdminChangePassword)||void 0===a?void 0:a.message),r(),j.resetForm()})).catch((e=>{r(),n.oR.error(e.networkError.result.errors[0].message)}))}}),w=(0,t.useCallback)((e=>{j.setFieldValue(e.target.name,(0,y.AW)(e))}),[]);return(0,t.useEffect)((()=>{s&&setTimeout((()=>{p(!0)}),100)}),[s]),(0,A.jsxs)("div",{children:[b&&(0,A.jsx)("div",{className:"z-50 w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%] "}),(0,A.jsx)("div",{className:"".concat(s?"":"hidden"," absolute top-0 left-0 right-0 z-[1000] h-full bg-modal"),children:(0,A.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(h?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,A.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,A.jsxs)("div",{className:"relative bg-white shadow rounded-xl",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between px-5 py-6 border-b bg-accents-2 rounded-t-xl",children:[(0,A.jsxs)("div",{className:"flex items-center ",children:[(0,A.jsx)(f.io,{className:"inline-block mr-3 fill-baseColor",fontSize:"20"}),(0,A.jsx)("span",{className:"text-xl font-bold text-baseColor",children:i("Confirmation")})]}),(0,A.jsx)(u.A,{onClick:r,label:"",title:"Close",children:(0,A.jsx)(f.YY,{className:"text-error",fontSize:"14"})})]}),(0,A.jsx)("form",{onSubmit:j.handleSubmit,children:(0,A.jsx)("div",{className:"model-body",children:(0,A.jsxs)("div",{className:" p-3 md:p-5 mb-3 md:mb-5 lg:mb-[30px]",children:[(0,A.jsx)("h6",{className:"mb-3 md:mb-5 leading-[30px]",children:"Change Password"}),(0,A.jsxs)("div",{className:"flex flex-wrap items-start justify-center sm:justify-start lg:flex-nowrap mb-3 md:mb-5  gap-3 md:gap-5",children:[(0,A.jsxs)("div",{className:"relative w-full lg:w-[calc(50%-10px)] ",children:[(0,A.jsx)(c.A,{required:!0,onBlur:w,id:"newPassword",type:null!==d&&void 0!==d&&d.showNewPassword?"text":"password",label:i("New Password"),value:j.values.newPassword,onChange:j.handleChange,placeholder:i("New Password")}),(0,A.jsx)(u.A,{onClick:()=>m((e=>({...e,showNewPassword:!(null!==d&&void 0!==d&&d.showNewPassword)}))),className:"absolute right-3 top-[2.8rem]",label:"",children:null!==d&&void 0!==d&&d.showNewPassword?(0,A.jsx)(f.kU,{}):(0,A.jsx)(f.h3,{})}),j.touched.newPassword&&j.errors.newPassword&&(0,A.jsx)("p",{className:"text-red-400",children:j.errors.newPassword})]}),(0,A.jsxs)("div",{className:"relative w-full lg:w-[calc(50%-10px)] ",children:[(0,A.jsx)(c.A,{required:!0,onBlur:w,id:"confirmPassword",type:null!==d&&void 0!==d&&d.showConfirmPassword?"text":"password",label:i("Confirm Password"),value:j.values.confirmPassword,onChange:j.handleChange,placeholder:i("Confirm Password")}),(0,A.jsx)(u.A,{onClick:()=>m((e=>({...e,showConfirmPassword:!(null!==d&&void 0!==d&&d.showConfirmPassword)}))),className:"absolute right-3 top-[2.8rem]",label:"",children:null!==d&&void 0!==d&&d.showConfirmPassword?(0,A.jsx)(f.kU,{}):(0,A.jsx)(f.h3,{})}),j.touched.confirmPassword&&j.errors.confirmPassword&&(0,A.jsx)("p",{className:"text-red-400",children:j.errors.confirmPassword})]})]}),(0,A.jsxs)("div",{className:"flex justify-end px-5 gap-4",children:[(0,A.jsx)(u.A,{className:"btn-primary  ",type:"submit",label:i("Submit"),disabled:b,title:"Submit"}),(0,A.jsx)(u.A,{className:"btn-error  ",onClick:r,label:i("Close"),title:"Close"})]})]})})})]})})})})]})},_=e=>{let{data:s,setObj:a,setIsDelete:l,className:r}=e;const n=(0,t.useCallback)((()=>{a(s),l(!0)}),[]);return(0,A.jsx)(u.A,{className:"bg-transparent cursor-pointer btn-default ".concat(r),onClick:n,label:"",title:"Change Password",children:(0,A.jsx)(f.c_,{className:"fill-error"})})},I=()=>{var e,s,a,y,C,k,S,I,E,D,U;const{t:F}=(0,l.Bd)(),R=(0,r.Zp)(),[T]=(0,v.n)(N.jZ),[O,M]=(0,t.useState)(!1),[$,z]=(0,t.useState)({}),[Y,V]=(0,v.n)(N.Fw),[B,Z]=(0,t.useState)(!1),{subscriberManagement:J}=(0,i.d4)((e=>e.rolesManagement)),[W,L]=(0,t.useState)({limit:p.Wt,page:p.k2,sortOrder:"descend",search:"",sortField:"createdAt",index:0}),{userProfileData:q}=(0,i.d4)((e=>e.userProfile)),X=null!==(e=null===q||void 0===q||null===(s=q.getProfile)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.user_type)&&void 0!==e?e:"",[G,H]=(0,t.useState)(W.limit),K=[{name:F("Sr.No"),sortable:!1},{name:F("Logo"),sortable:!1,fieldName:"logo"},{name:F("Company Name"),sortable:!0,fieldName:"company_name"},{name:F("First Name"),sortable:!0,fieldName:"subscriber_users.first_name"},{name:F("Last Name"),sortable:!0,fieldName:"subscriber_users.last_name"},{name:F("Country Code"),sortable:!1},{name:F("Phone Number"),sortable:!1},{name:F("Email"),sortable:!1,fieldName:"email"},{name:F("Subscribe Start"),sortable:!0,fieldName:"subscribe_start"},{name:F("Subscribe End"),sortable:!0,fieldName:"subscribe_end"}],[Q,ee]=(0,t.useState)(!1),{data:se,refetch:ae}=(0,j.I)(w.p9,{variables:{limit:p.Wt,page:p.k2,sortOrder:"descend",search:"",sortField:"createdAt"}}),te=(0,t.useCallback)((()=>{M(!1),Z(!1),ee(!1)}),[]);function le(){R("/".concat(p.bw.app,"/").concat(p.bw.subscriber,"/add"))}const re=(0,t.useCallback)((()=>{Y({variables:{subscribersId:null===$||void 0===$?void 0:$.uuid,status:$.status===p.bT.ACTIVE?p.bT.INACTIVE:p.bT.ACTIVE}}).then((e=>{const s=e.data;n.oR.success(s.blockSubscriber.message),Z(!1),ae(W).catch((e=>n.oR.error(e)))})).catch((e=>{var s,a,t;n.oR.error(null===e||void 0===e||null===(s=e.networkError)||void 0===s||null===(a=s.result)||void 0===a||null===(t=a.errors[0])||void 0===t?void 0:t.message)}))}),[B]),ne=(null===se||void 0===se||null===(y=se.getSubscribers)||void 0===y||null===(C=y.data)||void 0===C?void 0:C.count)||0,ie=Math.ceil(ne/G),ce=(0,t.useCallback)((e=>{const s={...W,page:e,index:(e-1)*W.limit};L(s),x.A.saveState("filterSubscriber",JSON.stringify(s))}),[W.limit]);(0,t.useEffect)((()=>{H(W.limit)}),[W.limit]);const oe=(0,t.useCallback)((()=>{T({variables:{subscribersId:$.uuid}}).then((e=>{const s=e.data;n.oR.success(s.deleteSubscriber.message),M(!1),ae(W).catch((e=>n.oR.error(e)))})).catch((e=>{n.oR.error(e.networkError.result.errors[0].message)}))}),[$.uuid]),de=(0,t.useCallback)((e=>{L({...W,search:e.target.value})}),[]);(0,t.useEffect)((()=>{ae(W).catch((e=>n.oR.error(e)))}),[W]);const me=(0,t.useCallback)((e=>{Z(!0),z(e)}),[]),ue=(0,t.useCallback)(((e,s)=>{R("/".concat(p.bw.app,"/").concat(e,"/view/").concat(s.uuid))}),[]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(g.A,{headerActionConst:()=>(0,A.jsx)(A.Fragment,{children:(null===J||void 0===J?void 0:J.write)&&(0,A.jsx)(u.A,{className:"btn-normal md: btn btn-secondary",onClick:le,type:"button",label:F("Add New Subscriber"),title:"Add New Subscriber"})})}),(0,A.jsxs)("div",{className:"mb-3 bg-white rounded-xl overflow-auto border border-[#c8ced3] mx-7 p-3 md:p-5",children:[(0,A.jsxs)("div",{className:"flex flex-col justify-between gap-3 mb-3 md:gap-5 md:mb-5 btn-group md:flex-row",children:[(0,A.jsx)("h6",{className:"w-full leading-7 xmd:w-auto",children:F("Subscriber")}),(0,A.jsx)(c.A,{type:"text",id:"table-search",value:W.search,placeholder:F("Search"),onChange:de,inputIcon:(0,A.jsx)(f.vj,{fontSize:"18",className:"font-normal"})})]}),(0,A.jsxs)("div",{className:"w-full mb-3 overflow-auto bg-white border sm:w-auto rounded-t-xl custom-dataTable border-border-primary",children:[(0,A.jsxs)("table",{children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{children:[null===K||void 0===K?void 0:K.map((e=>(0,A.jsx)("th",{scope:"col",children:(0,A.jsxs)("div",{className:"flex items-center ".concat("Status"==e.name?"justify-center":""),children:[e.name,e.sortable&&(0,A.jsxs)("button",{onClick:()=>{return s=e.fieldName,void L({...W,sortField:s,sortOrder:"ascend"===W.sortOrder?"descend":"ascend"});var s},children:[(""===W.sortOrder||W.sortField!==e.fieldName)&&(0,A.jsx)(f.xs,{className:"w-3 h-3 ml-1 fill-white"}),"ascend"===W.sortOrder&&W.sortField===e.fieldName&&(0,A.jsx)(f.xD,{className:"ml-1 fill-white"}),"descend"===W.sortOrder&&W.sortField===e.fieldName&&(0,A.jsx)(f.xR,{className:"ml-1 fill-white"})]})]})},e.fieldName))),(0,A.jsx)("th",{scope:"col",children:(0,A.jsx)("div",{className:"flex items-center",children:F("Action")})})]})},"sorting"),(0,A.jsx)("tbody",{children:null===se||void 0===se||null===(k=se.getSubscribers)||void 0===k||null===(S=k.data)||void 0===S||null===(I=S.Subscriber)||void 0===I?void 0:I.map(((e,s)=>{var a;const t=e.logo.startsWith(p.ZX)?e.logo:"".concat(p.ZX,"/").concat(e.logo),l=(null===W||void 0===W?void 0:W.index)+s+1;return(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{scope:"row",className:"text-center",children:l}),(0,A.jsx)("td",{className:"text-left truncate text-ellipsis max-w-[360px]",children:(0,A.jsx)("button",{className:"w-[60px] h-[60px] rounded-md overflow-hidden inline-block font-medium cursor-pointer text-primary hover:underline aspect-square",onClick:()=>ue(p.bw.subscriber,e),children:(0,A.jsx)("picture",{children:(0,A.jsx)("img",{src:t})})})}),(0,A.jsx)("td",{className:"text-left",children:e.company_name}),(0,A.jsx)("td",{className:"text-left",children:e.first_name}),(0,A.jsx)("td",{className:"text-left",children:e.last_name}),(0,A.jsx)("td",{className:"text-left",children:"".concat(e.country_code.phoneCode," ").concat(null===e||void 0===e||null===(a=e.country_code)||void 0===a?void 0:a.name)}),(0,A.jsx)("td",{className:"text-left",children:e.phone_number}),(0,A.jsx)("td",{className:"text-left",children:e.email}),(0,A.jsx)("td",{className:"text-left",children:e.subscribe_start}),(0,A.jsx)("td",{className:"text-left",children:e.subscribe_end}),(0,A.jsx)("td",{children:(0,A.jsxs)("div",{className:"flex justify-center btn-group",children:[(null===J||void 0===J?void 0:J.read)&&(0,A.jsx)(o.A,{data:e,route:p.bw.subscriber}),(null===J||void 0===J?void 0:J.update)&&(0,A.jsx)(d.A,{data:e,route:p.bw.subscriber}),X===(null===p.ve||void 0===p.ve?void 0:p.ve.SUPER_ADMIN)&&(null===J||void 0===J?void 0:J.delete)&&(0,A.jsx)(b.A,{data:e,setObj:z,setIsDelete:M}),X===(null===p.ve||void 0===p.ve?void 0:p.ve.SUPER_ADMIN)&&(null===J||void 0===J?void 0:J.update)&&(0,A.jsx)(_,{data:e,setObj:z,setIsDelete:ee}),(0,A.jsx)("div",{className:"flex justify-center",children:(null===J||void 0===J?void 0:J.update)&&(0,A.jsx)("span",{className:"mt-2 font-medium text-blue-600 hover:underline",children:(0,A.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,A.jsx)("input",{type:"checkbox",className:"sr-only peer",value:e.status,onChange:()=>me(e),checked:e.status===p.bT.ACTIVE}),(0,A.jsx)("div",{className:"w-[30px] h-[14px] bg-secondary rounded-full peer peer-focus:ring-3 peer-focus:ring-red-200 peer-checked:after:translate-x-full peer-checked:after:border-white after:content- after:absolute after:top-[-1px] after:left-0 after:bg-white after:drop-shadow-outline-2 after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})})})]})})]},e.uuid)}))})]}),(0===(null===se||void 0===se||null===(E=se.getSubscribers)||void 0===E||null===(D=E.data)||void 0===D?void 0:D.count)||null===(null===se||void 0===se||null===(U=se.getSubscribers)||void 0===U?void 0:U.data))&&(0,A.jsx)("div",{className:"flex justify-center",children:(0,A.jsx)("div",{children:F("No Data")})})]}),(0,A.jsxs)("div",{className:"flex flex-wrap items-center mt-2",children:[(0,A.jsxs)("div",{className:"flex items-center mr-3 md:mr-7",children:[(0,A.jsx)("span",{className:"text-sm font-normal text-gray-700 whitespace-nowrap ",children:F("Per Page")}),(0,A.jsx)("select",{value:W.limit,className:"border border-border-primary rounded-xl ml-2 px-3 text-sm py-1.5 text-gray-500 w-[70px] h-[36px] appearance-none bg-white",onChange:e=>(e=>{const s=Number(e),a={...W,limit:s,page:p.k2,index:0};L(a),x.A.saveState("filterSubscriber",JSON.stringify(a))})(e.target.value),children:null===p.aj||void 0===p.aj?void 0:p.aj.map((e=>(0,A.jsx)("option",{children:e},e)))})]}),(0,A.jsx)(m.A,{currentPage:W.page,totalPages:ie,onPageChange:ce,recordsPerPage:G})]}),O&&(0,A.jsx)(h.A,{warningText:p.jl,onClose:te,action:oe,show:O}),B&&(0,A.jsx)(h.A,{warningText:p.lN,onClose:te,action:re,show:B,disabled:null===V||void 0===V?void 0:V.loading}),Q&&(0,A.jsx)(P,{openPopUp:Q,data:$,onClose:te})]})]})}}}]);
//# sourceMappingURL=186.0c6129e3.chunk.js.map