"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[2756],{92756:(e,l,s)=>{s.d(l,{A:()=>N});var t=s(65043),r=s(74117),i=s(85290),a=s(75958),o=s(33556),n=s(41290),d=s(92382),c=(s(4430),s(69078),s(12209)),u=s(73216),m=s(42145),x=s(97178),p=s(88250),v=s(63516),b=s(64526),g=s(10959),h=s(8848),f=s(62245),w=s(8659),j=s(34764),y=s(79456),_=s(70579);const N=e=>{var l,s,N,C,k,S;let{slider:A}=e;const{t:D}=(0,r.Bd)(),I=(0,u.Zp)(),{data:U,refetch:P,loading:T}=(0,p.I)(w.X,{variables:{inputData:{sortOrder:"descend",sortField:"created_at",search:"",page:1,limit:8,category_id:"",type:m.CS.assigned}}}),{data:E}=(0,p.I)(x.fk,{variables:{limit:10,page:1,sortField:"name",sortOrder:"",search:""}}),[F,O]=(0,t.useState)({sortOrder:"descend",sortField:"created_at",search:"",page:1,limit:8,category_id:"",type:m.CS.assigned}),[z,L]=(0,t.useState)([]),[R,M]=(0,t.useState)(!1),[Z,q]=(0,t.useState)(!1),[V,B]=(0,t.useState)(!1),[J,G]=(0,t.useState)([]),{userProfileData:H}=(0,y.d4)((e=>e.userProfile)),X=(0,v.Wx)({initialValues:{selectedCategory:"",title:""},onSubmit:()=>{}});(0,t.useEffect)((()=>{var e,l,s;const t=[];null===E||void 0===E||null===(e=E.getActiveCategories)||void 0===e||null===(l=e.data)||void 0===l||null===(s=l.categories)||void 0===s||s.map((e=>{t.push({name:null===e||void 0===e?void 0:e.name,key:null===e||void 0===e?void 0:e.uuid})})),L(t)}),[E]),(0,t.useEffect)((()=>{var e,l,s;const t=[];null===U||void 0===U||null===(e=U.getUserCoursesInProgressOrAssigned)||void 0===e||null===(l=e.data)||void 0===l||null===(s=l.courses)||void 0===s||s.map((e=>{t.push(e)})),Z?(q(null!==Z&&void 0!==Z?Z:!Z),G([...J,...t])):G(t)}),[U]);const $=(0,t.useCallback)((()=>{var e,l,s;q(!1),O({...F,page:1,search:null===X||void 0===X||null===(e=X.values)||void 0===e?void 0:e.title,category_id:null!==X&&void 0!==X&&null!==(l=X.values)&&void 0!==l&&l.selectedCategory?null===X||void 0===X||null===(s=X.values)||void 0===s?void 0:s.selectedCategory:""})}),[F,X]),W=e=>{I("/".concat(m.bw.app,"/").concat(m.bw.tfsCoursesTemplates,"/").concat(m.bw.courseDetails,"/?uuid=").concat(e))};(0,t.useEffect)((()=>{F&&(async()=>{B(!0);try{await P({inputData:{...F}})}catch(r){var e,l,s,t;b.oR.error(null===r||void 0===r||null===(e=r.networkError)||void 0===e||null===(l=e.result)||void 0===l||null===(s=l.errors)||void 0===s||null===(t=s[0])||void 0===t?void 0:t.message)}finally{B(!1),q(null!==Z&&void 0!==Z?Z:!Z)}})()}),[F]);const K=(0,t.useCallback)((()=>{I("/".concat(m.bw.app,"/").concat(m.bw.assignedCourseList))}),[]),Q=(0,t.useCallback)((()=>{X.setValues({title:"",selectedCategory:""}),O({...F,page:1,search:"",category_id:""})}),[F]),Y=e=>{var l,s,t,r,i;return[null===m.ve||void 0===m.ve?void 0:m.ve.SUPER_ADMIN,null===m.ve||void 0===m.ve?void 0:m.ve.SUBSCRIBER_ADMIN].includes(+(null===e||void 0===e||null===(l=e.created_by)||void 0===l?void 0:l.user_type))||(null===H||void 0===H||null===(s=H.getProfile)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.is_course_admin)||(null===H||void 0===H||null===(r=H.getProfile)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.is_course_creator)};return(0,_.jsxs)(_.Fragment,{children:[!A&&(0,_.jsx)(c.A,{headerActionConst:()=>(0,_.jsx)(n.A,{className:" ".concat(R?"btn-primary":"btn-secondary"," btn-normal md:w-[50px]"),label:"",onClick:()=>M(!R),title:"Filter",children:(0,_.jsx)(o.dJ,{})})}),(0,_.jsx)("div",{className:"mb-7",children:(0,_.jsxs)("div",{className:"p-5 border border-solid rounded-xl border-border-primary",children:[(0,_.jsxs)("div",{className:"flex flex-wrap justify-between md:gap-5 gap-3 mb-5",children:[(0,_.jsx)("h6",{children:D("Assigned Courses")}),A&&(0,_.jsx)(n.A,{className:"whitespace-nowrap btn btn-normal bg-primary text-white text-xs w-full sm:w-[80px] h-[36px] ",type:"button",label:D("View All"),onClick:()=>K(),title:"".concat(D("View All"))})]}),!A&&(0,_.jsx)(_.Fragment,{children:T||V&&!Z?(0,_.jsx)(g.A,{}):(0,_.jsxs)(_.Fragment,{children:[R&&(0,_.jsxs)("div",{className:"flex justify-start 2xl:flex-nowrap flex-wrap p-5 mb-5 border border-border-primary rounded-xl bg-light-blue gap-1 md:gap-2 2xl:gap-[18px] xl:gap-y-2 xl:gap-3 lg:gap-0.5 lg:gap-x-2.5 items-end",children:[(0,_.jsx)("div",{className:"w-full xl:w-[calc(33.3%-14px)] lg:w-[calc(50%-10px)]",children:(0,_.jsx)(j.A,{value:X.values.title,placeholder:"Search",type:"text",id:"title",name:"title",onChange:X.handleChange})}),(0,_.jsx)(h.A,{placeholder:"Category",className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",label:"",name:"selectedCategory",onChange:X.handleChange,value:X.values.selectedCategory,options:z,id:"selectedCategory"}),(0,_.jsx)(n.A,{className:"btn-primary btn-normal md:min-w-[160px] w-full md:w-auto mt-2 lg:mt-0",label:D("Search"),type:"button",onClick:()=>$(),title:"".concat(D("Search"))}),(0,_.jsx)(n.A,{className:"btn-secondary btn-normal w-full md:min-w-[160px] md:w-auto mt-2 lg:mt-0",label:D("Reset"),type:"button",onClick:()=>Q(),title:"".concat(D("Reset"))})]}),(0,_.jsx)("div",{className:"flex flex-wrap items-start justify-center gap-5 mb-7 sm:justify-start",children:(null===U||void 0===U||null===(l=U.getUserCoursesInProgressOrAssigned)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.count)>0?(0,_.jsx)(_.Fragment,{children:null===J||void 0===J?void 0:J.map((e=>(0,_.jsxs)("div",{className:"w-full 2xl:w-[calc(25%-15px)] text-left xl:w-[calc(33.3%-15px)] border-border-primary lg:w-[calc(50%-15px)] rounded-t-xl h-full cursor-pointer",onClick:()=>W(e.uuid),children:[(0,_.jsx)("picture",{className:"w-full block relative border-b border-solid border-border-primary",children:(0,_.jsx)("img",{src:null!==e&&void 0!==e&&e.course_image&&""===(null===e||void 0===e?void 0:e.course_image)?i:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(e.course_image),alt:"Course Image",title:"Course Image",className:"object-cover w-full h-full rounded-t-xl object-center"})}),(0,_.jsx)("div",{className:"w-full p-5 border-b border-x border-solid border-border-primary rounded-b-xl flex flex-col min-h-340px",children:(0,_.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,_.jsxs)("div",{className:"flex items-center flex-wrap justify-between mb-2.5 gap-2",children:[(0,_.jsx)("div",{children:(0,_.jsx)("span",{className:"min-h-9 flex justify-center bg-p-list-box-btn items-center font-bold text-white md:mb-0 px-4 rounded-xl min-w-[100px] text-sm mr-4",children:null===e||void 0===e?void 0:e.category.name})}),Y(e)&&(0,_.jsxs)("div",{className:"relative group",children:[(0,_.jsx)(o.mo,{className:"text-base md:text-lg cursor-pointer fill-primary"}),(0,_.jsx)("p",{className:"absolute whitespace-nowrap left-auto shadow-infos p-1.5 md:p-2.5 bg-white border border-border-primary rounded-xl md:right-0 xd:left-1 -top-[68px] md:-top-14 hidden group-hover:inline-block z-10",children:null!==e&&void 0!==e&&e.is_editable?"Editable Course":"Non-Editable Course"})]})]}),(0,_.jsx)("h4",{className:"text-base hover:text-primary mb-2.5 truncate",children:null===e||void 0===e?void 0:e.title}),(0,_.jsx)("p",{className:"leading-6 w-full  mb-3 md:mb-5 text-ellipsis line-clamp-3 break-words",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.description}}),(0,_.jsxs)("div",{className:"group max-xmd:flex-wrap flex items-center justify-between mb-5 mt-auto",children:[(0,_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,_.jsx)("picture",{className:"w-[40px] h-[40px] flex items-center justify-center rounded-full overflow-hidden border border-solid border-border-primary",children:(0,_.jsx)("img",{src:null!==e&&void 0!==e&&e.instructor_profile&&""===(null===e||void 0===e?void 0:e.instructor_name)?a:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(e.instructor_profile),alt:"User",title:"User",width:40,height:40,className:"object-cover w-full h-full"})}),(0,_.jsx)("p",{className:"text-base font-semibold break-words text-ellipsis",children:null===e||void 0===e?void 0:e.instructor_name})]}),(0,_.jsx)("div",{className:"time max-xmd:my-2.5",children:(0,_.jsxs)("span",{className:"flex text-xs",children:[(0,_.jsx)("span",{className:" text-base mr-1",children:(0,_.jsx)(o.zD,{className:"fill-secondary"})}),(0,_.jsx)("span",{children:"".concat((0,m.bZ)(null===e||void 0===e?void 0:e.estimate_time).hours," h ").concat((0,m.bZ)(null===e||void 0===e?void 0:e.estimate_time).minutes," m")})]})})]})]})})]},null===e||void 0===e?void 0:e.uuid)))}):(0,_.jsx)("div",{children:"No Records Found!!!"})})]})}),!A&&(0,_.jsx)("div",{className:"flex items-center justify-center",children:(0,_.jsx)(f.A,{className:"btn-secondary btn-normal w-full md:w-[120px]",label:D(V&&Z?"Loading...!":"Load More"),onClick:()=>(()=>{var e,l;q(!0),O({...F,page:F.page+1,category_id:null!==X&&void 0!==X&&null!==(e=X.values)&&void 0!==e&&e.selectedCategory?null===X||void 0===X||null===(l=X.values)||void 0===l?void 0:l.selectedCategory:""})})(),disabled:T||V||(null===U||void 0===U||null===(N=U.getUserCoursesInProgressOrAssigned)||void 0===N||null===(C=N.data)||void 0===C?void 0:C.count)===(null===J||void 0===J?void 0:J.length),title:"".concat(D(V&&Z?"Loading...!":"Load More"))})}),A&&(0,_.jsx)(d.A,{dots:!1,infinite:!1,arrows:!0,speed:500,slidesToShow:4,slidesToScroll:1,initialSlide:0,responsive:[{breakpoint:1600,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0}},{breakpoint:1199,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:991,settings:{slidesToShow:1,slidesToScroll:1}}],children:(null===U||void 0===U||null===(k=U.getUserCoursesInProgressOrAssigned)||void 0===k||null===(S=k.data)||void 0===S?void 0:S.count)>0&&(null===J||void 0===J?void 0:J.map((e=>(0,_.jsx)("div",{className:"px-2.5 cursor-pointer",onClick:()=>W(e.uuid),children:(0,_.jsxs)("div",{className:"h-full border-border-primary rounded-t-xl",children:[(0,_.jsx)("picture",{className:"w-full h-[200px] block relative",children:(0,_.jsx)("img",{src:null!==e&&void 0!==e&&e.course_image&&""===(null===e||void 0===e?void 0:e.course_image)?i:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(e.course_image),alt:"image",title:"",className:"object-cover w-full h-full rounded-t-xl object-center"})}),(0,_.jsx)("div",{className:"w-full p-5 border-b border-solid border-x border-border-primary rounded-b-xl flex flex-col min-h-340px",children:(0,_.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,_.jsxs)("div",{className:"flex justify-between flex-wrap items-center mb-2.5 gap-2",children:[(0,_.jsx)("div",{children:(0,_.jsx)("span",{className:"min-h-9 flex  justify-center bg-p-list-box-btn items-center font-bold text-white md:mb-0 px-4 rounded-xl min-w-[100px] text-sm mr-4",children:null===e||void 0===e?void 0:e.category.name})}),Y(e)&&(0,_.jsxs)("div",{className:"relative group",children:[(0,_.jsx)(o.mo,{className:"text-base md:text-lg cursor-pointer fill-primary"}),(0,_.jsx)("p",{className:"absolute whitespace-nowrap left-auto shadow-infos p-1.5 md:p-2.5 bg-white border border-border-primary rounded-xl md:right-0 xd:left-1 -top-[68px] md:-top-14 hidden group-hover:inline-block z-10",children:null!==e&&void 0!==e&&e.is_editable?"Editable Course":"Non-Editable Course"})]})]}),(0,_.jsx)("h4",{className:"text-base hover:text-primary mb-2.5 truncate",children:null===e||void 0===e?void 0:e.title}),(0,_.jsx)("p",{className:"leading-6 mb-3 md:mb-5 w-full text-ellipsis line-clamp-3 break-words",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.description}}),(0,_.jsxs)("div",{className:"group  flex flex-wrap gap-2 items-center justify-between mb-5 mt-auto max-xmd:flex-wrap",children:[(0,_.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,_.jsx)("picture",{className:"w-[40px] h-[40px] flex items-center justify-center rounded-full overflow-hidden border border-solid border-border-primary",children:(0,_.jsx)("img",{src:null!==e&&void 0!==e&&e.instructor_profile&&""===(null===e||void 0===e?void 0:e.instructor_name)?a:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(e.instructor_profile),alt:"User",title:"User",width:40,height:40,className:"object-cover w-full h-full"})}),(0,_.jsx)("p",{className:"text-base font-semibold text-ellipsis break-words",children:null===e||void 0===e?void 0:e.instructor_name})]}),(0,_.jsx)("div",{className:"time max-xmd:my-2.5",children:(0,_.jsxs)("span",{className:"flex text-xs",children:[(0,_.jsx)("span",{className:"mr-1 text-base",children:(0,_.jsx)(o.zD,{className:"fill-secondary"})}),(0,_.jsx)("span",{children:"".concat((0,m.bZ)(null===e||void 0===e?void 0:e.estimate_time).hours," h ").concat((0,m.bZ)(null===e||void 0===e?void 0:e.estimate_time).minutes," m")})]})})]})]})})]})},null===e||void 0===e?void 0:e.uuid))))})]})})]})}},8659:(e,l,s)=>{s.d(l,{X:()=>n,_:()=>o});var t,r,i=s(57528),a=s(70459);const o=(0,a.J1)(t||(t=(0,i.A)(["\n  query UsersDashboardCountDetails {\n  usersDashboardCountDetails {\n    message\n    data {\n      no_of_courses_completed\n      no_of_courses_in_progress\n      no_of_remaining_assigned_courses\n      total_certificates_earned\n    }\n  }\n}\n"]))),n=(0,a.J1)(r||(r=(0,i.A)(["\n  query GetUserCoursesInProgressOrAssigned($inputData: GetUserCoursesDto!) {\n  getUserCoursesInProgressOrAssigned(inputData: $inputData) {\n    message\n    data {\n      courses {\n        uuid\n        title\n        subtitle\n        description\n        is_certification\n        prerequisite\n        instructor_profile\n        instructor_name\n        instructor_qualification\n        course_image\n        banner_image\n        is_template\n        is_editable\n        estimate_time\n        percentage\n        category {\n          uuid\n          name\n          description\n          status\n          image_url\n        }\n        created_by {\n          uuid\n          email\n          first_name\n          last_name\n          user_type\n        }\n        totalChapters\n        chaptersCompleted\n      }\n      count\n    }\n  }\n}\n"])))}}]);
//# sourceMappingURL=2756.1da83837.chunk.js.map