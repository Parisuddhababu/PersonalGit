"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[784],{62245:(e,l,r)=>{r.d(l,{A:()=>o});var s=r(65043),a=r(70579);const t=e=>{let{label:l,onClick:r,type:t="button",primary:o,secondary:i,warning:d,className:n,children:c,disabled:u=!1,title:m}=e;const v=s.useMemo((()=>o?"bg-primary":i?"bg-secondary":d?"bg-warning":"bg-default"),[]);return(0,a.jsxs)("button",{className:"btn ".concat(v," ").concat(n," "),type:t,title:m,onClick:r,disabled:u,children:[c,l]})},o=s.memo(t)},80784:(e,l,r)=>{r.r(l),r.d(l,{default:()=>w});var s=r(65043),a=r(74117),t=r(85290),o=r(75958),i=r(33556),d=r(41290),n=r(12209),c=r(73216),u=r(42145),m=r(88250),v=r(79456),x=r(64526),p=r(24108),b=r(10959),f=r(75214),h=r(62245),g=r(34764),j=r(70579);const w=()=>{var e,l,r,w,y,N,C,_,k;const{t:A}=(0,a.Bd)(),S=(0,c.Zp)(),E=(0,v.wA)(),I=new URLSearchParams(location.search).get("category_uuid"),{data:P,refetch:R,loading:D}=(0,m.I)(p._w,{variables:{filterData:{limit:8,page:1,sortField:"createdAt",sortOrder:"descend",search:"",categoryId:I}},fetchPolicy:"network-only",skip:!I}),[M,B]=(0,s.useState)({limit:8,page:1,sortField:"createdAt",sortOrder:"descend",search:"",categoryId:null!==I&&void 0!==I?I:""}),[F,L]=(0,s.useState)(!1),[U,z]=(0,s.useState)(!1),[O,W]=(0,s.useState)([]),{templates:Z}=(0,v.d4)((e=>e.rolesManagement)),{userProfileData:T}=(0,v.d4)((e=>e.userProfile)),H=null!==(e=null===T||void 0===T||null===(l=T.getProfile)||void 0===l||null===(r=l.data)||void 0===r?void 0:r.user_type)&&void 0!==e?e:"",Y=null===T||void 0===T||null===(w=T.getProfile)||void 0===w||null===(y=w.data)||void 0===y?void 0:y.is_course_creator;(0,s.useEffect)((()=>{var e,l,r;const s=[];null===P||void 0===P||null===(e=P.getCategoryWiseCourses)||void 0===e||null===(l=e.data)||void 0===l||null===(r=l.courses)||void 0===r||r.map((e=>{s.push(e)})),F?(W([...O,...s]),L(null!==F&&void 0!==F?F:!F)):W(s)}),[P]);(0,s.useEffect)((()=>{M&&(async()=>{z(!0);try{await R({filterData:{...M}})}catch(a){var e,l,r,s;x.oR.error(null===a||void 0===a||null===(e=a.networkError)||void 0===e||null===(l=e.result)||void 0===l||null===(r=l.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.message)}finally{z(!1),L(null!==F&&void 0!==F?F:!F)}})()}),[M]);const q=(0,s.useCallback)((()=>{E((0,f.Dt)()),S("/".concat(u.bw.app,"/").concat(u.bw.educationAndEngagement))}),[]),G=(0,s.useCallback)((e=>{B({...M,search:e.target.value})}),[M]),J=e=>{var l,r,s,a,t;return[null===u.ve||void 0===u.ve?void 0:u.ve.SUPER_ADMIN,null===u.ve||void 0===u.ve?void 0:u.ve.SUBSCRIBER_ADMIN].includes(+(null===e||void 0===e||null===(l=e.created_by)||void 0===l?void 0:l.user_type))||(null===T||void 0===T||null===(r=T.getProfile)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.is_course_admin)||(null===T||void 0===T||null===(a=T.getProfile)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.is_course_creator)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n.A,{headerActionConst:()=>null!==Z&&void 0!==Z&&Z.write&&[null===u.ve||void 0===u.ve?void 0:u.ve.SUPER_ADMIN,null===u.ve||void 0===u.ve?void 0:u.ve.SUBSCRIBER_ADMIN].includes(H)||Y?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(d.A,{label:"+ Create Course",className:"btn-primary  btn-normal md:w-[150px] whitespace-nowrap",onClick:()=>q(),title:"Create Course"})}):void 0}),(0,j.jsx)("div",{className:"mb-7",children:(0,j.jsxs)("div",{className:"p-5 border border-solid border-border-primary rounded-xl",children:[(0,j.jsxs)("div",{className:"flex flex-wrap gap-3 mb-5 justify-between md:gap-5",children:[(0,j.jsx)("h6",{children:A("Category All Courses")}),(0,j.jsx)(g.A,{placeholder:A("Search"),type:"text",id:"table-search",value:M.search,onChange:G,inputIcon:(0,j.jsx)(i.vj,{fontSize:"18"})})]}),D||U&&!F?(0,j.jsx)(b.A,{}):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"flex items-start flex-wrap justify-center gap-5 mb-7 sm:justify-start",children:(null===P||void 0===P||null===(N=P.getCategoryWiseCourses)||void 0===N||null===(C=N.data)||void 0===C?void 0:C.count)>0?(0,j.jsx)(j.Fragment,{children:null===O||void 0===O?void 0:O.map((e=>(0,j.jsxs)("div",{className:"w-full text-left xl:w-[calc(33.3%-15px)] 2xl:w-[calc(25%-15px)]  lg:w-[calc(50%-15px)] border-border-primary h-full rounded-t-xl",children:[(0,j.jsx)("picture",{className:"w-full block relative border-b border-solid border-border-primary",children:(0,j.jsx)("img",{src:e.course_image&&""!==e.course_image?"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(e.course_image):t,alt:"Course Image",title:"Course Image",className:"object-cover w-full h-full rounded-t-xl"})}),(0,j.jsx)("div",{className:"flex flex-col border-b border-solid w-full p-5 border-x border-border-primary rounded-b-xl min-h-340px",children:(0,j.jsxs)("div",{className:"".concat(H!==u.ve.SUBSCRIBER_EMPLOYEE?"cursor-pointer":"pointer-events-auto"," flex flex-col flex-1"),onClick:()=>{return l=e.uuid,void S("/".concat(u.bw.app,"/").concat(u.bw.tfsCoursesTemplates,"/").concat(u.bw.courseDetails,"/?uuid=").concat(l));var l},children:[(0,j.jsxs)("div",{className:"flex-wrap flex justify-between items-center mb-2.5 gap-2",children:[(0,j.jsx)("div",{children:(0,j.jsx)("span",{className:"h-9 flex items-center justify-center bg-p-list-box-btn font-bold text-white md:mb-0 px-4 rounded-xl min-w-[100px] text-sm mr-4",children:null===e||void 0===e?void 0:e.category.name})}),J(e)&&(0,j.jsxs)("div",{className:"relative group",children:[(0,j.jsx)(i.mo,{className:"text-base md:text-lg cursor-pointer fill-primary"}),(0,j.jsx)("p",{className:"absolute whitespace-nowrap left-auto shadow-infos p-1.5 md:p-2.5 bg-white border border-border-primary rounded-xl md:right-0 xd:left-1 -top-[68px] md:-top-14 hidden group-hover:inline-block z-10",children:null!==e&&void 0!==e&&e.is_editable?"Editable Course":"Non-Editable Course"})]})]}),(0,j.jsx)("h4",{className:"text-base hover:text-primary mb-2.5 truncate",children:null===e||void 0===e?void 0:e.title}),(0,j.jsx)("p",{className:"leading-6 mb-3 md:mb-5 w-full text-ellipsis line-clamp-3 break-words ",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.description}}),(0,j.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-2 mt-auto",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("picture",{className:"w-[40px] h-[40px] flex items-center justify-center rounded-full overflow-hidden border border-solid border-border-primary",children:(0,j.jsx)("img",{src:null!==e&&void 0!==e&&e.instructor_profile&&""!==(null===e||void 0===e?void 0:e.instructor_profile)?"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(null===e||void 0===e?void 0:e.instructor_profile):o,width:40,height:40,alt:"profile",title:"profile",className:"object-cover w-full h-full"})}),(0,j.jsx)("p",{className:"font-semibold",children:null===e||void 0===e?void 0:e.instructor_name})]}),(0,j.jsx)("div",{className:"time max-xmd:my-2.5",children:(0,j.jsxs)("span",{className:"text-xs flex ",children:[(0,j.jsx)("span",{className:"text-base mr-1 ",children:(0,j.jsx)(i.zD,{className:"fill-secondary"})}),(0,j.jsx)("span",{children:"".concat((0,u.bZ)(null===e||void 0===e?void 0:e.estimate_time).hours," h ").concat((0,u.bZ)(null===e||void 0===e?void 0:e.estimate_time).minutes," m")})]})})]})]})})]},null===e||void 0===e?void 0:e.uuid)))}):(0,j.jsx)("div",{children:"No Records Found!!!"})})}),(0,j.jsx)("div",{className:"flex items-center justify-center",children:(0,j.jsx)(h.A,{className:"btn-secondary btn-normal w-full md:w-[120px]",label:A(U&&F?"Loading...!":"Load More"),onClick:()=>(L(!0),void B({...M,page:M.page+1})),disabled:D||U||(null===P||void 0===P||null===(_=P.getCategoryWiseCourses)||void 0===_||null===(k=_.data)||void 0===k?void 0:k.count)===O.length,title:"".concat(A("Load More"))})})]})})]})}}}]);
//# sourceMappingURL=784.ac1e5a94.chunk.js.map