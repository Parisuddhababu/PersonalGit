"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[4362],{62245:(e,a,t)=>{t.d(a,{A:()=>i});var l=t(65043),n=t(70579);const r=e=>{let{label:a,onClick:t,type:r="button",primary:i,secondary:s,warning:o,className:d,children:c,disabled:u=!1,title:m}=e;const g=l.useMemo((()=>i?"bg-primary":s?"bg-secondary":o?"bg-warning":"bg-default"),[]);return(0,n.jsxs)("button",{className:"btn ".concat(g," ").concat(d," "),type:r,title:m,onClick:t,disabled:u,children:[c,a]})},i=l.memo(r)},97178:(e,a,t)=>{t.d(a,{Go:()=>m,OU:()=>v,fk:()=>g,gT:()=>p});var l,n,r,i,s,o,d,c=t(57528),u=t(70459);(0,u.J1)(l||(l=(0,c.A)(["\n  query GetSubCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n    getSubCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n      data {\n        subCategories {\n          uuid\n          name\n          image_url\n          description\n          status\n          category {\n            uuid\n            name\n            description\n            image_url\n            status\n          }\n        }\n        count\n      }\n    }\n  }\n  "])));const m=(0,u.J1)(n||(n=(0,c.A)(["\n    query GetCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n      getCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n        data {\n          categories {\n            description\n            image_url\n            name\n            uuid\n            status\n          }\n          count\n        }\n        message\n      }\n    }\n  "]))),g=(0,u.J1)(r||(r=(0,c.A)(["\n  query GetActiveCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n    getActiveCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n      data {\n        categories {\n          description\n          image_url\n          name\n          uuid\n          status\n        }\n        count\n      }\n      message\n    }\n  }\n"]))),v=(0,u.J1)(i||(i=(0,c.A)(["\n  query GetCategoriesAndCourseCountWithPagination($limit: Float!, $page: Float!, $search: String!) {\n    getCategoriesAndCourseCountWithPagination(limit: $limit, page: $page, search: $search) {\n      message\n      data {\n        count\n        categories {\n          uuid\n          status\n          name\n          description\n          image_url\n          course_count\n        }\n      }\n    }\n  }\n"]))),p=((0,u.J1)(s||(s=(0,c.A)(["\n  query GetSubCategoryById($getSubCategoryByIdId: String!) {\n    getSubCategoryById(id: $getSubCategoryByIdId) {\n      data {\n        uuid\n        name\n        image_url\n        description\n        status\n        category {\n          name\n          uuid\n          image_url\n          status\n        }\n      }\n      message\n    }\n  }\n"]))),(0,u.J1)(o||(o=(0,c.A)(["\n  query GetCategoryById($categoryId: String!) {\n    getCategoryById(categoryId: $categoryId) {\n      data {\n        uuid\n        name\n        image_url\n        description\n        status\n      }\n      message\n    }\n  }\n"]))));(0,u.J1)(d||(d=(0,c.A)(["\nquery GetActiveSubCategoriesByCategoryId($categoryId: String!) {\n  getActiveSubCategoriesByCategoryId(category_id: $categoryId) {\n    data {\n      uuid\n      name\n      image_url\n      description\n      status\n    }\n    message\n  }\n}\n"])))},64362:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var l=t(65043),n=t(74117),r=t(41290),i=t(62245),s=t(33556),o=t(8848),d=t(42145),c=t(24108),u=t(88250),m=t(63516),g=t(73216),v=t(35475),p=t(10959),x=t(64526),b=t(12209),h=t(97178),y=t(79456),f=t(75214),w=t(34764),C=t(85290),j=t(70579);const N=()=>{var e,a,t,N,S,$,A,_,k;const{t:F}=(0,n.Bd)(),I=(0,g.Zp)(),O=(0,y.wA)(),[B]=(0,v.ok)(),E=B.get("IsSelectCourseTemplate"),{data:D,refetch:P,loading:J}=(0,u.I)(c.kg,{variables:{filterData:{limit:8,page:1,sortField:"createdAt",sortOrder:"descend",search:"",category:[]}}}),{data:R}=(0,u.I)(h.fk,{variables:{limit:10,page:1,sortField:"name",sortOrder:"",search:""}}),[G,M]=(0,l.useState)({limit:8,page:1,sortField:"createdAt",sortOrder:"descend",search:"",category:[]}),[T,U]=(0,l.useState)([]),[q,L]=(0,l.useState)(!1),[z,V]=(0,l.useState)(!1),[W,H]=(0,l.useState)(!1),[Z,K]=(0,l.useState)([]),{userProfileData:Q}=(0,y.d4)((e=>e.userProfile)),X=null===Q||void 0===Q||null===(e=Q.getProfile)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.user_type,Y=null===Q||void 0===Q||null===(t=Q.getProfile)||void 0===t||null===(N=t.data)||void 0===N?void 0:N.is_course_creator,ee=(0,m.Wx)({initialValues:{selectedCategory:"",title:""},onSubmit:e=>{V(!1),M({...G,page:1,category:null!==e&&void 0!==e&&e.selectedCategory?[null===e||void 0===e?void 0:e.selectedCategory]:[],search:null===e||void 0===e?void 0:e.title})}});(0,l.useEffect)((()=>{var e,a,t;const l=[];null===R||void 0===R||null===(e=R.getActiveCategories)||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.categories)||void 0===t||t.map((e=>{l.push({name:null===e||void 0===e?void 0:e.name,key:null===e||void 0===e?void 0:e.uuid})})),U(l)}),[R]),(0,l.useEffect)((()=>{var e,a,t;const l=[];null===D||void 0===D||null===(e=D.getCourseTemplates)||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.courses)||void 0===t||t.map((e=>{l.push(e)})),z?(K([...Z,...l]),V(null!==z&&void 0!==z?z:!z)):K(l)}),[D]);(0,l.useEffect)((()=>{G&&(async()=>{H(!0);try{await P({filterData:{...G}})}catch(e){x.oR.error(e.networkError.result.errors[0].message)}finally{H(!1),V(null!==z&&void 0!==z?z:!z)}})()}),[G]);const ae=(0,l.useCallback)((()=>{O((0,f.Dt)()),I("/".concat(d.bw.app,"/").concat(d.bw.educationAndEngagement))}),[]),te=(0,l.useCallback)((()=>{null===ee||void 0===ee||ee.resetForm(),M({limit:8,page:1,sortField:"createdAt",sortOrder:"descend",search:"",category:[]})}),[]),le=e=>{var a,t,l,n,r;return[null===d.ve||void 0===d.ve?void 0:d.ve.SUPER_ADMIN,null===d.ve||void 0===d.ve?void 0:d.ve.SUBSCRIBER_ADMIN].includes(+(null===e||void 0===e||null===(a=e.created_by)||void 0===a?void 0:a.user_type))||(null===Q||void 0===Q||null===(t=Q.getProfile)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.is_course_admin)||(null===Q||void 0===Q||null===(n=Q.getProfile)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.is_course_creator)},ne=(e,a,t)=>e?a:t;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.A,{headerActionConst:()=>[null===d.ve||void 0===d.ve?void 0:d.ve.SUPER_ADMIN,null===d.ve||void 0===d.ve?void 0:d.ve.SUBSCRIBER_ADMIN].includes(X)||Y?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.A,{className:" ".concat(q?"btn-primary":"btn-secondary"," btn-normal md:w-[50px]"),label:"",onClick:()=>L(!q),children:(0,j.jsx)(s.dJ,{})}),!E&&(0,j.jsx)(r.A,{label:"+ Create Course",className:"btn-primary  btn-normal md:w-[150px] whitespace-nowrap",onClick:()=>ae()})]}):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(r.A,{className:" ".concat(q?"btn-primary":"btn-secondary"," btn-normal md:w-[50px]"),label:"",onClick:()=>L(!q),children:(0,j.jsx)(s.dJ,{})})}),headerTitle:"All Courses"}),(0,j.jsx)("div",{children:J?(0,j.jsx)(p.A,{}):(0,j.jsxs)("div",{children:[q&&(0,j.jsxs)("form",{onSubmit:ee.handleSubmit,children:[" ",(0,j.jsxs)("div",{className:"flex justify-start flex-wrap 2xl:flex-nowrap p-5 mb-5 border border-border-primary rounded-xl bg-light-blue gap-1 md:gap-2 2xl:gap-[18px] xl:gap-y-2 xl:gap-3 lg:gap-0.5 lg:gap-x-2.5 items-end",children:[(0,j.jsx)("div",{className:"w-full lg:w-[calc(33.3%-14px)]",children:(0,j.jsx)(w.A,{placeholder:"Search",name:"title",value:null===ee||void 0===ee||null===(S=ee.values)||void 0===S?void 0:S.title,onChange:null===ee||void 0===ee?void 0:ee.handleChange})}),(0,j.jsx)(o.A,{placeholder:"Category",className:"w-full lg:w-[calc(33.3%-14px)]",label:"",name:"selectedCategory",onChange:ee.handleChange,value:ee.values.selectedCategory,options:T,id:"selectedCategory"}),(0,j.jsx)(r.A,{type:"submit",className:"btn-primary btn-normal w-full md:min-w-[160px] md:w-auto lg:mt-0",label:F("Search")}),(0,j.jsx)(r.A,{type:"button",onClick:te,className:"btn-secondary btn-normal w-full md:min-w-[160px] md:w-auto lg:mt-0",label:F("Reset")})]})]}),W&&!z?(0,j.jsx)(p.A,{}):(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:"p-3 border border-solid md:p-5 border-border-primary rounded-xl",children:[(0,j.jsx)("h5",{className:"mb-5",children:F("All Courses")}),(null===D||void 0===D||null===($=D.getCourseTemplates)||void 0===$||null===(A=$.data)||void 0===A?void 0:A.count)>0?(0,j.jsx)("div",{className:"flex flex-wrap items-start justify-center gap-5 mb-5 course-wrapper md:mb-7 sm:justify-start",children:null===Z||void 0===Z?void 0:Z.map((e=>{var a,t;return(0,j.jsxs)("div",{className:"2xl:w-[calc(25%-15px)] xl:w-[calc(33.3%-15px)] xmd:w-[calc(50%-10px)] w-full border border-solid border-border-primary rounded-xl overflow-hidden hover:shadow-outline cursor-pointer",children:[(0,j.jsx)("picture",{className:"w-full block relative border-b border-solid border-border-primary",children:(0,j.jsx)("img",{src:ne(!(null!==e&&void 0!==e&&e.course_image)||""===(null===e||void 0===e?void 0:e.course_image),C,"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(e.course_image)),alt:"Course",title:"Course",width:360,height:200,className:"object-cover w-full h-full"})}),(0,j.jsx)("div",{className:"w-full p-3 md:p-5 flex flex-col min-h-340px",children:(0,j.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,j.jsxs)("div",{className:"flex-wrap flex items-center justify-between mb-2.5 gap-2",children:[(0,j.jsx)("div",{children:(null===e||void 0===e||null===(a=e.category)||void 0===a?void 0:a.name)&&(0,j.jsx)("span",{className:"min-h-9 flex items-center justify-center bg-yellow font-bold text-dark-grey md:mb-0 px-4 rounded-xl min-w-[100px] text-sm mr-4",children:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.name})}),le(e)&&(0,j.jsxs)("div",{className:"relative group",children:[(0,j.jsx)(s.mo,{className:"text-base md:text-lg cursor-pointer fill-primary"}),(0,j.jsx)("p",{className:"absolute whitespace-nowrap left-auto shadow-infos p-1.5 md:p-2.5 bg-white border border-border-primary rounded-xl md:right-0 xd:left-1 -top-[68px] md:-top-14 hidden group-hover:inline-block z-10",children:ne(null===e||void 0===e?void 0:e.is_editable,"Editable Course","Non-Editable Course")})]})]}),(0,j.jsx)("h4",{className:"text-base hover:text-primary mb-2.5 line-clamp-2",children:null===e||void 0===e?void 0:e.title}),(0,j.jsx)("p",{className:"leading-6 mb-3 md:mb-5 w-full text-ellipsis line-clamp-3 break-words",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.description}}),(0,j.jsxs)("div",{className:"group max-xmd:flex-wrap flex items-center justify-between mb-5 mt-auto",children:[(0,j.jsxs)("div",{className:"mr-4 flex items-center",children:[(0,j.jsx)("picture",{className:"w-10 h-10 block rounded-[40px] mr-2.5",children:(0,j.jsx)("img",{src:ne(!(null!==e&&void 0!==e&&e.course_image)||""===(null===e||void 0===e?void 0:e.course_image),C,"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(e.instructor_profile)),alt:"User",title:"User",width:40,height:40,className:"object-cover w-full h-full rounded-[40px]"})}),(0,j.jsx)("h5",{className:"text-base font-semibold",children:null===e||void 0===e?void 0:e.instructor_name})]}),(0,j.jsx)("div",{className:"time max-xmd:my-2.5",children:(0,j.jsxs)("span",{className:"flex text-xs",children:[(0,j.jsx)("span",{className:"mr-1 text-base",children:(0,j.jsx)(s.zD,{className:"fill-secondary"})}),(0,j.jsx)("span",{children:(0,d.bU)(null===e||void 0===e?void 0:e.estimate_time)})]})})]}),(0,j.jsxs)("div",{className:"flex flex-wrap items-center ".concat(ne("true"===E,"justify-between","w-full")," gap-3 md:gap-5"),children:[(0,j.jsx)(r.A,{className:"btn-secondary btn-normal w-full ".concat(ne("true"===E,"md:w-[calc(50%-10px)]","w-full")," "),label:F("View"),onClick:()=>{return a=e.uuid,void I("/".concat(d.bw.app,"/").concat(d.bw.tfsCoursesTemplates,"/").concat(d.bw.courseDetails,"/?uuid=").concat(a));var a},title:"".concat(F("View"))}),"true"===E&&(0,j.jsx)(r.A,{className:"btn-primary btn-normal w-full md:w-[calc(50%-10px)]",label:F("Select"),onClick:()=>(e=>{O((0,f.bt)([{name:null===e||void 0===e?void 0:e.title,key:null===e||void 0===e?void 0:e.uuid}])),I("/".concat(d.bw.app,"/").concat(d.bw.educationAndEngagement,"/?uuid=").concat(null===e||void 0===e?void 0:e.uuid))})(e),title:"".concat(F("Select"))})]})]})})]},null===e||void 0===e?void 0:e.uuid)}))}):(0,j.jsx)("div",{children:"No Records Found!!!"}),(0,j.jsx)("div",{className:"flex items-center justify-center",children:(0,j.jsx)(i.A,{className:"btn-secondary btn-normal w-full md:w-[120px]",label:ne(W&&z,F("Loading...!"),F("Load More")),onClick:()=>(()=>{var e,a;V(!0),M({...G,page:G.page+1,category:null!==ee&&void 0!==ee&&null!==(e=ee.values)&&void 0!==e&&e.selectedCategory?[null===ee||void 0===ee||null===(a=ee.values)||void 0===a?void 0:a.selectedCategory]:[]})})(),disabled:J||W||(null===D||void 0===D||null===(_=D.getCourseTemplates)||void 0===_||null===(k=_.data)||void 0===k?void 0:k.count)===Z.length,title:"".concat(F(W&&z?"Loading...!":"Load More"))})})]})})]})})]})}}}]);
//# sourceMappingURL=4362.7c7ff8c5.chunk.js.map