"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[3342],{7648:(e,s,t)=>{t.d(s,{A:()=>x});var a=t(65043),l=t(74117),r=t(73216),i=t(35475),n=t(42145),o=t(79456),d=t(66925),c=t(70579);const u=()=>{var e,s,t;const{t:u}=(0,l.Bd)(),x=(0,r.zy)(),m=new URLSearchParams(x.search).get("uuid"),{id:h}=(0,r.g)(),{userProfileData:v}=(0,o.d4)((e=>e.userProfile)),p=null!==(e=null===v||void 0===v||null===(s=v.getProfile)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.user_type)&&void 0!==e?e:"",g=e=>{var s;let t="";if(null!==(s=e.split("/")[2])&&void 0!==s&&s.includes("-")){return e.split("/")[2].split("-").forEach((e=>{var s;return t=t+(null===(s=e[0])||void 0===s?void 0:s.toUpperCase())+e.slice(1)+" ",t})),t}var a;return t=(null===(a=e.split("/")[2][0])||void 0===a?void 0:a.toUpperCase())+e.split("/")[2].slice(1),t},j=e=>{let s="";if(null!==e&&void 0!==e&&e.includes("-")){s=null===e||void 0===e?void 0:e.replace(/-|\s/g," ");const t=s.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e][0].toUpperCase()+t[e].substring(1);return s=t.join(" "),s}var t;return s=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" ",s},f=e=>{let s="";return null!==e&&void 0!==e&&e.includes("-")||(s=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" "),s;var t},N=x.pathname.split("/"),b=(0,a.useCallback)((()=>{if((null===N||void 0===N?void 0:N.length)>0){const e=null===N||void 0===N?void 0:N.length;if(e<4)return(0,c.jsx)("span",{className:"text-primary",children:N[2]&&"".concat(u(j(N[2])))});if(e<5)return""!==N[3]?N[3].length>32?(0,c.jsxs)(c.Fragment,{children:[f(N[3])&&(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(i.k2,{to:"/".concat(n.bw.app,"/").concat(N[2]),className:"text-light-grey hover:underline",children:"".concat(u(g(x.pathname)))})}),f(N[3])&&(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),!f(N[3])&&(0,c.jsx)("span",{className:"text-primary",children:N[2]&&"".concat(u(j(N[2])))}),(0,c.jsx)("span",{className:"text-primary",children:N[3]&&"".concat(u(f(N[3])))})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(i.k2,{to:"/".concat(n.bw.app,"/").concat(N[2]),className:"text-light-grey hover:underline",children:"".concat(u(g(x.pathname)))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:N[3]&&"".concat(u(j(N[3])))})]}):(0,c.jsx)("span",{className:"text-primary",children:N[2]&&"".concat(u(j(N[2])))});if(e<6)return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(i.k2,{to:"/".concat(n.bw.app,"/").concat(N[2]),className:"text-light-grey hover:underline",children:"".concat(u(g(x.pathname)))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:N[3]&&"".concat(u(j(N[3])))})]});if(e<7){let e="";return m?e="?uuid=".concat(m):h&&(e="?uuid=".concat(h)),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(i.k2,{to:"/".concat(n.bw.app,"/").concat(N[2]),className:"text-light-grey hover:underline",children:u(j(N[2]))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(i.k2,{to:"/".concat(n.bw.app,"/").concat(N[2],"/").concat(N[3],"/").concat((""!==m||""!==h)&&e),className:"text-light-grey hover:underline",children:u(j(N[3]))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:N[5]&&"".concat(u(j(N[4])))})]})}}}),[N]);return(0,c.jsx)("div",{className:"w-full",children:(0,c.jsxs)("p",{className:"max-xs:text-xs text-xs-14 max-md:truncate",children:[(0,c.jsxs)("span",{children:[(0,c.jsx)(i.k2,{to:(0,d.Go)(p,n.ve.SUPER_ADMIN,"/".concat(n.bw.app,"/").concat(n.bw.dashboard),"/".concat(n.bw.app,"/").concat(n.bw.subscriber)),className:"cursor-pointer text-light-grey hover:underline",children:u("Home")}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"})]}),b()]})})},x=a.memo(u)},81410:(e,s,t)=>{t.d(s,{A:()=>l});t(65043);var a=t(70579);const l=function(){return(0,a.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%] z-[9999]"})}},12209:(e,s,t)=>{t.d(s,{A:()=>u});var a=t(65043),l=t(74117),r=t(73216),i=t(7648),n=t(33556),o=t(79456),d=t(75214),c=t(70579);const u=e=>{let{headerActionConst:s,headerTitle:t}=e;const{t:u}=(0,l.Bd)(),x=(0,o.wA)(),{show:m}=(0,o.d4)((e=>e.coursesManagement)),h=(0,r.zy)(),v=(0,a.useCallback)((()=>{x((0,d.oM)(!m))}),[m]);return(0,c.jsxs)("header",{className:"sticky top-0 z-20 flex bg-white border-b shadow-header xl:shadow-none xl:h-auto xl:block border-border-primary xl:px-2 xl:pt-0",children:[(0,c.jsx)("div",{onClick:v,className:"pt-5 cursor-pointer text-xl-22 xl:hidden",children:(0,c.jsx)(n.Rt,{className:"ml-4"})}),(0,c.jsx)("div",{className:"p-2.5 xl:p-[18px] xl:shadow-header max-xl:w-[calc(100%-47px)]",children:(0,c.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:[(0,c.jsxs)("div",{className:"w-full xl:w-auto",children:[(0,c.jsx)("h1",{className:"mb-1 text-2xl max-xl:truncate xl:text-3xl",children:u(null!==t&&void 0!==t?t:(e=>{let s="";if(e.split("/")[2].includes("-")){return e.split("/")[2].split("-").forEach((e=>(s=s+e[0].toUpperCase()+e.slice(1)+" ",s))),s}return s=e.split("/")[2][0].toUpperCase()+e.split("/")[2].slice(1),s})(h.pathname))}),(0,c.jsx)(i.A,{})]}),s&&(0,c.jsx)("div",{className:"flex gap-2.5 max-xl:w-[calc(100%+40px)] lg:gap-5",children:(()=>{if(s)return s()})()})]})})]})}},43342:(e,s,t)=>{t.r(s),t.d(s,{default:()=>C});var a,l=t(65043),r=t(12209),i=t(74117),n=t(33556),o=t(34764),d=t(77654),c=t(42145),u=t(32254),x=t(88250),m=t(31881),h=t(57528),v=t(70459);const p=(0,v.J1)(a||(a=(0,h.A)(["\n  query GetUsersWithStatusForCourse($inputData: GetUserWithStatusForCourseDto!) {\n    getUsersWithStatusForCourse(inputData: $inputData) {\n      message\n      data {\n        usersWithStatus {\n          uuid\n          first_name\n          last_name\n          user_type\n          status\n          email\n        }\n        count\n      }\n    }\n  }\n"])));var g,j=t(64526),f=t(8848),N=t(41290);const b=(0,v.J1)(g||(g=(0,h.A)(["\n  mutation AssignUserCourse($userCourseData: CreateUsersCourseAssignDto!) {\n    assignUserCourse(userCourseData: $userCourseData) {\n      message\n      data {\n        uuid\n        reward_point\n        is_course_completed\n        completed_date\n      }\n    }\n  }\n"])));var w=t(81410),y=t(70579);const C=function(){var e,s,t,a,h,v,g,C,S,_,k,U;const{t:A}=(0,i.Bd)(),F=new URLSearchParams(location.search).get("course_uuid"),[D,W]=(0,l.useState)([]),[P,E]=(0,l.useState)({sortOrder:"descend",sortField:"first_name",limit:10,page:1,search:"",index:0,user_types:[3,4,5,6,7],course_id:null!==F&&void 0!==F?F:""}),{data:O,refetch:R}=(0,x.I)(p,{variables:{inputData:{sortOrder:"descend",sortField:"first_name",limit:10,page:1,search:"",user_types:[3,4,5,6,7],course_id:F}}}),z=[{name:A("Sr.No"),sortable:!1},{name:A("Name"),sortable:!0,fieldName:A("first_name")},{name:A("Email"),sortable:!1,fieldName:A("email")},{name:A("Status"),sortable:!1,fieldName:"status"}],[J,I]=(0,l.useState)(P.limit),[L,M]=(0,m.n)(b),$=(null===O||void 0===O||null===(e=O.getUsersWithStatusForCourse)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.count)||0,B=Math.ceil($/J),[G,T]=(0,l.useState)(!1),q=(0,l.useCallback)((e=>{const s={...P,page:e,index:(e-1)*P.limit};E(s),u.A.saveState("filterAssignCourse",JSON.stringify(s))}),[P.limit]);(0,l.useEffect)((()=>{I(P.limit)}),[P.limit]),(0,l.useEffect)((()=>{const{index:e,...s}=P;R({inputData:s}).catch((e=>j.oR.error(e)))}),[P]);const H=(0,l.useCallback)((e=>{E({...P,search:e.target.value})}),[]),K=(0,l.useCallback)((()=>{L({variables:{userCourseData:{course_id:F,user_ids:D,is_assign_course_to_all:G,user_types:[3,4,5,6,7]}}}).then((e=>{var s;const t=null===e||void 0===e?void 0:e.data;j.oR.success(null===t||void 0===t||null===(s=t.assignUserCourse)||void 0===s?void 0:s.message),R()})).catch((e=>{var s,t,a;j.oR.error(null===e||void 0===e||null===(s=e.networkError)||void 0===s||null===(t=s.result)||void 0===t||null===(a=t.errors[0])||void 0===a?void 0:a.message)}))}),[D,F]);return(0,l.useEffect)((()=>{var e,s,t;const a=null===O||void 0===O||null===(e=O.getUsersWithStatusForCourse)||void 0===e||null===(s=e.data)||void 0===s||null===(t=s.usersWithStatus)||void 0===t?void 0:t.filter((e=>"Assign"===(null===e||void 0===e?void 0:e.status))),l=(null===a||void 0===a?void 0:a.map((e=>null===e||void 0===e?void 0:e.uuid)))||[];W(l)}),[O]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.A,{}),(null===M||void 0===M?void 0:M.loading)&&(0,y.jsx)(w.A,{}),(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"p-5 border border-solid rounded-xl border-border-primary",children:[(0,y.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-5 md:gap-5",children:[(0,y.jsx)("h6",{className:"w-full md:w-auto",children:A("User List")}),(0,y.jsxs)("div",{className:"flex flex-wrap w-full gap-3 md:gap-5 md:w-auto",children:[(0,y.jsx)("div",{className:"w-full md:w-[236px]",children:(0,y.jsx)(o.A,{type:"text",id:"table-search",value:P.search,placeholder:A("Search"),onChange:H,inputIcon:(0,y.jsx)(n.vj,{fontSize:"18",className:"font-normal"})})}),(0,y.jsx)("div",{className:"w-full sm:w-[150px]",children:(0,y.jsx)(f.A,{className:"w-full -mt-2",label:"",inputIcon:(0,y.jsx)(n.Jh,{className:"order-2"}),name:"filterDrpData",onChange:e=>{const s=e.target.value,[t,a]=s.split(":");E({...P,sortField:t,sortOrder:a})},value:P.sortField+":"+P.sortOrder,error:"",options:c.Ld,id:"filterDrpData"})})]})]}),(0,y.jsxs)("div",{className:"overflow-auto custom-dataTable",children:[(0,y.jsxs)("table",{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{scope:"col",className:"text-center",children:(0,y.jsx)("input",{type:"checkbox",className:"checkbox",checked:(null===D||void 0===D?void 0:D.length)===(null===O||void 0===O||null===(t=O.getUsersWithStatusForCourse)||void 0===t||null===(a=t.data)||void 0===a||null===(h=a.usersWithStatus)||void 0===h?void 0:h.length),onChange:e=>{let s=[];var t,a,l;(T(!G),e.target.checked)?(s=(null===O||void 0===O||null===(t=O.getUsersWithStatusForCourse)||void 0===t||null===(a=t.data)||void 0===a||null===(l=a.usersWithStatus)||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e.uuid)))||[],W(s)):W([])}})}),null===z||void 0===z?void 0:z.map((e=>(0,y.jsx)("th",{scope:"col",className:"".concat("sr_no"===e.fieldName?"pl-7 w-[100px] md:w-[140px]":"min-w-[20px]"),children:(0,y.jsxs)("div",{className:"flex items-center",children:[e.name,e.sortable&&(0,y.jsxs)("button",{onClick:()=>{return s=e.fieldName,void E({...P,sortField:s,sortOrder:"ascend"===P.sortOrder?"descend":"ascend"});var s},children:[(""===P.sortOrder||P.sortField!==e.fieldName)&&(0,y.jsx)(n.xs,{className:"fill-white"}),"ascend"===P.sortOrder&&P.sortField===e.fieldName&&(0,y.jsx)(n.xD,{className:"ml-1 fill-white"}),"descend"===P.sortOrder&&P.sortField===e.fieldName&&(0,y.jsx)(n.xR,{className:"ml-1 fill-white"})]})]})},e.name)))]})}),(0,y.jsx)("tbody",{children:null===O||void 0===O||null===(v=O.getUsersWithStatusForCourse)||void 0===v||null===(g=v.data)||void 0===g||null===(C=g.usersWithStatus)||void 0===C?void 0:C.map(((e,s)=>{const t=(null===P||void 0===P?void 0:P.index)+s+1;return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"text-center",children:(0,y.jsx)("input",{type:"checkbox",className:"checkbox ",id:"".concat(null===e||void 0===e?void 0:e.uuid),checked:null===D||void 0===D?void 0:D.includes(null===e||void 0===e?void 0:e.uuid),onChange:()=>(e=>{if(null===D||void 0===D?void 0:D.includes(e)){const s=null===D||void 0===D?void 0:D.filter((s=>s!==e));W(s)}else{const s=[...D,e];W(s)}})(null===e||void 0===e?void 0:e.uuid)})}),(0,y.jsx)("td",{scope:"row",className:"text-left pl-7",children:t}),(0,y.jsx)("td",{className:"text-left",children:(null===e||void 0===e?void 0:e.first_name)+" "+(null===e||void 0===e?void 0:e.last_name)}),(0,y.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.email}),(0,y.jsx)("td",{children:(0,y.jsx)("div",{className:"flex text-left btn-group",children:"Not Assign"===(null===e||void 0===e?void 0:e.status)?(0,y.jsx)("span",{className:"text-error",children:"Not assign"}):(0,y.jsx)("span",{className:"text-success",children:"Assigned"})})})]},null===e||void 0===e?void 0:e.uuid)}))})]}),(void 0===(null===O||void 0===O||null===(S=O.getUsersWithStatusForCourse)||void 0===S?void 0:S.data)||null===(null===O||void 0===O||null===(_=O.getUsersWithStatusForCourse)||void 0===_?void 0:_.data)||0===(null===O||void 0===O||null===(k=O.getUsersWithStatusForCourse)||void 0===k||null===(U=k.data)||void 0===U?void 0:U.count))&&(0,y.jsx)("div",{className:"flex justify-center",children:(0,y.jsx)("div",{children:"No Data"})})]}),(0,y.jsxs)("div",{className:"flex flex-wrap items-center gap-3 px-5 mt-2 overflow-auto md:gap-5 text-slate-700",children:[(0,y.jsxs)("div",{className:"flex items-center",children:[(0,y.jsx)("span",{className:"mr-2 text-sm whitespace-nowrap",children:A("Per Page")}),(0,y.jsx)("select",{value:P.limit,className:"border border-border-primary rounded-xl ml-2 px-3 text-sm py-1.5 text-gray-500 w-[70px] h-[36px] appearance-none bg-white",onChange:e=>(e=>{I(Number(e));const s=Number(e),t={...P,limit:s,page:1,index:0};E(t),u.A.saveState("filterAssignCourse",JSON.stringify(t))})(e.target.value),children:null===c.aj||void 0===c.aj?void 0:c.aj.map((e=>(0,y.jsx)("option",{children:e},e)))})]}),(0,y.jsx)("div",{children:(0,y.jsx)(d.A,{currentPage:P.page,totalPages:B,onPageChange:q,recordsPerPage:J})})]})]}),(0,y.jsx)("div",{className:"flex justify-end m-9",children:(0,y.jsx)(N.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",onClick:()=>K(),label:A("Submit"),disabled:(null===M||void 0===M?void 0:M.loading)||0===(null===D||void 0===D?void 0:D.length),title:"".concat(A("Submit"))})})]})]})}}}]);
//# sourceMappingURL=3342.0405d232.chunk.js.map