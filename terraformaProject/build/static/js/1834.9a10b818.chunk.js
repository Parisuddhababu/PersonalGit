"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[1834],{7648:(e,l,a)=>{a.d(l,{A:()=>u});var i=a(65043),n=a(74117),t=a(73216),s=a(35475),r=a(42145),d=a(79456),o=a(66925),c=a(70579);const m=()=>{var e,l,a;const{t:m}=(0,n.Bd)(),u=(0,t.zy)(),x=new URLSearchParams(u.search).get("uuid"),{id:v}=(0,t.g)(),{userProfileData:h}=(0,d.d4)((e=>e.userProfile)),p=null!==(e=null===h||void 0===h||null===(l=h.getProfile)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.user_type)&&void 0!==e?e:"",g=e=>{var l;let a="";if(null!==(l=e.split("/")[2])&&void 0!==l&&l.includes("-")){return e.split("/")[2].split("-").forEach((e=>{var l;return a=a+(null===(l=e[0])||void 0===l?void 0:l.toUpperCase())+e.slice(1)+" ",a})),a}var i;return a=(null===(i=e.split("/")[2][0])||void 0===i?void 0:i.toUpperCase())+e.split("/")[2].slice(1),a},j=e=>{let l="";if(null!==e&&void 0!==e&&e.includes("-")){l=null===e||void 0===e?void 0:e.replace(/-|\s/g," ");const a=l.split(" ");for(let e=0;e<a.length;e++)a[e]=a[e][0].toUpperCase()+a[e].substring(1);return l=a.join(" "),l}var a;return l=(null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" ",l},b=e=>{let l="";return null!==e&&void 0!==e&&e.includes("-")||(l=(null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" "),l;var a},f=u.pathname.split("/"),N=(0,i.useCallback)((()=>{if((null===f||void 0===f?void 0:f.length)>0){const e=null===f||void 0===f?void 0:f.length;if(e<4)return(0,c.jsx)("span",{className:"text-primary",children:f[2]&&"".concat(m(j(f[2])))});if(e<5)return""!==f[3]?f[3].length>32?(0,c.jsxs)(c.Fragment,{children:[b(f[3])&&(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(s.k2,{to:"/".concat(r.bw.app,"/").concat(f[2]),className:"text-light-grey hover:underline",children:"".concat(m(g(u.pathname)))})}),b(f[3])&&(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),!b(f[3])&&(0,c.jsx)("span",{className:"text-primary",children:f[2]&&"".concat(m(j(f[2])))}),(0,c.jsx)("span",{className:"text-primary",children:f[3]&&"".concat(m(b(f[3])))})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(s.k2,{to:"/".concat(r.bw.app,"/").concat(f[2]),className:"text-light-grey hover:underline",children:"".concat(m(g(u.pathname)))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:f[3]&&"".concat(m(j(f[3])))})]}):(0,c.jsx)("span",{className:"text-primary",children:f[2]&&"".concat(m(j(f[2])))});if(e<6)return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(s.k2,{to:"/".concat(r.bw.app,"/").concat(f[2]),className:"text-light-grey hover:underline",children:"".concat(m(g(u.pathname)))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:f[3]&&"".concat(m(j(f[3])))})]});if(e<7){let e="";return x?e="?uuid=".concat(x):v&&(e="?uuid=".concat(v)),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(s.k2,{to:"/".concat(r.bw.app,"/").concat(f[2]),className:"text-light-grey hover:underline",children:m(j(f[2]))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(s.k2,{to:"/".concat(r.bw.app,"/").concat(f[2],"/").concat(f[3],"/").concat((""!==x||""!==v)&&e),className:"text-light-grey hover:underline",children:m(j(f[3]))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:f[5]&&"".concat(m(j(f[4])))})]})}}}),[f]);return(0,c.jsx)("div",{className:"w-full",children:(0,c.jsxs)("p",{className:"max-xs:text-xs text-xs-14 max-md:truncate",children:[(0,c.jsxs)("span",{children:[(0,c.jsx)(s.k2,{to:(0,o.Go)(p,r.ve.SUPER_ADMIN,"/".concat(r.bw.app,"/").concat(r.bw.dashboard),"/".concat(r.bw.app,"/").concat(r.bw.subscriber)),className:"cursor-pointer text-light-grey hover:underline",children:m("Home")}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"})]}),N()]})})},u=i.memo(m)},12209:(e,l,a)=>{a.d(l,{A:()=>m});var i=a(65043),n=a(74117),t=a(73216),s=a(7648),r=a(33556),d=a(79456),o=a(75214),c=a(70579);const m=e=>{let{headerActionConst:l,headerTitle:a}=e;const{t:m}=(0,n.Bd)(),u=(0,d.wA)(),{show:x}=(0,d.d4)((e=>e.coursesManagement)),v=(0,t.zy)(),h=(0,i.useCallback)((()=>{u((0,o.oM)(!x))}),[x]);return(0,c.jsxs)("header",{className:"sticky top-0 z-20 flex bg-white border-b shadow-header xl:shadow-none xl:h-auto xl:block border-border-primary xl:px-2 xl:pt-0",children:[(0,c.jsx)("div",{onClick:h,className:"pt-5 cursor-pointer text-xl-22 xl:hidden",children:(0,c.jsx)(r.Rt,{className:"ml-4"})}),(0,c.jsx)("div",{className:"p-2.5 xl:p-[18px] xl:shadow-header max-xl:w-[calc(100%-47px)]",children:(0,c.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:[(0,c.jsxs)("div",{className:"w-full xl:w-auto",children:[(0,c.jsx)("h1",{className:"mb-1 text-2xl max-xl:truncate xl:text-3xl",children:m(null!==a&&void 0!==a?a:(e=>{let l="";if(e.split("/")[2].includes("-")){return e.split("/")[2].split("-").forEach((e=>(l=l+e[0].toUpperCase()+e.slice(1)+" ",l))),l}return l=e.split("/")[2][0].toUpperCase()+e.split("/")[2].slice(1),l})(v.pathname))}),(0,c.jsx)(s.A,{})]}),l&&(0,c.jsx)("div",{className:"flex gap-2.5 max-xl:w-[calc(100%+40px)] lg:gap-5",children:(()=>{if(l)return l()})()})]})})]})}},81834:(e,l,a)=>{a.r(l),a.d(l,{default:()=>F});var i,n=a(65043),t=a(88250),s=a(31881),r=a(77654),d=a(41290),o=a(12209),c=a(33556),m=a(34764),u=a(42145),x=a(74117),v=a(64526),h=a(32254),p=a(75812),g=a(63516),j=a(12352),b=a(57528),f=a(70459);const N=(0,f.J1)(i||(i=(0,b.A)(["query GetDiverAdminWithPagination($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $nameSearch: String!, $locationSearch: String!) {\n    getDiverAdminWithPagination(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, nameSearch: $nameSearch, locationSearch: $locationSearch) {\n      message\n      data {\n        diversionAdmin {\n          \n          location {\n            location\n            uuid\n          }\n          user {\n            email\n            uuid\n            first_name\n            last_name \n          }\n        }\n        count\n      }\n    }\n  }\n  "])));var w,y;const A=(0,f.J1)(w||(w=(0,b.A)(["mutation UpdateDiversionReportAdmin($diversionAdminData: UpdateDiversionReportAdminDto!) {\n    updateDiversionReportAdmin(diversionAdminData: $diversionAdminData) {\n      message\n      data {   \n        location {\n          uuid\n          location\n          city\n        }\n        user {\n          uuid\n          first_name\n          last_name\n        }\n      }\n    }\n  }"]))),S=(0,f.J1)(y||(y=(0,b.A)(["mutation GetUserByLocationId($locationId: String!) {\n    getUserByLocationId(locationId: $locationId) {\n      message\n      data {\n        user {\n          first_name\n          last_name\n          user_type\n          uuid\n        }\n      }\n    }\n  }\n  "])));var k=a(79456),D=a(34599),C=a(8848),_=a(70579);const F=()=>{var e,l,a,i,b,f,w,y,F,P,U,R,$,E,L,O;const{t:I}=(0,x.Bd)(),W=[{name:I("Sr.No"),sortable:!1},{name:I("Location"),sortable:!0,fieldName:"location.location"},{name:I("Full Name"),sortable:!0,fieldName:"user.first_name,user.last_name"}],[J,B]=(0,n.useState)({limit:u.Wt,page:u.k2,sortOrder:"descend",nameSearch:"",locationSearch:"",sortField:"createdAt",index:0}),M=(0,k.wA)(),q=(0,k.d4)((e=>e.diversionAdminManagement)),[z,G]=(0,n.useState)([]),{updateDiversionAdminValidationSchema:V}=(0,j.A)(),[H,T]=(0,n.useState)(!1),[Y,K]=(0,n.useState)(!1),[Q,X]=(0,n.useState)(J.limit),{data:Z,refetch:ee}=(0,t.I)(N,{fetchPolicy:"network-only",variables:null!==J&&void 0!==J?J:{limit:u.Wt,page:u.k2,sortOrder:"descend",nameSearch:"",locationSearch:"",sortField:"createdAt"}}),[le,{loading:ae}]=(0,s.n)(A),[ie]=(0,s.n)(S);(0,n.useEffect)((()=>{ee(J).catch((e=>v.oR.error(e.networkError.result.errors[0].message)))}),[J]),(0,n.useEffect)((()=>{X(null===J||void 0===J?void 0:J.limit)}),[null===J||void 0===J?void 0:J.limit]);const ne=(null===Z||void 0===Z||null===(e=Z.getDiverAdminWithPagination)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.count)||0,te=Math.ceil(ne/Q),se=(0,n.useCallback)((e=>{const l={...J,page:e,index:(e-1)*J.limit};B(l),h.A.saveState("filterDiversionAdmin",JSON.stringify(l))}),[J.limit]),re=(0,n.useCallback)((()=>{oe.resetForm(),T(!1)}),[]),de=(0,n.useCallback)((()=>{p.J.getList("".concat(u.JR,"/export-diversion-admin-csv")).then((e=>{var l;const a=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=a,i.setAttribute("download","Diversion-admin-list.csv"),document.body.appendChild(i),i.click(),v.oR.success(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message)})).catch((e=>{v.oR.error(e.message)}))}),[]),oe=(0,g.Wx)({initialValues:{diversionAdminData:{user_id:"",location_id:""}},validationSchema:V,onSubmit:e=>{var l;le({variables:{diversionAdminData:{user_id:null===e||void 0===e||null===(l=e.diversionAdminData)||void 0===l?void 0:l.user_id,location_id:null===q||void 0===q?void 0:q.updateLocationId}}}).then((e=>{var l,a;v.oR.success(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.updateDiversionReportAdmin)||void 0===a?void 0:a.message),ee(J).catch((e=>v.oR.error(e.networkError.result.errors[0].message))),re()})).catch((e=>v.oR.error(e.networkError.result.errors[0].message)))}}),ce=(0,n.useCallback)((e=>{var l,a,i,n,t;(M((0,D.Gn)(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.location)),M((0,D.C4)(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.uuid)),oe.setFieldValue("diversionAdminData.location_id",null===e||void 0===e||null===(i=e.location)||void 0===i?void 0:i.uuid),ie({variables:{locationId:null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.uuid}}).then((e=>{var l,a,i;G(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.getUserByLocationId)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.map((e=>{var l,a,i,n;return{name:(null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.first_name)+" "+(null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.last_name),key:null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.uuid,uuid:null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.uuid}})))})),null!==(null===e||void 0===e?void 0:e.user))&&oe.setFieldValue("diversionAdminData.user_id",null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.uuid);T(!0)}),[]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(o.A,{headerActionConst:()=>(0,_.jsx)(d.A,{className:" ".concat(Y?"btn-primary":"btn-secondary"," btn-normal md:w-[50px]"),label:"",onClick:()=>K((e=>!e)),children:(0,_.jsx)(c.dJ,{})})}),Y&&(0,_.jsxs)("div",{className:"flex justify-start flex-wrap 2xl:flex-nowrap p-3 md:p-5 mb-3 md:mb-5 border border-border-primary rounded-xl bg-light-blue gap-2 2xl:gap-[18px] items-start",children:[(0,_.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,_.jsx)(m.A,{placeholder:I("Location Name"),required:!0,name:"categoryName",onChange:e=>{M((0,D.xH)(e.target.value))},value:null===q||void 0===q?void 0:q.locationName})}),(0,_.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,_.jsx)(m.A,{placeholder:I("Full Name"),required:!0,name:"fullName",onChange:e=>{M((0,D.tE)(e.target.value))},value:null===q||void 0===q?void 0:q.fullName})}),(0,_.jsx)(d.A,{className:"btn-primary btn-normal w-full md:min-w-[160px] md:w-auto lg:mt-0",label:I("Search"),onClick:()=>{B({...J,nameSearch:null===q||void 0===q?void 0:q.fullName,locationSearch:null===q||void 0===q?void 0:q.locationName})}}),(0,_.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:min-w-[160px] md:w-auto lg:mt-0",label:I("Reset"),onClick:()=>{ee({...J,nameSearch:"",locationSearch:""}).catch((e=>v.oR.error(e.networkError.result.errors[0].message))),B({...J,nameSearch:"",locationSearch:""}),M((0,D.xH)("")),M((0,D.tE)(""))}})]}),(0,_.jsxs)("div",{className:"mb-3 bg-white rounded-xl overflow-auto border border-[#c8ced3] mx-7 p-3 md:p-5",children:[(0,_.jsxs)("div",{className:"flex flex-col justify-between gap-3 mb-3 md:gap-5 md:mb-5 btn-group md:flex-row",children:[(0,_.jsx)("h6",{className:"w-full leading-7 xmd:w-auto",children:I("Diversion admin List")}),(0,_.jsx)("div",{className:"w-full flex flex-wrap gap-y-3 gap-x-4 2xl:gap-5 md:w-auto",children:(0,_.jsxs)("button",{className:"w-full btn btn-gray sm:w-[260px] p-3.5",onClick:()=>de(),children:["Export Diversion admin List  ",(0,_.jsx)(c.OP,{className:"order-2 ml-auto"})]})})]}),(0,_.jsxs)("div",{className:"w-full mb-3 overflow-auto bg-white border sm:w-auto rounded-t-xl custom-dataTable border-border-primary",children:[(0,_.jsxs)("table",{children:[(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{children:[null===W||void 0===W?void 0:W.map((e=>(0,_.jsx)("th",{scope:"col",children:(0,_.jsxs)("div",{className:"flex ".concat(["location.location"].includes(e.fieldName)?"justify-start":"justify-center"),children:[e.name,e.sortable&&(0,_.jsxs)("button",{onClick:()=>{return l=e.fieldName,void B({...J,sortField:l,sortOrder:"ascend"===J.sortOrder?"descend":"ascend"});var l},children:[(""===J.sortOrder||J.sortField!==e.fieldName)&&(0,_.jsx)(c.xs,{className:"w-3 h-3 ml-1 fill-white"}),"ascend"===J.sortOrder&&J.sortField===e.fieldName&&(0,_.jsx)(c.xD,{className:"ml-1 fill-white"}),"descend"===J.sortOrder&&J.sortField===e.fieldName&&(0,_.jsx)(c.xR,{className:"ml-1 fill-white"})]})]})},e.fieldName))),(0,_.jsx)("th",{scope:"col",children:(0,_.jsx)("div",{className:"flex items-center",children:I("Action")})})]})},"sorting"),(0,_.jsx)("tbody",{children:null===Z||void 0===Z||null===(a=Z.getDiverAdminWithPagination)||void 0===a||null===(i=a.data)||void 0===i||null===(b=i.diversionAdmin)||void 0===b?void 0:b.map(((e,l)=>{var a,i,n,t;const s=(null===J||void 0===J?void 0:J.index)+l+1;return(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{scope:"row",className:"text-center",children:s}),(0,_.jsx)("td",{className:"text-start",children:null===e||void 0===e||null===(i=e.location)||void 0===i?void 0:i.location}),(0,_.jsx)("td",{className:"text-center",children:null!==(null===e||void 0===e?void 0:e.user)?(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.first_name)+" "+(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.last_name):"--"}),(0,_.jsx)("td",{children:(0,_.jsx)("div",{className:"flex gap-3 text-left md:gap-5 btn-group",children:(0,_.jsx)(d.A,{className:"bg-transparent btn-default",onClick:()=>ce(e),label:"",children:(0,_.jsx)(c.ff,{})})})})]},null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.uuid)}))})]}),(0===(null===Z||void 0===Z||null===(f=Z.getDiverAdminWithPagination)||void 0===f||null===(w=f.data)||void 0===w?void 0:w.count)||null===(null===Z||void 0===Z||null===(y=Z.getDiverAdminWithPagination)||void 0===y?void 0:y.data))&&(0,_.jsx)("div",{className:"flex justify-center",children:(0,_.jsx)("div",{children:I("No Data")})})]}),(0,_.jsxs)("div",{className:"flex flex-wrap items-center mt-2",children:[(0,_.jsxs)("div",{className:"flex items-center mr-3 md:mr-7",children:[(0,_.jsx)("span",{className:"text-sm font-normal text-gray-700 whitespace-nowrap ",children:I("Per Page")}),(0,_.jsx)("select",{value:J.limit,className:"border border-border-primary rounded-xl ml-2 px-3 text-sm py-1.5 text-gray-500 w-[70px] h-[36px] appearance-none bg-white",onChange:e=>(e=>{const l=Number(e),a={...J,limit:l,page:u.k2,index:0};B(a),h.A.saveState("filterDiversionAdmin",JSON.stringify(a))})(e.target.value),children:null===u.aj||void 0===u.aj?void 0:u.aj.map((e=>(0,_.jsx)("option",{children:e},e)))})]}),(0,_.jsx)(r.A,{currentPage:J.page,totalPages:te,onPageChange:se,recordsPerPage:Q})]}),(0,_.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(H?"":"hidden"),children:(0,_.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"flex items-center justify-center h-full py-5 transition-all duration-300",children:(0,_.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,_.jsxs)("div",{className:"relative bg-white rounded-xl",children:[(0,_.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b md:py-6 bg-accents-2 rounded-t-xl",children:[(0,_.jsx)("p",{className:"text-lg font-bold md:text-xl text-baseColor",children:"Update Diversion admin"}),(0,_.jsx)(d.A,{onClick:()=>re(),label:I(""),children:(0,_.jsx)("span",{className:"text-xl-22",children:(0,_.jsx)(c.YY,{className:"text-error"})})})]}),(0,_.jsx)("div",{className:"w-full",children:(0,_.jsxs)("form",{onSubmit:oe.handleSubmit,children:[(0,_.jsxs)("div",{className:"p-5 max-h-[calc(100vh-260px)] overflow-auto grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,_.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,_.jsx)(m.A,{type:"text",id:"location_id",label:I("Location Name"),value:null===q||void 0===q?void 0:q.updateLocationName,placeholder:I("Location Name"),required:!0,disabled:!0})}),(0,_.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,_.jsx)(C.A,{placeholder:I("Select Employee"),name:"diversionAdminData.user_id",onChange:oe.handleChange,value:null===oe||void 0===oe||null===(F=oe.values)||void 0===F||null===(P=F.diversionAdminData)||void 0===P?void 0:P.user_id,options:z,id:"user_id",label:I("Select Employee"),required:!0,error:null!==(U=oe.errors)&&void 0!==U&&null!==(R=U.diversionAdminData)&&void 0!==R&&R.user_id&&null!==oe&&void 0!==oe&&null!==($=oe.touched)&&void 0!==$&&null!==(E=$.diversionAdminData)&&void 0!==E&&E.user_id?null===oe||void 0===oe||null===(L=oe.errors)||void 0===L||null===(O=L.diversionAdminData)||void 0===O?void 0:O.user_id:""})})]}),(0,_.jsx)("div",{className:"flex flex-col items-center justify-end p-5 border-t border-solid md:space-x-3 md:flex-row border-border-primary",children:(0,_.jsx)(d.A,{className:"btn-primary btn-normal w-full md:w-auto min-w-[160px]",type:"submit",label:I("Update"),disabled:ae})})]})})]})})})},"addPopUp")]})]})}}}]);
//# sourceMappingURL=1834.9a10b818.chunk.js.map