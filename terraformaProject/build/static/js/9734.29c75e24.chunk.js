"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[9734],{75289:(e,l,a)=>{a.d(l,{A:()=>r});var i=a(65043),t=a(74117),s=a(41290),o=a(33556),d=a(70579);const r=e=>{let{onClose:l,action:a,show:r,warningText:n,disabled:u,isLoading:c}=e;const{t:v}=(0,t.Bd)(),[m,p]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{r&&setTimeout((()=>{p(!0)}),100)}),[r]),(0,d.jsxs)(d.Fragment,{children:[c&&(0,d.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%]"}),(0,d.jsxs)("div",{className:"".concat(r?"":"hidden"," absolute top-0 left-0 right-0 z-[1000] h-full bg-modal"),children:["Are you sure want to delete this record ?"!==n&&"Are you sure want to change status ?"!==n&&(0,d.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(m?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,d.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,d.jsxs)("div",{className:"relative bg-white shadow rounded-xl",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between px-5 py-6 border-b bg-accents-2 rounded-t-xl",children:[(0,d.jsxs)("div",{className:"flex items-center ",children:[(0,d.jsx)(o.io,{className:"inline-block mr-3 fill-baseColor",fontSize:"20"}),(0,d.jsx)("span",{className:"text-xl font-bold text-baseColor",children:v("Confirmation")})]}),(0,d.jsx)(s.A,{onClick:l,label:"",children:(0,d.jsx)(o.YY,{className:"text-error",fontSize:"14"})})]}),(0,d.jsx)("div",{className:"p-5 space-y-6 font-normal text-center border-b border-solid border-border-primary",children:(0,d.jsx)("p",{children:v(n)})}),(0,d.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 md:space-x-3 md:flex-row",children:[(0,d.jsx)(s.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[160px]",onClick:a,label:v("Yes"),disabled:u,title:"Yes"}),(0,d.jsx)(s.A,{className:"btn-secondary btn-normal w-full md:w-auto min-w-[160px]",onClick:l,label:v("No"),title:"No"})]})]})})}),"Are you sure want to change status ?"==n&&(0,d.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(m?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,d.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,d.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[(0,d.jsx)("span",{className:"p-[10px] bg-primary min-w-min rounded-full mb-3 overflow-hidden text-xl-44 md:text-6xl",children:(0,d.jsx)(o.ZI,{className:"fill-white bg-primary"})}),(0,d.jsx)("h4",{children:v("Confirmation")})]}),(0,d.jsx)("h6",{className:"font-semibold text-center mb-7 md:mb-10",children:v(n)}),(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,d.jsx)(s.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:a,label:v("Yes"),disabled:u,title:"Yes"}),(0,d.jsx)(s.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:l,label:v("No"),title:"No"})]})]})})}),"Are you sure want to delete this record ?"==n&&(0,d.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(m?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,d.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,d.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,d.jsx)("div",{className:"flex justify-center mb-5",children:(0,d.jsx)("span",{className:"p-[22px] md:p-[26px] rounded-full bg-error text-xl-35 md:text-5xl",children:(0,d.jsx)(o.Vl,{className:"stroke-2 fill-white"})})}),(0,d.jsx)("h6",{className:"font-bold text-center mb-7 md:mb-10",children:v(n)}),(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,d.jsx)(s.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:a,label:v("Yes"),disabled:u,title:"Yes"}),(0,d.jsx)(s.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:l,label:v("No"),title:"No"})]})]})})})]})]})}},81410:(e,l,a)=>{a.d(l,{A:()=>t});a(65043);var i=a(70579);const t=function(){return(0,i.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%] z-[9999]"})}},79217:(e,l,a)=>{a.d(l,{A:()=>f});var i=a(41290),t=a(33556),s=a(34764),o=a(65043),d=a(63516),r=a(92073),n=a(66925),u=a(97803),c=a(86213),v=a(55797),m=a(82485),p=(a(15675),a(59140),a(9686),a(42145)),h=a(31881),x=a(64526),g=a(74117),b=a(70579);const f=function(e){var l,a;let{playList:f,playListCallBack:w}=e;const{t:y}=(0,g.Bd)(),N=(0,o.useRef)(null),[j,C]=(0,o.useState)(!1),[_,I]=(0,o.useState)(""),A=(0,o.createRef)(),[F,k]=(0,h.n)(u.BL),[S,q]=(0,o.useState)(!1),U=(0,d.Wx)({initialValues:{playlistName:"",playListImageUploadFileName:""},onSubmit:()=>{}}),D=(0,o.useCallback)((()=>{U.values.playlistName.length>1&&U.values.playlistName.length<31&&U.values.playListImageUploadFileName&&F({variables:{playlistData:{name:U.values.playlistName,image:U.values.playListImageUploadFileName}}}).then((e=>{const l=e.data.createPlaylist;x.oR.success(null===l||void 0===l?void 0:l.message),U.resetForm(),w(!1,{refetch:!0})})).catch((e=>{var l,a,i,t;x.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(i=a.errors)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.message)})),U.values.playlistName.length<2&&U.setFieldError("playlistName","Playlist Name must be at least 2 characters"),U.values.playlistName.length>100&&U.setFieldError("playlistName","Playlist Name must be at most 100 characters"),0===U.values.playlistName.length&&U.setFieldError("playlistName","Please Enter Playlist Name"),U.values.playListImageUploadFileName||U.setFieldError("playListImageUploadFileName","Please upload playlist image.")}),[U]),V=(0,o.useCallback)((e=>{U.setFieldValue(e.target.name,(0,n.AW)(e))}),[]),P=(0,o.useCallback)((async()=>{const e={fileName:U.values.playListImageUploadFileName};c.A.delete("".concat(p.hV,"/remove"),{data:e}).then((()=>{U.setFieldValue("playListImageUploadFileName","")})).catch((e=>{var l,a;x.oR.error(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)}))}),[U]),L=(0,o.useCallback)((e=>{var l;let a;if(e.preventDefault(),w(!1,{refetch:!1}),e.dataTransfer?a=e.dataTransfer.files:e.target&&(a=e.target.files),a&&(null===(l=a)||void 0===l?void 0:l.length)>0){const e=a[0];if(e.type.startsWith("image/"))if(e.size>p.w3)x.oR.error("Image size must be less than 5MB"),w(!0,{refetch:!1});else{const l=new FileReader;l.onload=()=>{I(l.result),C(!0)},l.readAsDataURL(e)}else x.oR.error("Please select a valid image file"),w(!0,{refetch:!1})}N.current&&(N.current.value="")}),[]),E=()=>(0,b.jsxs)("div",{className:"flex justify-end gap-3 md:gap-5",children:[(0,b.jsx)(i.A,{className:"btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Cancel",onClick:()=>C(!1),title:"Cancel"}),(0,b.jsx)(i.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Save",disabled:S,onClick:()=>(async()=>{var e;if("undefined"!==typeof(null===(e=A.current)||void 0===e?void 0:e.cropper)){var l;await q(!0);let e=null;const a=(0,p.Si)(null===(l=A.current)||void 0===l?void 0:l.cropper.getCroppedCanvas().toDataURL(),"PlaylistProfilePreview.png"),i=new FormData;i.append("image",a),e=await(0,p.V6)(i,"courseImage"),e&&(U.setFieldValue("playListImageUploadFileName",e),w(!0,{refetch:!1})),C(!1),await q(!1)}})(),title:"Save"})]});return(0,b.jsxs)(b.Fragment,{children:[f&&(0,b.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(f?"":"hidden"),children:(0,b.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(f?"":"opacity-0 transform -translate-y-full scale-150 "," transition-all duration-300 "),children:(0,b.jsx)("div",{className:"w-full mx-5 max-w-[700px]",children:(0,b.jsxs)("div",{className:"relative bg-white rounded-xl",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 p-5 border-b bg-accents-2 rounded-t-xl",children:[(0,b.jsx)("p",{className:"text-lg font-bold md:text-xl text-baseColor",children:"Add New Playlist"}),(0,b.jsx)(i.A,{onClick:()=>{w(!1,{refetch:!1}),U.resetForm()},label:y(""),title:"".concat(y("Close")),children:(0,b.jsx)("span",{className:"text-xl-22",children:(0,b.jsx)(t.YY,{className:"text-error"})})})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("div",{className:"p-5 bg-white max-h-[calc(100vh-260px)] overflow-auto",children:(0,b.jsx)(s.A,{placeholder:y("Add Name"),name:"playlistName",onChange:U.handleChange,label:y("Playlist Name"),value:U.values.playlistName,id:"playlistName",required:!0,error:U.errors.playlistName,onBlur:V})}),(0,b.jsxs)("div",{className:"w-full flex flex-col h-[176px] lg:w-[calc(50%-10px)] xl:min-w-[480px] xl:w-[calc(33.3%-14px)] mx-auto",children:[(0,b.jsxs)("label",{htmlFor:"Playlist Profile Image",className:"relative flex items-center justify-center h-full p-5 overflow-hidden bg-white border border-solid cursor-pointer rounded-xl border-border-primary hover:bg-gray-100",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full overflow-hidden rounded-xl",children:[!U.values.playListImageUploadFileName&&(0,b.jsx)("span",{className:"text-xl-50",children:(0,b.jsx)(t.tu,{className:"mb-2 fill-secondary"})}),U.values.playListImageUploadFileName&&(0,b.jsx)("img",{src:"https://terraforma-staging.s3.us-west-2.amazonaws.com/"+U.values.playListImageUploadFileName,alt:"Playlist Profile Image",className:"object-fill w-full h-full"}),!U.values.playListImageUploadFileName&&(0,b.jsx)("p",{className:"text-xl text-light-grey",children:y("Upload Image")})]}),U.values.playListImageUploadFileName&&(0,b.jsx)(i.A,{className:"absolute p-[6px] rounded-full cursor-pointer top-4 right-4 md:top-5 md:right-5 bg-error",type:"button",label:"",onClick:()=>P(),title:"".concat(y("Close")),children:(0,b.jsx)(t.YY,{className:"fill-white",fontSize:"12"})}),(0,b.jsx)("input",{id:"Playlist Profile Image",type:"file",accept:".png, .jpeg",ref:N,onChange:L,className:"hidden"},(0,r.A)())]}),null!==U&&void 0!==U&&null!==(l=U.errors)&&void 0!==l&&l.playListImageUploadFileName?(0,b.jsx)("span",{className:"-mt-1 md:text-xs-15 error",children:null===U||void 0===U||null===(a=U.errors)||void 0===a?void 0:a.playListImageUploadFileName}):""]}),(0,b.jsx)("div",{className:"flex flex-col items-center justify-end p-5 border-t border-solid md:space-x-3 md:flex-row border-border-primary",children:(0,b.jsx)(i.A,{className:"btn-primary btn-normal w-full md:w-[90px]",label:y("Add"),onClick:D,type:"button",disabled:k.loading,title:"".concat(y("Add"))})})]})]})})})}),(0,b.jsx)(v.l,{className:"custom-dialog",header:"Crop Image",visible:j,style:{width:"50vw",borderRadius:"12px"},onHide:()=>C(!1),footer:()=>E(),children:_&&(0,b.jsx)(m.A,{ref:A,style:{height:400,width:"100%"},zoomTo:.5,aspectRatio:1,preview:".img-preview",src:_,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0,cropBoxResizable:!1})})]})}},97803:(e,l,a)=>{a.d(l,{BL:()=>v,FH:()=>x,dE:()=>h,fE:()=>g,k2:()=>p,uk:()=>m});var i,t,s,o,d,r,n,u=a(57528),c=a(70459);const v=(0,c.J1)(i||(i=(0,u.A)(["\nmutation CreatePlaylist($playlistData: CreatePlaylistDto!) {\n    createPlaylist(playlistData: $playlistData) {\n        data {\n          uuid\n          name\n        }\n        message\n    }\n  }\n"]))),m=(0,c.J1)(t||(t=(0,u.A)(["\n mutation CourseCreateStepFour($courseData: CreateCourseStepFourDto!) {\n  courseCreateStepFour(courseData: $courseData) {\n    message\n  }\n}\n"]))),p=((0,c.J1)(s||(s=(0,u.A)(["\n  mutation UpdateCourse($courseData: UpdateCourseDto!) {\n    updateCourse(courseData: $courseData) {\n      message\n      data {\n        description\n        image\n        instructor_name\n        instructor_profile\n        instructor_qualification\n        is_certification\n        is_template\n        level\n        prerequisite\n        reward_point\n        subtitle\n        thumbnails\n        title\n        total_duration\n        uuid\n      }\n    }\n  }\n"]))),(0,c.J1)(o||(o=(0,u.A)(["\n  mutation DeleteCourse($courseId: String!) {\n    deleteCourse(courseId: $courseId) {\n      message   \n    }\n  }\n"])))),h=(0,c.J1)(d||(d=(0,u.A)(["\nmutation CourseCreateStepOne($courseData: CreateCourseDto!) {\n  courseCreateStepOne(courseData: $courseData) {\n    message\n    data {\n      uuid\n      title\n      description\n      category {\n        name\n        uuid\n      }\n      prerequisite\n      course_image\n      banner_image\n      instructor_profile\n      instructor_name\n      instructor_qualification\n      is_template\n      is_draft\n      createdAt\n      highlights {\n        id\n        uuid\n        name\n      }\n    }\n  }\n}"]))),x=(0,c.J1)(r||(r=(0,u.A)(["mutation CourseCreateStepTwo($courseData: CreateCourseStepOneDto!) {\n  courseCreateStepTwo(courseData: $courseData) {\n    message\n    data {\n      course_chapters {\n        chapter_content {\n          image\n          uuid\n          description\n          youtube_url\n          pdf_url\n        }\n        uuid\n        title\n        type\n        order\n        user_course_progress {\n          uuid\n          video_last_check_time\n          is_chapter_completed\n        }\n        chapter_quiz {\n          uuid\n          question\n          order\n          type\n          quiz_question {\n            uuid\n            option\n            is_correct\n            order\n          }\n        }\n      }\n      uuid\n      is_draft\n      category {\n        uuid\n        name\n        description\n        status\n        image_url\n      }\n      is_template\n    }\n  }\n}"]))),g=(0,c.J1)(n||(n=(0,u.A)(["mutation CourseCreateStepThree($courseData: CreateCourseStepThreeDto!) {\n  courseCreateStepThree(courseData: $courseData) {\n    message\n    data {\n      id\n      uuid\n      question\n      answer\n      order\n    }\n  }\n}"])))},97178:(e,l,a)=>{a.d(l,{Go:()=>v,OU:()=>p,fk:()=>m,gT:()=>h});var i,t,s,o,d,r,n,u=a(57528),c=a(70459);(0,c.J1)(i||(i=(0,u.A)(["\n  query GetSubCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n    getSubCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n      data {\n        subCategories {\n          uuid\n          name\n          image_url\n          description\n          status\n          category {\n            uuid\n            name\n            description\n            image_url\n            status\n          }\n        }\n        count\n      }\n    }\n  }\n  "])));const v=(0,c.J1)(t||(t=(0,u.A)(["\n    query GetCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n      getCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n        data {\n          categories {\n            description\n            image_url\n            name\n            uuid\n            status\n          }\n          count\n        }\n        message\n      }\n    }\n  "]))),m=(0,c.J1)(s||(s=(0,u.A)(["\n  query GetActiveCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n    getActiveCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n      data {\n        categories {\n          description\n          image_url\n          name\n          uuid\n          status\n        }\n        count\n      }\n      message\n    }\n  }\n"]))),p=(0,c.J1)(o||(o=(0,u.A)(["\n  query GetCategoriesAndCourseCountWithPagination($limit: Float!, $page: Float!, $search: String!) {\n    getCategoriesAndCourseCountWithPagination(limit: $limit, page: $page, search: $search) {\n      message\n      data {\n        count\n        categories {\n          uuid\n          status\n          name\n          description\n          image_url\n          course_count\n        }\n      }\n    }\n  }\n"]))),h=((0,c.J1)(d||(d=(0,u.A)(["\n  query GetSubCategoryById($getSubCategoryByIdId: String!) {\n    getSubCategoryById(id: $getSubCategoryByIdId) {\n      data {\n        uuid\n        name\n        image_url\n        description\n        status\n        category {\n          name\n          uuid\n          image_url\n          status\n        }\n      }\n      message\n    }\n  }\n"]))),(0,c.J1)(r||(r=(0,u.A)(["\n  query GetCategoryById($categoryId: String!) {\n    getCategoryById(categoryId: $categoryId) {\n      data {\n        uuid\n        name\n        image_url\n        description\n        status\n      }\n      message\n    }\n  }\n"]))));(0,c.J1)(n||(n=(0,u.A)(["\nquery GetActiveSubCategoriesByCategoryId($categoryId: String!) {\n  getActiveSubCategoriesByCategoryId(category_id: $categoryId) {\n    data {\n      uuid\n      name\n      image_url\n      description\n      status\n    }\n    message\n  }\n}\n"])))},54628:(e,l,a)=>{a.r(l),a.d(l,{default:()=>le});var i=a(65043),t=a(74117),s=a(34764),o=a(33556),d=a(41290),r=a(79456),n=a(75214),u=a(63516),c=a(12352),v=a(75289),m=a(42145),p=a(66925),h=a(31881),x=a(88250),g=a(97803),b=a(64526),f=a(24108),w=a(73216),y=a(35475),N=a(10959),j=a(30469),C=a(98139),_=a.n(C),I=a(70579);const A=e=>{let{id:l,label:a,placeholder:i,rows:s=4,name:o,required:d=!1,onChange:r,onKeyDown:n,onBlur:u,value:c,error:v,note:m,disabled:p,hidden:h,cols:x=50,maxLength:g,minLength:b,className:f}=e;const{t:w}=(0,t.Bd)();return(0,I.jsxs)("div",{className:_()(j.A["form-group"]),children:[void 0!=a&&(0,I.jsxs)("label",{htmlFor:l,children:[a,!0===d&&(0,I.jsx)("span",{className:"text-red-500",children:" *"})]}),(0,I.jsx)("div",{children:(0,I.jsx)("textarea",{className:"".concat(_()(j.A["form-control"])," ").concat(f||""," ").concat(v?_()(j.A.error):""),id:l,name:o,placeholder:i,onChange:r,value:c,disabled:p,hidden:h,rows:s,cols:x,maxLength:g,minLength:b,onBlur:u,onKeyDown:n})}),void 0!=v&&""!=v&&(0,I.jsx)("p",{className:"mt-1 md:text-xs-15 error",children:w(v)}),void 0!=m&&(0,I.jsx)("p",{className:"my-1 text-sm font-medium text-black",children:m})]})},F=i.memo(A),k=()=>{const{t:e}=(0,t.Bd)(),l=(0,r.wA)(),a=(0,w.Zp)(),[j,C]=(0,i.useState)([]),{addFAQValidationSchema:_}=(0,c.A)(),[A,k]=(0,i.useState)([]),[S,q]=(0,i.useState)(!1),[U,D]=(0,i.useState)(),[V,{loading:P}]=(0,h.n)(g.fE),[L]=(0,y.ok)(),E=L.get("uuid"),R=L.get("isViewAsLearner"),{data:B,loading:T,refetch:Q}=(0,x.I)(f.oE,{variables:{courseId:E},skip:!E,fetchPolicy:"network-only"}),{addYourFAQDetails:z,course_id:Y,is_published:$,is_draft:O}=(0,r.d4)((e=>e.coursesManagement));(0,i.useEffect)((()=>{var e,l,a,i,t,s,o,d,r,n,u,c;!z.length&&null!==B&&void 0!==B&&null!==(e=B.getFaqsByCourseDetails)&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&null!==(a=l.faqData)&&void 0!==a&&a.length?k(null===B||void 0===B||null===(d=B.getFaqsByCourseDetails)||void 0===d||null===(r=d.data)||void 0===r||null===(n=r.faqData)||void 0===n?void 0:n.map((e=>{var l,a;return{uuid:location.pathname.includes("/".concat(m.bw.app,"/").concat(m.bw.updateEducationAndEngagement))&&(null===B||void 0===B||null===(l=B.getFaqsByCourseDetails)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.course_uuid)===E||"true"===R?null===e||void 0===e?void 0:e.uuid:"",question:null===e||void 0===e?void 0:e.question,answer:null===e||void 0===e?void 0:e.answer,order:null===e||void 0===e?void 0:e.order}}))):k(z);null!==B&&void 0!==B&&null!==(i=B.getFaqsByCourseDetails)&&void 0!==i&&null!==(t=i.data)&&void 0!==t&&t.faqData||null===B||void 0===B||null===(s=B.getFaqsByCourseDetails)||void 0===s||null===(o=s.data)||void 0===o||!o.template_uuid||Q({courseId:null===B||void 0===B||null===(u=B.getFaqsByCourseDetails)||void 0===u||null===(c=u.data)||void 0===c?void 0:c.template_uuid})}),[null===B||void 0===B?void 0:B.getFaqsByCourseDetails,R,z]);const M=(0,u.Wx)({initialValues:{uuid:"",question:"",answer:"",editedIndex:null},validationSchema:_,onSubmit:e=>{const{editedIndex:a}=M.values,i=[...A];void 0!==a&&null!==a?i[a]={uuid:null===e||void 0===e?void 0:e.uuid,question:e.question,answer:e.answer}:i.push({uuid:null===e||void 0===e?void 0:e.uuid,question:e.question,answer:e.answer,order:(null===i||void 0===i?void 0:i.length)+1}),l((0,n.rk)(i)),k(i),M.resetForm()}}),J=(0,i.useCallback)((()=>{l((0,n.w9)())}),[]),W=(0,i.useCallback)((()=>{V({variables:{courseData:{delete_faqs_ids:j,course_id:"true"===R?E:Y,faqs:A}}}).then((e=>{var a,i,t;const s=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(i=a.courseCreateStepThree)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.map((e=>{const{uuid:l,question:a,answer:i,order:t}=e;return{uuid:l,question:a,answer:i,order:t}}));l((0,n.rk)(s)),l((0,n.Fz)()),C([])})).catch((e=>{var l,a,i,t;b.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(i=a.errors)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.message)}))}),[A]),H=(0,i.useCallback)((()=>{q(!1)}),[]),Z=(0,i.useCallback)((e=>{D(e),q(!0)}),[A]),G=(0,i.useCallback)((e=>{M.setFieldValue(e.target.name,(0,p.AW)(e))}),[]),K=(e,i)=>{V({variables:{courseData:{delete_faqs_ids:j,course_id:"true"===R?E:Y,faqs:e}}}).then((e=>{var t,s,o;const d=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(s=t.courseCreateStepThree)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.map((e=>{const{uuid:l,question:a,answer:i,order:t}=e;return{uuid:l,question:a,answer:i,order:t}}));k(d),l((0,n.rk)(d)),i?a("/".concat(m.bw.app,"/").concat(m.bw.tfsCoursesTemplates,"/").concat(m.bw.courseDetails,"/?uuid=").concat("true"===R?E:Y,"&isViewAsLearner=true&step=2")):b.oR.success("Draft has been saved succefully."),C([])})).catch((e=>{var l,a,i,t;b.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(i=a.errors)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.message)}))},X=(0,i.useCallback)((()=>{K(A,!1)}),[A]);return(0,I.jsxs)("div",{children:[T?(0,I.jsx)(N.A,{}):(0,I.jsxs)("form",{onSubmit:null===M||void 0===M?void 0:M.handleSubmit,children:[(0,I.jsxs)("div",{className:"overflow-hidden border border-solid border-border-primary rounded-xl",children:[(0,I.jsxs)("div",{className:"p-3 pb-5 border-b border-solid md:p-5 md:pb-7 border-border-primary",children:[(0,I.jsx)("h6",{className:"mb-3 font-bold md:mb-5 ",children:e("Add Your FAQ`s")}),(0,I.jsx)("div",{className:"w-full max-w-[1004px] mb-3 md:mb-5",children:(0,I.jsx)(s.A,{placeholder:e("Add Question here"),type:"text",id:"question",name:"question",label:"Question",value:M.values.question,onChange:M.handleChange,error:M.errors.question&&M.touched.question?M.errors.question:"",onBlur:G})}),(0,I.jsx)("div",{className:"w-full max-w-[1004px] mb-5 md:mb-7",children:(0,I.jsx)(F,{label:e("Answer"),rows:7,value:M.values.answer,name:"answer",onChange:M.handleChange,onBlur:G,placeholder:"Enter answer",error:M.errors.answer&&M.touched.answer?M.errors.answer:""})}),(0,I.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:w-[160px]",label:null!==M.values.editedIndex?e("Edit"):e("Add"),type:"button",onClick:()=>M.handleSubmit(),title:"".concat(null!==M.values.editedIndex?e("Edit"):e("Add"))})]}),(0,I.jsx)("div",{className:"px-3 md:px-5 py-5 md:py-7 overflow-auto max-h-[310px] md:max-h-[236px]",children:A.map(((e,l)=>(0,I.jsxs)("div",{className:"pb-3 last:pb-0",children:[(0,I.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-2",children:[(0,I.jsx)("p",{className:"font-bold leading-6",children:e.question}),(0,I.jsxs)("div",{className:"flex items-center gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"bg-transparent cursor-pointer btn-default",onClick:()=>(e=>{const l=null===A||void 0===A?void 0:A[e];M.setFieldValue("uuid",l.uuid),M.setFieldValue("question",l.question),M.setFieldValue("answer",l.answer),M.setFieldValue("editedIndex",e)})(l),label:"",title:"Edit",children:(0,I.jsx)(o.ff,{className:"fill-primary"})}),(0,I.jsx)(d.A,{className:"bg-transparent cursor-pointer btn-default",onClick:()=>Z(l),label:"",title:"Delete",children:(0,I.jsx)(o.lM,{className:"fill-error"})})]})]}),(0,I.jsx)("p",{className:"break-all",dangerouslySetInnerHTML:{__html:e.answer}})]},"faq-list-".concat(l+1))))})]}),(0,I.jsxs)("div",{className:"flex flex-wrap justify-between gap-3 mt-5 md:mt-7.5 md:flex-nowrap md:gap-5",children:[(0,I.jsxs)("div",{className:"flex flex-col sm:flex-row w-full gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:w-[180px] whitespace-nowrap",type:"button",label:e("View as a Learner"),title:"View as a Learner",onClick:()=>{K(A,!0)}}),(!$||O)&&(0,I.jsx)(d.A,{className:"btn-primary btn-normal w-full md:w-40 whitespace-nowrap",type:"button",label:e("Save as Draft"),title:"Save as Draft",onClick:X,disabled:P})]}),(0,I.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end w-full gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"btn bg-default btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap ",type:"button",label:e("Back"),title:"Back",onClick:J}),(0,I.jsx)(d.A,{className:"btn bg-default btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap ",type:"submit",label:e("Save & Next"),title:"Save & Next",onClick:W,disabled:P})]})]})]}),S&&(0,I.jsx)(v.A,{warningText:m.jl,onClose:H,action:()=>(()=>{var e;const l=A.filter(((e,l)=>l===U)),a=A.filter(((e,l)=>l!==U));""!==(null===l||void 0===l||null===(e=l[0])||void 0===e?void 0:e.uuid)&&C((e=>{var a;return[...e,null===l||void 0===l||null===(a=l[0])||void 0===a?void 0:a.uuid]})),k(a),q(!1)})(),show:S})]})};var S=a(8848),q=a(66607);const U=e=>{let{droppableId:l,data:a,onDragEnd:i,renderItem:t,renderWrapper:s,direction:o,disabled:d}=e;return(0,I.jsx)(q.JY,{onDragEnd:i,children:(0,I.jsx)(q.gL,{droppableId:l,direction:o,children:e=>s((0,I.jsxs)(I.Fragment,{children:[a.map(((e,l)=>(0,I.jsx)(q.sx,{index:l,draggableId:e.id.toString(),isDragDisabled:d,children:a=>t(e,a,l)},e.id))),e.placeholder]}),e)})})};var D=a(86213),V=a(55797),P=a(82485);const L=e=>{var l,a,r,n,v,p,h,x,g,f,w;let{onAddChapter:y,editData:N,disabled:j}=e;const{t:C}=(0,t.Bd)(),{YoutubeBasedValidationSchema:_}=(0,c.A)(),A=(0,i.useRef)(null),[F,k]=(0,i.useState)(!1),[S,q]=(0,i.useState)(!1),[U,L]=(0,i.useState)(""),[E,R]=(0,i.useState)(!1),B=(0,i.createRef)();(0,i.useEffect)((()=>{var e,l,a,i;null!==N&&T.setValues({uuid:null!==(e=null===N||void 0===N||null===(l=N.youtube)||void 0===l?void 0:l.uuid)&&void 0!==e?e:"",chapterImage:null===N||void 0===N||null===(a=N.youtube)||void 0===a?void 0:a.image,chapterName:null===N||void 0===N?void 0:N.title,youtubeUrl:null===N||void 0===N||null===(i=N.youtube)||void 0===i?void 0:i.youtube_url})}),[N]);const T=(0,u.Wx)({initialValues:{uuid:"",chapterName:"",chapterImage:"",youtubeUrl:""},validationSchema:_,onSubmit(e){y(e),Q()}}),Q=()=>{T.resetForm()},z=(0,i.useCallback)((e=>{T.setFieldValue(e.target.name,e.target.value.trim())}),[]),Y=(0,i.useCallback)((e=>{e.preventDefault(),R(!0);const l=e.target.files;if(l&&(null===l||void 0===l?void 0:l.length)>0){const e=l[0];if(e.type.startsWith("image/"))if(e.size>m.w3)b.oR.error("Image size must be less than 5MB");else{const l=new FileReader;l.onload=()=>{L(l.result),k(!0)},l.readAsDataURL(e)}else b.oR.error("Please select a valid image file")}A.current&&(A.current.value="")}),[]),$=async()=>{var e;if("undefined"!==typeof(null===(e=B.current)||void 0===e?void 0:e.cropper)){q(!0);let e=null;if(E){var l;const a=(0,m.Si)(null===(l=B.current)||void 0===l?void 0:l.cropper.getCroppedCanvas().toDataURL(),"chapterImage.png"),i=new FormData;i.append("image",a),e=await(0,m.V6)(i,"courseImage"),e&&T.setFieldValue("chapterImage",e)}}k(!1),q(!1)},O=(0,i.useCallback)((async()=>{const e={fileName:T.values.chapterImage};D.A.delete("".concat(m.hV,"/remove"),{data:e}).then((()=>{T.setFieldValue("chapterImage","")})).catch((e=>{var l,a;b.oR.error(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)}))}),[T]);return(0,I.jsxs)("div",{className:"p-3 md:p-5 overflow-hidden border border-solid mb-5 md:mb-7.5 border-border-primary rounded-xl",children:[(0,I.jsxs)("form",{onSubmit:T.handleSubmit,children:[(0,I.jsx)("div",{className:"w-full mb-3 md:mb-5",children:(0,I.jsx)(s.A,{placeholder:C("Enter Chapter Name"),id:"chapterName",name:"chapterName",type:"text",label:C("Chapter Name"),onChange:T.handleChange,required:!0,onBlur:z,disabled:j,value:null===T||void 0===T||null===(l=T.values)||void 0===l?void 0:l.chapterName,error:null!==T&&void 0!==T&&null!==(a=T.errors)&&void 0!==a&&a.chapterName&&null!==T&&void 0!==T&&null!==(r=T.touched)&&void 0!==r&&r.chapterName?null===T||void 0===T||null===(n=T.errors)||void 0===n?void 0:n.chapterName:""})}),(0,I.jsx)("h5",{className:"mb-3 md:mb-5 text-base md:text-lg",children:"Add Image and Youtube URL"}),(0,I.jsxs)("div",{className:"flex flex-wrap gap-3 md:gap-5 min-h-[330px] mb-3 md:mb-5",children:[(0,I.jsxs)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-10px)]",children:[(0,I.jsxs)("p",{className:"mb-2 text-sm font-semibold",children:[C("Upload Image"),(0,I.jsx)("span",{className:"text-red-500",children:"\xa0*"})]}),(0,I.jsxs)("label",{htmlFor:"chapterImage",className:"relative flex items-center justify-center overflow-hidden bg-white border border-solid cursor-pointer rounded-xl border-border-primary hover:bg-gray-100",children:[(0,I.jsx)("input",{id:"chapterImage",type:"file",className:"hidden",accept:".png, .jpeg",ref:A,onChange:Y,tabIndex:0,disabled:j}),(0,I.jsxs)("picture",{className:"flex flex-col items-center h-[270px] justify-center w-full",children:[!T.values.chapterImage&&(0,I.jsx)("span",{className:"text-xl-50",children:(0,I.jsx)(o.tu,{className:"mb-2 fill-secondary"})}),T.values.chapterImage&&(0,I.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(T.values.chapterImage),alt:"Course",className:"object-cover w-full h-full"}),T.values.chapterImage?(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(d.A,{className:"absolute p-[6px] rounded-full cursor-pointer top-4 right-4 md:top-4 md:right-4 bg-error",type:"button",label:"",onClick:()=>O(),disabled:j,children:(0,I.jsx)(o.YY,{className:"fill-white",fontSize:"12"})})}):(0,I.jsx)("p",{className:"text-xl text-light-grey",children:C("Upload Image")})]})]}),(null===T||void 0===T||null===(v=T.errors)||void 0===v?void 0:v.chapterImage)&&(null===T||void 0===T||null===(p=T.touched)||void 0===p?void 0:p.chapterImage)&&(0,I.jsx)("p",{className:"mt-2 error md:text-xs-15",children:null===T||void 0===T||null===(h=T.errors)||void 0===h?void 0:h.chapterImage}),(0,I.jsxs)("p",{className:"mt-2 text-sm",children:[(0,I.jsx)("span",{className:"font-bold",children:C("Note: ")}),C("Supported formats are .png and .jpeg Max size is 5MB")]})]}),(0,I.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(66.6%-10px)]",children:(0,I.jsx)("div",{className:"w-full",children:(0,I.jsx)(s.A,{placeholder:C("Add YouTube URL here"),name:"youtubeUrl",type:"text",label:C("YouTube URL"),onBlur:z,onChange:T.handleChange,required:!0,value:null===T||void 0===T||null===(x=T.values)||void 0===x?void 0:x.youtubeUrl,disabled:j,error:null!==T&&void 0!==T&&null!==(g=T.errors)&&void 0!==g&&g.youtubeUrl&&null!==T&&void 0!==T&&null!==(f=T.touched)&&void 0!==f&&f.youtubeUrl?null===T||void 0===T||null===(w=T.errors)||void 0===w?void 0:w.youtubeUrl:""})})})]}),(0,I.jsx)("button",{className:"btn btn-primary btn-normal w-full md:w-[160px] my-2 mx-3",type:"submit",title:"".concat(null!==N?"update Chapter":"Add Chapter"),disabled:j,children:C("".concat(null!==N?"update Chapter":"Add Chapter"))})]}),(0,I.jsx)(V.l,{className:"custom-dialog",header:"Crop Image",visible:F,style:{width:"50vw",borderRadius:"12px"},onHide:()=>k(!1),footer:()=>(0,I.jsxs)("div",{className:"flex justify-end gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Cancel",onClick:()=>k(!1),title:"Cancel"}),(0,I.jsx)(d.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Save",disabled:S,onClick:()=>$(),title:"Save"})]}),children:U&&(0,I.jsx)(P.I,{ref:B,style:{height:400,width:"100%"},zoomTo:.5,aspectRatio:E?750/422:1,preview:".img-preview",src:U,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0,cropBoxResizable:!1})})]})},E=e=>{var l,a,d,r,n,v,p,h,x;let{onAddChapter:g,editData:f,disabled:w}=e;const{t:y}=(0,t.Bd)(),N=(0,i.useRef)(null),{PDFTypeValidationSchema:j}=(0,c.A)(),[C,_]=(0,i.useState)(!1);(0,i.useEffect)((()=>{var e,l,a,i,t,s;null!==f&&A.setValues({uuid:null!==(e=null===f||void 0===f||null===(l=f.pdf)||void 0===l?void 0:l.uuid)&&void 0!==e?e:"",fileName:null===f||void 0===f||null===(a=f.pdf)||void 0===a||null===(i=a.url)||void 0===i||null===(t=i.split("/"))||void 0===t?void 0:t.pop(),chapterName:null===f||void 0===f?void 0:f.title,attachments:null===f||void 0===f||null===(s=f.pdf)||void 0===s?void 0:s.url})}),[f]);const A=(0,u.Wx)({initialValues:{uuid:"",chapterName:"",fileName:"",attachments:""},validationSchema:j,onSubmit(e){g(e),A.resetForm({values:{uuid:"",chapterName:"",fileName:"",attachments:""}})}}),F=(0,i.useCallback)((e=>{_(!0);const l=e.currentTarget.files;if(l){const e=["pdf"],i=m.k8,t=Array.from(l).filter((l=>{var a;const t=null===(a=l.name.split(".").pop())||void 0===a?void 0:a.toLowerCase(),s=l.size;return e.includes(t)?!(s>i)||(b.oR.error("Please make sure your file is must be less than 25MB."),!1):(b.oR.error("Invalid file type: ".concat(l.name)),!1)}));if(t.length>0){var a;const e=new FormData;A.setFieldValue("fileName",null===t||void 0===t||null===(a=t[0])||void 0===a?void 0:a.name),e.append("file",t[0]),D.A.post("".concat(m.hV,"/attachment/course"),e,{headers:m.Q1}).then((e=>{var l,a;A.setFieldValue("attachments",null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.key),_(!1)})).catch((e=>{b.oR.error(null===e||void 0===e?void 0:e.message),_(!1)}))}else _(!1),A.setFieldError("attachments","Invalid file type Please enter valid attachment")}else _(!1)}),[A]),k=(0,i.useCallback)((e=>{A.setFieldValue(e.target.name,e.target.value.trim())}),[]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("div",{className:"p-3 md:p-5 overflow-hidden border border-solid mb-5 md:mb-7.5 border-border-primary rounded-xl",children:(0,I.jsxs)("form",{onSubmit:A.handleSubmit,children:[(0,I.jsx)("div",{className:"w-full mb-3 md:mb-5",children:(0,I.jsx)(s.A,{placeholder:y("Enter Chapter Name"),id:"chapterName",name:"chapterName",type:"text",label:y("Chapter Name"),onChange:A.handleChange,required:!0,onBlur:k,value:null===A||void 0===A||null===(l=A.values)||void 0===l?void 0:l.chapterName,disabled:w,error:null!==A&&void 0!==A&&null!==(a=A.errors)&&void 0!==a&&a.chapterName&&null!==A&&void 0!==A&&null!==(d=A.touched)&&void 0!==d&&d.chapterName?null===A||void 0===A||null===(r=A.errors)||void 0===r?void 0:r.chapterName:""})}),(0,I.jsx)("h5",{className:"mb-3 md:mb-5 text-base md:text-lg",children:null!==f?"Update Document":"Add Document"}),C&&(0,I.jsx)("div",{className:"relative flex w-full items-center",children:(0,I.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[50%] z-[9999]"})}),(0,I.jsx)("div",{className:"main-invoice w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-13px)]",children:(0,I.jsxs)("label",{htmlFor:"attachment",className:"label-invoice",children:[(0,I.jsx)("input",{id:"attachments",type:"file",name:"attachments",multiple:!0,className:"focus:bg-transparent hidden",accept:".pdf",onChange:e=>F(e),ref:N,disabled:w||C}),(0,I.jsx)("button",{onClick:()=>{var e;null===N||void 0===N||null===(e=N.current)||void 0===e||e.click()},className:"w-full ".concat(C?"cursor-not-allowed":""),type:"button",children:(0,I.jsx)(s.A,{className:"pointer-events-none upload-invoice",placeholder:y(null!==A&&void 0!==A&&null!==(n=A.values)&&void 0!==n&&n.fileName?null===A||void 0===A||null===(v=A.values)||void 0===v?void 0:v.fileName:"Upload Document"),required:!1,name:"fileName",type:"text",inputIcon:(0,I.jsx)(o.ef,{fontSize:"22"}),disabled:w})}),(0,I.jsxs)("p",{className:"mt-2 text-sm",children:[(0,I.jsx)("span",{className:"font-bold",children:y("Note: ")}),y("Supported formats are .pdf Max size is 25MB")]}),null!==A&&void 0!==A&&null!==(p=A.errors)&&void 0!==p&&p.fileName&&null!==A&&void 0!==A&&null!==(h=A.touched)&&void 0!==h&&h.fileName?(0,I.jsx)("p",{className:"mt-1 md:text-xs-15 error",children:null===A||void 0===A||null===(x=A.errors)||void 0===x?void 0:x.fileName}):""]})}),(0,I.jsx)("button",{className:"btn btn-primary btn-normal w-full md:w-[160px] my-2 mx-3",type:"submit",title:"".concat(null!==f?"update Chapter":"Add Chapter"),disabled:w||C,children:y("".concat(null!==f?"update Chapter":"Add Chapter"))})]})})})};var R=a(92823),B=a.n(R);const T=e=>{var l,a,o,d,r,n,v;let{onAddChapter:m,editData:p,disabled:h}=e;const{t:x}=(0,t.Bd)(),{TextBasedValidationSchema:g}=(0,c.A)();(0,i.useEffect)((()=>{var e,l,a,i;null!==p&&b.setValues({chapter_id:null!==(e=null===p||void 0===p?void 0:p.chapter_id)&&void 0!==e?e:"",uuid:null!==(l=null===p||void 0===p||null===(a=p.text)||void 0===a?void 0:a.uuid)&&void 0!==l?l:"",chapterName:null===p||void 0===p?void 0:p.title,text:null===p||void 0===p||null===(i=p.text)||void 0===i?void 0:i.description})}),[p]);const b=(0,u.Wx)({initialValues:{chapter_id:"",uuid:"",chapterName:"",text:""},validationSchema:g,onSubmit(e){m(e),b.resetForm()}}),f=(0,i.useCallback)((e=>{b.setFieldValue(e.target.name,e.target.value.trim())}),[]),w=(0,i.useCallback)((e=>{var l,a,i;const t=(null===(l=e.getContents())||void 0===l||null===(a=l.ops)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.insert)||"";b.setFieldTouched("text",!0),""===t?b.setFieldValue("text","",!0):b.setFieldValue("text",e.getHTML(),!0)}),[b.values.text]),y=(0,i.useCallback)((e=>{var l,a;""===(null===(l=e.getContents().ops)||void 0===l||null===(a=l[0])||void 0===a?void 0:a.insert)?b.setFieldValue("text","",!0):b.setFieldValue("text",e.getHTML(),!0)}),[b.values.text]);return(0,I.jsx)("div",{className:"p-3 md:p-5 overflow-hidden border border-solid mb-5 md:mb-7.5 border-border-primary rounded-xl",children:(0,I.jsxs)("form",{onSubmit:b.handleSubmit,children:[(0,I.jsx)("div",{className:"w-full mb-3 md:mb-5",children:(0,I.jsx)(s.A,{placeholder:x("Enter Chapter Name"),name:"chapterName",type:"text",label:x("Chapter Name"),onChange:b.handleChange,required:!0,value:null===b||void 0===b||null===(l=b.values)||void 0===l?void 0:l.chapterName,onBlur:f,disabled:h,error:null!==b&&void 0!==b&&null!==(a=b.errors)&&void 0!==a&&a.chapterName&&null!==b&&void 0!==b&&null!==(o=b.touched)&&void 0!==o&&o.chapterName?null===b||void 0===b||null===(d=b.errors)||void 0===d?void 0:d.chapterName:""})}),(0,I.jsx)("h5",{className:"mb-3 md:mb-5 text-base md:text-lg",children:null!==p?"Update Media":"Add Media"}),(0,I.jsxs)("div",{className:"w-full 3xl:max-w-[991px]  mb-3 md:mb-5 course-editor",children:[(0,I.jsx)("div",{className:"card",children:(0,I.jsx)(B(),{value:b.values.text,modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote","image"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link"],["clean"]]},formats:["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],onBlur:(e,l,a)=>y(a),onChange:(e,l,a,i)=>w(i)})}),(null===b||void 0===b||null===(r=b.errors)||void 0===r?void 0:r.text)&&(null===b||void 0===b||null===(n=b.touched)||void 0===n?void 0:n.text)&&(0,I.jsx)("p",{className:"error",children:null===b||void 0===b||null===(v=b.errors)||void 0===v?void 0:v.text})]}),(0,I.jsx)("button",{className:"btn btn-primary btn-normal w-full md:w-[160px] my-2 mx-3",type:"submit",title:"".concat(null!==p?"update Chapter":"Add Chapter"),disabled:h,children:x("".concat(null!==p?"update Chapter":"Add Chapter"))})]})})},Q=e=>{var l,a,r,n,p,h,x,g,b,f,w,y,N,j,C,_,A,F,k;let{onAddChapter:S,editData:q,disabled:U}=e;const{t:D}=(0,t.Bd)(),[V,P]=(0,i.useState)(!1),{QuizValidationSchema:L}=(0,c.A)();(0,i.useEffect)((()=>{var e,l;null!==q&&R.setValues({delete_question_ids:null===q||void 0===q||null===(e=q.quiz)||void 0===e?void 0:e.delete_question_ids,chapterName:null===q||void 0===q?void 0:q.title,questions:null===q||void 0===q||null===(l=q.quiz)||void 0===l?void 0:l.questions,selectedQuestions:{uuid:"",type:null,order:null,question:"",delete_options_ids:[],options:[{uuid:"",option:"",is_correct:!1,order:1},{uuid:"",option:"",is_correct:!1,order:2}]},deleteIndex:null,editIndex:null,correctAnswer:[]})}),[q]);const E={chapterName:"",selectedQuestions:{uuid:"",type:null,order:null,question:"",delete_options_ids:[],options:[{uuid:"",option:"",is_correct:!1,order:1},{uuid:"",option:"",is_correct:!1,order:2}]},delete_question_ids:[],questions:[],deleteIndex:null,editIndex:null,correctAnswer:[]},R=(0,u.Wx)({initialValues:E,validationSchema:L,onSubmit(e){if(null!==(null===e||void 0===e?void 0:e.editIndex)){var l;R.setFieldValue("questions.[".concat(null===e||void 0===e?void 0:e.editIndex,"]"),{...null===e||void 0===e?void 0:e.selectedQuestions,type:(null===e||void 0===e||null===(l=e.correctAnswer)||void 0===l?void 0:l.length)>1?null===m.k4||void 0===m.k4?void 0:m.k4.MULTIPLE:null===m.k4||void 0===m.k4?void 0:m.k4.SINGLE},!1),R.setFieldValue("editIndex",null,!1),R.setFieldValue("correctAnswer",[],!1),R.setFieldValue("selectedQuestions",{uuid:"",type:null,order:null,question:"",delete_options_ids:[],options:[{uuid:"",option:"",is_correct:!1,order:1},{uuid:"",option:"",is_correct:!1,order:2}]},!1)}else{var a;const l={...null===e||void 0===e?void 0:e.selectedQuestions,order:e.questions.length+1,type:(null===e||void 0===e||null===(a=e.correctAnswer)||void 0===a?void 0:a.length)>1?null===m.k4||void 0===m.k4?void 0:m.k4.MULTIPLE:null===m.k4||void 0===m.k4?void 0:m.k4.SINGLE};R.setFieldValue("questions",[...null===e||void 0===e?void 0:e.questions,l],!1),R.setFieldValue("correctAnswer",[],!1),R.setFieldValue("selectedQuestions",{uuid:"",type:null,order:null,question:"",delete_options_ids:[],options:[{uuid:"",option:"",is_correct:!1,order:1},{uuid:"",option:"",is_correct:!1,order:2}]},!1)}}}),B=(0,i.useCallback)((e=>{const l=e.target;R.setFieldValue(l.name,l.value)}),[]),T=(0,i.useCallback)((e=>{var l,a,i,t,s,o;R.setFieldValue("editIndex",e),R.setFieldValue("selectedQuestions",null===R||void 0===R||null===(l=R.values)||void 0===l||null===(a=l.questions)||void 0===a?void 0:a[e]),R.setFieldValue("correctAnswer",[...null===R||void 0===R||null===(i=R.values)||void 0===i||null===(t=i.questions)||void 0===t||null===(s=t[e])||void 0===s||null===(o=s.options)||void 0===o?void 0:o.filter((e=>null===e||void 0===e?void 0:e.is_correct))])}),[R]),Q=(0,i.useCallback)((e=>{P(!0),R.setFieldValue("deleteIndex",e)}),[]),z=(0,i.useCallback)((()=>{P(!1),R.setFieldValue("deleteIndex",null)}),[]),Y=(0,i.useCallback)((()=>{var e,l,a,i,t,s;const o=(null===R||void 0===R||null===(e=R.values)||void 0===e?void 0:e.questions.filter(((e,l)=>{var a;return l!==(null===R||void 0===R||null===(a=R.values)||void 0===a?void 0:a.deleteIndex)}))).map(((e,l)=>({...e,order:l+1})));var d,r,n,u;null!==R&&void 0!==R&&null!==(l=R.values)&&void 0!==l&&l.deleteIndex&&null!==R&&void 0!==R&&null!==(a=R.values)&&void 0!==a&&null!==(i=a.questions)&&void 0!==i&&null!==(t=i[null===R||void 0===R||null===(s=R.values)||void 0===s?void 0:s.deleteIndex])&&void 0!==t&&t.uuid&&R.setFieldValue("delete_question_ids",[...null===R||void 0===R?void 0:R.values.delete_question_ids,null===R||void 0===R||null===(d=R.values)||void 0===d||null===(r=d.questions)||void 0===r||null===(n=r[null===R||void 0===R||null===(u=R.values)||void 0===u?void 0:u.deleteIndex])||void 0===n?void 0:n.uuid]);R.setFieldValue("questions",o),R.setFieldValue("deleteIndex",null),P(!1)}),[R]),$=(0,i.useCallback)((()=>{var e,l,a;null!==R&&void 0!==R&&null!==(e=R.values)&&void 0!==e&&e.questions.length&&(S({questions:R.values.questions,delete_question_ids:null===R||void 0===R||null===(l=R.values)||void 0===l?void 0:l.delete_question_ids,chapterName:null===R||void 0===R||null===(a=R.values)||void 0===a?void 0:a.chapterName}),R.resetForm({values:E}))}),[R]),O=(0,i.useCallback)(((e,l)=>{var a,i,t;null!==R&&void 0!==R&&null!==(a=R.values)&&void 0!==a&&a.correctAnswer.includes(l)?R.setFieldValue("correctAnswer",[...null===R||void 0===R||null===(i=R.values)||void 0===i?void 0:i.correctAnswer.filter((e=>e!==l))]):(R.setFieldValue("correctAnswer",[...null===R||void 0===R||null===(t=R.values)||void 0===t?void 0:t.correctAnswer,l]),R.setFieldError("correctAnswer",""));R.setFieldValue("selectedQuestions.options.[".concat(l,"].is_correct"),e.target.checked)}),[R]),M=(0,i.useCallback)((e=>{var l,a;if((null===R||void 0===R||null===(l=R.values)||void 0===l||null===(a=l.selectedQuestions)||void 0===a?void 0:a.options.length)>2){var i,t,s,o,d,r;const l=null===R||void 0===R||null===(i=R.values)||void 0===i||null===(t=i.selectedQuestions)||void 0===t||null===(s=t.options)||void 0===s?void 0:s.filter((l=>(null===l||void 0===l?void 0:l.order)!==e+1));var n,u,c;if(R.setFieldValue("selectedQuestions.options",l),""!==(null===(o=R.values.selectedQuestions)||void 0===o||null===(d=o.options)||void 0===d||null===(r=d[e])||void 0===r?void 0:r.uuid))R.setFieldValue("selectedQuestions.delete_options_ids",[...R.values.selectedQuestions.delete_options_ids,null===(n=R.values.selectedQuestions)||void 0===n||null===(u=n.options)||void 0===u||null===(c=u[e])||void 0===c?void 0:c.uuid])}}),[R]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)("div",{className:"overflow-hidden border border-solid border-border-primary rounded-xl mb-5",children:[(0,I.jsx)("div",{className:"px-5 border-b border-solid last:border-none py-7 border-border-primary",children:(0,I.jsxs)("form",{className:"p-5 border border-solid bg-accents-2 border-border-primary rounded-xl",onSubmit:R.handleSubmit,children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{className:"w-full mb-5",children:(0,I.jsx)(s.A,{placeholder:D("Enter Chapter Name"),type:"text",id:"chapterName",name:"chapterName",label:D("Chapter Name"),value:R.values.chapterName,onChange:R.handleChange,required:!0,error:null!==R&&void 0!==R&&null!==(l=R.errors)&&void 0!==l&&l.chapterName&&null!==R&&void 0!==R&&null!==(a=R.touched)&&void 0!==a&&a.chapterName?null===R||void 0===R||null===(r=R.errors)||void 0===r?void 0:r.chapterName:"",onBlur:B,disabled:U})}),(0,I.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-2.5 mb-5",children:[(0,I.jsx)("h6",{children:null!==R.values.editIndex?D("Edit Question"):D("Add Question")}),(0,I.jsx)("p",{className:'before:content-[""] before:min-w-[8px] before:h-2 before:md:min-w-[12px] before:md:h-3 before:bg-success flex items-center gap-2.5 before:inline-block before:rounded-full',children:"Correct Answer"})]}),(0,I.jsx)("div",{className:"w-full mb-5",children:(0,I.jsx)(s.A,{placeholder:D("Enter Question"),type:"text",id:"enterQuestion",name:"selectedQuestions.question",label:D("Question"),value:R.values.selectedQuestions.question,onChange:R.handleChange,required:!0,error:null!==R&&void 0!==R&&null!==(n=R.errors)&&void 0!==n&&null!==(p=n.selectedQuestions)&&void 0!==p&&p.question&&null!==R&&void 0!==R&&null!==(h=R.touched)&&void 0!==h&&null!==(x=h.selectedQuestions)&&void 0!==x&&x.question?null===R||void 0===R||null===(g=R.errors)||void 0===g||null===(b=g.selectedQuestions)||void 0===b?void 0:b.question:"",onBlur:B,disabled:U})}),null===R||void 0===R||null===(f=R.values)||void 0===f||null===(w=f.selectedQuestions)||void 0===w||null===(y=w.options)||void 0===y?void 0:y.map(((e,l)=>{var a,i,t,r,n,u,c,v,m,p,h,x,g,b,f,w,y,N,j,C;const _=l;return(0,I.jsxs)("div",{className:"flex flex-col mb-3 md:mb-5",children:[(0,I.jsxs)("div",{className:"flex items-center gap-2.5 mb-2",children:[(0,I.jsx)("div",{className:"w-[calc(100%-36px)] md:w-[calc(50%-10px)] xl:w-[calc(33.3%-12px)]",children:(0,I.jsx)(s.A,{id:"optionAnswer1",name:"selectedQuestions.options.[".concat(l,"].option"),placeholder:D("Enter"),type:"text",label:D("Option ".concat(l+1)),value:null===R||void 0===R||null===(a=R.values)||void 0===a||null===(i=a.selectedQuestions)||void 0===i||null===(t=i.options)||void 0===t||null===(r=t[l])||void 0===r?void 0:r.option,onChange:R.handleChange,required:!0,disabled:U})}),(0,I.jsx)("div",{className:"flex items-center mt-7",children:(0,I.jsx)("input",{className:"w-3 h-3 bg-white border border-solid rounded-full appearance-none border-secondary cursor-pointer disabled:cursor-none",type:"checkbox",name:"selectedQuestions.options.[".concat(l,"].is_correct"),onChange:e=>O(e,l),checked:null===R||void 0===R||null===(n=R.values)||void 0===n||null===(u=n.selectedQuestions)||void 0===u||null===(c=u.options)||void 0===c||null===(v=c[l])||void 0===v?void 0:v.is_correct,disabled:U})}),(0,I.jsx)("div",{className:"flex items-center mt-7",children:(0,I.jsx)(d.A,{className:"w-3.5 h-3.5 md:w-[18px] md:h-[18px] cursor-pointer disabled:cursor-not-allowed",label:"",onClick:()=>M(l),disabled:U||(null===R||void 0===R||null===(m=R.values)||void 0===m||null===(p=m.selectedQuestions)||void 0===p?void 0:p.options.length)<=2,children:(0,I.jsx)(o.lM,{className:"text-base md:text-lg fill-error"})})})]}),(null===R||void 0===R||null===(h=R.errors.selectedQuestions)||void 0===h||null===(x=h.options)||void 0===x||null===(g=x[l])||void 0===g?void 0:g.option)&&(null===R||void 0===R||null===(b=R.touched)||void 0===b||null===(f=b.selectedQuestions)||void 0===f||null===(w=f.options)||void 0===w||null===(y=w[l])||void 0===y?void 0:y.option)&&(0,I.jsx)("p",{className:"error md:text-xs-15 inline-block",children:D(null===R||void 0===R||null===(N=R.errors.selectedQuestions)||void 0===N||null===(j=N.options)||void 0===j||null===(C=j[l])||void 0===C?void 0:C.option)})]},_)})),(null===R||void 0===R||null===(N=R.values)||void 0===N||null===(j=N.selectedQuestions)||void 0===j?void 0:j.options.length)<4&&(0,I.jsxs)("button",{type:"button",className:"text-primary font-semibold whitespace-nowrap md:ml-4 mb-3 md:mb-3.5",onClick:()=>{var e,l,a,i,t,s;(null===R||void 0===R||null===(e=R.values)||void 0===e||null===(l=e.selectedQuestions)||void 0===l?void 0:l.options.length)<=4&&R.setFieldValue("selectedQuestions.options",[...null===R||void 0===R||null===(a=R.values)||void 0===a||null===(i=a.selectedQuestions)||void 0===i?void 0:i.options,{uuid:"",option:"",is_correct:!1,order:(null===R||void 0===R||null===(t=R.values)||void 0===t||null===(s=t.selectedQuestions)||void 0===s?void 0:s.options.length)+1}])},disabled:U,children:["+ ",(0,I.jsx)("span",{className:"underline whitespace-nowrap",children:"Add Option"})]}),(null===R||void 0===R?void 0:R.errors.correctAnswer)&&!(null!==R&&void 0!==R&&null!==(C=R.values)&&void 0!==C&&null!==(_=C.correctAnswer)&&void 0!==_&&_.length)&&(0,I.jsx)("p",{className:"error md:text-xs-15 ",children:D(null===R||void 0===R?void 0:R.errors.correctAnswer)})]}),(0,I.jsx)("button",{className:"btn btn-primary btn-normal w-full md:w-[160px]",type:"submit",title:"".concat(null!==q?"update Chapter":"Add New Chapter"),disabled:U,children:D("".concat(null!==R.values.editIndex?"Edit Question":"Add Question"))})]})}),null===R||void 0===R||null===(A=R.values)||void 0===A||null===(F=A.questions)||void 0===F?void 0:F.map(((e,l)=>{var a;return(0,I.jsxs)("div",{className:"px-3 py-3 border-b border-solid md:px-5 md:py-4 border-border-primary last:border-none",children:[(0,I.jsxs)("div",{className:"pb-4 border-b border-solid first:pt-3 pt-7 border-border-primary last:border-none last:pb-0",children:[(0,I.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[(0,I.jsx)("p",{className:"font-bold leading-6",children:"Question ".concat(l+1,": ").concat(null===e||void 0===e?void 0:e.question)}),(0,I.jsxs)("div",{className:"flex items-center gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"bg-transparent cursor-pointer btn-default",disabled:U,onClick:()=>T(l),label:"",title:"Edit",children:(0,I.jsx)(o.ff,{className:"cursor-pointer fill-primary"})}),(0,I.jsx)(d.A,{className:"bg-transparent cursor-pointer btn-default",disabled:U,onClick:()=>Q(l),label:"",title:"Delete",children:(0,I.jsx)(o.lM,{className:"fill-error"})})]})]}),(0,I.jsx)("div",{children:null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.map((e=>(0,I.jsxs)("label",{className:"block mb-3 last:mb-0",children:[(0,I.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(null!==e&&void 0!==e&&e.is_correct?"bg-p-list-box-btn":"border border-solid border-secondary"," inline-block")}),(0,I.jsx)("span",{className:"ml-2 text-sm font-normal md:text-base",children:null===e||void 0===e?void 0:e.option})]},"option-1-".concat(l+1))))})]}),V&&(0,I.jsx)(v.A,{warningText:m.jl,onClose:z,action:Y,show:V})]},"questionAnswerList-".concat(l+1))})),(0,I.jsx)("button",{className:"btn btn-primary btn-normal w-full md:w-[160px] my-2 mx-3",type:"submit",title:"".concat(null!==q?"update Chapter":"Add Chapter"),disabled:U||!(null!==R&&void 0!==R&&null!==(k=R.values)&&void 0!==k&&k.questions),onClick:$,children:D("".concat(null!==q?"update Chapter":"Add Chapter"))})]})})},z=(e,l)=>{const a=(e,l)=>e?l:"";return null===e||void 0===e?void 0:e.map((e=>{var i,t,s,o,d,r;switch(e.type){case 1:return{chapter_id:a(l,e.uuid),title:e.title,type:e.type,order:e.order,youtube:null===e||void 0===e||null===(i=e.chapter_content)||void 0===i||null===(t=i.map((e=>({uuid:a(l,e.uuid),image:null===e||void 0===e?void 0:e.image,youtube_url:null===e||void 0===e?void 0:e.youtube_url}))))||void 0===t?void 0:t[0]};case 2:return{chapter_id:a(l,e.uuid),title:e.title,type:e.type,order:e.order,quiz:{delete_question_ids:[],questions:e.chapter_quiz.map((e=>({uuid:a(l,e.uuid),question:e.question,order:e.order,type:e.type,delete_options_ids:[],options:e.quiz_question.map((e=>({uuid:a(l,e.uuid),option:e.option,is_correct:e.is_correct,order:e.order})))})))}};case 3:return{chapter_id:a(l,e.uuid),title:e.title,type:e.type,order:e.order,text:null===e||void 0===e||null===(s=e.chapter_content)||void 0===s||null===(o=s.map((e=>({uuid:a(l,null===e||void 0===e?void 0:e.uuid),description:null===e||void 0===e?void 0:e.description}))))||void 0===o?void 0:o[0]};case 4:return{chapter_id:a(l,e.uuid),title:e.title,type:e.type,order:e.order,pdf:null===e||void 0===e||null===(d=e.chapter_content)||void 0===d||null===(r=d.map((e=>({uuid:a(l,null===e||void 0===e?void 0:e.uuid),url:null===e||void 0===e?void 0:e.pdf_url}))))||void 0===r?void 0:r[0]};default:return e}}))},Y=()=>{var e,l,a,s,p,j,C,_,A,F;const{t:k}=(0,t.Bd)(),q=(0,w.Zp)(),D=(0,r.wA)(),[V]=(0,y.ok)(),P=V.get("uuid"),R=V.get("isViewAsLearner"),{createYourContentValidationSchema:B}=(0,c.A)(),{createYourContentDetails:Y,course_id:$,is_published:O,is_draft:M}=(0,r.d4)((e=>e.coursesManagement)),[J,W]=(0,i.useState)(null),[H,Z]=(0,i.useState)(!1),[G,K]=(0,i.useState)(null),[X,ee]=(0,i.useState)([]),[le,{loading:ae}]=(0,h.n)(g.FH),{data:ie,loading:te,refetch:se}=(0,x.I)(f.Kj,{variables:{courseId:P},skip:!P,fetchPolicy:"network-only"});(0,i.useEffect)((()=>{var e,l,a,i,t,s,o,d,r,u,c,v;null!==ie&&void 0!==ie&&null!==(e=ie.findCourseChaptersDetails)&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&null!==(a=l.courseChapters)&&void 0!==a&&a.length||null===ie||void 0===ie||null===(i=ie.findCourseChaptersDetails)||void 0===i||null===(t=i.data)||void 0===t||!t.template_uuid||null!==Y&&void 0!==Y&&null!==(s=Y.chapters)&&void 0!==s&&s.length||se({courseId:null===ie||void 0===ie||null===(c=ie.findCourseChaptersDetails)||void 0===c||null===(v=c.data)||void 0===v?void 0:v.template_uuid});if(null!==ie&&void 0!==ie&&null!==(o=ie.findCourseChaptersDetails)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&null!==(r=d.courseChapters)&&void 0!==r&&r.length&&(null===Y||void 0===Y||null===(u=Y.chapters)||void 0===u||!u.length)){var p,h,x,g;const e=z(null===ie||void 0===ie||null===(p=ie.findCourseChaptersDetails)||void 0===p||null===(h=p.data)||void 0===h?void 0:h.courseChapters,location.pathname.includes("/".concat(m.bw.app,"/").concat(m.bw.updateEducationAndEngagement))&&(null===ie||void 0===ie||null===(x=ie.findCourseChaptersDetails)||void 0===x||null===(g=x.data)||void 0===g?void 0:g.course_uuid)===P||"true"===R);oe.setFieldValue("chapters",e);const l=null===e||void 0===e?void 0:e.map((e=>({name:null===e||void 0===e?void 0:e.title,id:null===e||void 0===e?void 0:e.order.toString(),type:null===m.et||void 0===m.et?void 0:m.et["".concat(null===e||void 0===e?void 0:e.type)]})));ee(l),D((0,n.bD)({chapter_names:[],delete_chapter_ids:[],chapterType:1,chapters:e}))}}),[null===ie||void 0===ie?void 0:ie.findCourseChaptersDetails,R]),(0,i.useEffect)((()=>{var e,l;null!==Y&&void 0!==Y&&null!==(e=Y.chapters)&&void 0!==e&&e.length&&(ee(null===Y||void 0===Y||null===(l=Y.chapters)||void 0===l?void 0:l.map((e=>({name:null===e||void 0===e?void 0:e.title,id:null===e||void 0===e?void 0:e.order.toString(),type:null===m.et||void 0===m.et?void 0:m.et["".concat(null===e||void 0===e?void 0:e.type)]})))),oe.resetForm({values:{...Y,chapter_names:[]}}))}),[null===Y||void 0===Y||null===(e=Y.chapters)||void 0===e?void 0:e.length]);const oe=(0,u.Wx)({initialValues:{chapter_names:[],delete_chapter_ids:[],chapterType:1,chapters:[]},validationSchema:B,onSubmit:e=>{var l;null!==e&&void 0!==e&&null!==(l=e.chapters)&&void 0!==l&&l.length?(D((0,n.Fz)()),le({variables:{courseData:{course_id:"true"===R?P:$,is_draft:!1,delete_chapter_ids:null===e||void 0===e?void 0:e.delete_chapter_ids,chapterData:null===e||void 0===e?void 0:e.chapters}}}).then((l=>{var a,i,t;const s=z(null===l||void 0===l||null===(a=l.data)||void 0===a||null===(i=a.courseCreateStepTwo)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.course_chapters,!0);D((0,n.bD)({course_id:$,delete_chapter_ids:[],chapterType:null===e||void 0===e?void 0:e.chapterType,chapters:s})),oe.setFieldValue("chapters",s),oe.setFieldValue("delete_chapter_ids",[])})).catch((e=>{var l,a,i,t;b.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(i=a.errors)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.message)}))):b.oR.error(m.Mj)}}),de=(0,i.useCallback)(((e,l)=>{const a=null===m.H3||void 0===m.H3?void 0:m.H3[l];oe.setFieldValue("chapterType",null===m.iw||void 0===m.iw?void 0:m.iw["".concat(a)]),W(+e)}),[]),re=(0,i.useCallback)((e=>{Z(!0),K(e)}),[]),ne=(0,i.useCallback)((()=>{D((0,n.w9)())}),[]),ue=(0,i.useCallback)((e=>{var l,a,i,t,s,o,d,r,n,u,c,v,p,h,x,g;null!==J?(oe.setFieldValue("chapters.[".concat(J,"]"),{chapter_id:null===oe||void 0===oe||null===(l=oe.values)||void 0===l||null===(a=l.chapters)||void 0===a||null===(i=a[J])||void 0===i?void 0:i.chapter_id,title:null===e||void 0===e?void 0:e.chapterName,type:null===oe||void 0===oe||null===(t=oe.values)||void 0===t||null===(s=t.chapters)||void 0===s||null===(o=s[J])||void 0===o?void 0:o.type,order:null===oe||void 0===oe||null===(d=oe.values)||void 0===d||null===(r=d.chapters)||void 0===r||null===(n=r[J])||void 0===n?void 0:n.order,pdf:{uuid:null===oe||void 0===oe||null===(u=oe.values)||void 0===u||null===(c=u.chapters)||void 0===c||null===(v=c[J])||void 0===v||null===(p=v.pdf)||void 0===p?void 0:p.uuid,url:null===e||void 0===e?void 0:e.attachments}}),ee((l=>l.map(((l,a)=>a===J?{...l,name:null===e||void 0===e?void 0:e.chapterName}:l)))),W(null)):(X.push({name:e.chapterName,id:"".concat(X.length+1),type:"PDF Document"}),oe.setFieldValue("chapters",[...null===oe||void 0===oe||null===(h=oe.values)||void 0===h?void 0:h.chapters,{chapter_id:"",title:null===e||void 0===e?void 0:e.chapterName,type:m.iw.PDF,order:(null===oe||void 0===oe||null===(x=oe.values)||void 0===x||null===(g=x.chapters)||void 0===g?void 0:g.length)+1,pdf:{uuid:"",url:null===e||void 0===e?void 0:e.attachments}}]))}),[oe,J]),ce=(0,i.useCallback)((e=>{var l,a,i,t,s,o,d,r,n,u,c,v,p,h,x,g;null!==J?(oe.setFieldValue("chapters.[".concat(J,"]"),{chapter_id:null===oe||void 0===oe||null===(l=oe.values)||void 0===l||null===(a=l.chapters)||void 0===a||null===(i=a[J])||void 0===i?void 0:i.chapter_id,title:null===e||void 0===e?void 0:e.chapterName,type:null===oe||void 0===oe||null===(t=oe.values)||void 0===t||null===(s=t.chapters)||void 0===s||null===(o=s[J])||void 0===o?void 0:o.type,order:null===oe||void 0===oe||null===(d=oe.values)||void 0===d||null===(r=d.chapters)||void 0===r||null===(n=r[J])||void 0===n?void 0:n.order,text:{uuid:null===oe||void 0===oe||null===(u=oe.values)||void 0===u||null===(c=u.chapters)||void 0===c||null===(v=c[J])||void 0===v||null===(p=v.text)||void 0===p?void 0:p.uuid,description:null===e||void 0===e?void 0:e.text}}),ee((l=>l.map(((l,a)=>a===J?{...l,name:null===e||void 0===e?void 0:e.chapterName}:l)))),W(null)):(X.push({name:e.chapterName,id:"".concat(X.length+1),type:"Text"}),oe.setFieldValue("chapters",[...null===oe||void 0===oe||null===(h=oe.values)||void 0===h?void 0:h.chapters,{chapter_id:"",title:null===e||void 0===e?void 0:e.chapterName,type:m.iw.TEXT,order:(null===oe||void 0===oe||null===(x=oe.values)||void 0===x||null===(g=x.chapters)||void 0===g?void 0:g.length)+1,text:{uuid:"",description:null===e||void 0===e?void 0:e.text}}]))}),[oe,J]),ve=(0,i.useCallback)((e=>{var l,a,i,t,s,o,d,r,n,u,c,v;null!==J?(oe.setFieldValue("chapters.[".concat(J,"]"),{chapter_id:null===oe||void 0===oe||null===(l=oe.values)||void 0===l||null===(a=l.chapters)||void 0===a||null===(i=a[J])||void 0===i?void 0:i.chapter_id,title:null===e||void 0===e?void 0:e.chapterName,type:null===oe||void 0===oe||null===(t=oe.values)||void 0===t||null===(s=t.chapters)||void 0===s||null===(o=s[J])||void 0===o?void 0:o.type,order:null===oe||void 0===oe||null===(d=oe.values)||void 0===d||null===(r=d.chapters)||void 0===r||null===(n=r[J])||void 0===n?void 0:n.order,quiz:{delete_question_ids:null===e||void 0===e?void 0:e.delete_question_ids,questions:null===e||void 0===e?void 0:e.questions}}),ee((l=>l.map(((l,a)=>a===J?{...l,name:null===e||void 0===e?void 0:e.chapterName}:l)))),W(null)):(X.push({name:null===e||void 0===e?void 0:e.chapterName,id:"".concat(X.length+1),type:"Quiz"}),oe.setFieldValue("chapters",[...null===oe||void 0===oe||null===(u=oe.values)||void 0===u?void 0:u.chapters,{chapter_id:"",title:null===e||void 0===e?void 0:e.chapterName,type:m.iw.QUIZ,order:(null===oe||void 0===oe||null===(c=oe.values)||void 0===c||null===(v=c.chapters)||void 0===v?void 0:v.length)+1,quiz:{delete_question_ids:null===e||void 0===e?void 0:e.delete_question_ids,questions:null===e||void 0===e?void 0:e.questions}}]))}),[oe,J]),me=(0,i.useCallback)((()=>{if(null!==G){var e,l,a,i,t,s,o,d;const v=null===oe||void 0===oe||null===(e=oe.values)||void 0===e||null===(l=e.chapters)||void 0===l?void 0:l.filter(((e,l)=>{if(l!==G)return ie})),m=null===X||void 0===X?void 0:X.filter(((e,l)=>l!==G));var r,n,u,c;if(ee(m),oe.setFieldValue("chapters",v),""!==(null===oe||void 0===oe||null===(a=oe.values)||void 0===a||null===(i=a.chapters)||void 0===i||null===(t=i[G])||void 0===t?void 0:t.chapter_id)&&null!==oe&&void 0!==oe&&null!==(s=oe.values)&&void 0!==s&&null!==(o=s.chapters)&&void 0!==o&&null!==(d=o[G])&&void 0!==d&&d.chapter_id)oe.setFieldValue("delete_chapter_ids",[...null===oe||void 0===oe||null===(r=oe.values)||void 0===r?void 0:r.delete_chapter_ids,null===oe||void 0===oe||null===(n=oe.values)||void 0===n||null===(u=n.chapters)||void 0===u||null===(c=u[G])||void 0===c?void 0:c.chapter_id]);Z(!1),K(null)}}),[oe,G]),pe=(0,i.useCallback)((()=>{Z(!1),K(null)}),[]),he=(0,i.useCallback)((e=>{var l,a,i;const t=((e,l,a)=>{const i=Array.from(e),[t]=i.splice(l,1);return i.splice(a,0,t),i})(X,e.source.index,(null===e||void 0===e||null===(l=e.destination)||void 0===l?void 0:l.index)||0);ee(t);const s=xe(null===oe||void 0===oe||null===(a=oe.values)||void 0===a?void 0:a.chapters,e.source.index,(null===e||void 0===e||null===(i=e.destination)||void 0===i?void 0:i.index)||0);oe.setFieldValue("chapters",s)}),[oe]),xe=(e,l,a)=>{const i=Array.from(e),[t]=i.splice(l,1);return i.splice(a,0,t),i.map(((e,l)=>({...e,order:l+1})))},ge=(0,i.useCallback)((e=>{var l,a;console.log(oe.values.chapters),le({variables:{courseData:{course_id:"true"===R?P:$,is_draft:!0,delete_chapter_ids:null===oe||void 0===oe||null===(l=oe.values)||void 0===l?void 0:l.delete_chapter_ids,chapterData:null===oe||void 0===oe||null===(a=oe.values)||void 0===a?void 0:a.chapters}}}).then((l=>{var a,i,t,s;const o=z(null===l||void 0===l||null===(a=l.data)||void 0===a||null===(i=a.courseCreateStepTwo)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.course_chapters,!0);null===oe||void 0===oe||oe.setFieldValue("chapters",o),null===oe||void 0===oe||oe.setFieldValue("delete_chapter_ids",[]),D((0,n.bD)({course_id:$,chapterType:null===oe||void 0===oe||null===(s=oe.values)||void 0===s?void 0:s.chapterType,delete_chapter_ids:[],chapters:o})),!0===e?q("/".concat(m.bw.app,"/").concat(m.bw.tfsCoursesTemplates,"/").concat(m.bw.courseDetails,"/?uuid=").concat("true"===R?P:$,"&isViewAsLearner=true&step=1")):b.oR.success("Draft has been saved succefully.")})).catch((e=>{var l,a,i,t;b.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(i=a.errors)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.message)}))}),[oe]),be=(0,i.useCallback)((()=>{ge(!0)}),[oe]),fe=e=>{var l,a;return e&&null!==J?null===oe||void 0===oe||null===(l=oe.values)||void 0===l||null===(a=l.chapters)||void 0===a?void 0:a[J]:null};return(0,I.jsx)(I.Fragment,{children:te?(0,I.jsx)(N.A,{}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:"flex justify-end flex-wrap w-full gap-3 xmd:gap-4 lg:w-auto lg:flex-nowrap pt-0.5 mb-3 md:mb-5",children:(0,I.jsx)("div",{className:"flex flex-wrap items-center w-full gap-4 md:w-auto",children:(0,I.jsx)("div",{className:"w-full md:w-[220px]",children:(0,I.jsx)(S.A,{className:"w-full -mt-2",label:"Select Chapter Type",inputIcon:(0,I.jsx)(o.jN,{fontSize:"12"}),name:"chapterType",id:"chapterType",value:null===oe||void 0===oe||null===(l=oe.values)||void 0===l?void 0:l.chapterType,onChange:oe.handleChange,options:m.uj,required:!0,disabled:O})})})}),+(null===oe||void 0===oe||null===(a=oe.values)||void 0===a?void 0:a.chapterType)===m.iw.YOUTUBE_VIDEO&&(0,I.jsx)(L,{onAddChapter:e=>{var l,a,i,t,s,o,d,r,n,u,c,v,p,h,x,g;null!==J?(oe.setFieldValue("chapters.[".concat(J,"]"),{chapter_id:null===oe||void 0===oe||null===(l=oe.values)||void 0===l||null===(a=l.chapters)||void 0===a||null===(i=a[J])||void 0===i?void 0:i.chapter_id,title:null===e||void 0===e?void 0:e.chapterName,type:null===oe||void 0===oe||null===(t=oe.values)||void 0===t||null===(s=t.chapters)||void 0===s||null===(o=s[J])||void 0===o?void 0:o.type,order:null===oe||void 0===oe||null===(d=oe.values)||void 0===d||null===(r=d.chapters)||void 0===r||null===(n=r[J])||void 0===n?void 0:n.order,youtube:{uuid:null===oe||void 0===oe||null===(u=oe.values)||void 0===u||null===(c=u.chapters)||void 0===c||null===(v=c[J])||void 0===v||null===(p=v.youtube)||void 0===p?void 0:p.uuid,image:null===e||void 0===e?void 0:e.chapterImage,youtube_url:null===e||void 0===e?void 0:e.youtubeUrl}}),ee((l=>l.map(((l,a)=>a===J?{...l,name:null===e||void 0===e?void 0:e.chapterName}:l)))),W(null)):(X.push({name:e.chapterName,id:"".concat(X.length+1),type:"YouTube"}),oe.setFieldValue("chapters",[...null===oe||void 0===oe||null===(h=oe.values)||void 0===h?void 0:h.chapters,{chapter_id:"",title:null===e||void 0===e?void 0:e.chapterName,type:m.iw.YOUTUBE_VIDEO,order:(null===oe||void 0===oe||null===(x=oe.values)||void 0===x||null===(g=x.chapters)||void 0===g?void 0:g.length)+1,youtube:{uuid:null===e||void 0===e?void 0:e.uuid,image:null===e||void 0===e?void 0:e.chapterImage,youtube_url:null===e||void 0===e?void 0:e.youtubeUrl}}]))},disabled:O,editData:fe((null===oe||void 0===oe||null===(s=oe.values)||void 0===s?void 0:s.chapterType)===m.iw.YOUTUBE_VIDEO)}),+(null===oe||void 0===oe||null===(p=oe.values)||void 0===p?void 0:p.chapterType)===m.iw.PDF&&(0,I.jsx)(E,{onAddChapter:ue,disabled:O,editData:fe((null===oe||void 0===oe||null===(j=oe.values)||void 0===j?void 0:j.chapterType)===m.iw.PDF)}),+(null===oe||void 0===oe||null===(C=oe.values)||void 0===C?void 0:C.chapterType)===m.iw.TEXT&&(0,I.jsx)(T,{onAddChapter:ce,disabled:O,editData:fe((null===oe||void 0===oe||null===(_=oe.values)||void 0===_?void 0:_.chapterType)===m.iw.TEXT)}),+(null===oe||void 0===oe||null===(A=oe.values)||void 0===A?void 0:A.chapterType)===(null===m.iw||void 0===m.iw?void 0:m.iw.QUIZ)&&(0,I.jsx)(Q,{onAddChapter:ve,disabled:O,editData:fe((null===oe||void 0===oe||null===(F=oe.values)||void 0===F?void 0:F.chapterType)===m.iw.QUIZ)}),X.length?(0,I.jsx)("div",{children:(0,I.jsx)(U,{droppableId:"unique-id",data:X,onDragEnd:he,renderItem:(e,l,a)=>(0,I.jsxs)("div",{className:"flex flex-col xmd:flex-row justify-between gap-3 xmd:gap-20 p-3 md:p-5 border border-solid border-border-primary rounded-xl bg-accents-2",ref:l.innerRef,...l.draggableProps,...l.dragHandleProps,children:[(0,I.jsxs)("div",{className:"flex items-center gap-5 xmd:gap-10",children:[(0,I.jsx)("h5",{className:"text-base xmd:text-lg font-semibold min-w-[90px] xmd:min-w-[150px] pr-[18px] border-r",children:e.type}),(0,I.jsxs)("h5",{className:"text-base xmd:text-lg line-clamp-2",children:["Chapter ",a+1,": ",e.name]})]}),(0,I.jsxs)("div",{className:"flex  justify-end items-center gap-3 md:gap-5",children:[(0,I.jsxs)("div",{className:"flex gap-5 xmd:gap-7.5 pr-[18px] border-r",children:[(0,I.jsx)("button",{className:"w-3.5 h-3.5 md:w-[18px] md:h-[18px] cursor-pointer disabled:cursor-not-allowed",onClick:()=>de(a.toString(),e.type),disabled:O,children:(0,I.jsx)(o.ff,{className:"text-base md:text-lg text-primary"})}),(0,I.jsx)("button",{className:"w-3.5 h-3.5 md:w-[18px] md:h-[18px] cursor-pointer disabled:cursor-not-allowed",onClick:()=>re(a),disabled:O,children:(0,I.jsx)(o.lM,{className:"text-base md:text-lg fill-error"})})]}),(0,I.jsx)("span",{children:(0,I.jsx)(o.ZY,{className:"w-2 h-4 md:w-3 md:h-5"})})]})]}),renderWrapper:(e,l)=>(0,I.jsx)("div",{className:"p-3 md:p-5 overflow-hidden border border-solid mb-3 md:mb-5 border-border-primary rounded-xl space-y-3 md:space-y-5",ref:l.innerRef,...l.droppableProps,children:e}),direction:"vertical",disabled:O})}):null,(0,I.jsxs)("div",{className:"flex flex-wrap justify-between gap-3 mt-5 md:mt-7.5 md:flex-nowrap md:gap-5",children:[(0,I.jsxs)("div",{className:"flex flex-col sm:flex-row w-full gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:w-[180px] whitespace-nowrap",type:"button",label:k("View as a Learner"),title:"View as a Learner",onClick:be}),(!O||M)&&(0,I.jsx)(d.A,{className:"btn-primary btn-normal w-full md:w-40 whitespace-nowrap",type:"button",label:k("Save as Draft"),title:"Save as Draft",onClick:ge,disabled:ae})]}),(0,I.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end w-full gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"btn bg-default btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap ",type:"button",label:k("Back"),title:"Back",onClick:ne}),(0,I.jsx)(d.A,{className:"btn bg-default btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap ",type:"button",label:k("Save & Next"),title:"Save & Next",onClick:oe.handleSubmit,disabled:ae})]})]}),H&&(0,I.jsx)(v.A,{warningText:m.jl,onClose:()=>pe(),action:me,show:H})]})})};var $=a(92073),O=a(97178),M=a(28610);a(15675),a(59140);const J=()=>{var e,l;const{t:a}=(0,t.Bd)(),v=(0,w.Zp)(),j=(0,r.wA)(),[C]=(0,y.ok)(),_=C.get("uuid"),A=C.get("isViewAsLearner"),{planYourCourseValidationSchema:k,courseTitleValidationSchema:q}=(0,c.A)(),{data:U,refetch:L,loading:E}=(0,x.I)(O.fk,{variables:{limit:10,page:1,sortField:"name",sortOrder:"",search:""},fetchPolicy:"network-only"}),{refetch:R,loading:B}=(0,x.I)(M.Jo,{variables:{limit:500,page:1,search:"",sortOrder:"descend",sortField:"createdAt"},fetchPolicy:"network-only"}),[T,Q]=(0,i.useState)([]),[z,Y]=(0,i.useState)([]),[J,W]=(0,i.useState)(!1),[H,Z]=(0,i.useState)(""),[G,K]=(0,i.useState)(!1),[X,ee]=(0,i.useState)(!1),le=(0,i.createRef)(),{planYourCourseDetails:ae,playlistData:ie,course_id:te,is_published:se,template:oe,is_draft:de}=(0,r.d4)((e=>e.coursesManagement)),{userProfileData:re}=(0,r.d4)((e=>e.userProfile)),ne=(0,i.useRef)(null),[ue,ce]=(0,i.useState)(!1),[ve,{loading:me}]=(0,h.n)(g.dE),{data:pe,loading:he,refetch:xe}=(0,x.I)(f.Wb,{variables:{courseId:""!==te?te:_},skip:!_,fetchPolicy:"no-cache"});(0,i.useEffect)((()=>{""!==te&&xe({courseId:te}).then((e=>{var l,a;const i=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.getCourseDetailsById)||void 0===a?void 0:a.data;be(i)})).catch((e=>{var l,a,i,t;b.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(i=a.errors)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.message)}))}),[te]);const ge=(0,u.Wx)({initialValues:{selectCourse:"",highlights1_id:"",highlights2_id:"",highlights3_id:"",highlights4_id:"",highlights1:"",highlights2:"",highlights3:"",highlights4:"",courseTitle:"",qualification:"",prerequisite:"",instructorName:"",assessmentCertification:!1,category:"",addPrerequisite:!1,categoryName:"",courseImageUploadFileName:"",courseDescription:"",bannerImageUploadFileName:"",instructorImageUploadFileName:""},validationSchema:k,onSubmit:e=>{we(e,!1)}});(0,i.useEffect)((()=>{location.pathname.includes("/".concat(m.bw.app,"/").concat(m.bw.updateEducationAndEngagement))&&_&&j((0,n.Bj)(_))}),[_]);const be=e=>{var l;const a=null===e||void 0===e||null===(l=e.playlists)||void 0===l?void 0:l.map((e=>({name:null===e||void 0===e?void 0:e.name,code:null===e||void 0===e?void 0:e.uuid})));var i,t,s,o,d,r,u,c,v,h,x,g,b,f,w,y,N,C,I,F,k,S,q,U,D,V,P,L,E,R;(location.pathname.includes("/".concat(m.bw.app,"/").concat(m.bw.updateEducationAndEngagement))&&j((0,n.x5)(null===e||void 0===e?void 0:e.is_published)),j((0,n._l)(null===e||void 0===e?void 0:e.is_template)),j((0,n.j_)({is_certification:null===e||void 0===e?void 0:e.is_certification,estimate_time:null===e||void 0===e?void 0:e.estimate_time,availability:null===e||void 0===e?void 0:e.availability,playlist_ids:a,is_editable:null===e||void 0===e?void 0:e.is_editable})),location.pathname.includes("/".concat(m.bw.app,"/").concat(m.bw.educationAndEngagement))&&"true"!==A&&""===te)?ge.setValues({selectCourse:null!==(i=null===e||void 0===e?void 0:e.template_uuid)&&void 0!==i?i:_,highlights1_id:"",highlights2_id:"",highlights3_id:"",highlights4_id:"",highlights1:(0,p.Ju)(null===e||void 0===e||null===(t=e.highlights)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.name),highlights2:(0,p.Ju)(null===e||void 0===e||null===(o=e.highlights)||void 0===o||null===(d=o[1])||void 0===d?void 0:d.name),highlights3:(0,p.Ju)(null===e||void 0===e||null===(r=e.highlights)||void 0===r||null===(u=r[2])||void 0===u?void 0:u.name),highlights4:(0,p.Ju)(null===e||void 0===e||null===(c=e.highlights)||void 0===c||null===(v=c[3])||void 0===v?void 0:v.name),courseTitle:null===e||void 0===e?void 0:e.title,prerequisite:null===e||void 0===e?void 0:e.prerequisite,instructorName:null===e||void 0===e?void 0:e.instructor_name,qualification:null===e||void 0===e?void 0:e.instructor_qualification,category:null===e||void 0===e||null===(h=e.category)||void 0===h?void 0:h.uuid,assessmentCertification:null===e||void 0===e?void 0:e.is_certification,courseImageUploadFileName:null===e||void 0===e?void 0:e.course_image,addPrerequisite:!(null===e||void 0===e||!e.prerequisite),instructorImageUploadFileName:null===e||void 0===e?void 0:e.instructor_profile,categoryName:null===e||void 0===e||null===(x=e.category)||void 0===x?void 0:x.name,courseDescription:null===e||void 0===e?void 0:e.description,bannerImageUploadFileName:null===e||void 0===e?void 0:e.banner_image,templateId:null===e||void 0===e?void 0:e.template_uuid}):ge.setValues({selectCourse:null!==(g=null===e||void 0===e?void 0:e.template_uuid)&&void 0!==g?g:_,highlights1_id:(0,p.Ju)(null===e||void 0===e||null===(b=e.highlights)||void 0===b||null===(f=b[0])||void 0===f?void 0:f.uuid),highlights2_id:(0,p.Ju)(null===e||void 0===e||null===(w=e.highlights)||void 0===w||null===(y=w[1])||void 0===y?void 0:y.uuid),highlights3_id:(0,p.Ju)(null===e||void 0===e||null===(N=e.highlights)||void 0===N||null===(C=N[2])||void 0===C?void 0:C.uuid),highlights4_id:(0,p.Ju)(null===e||void 0===e||null===(I=e.highlights)||void 0===I||null===(F=I[3])||void 0===F?void 0:F.uuid),highlights1:(0,p.Ju)(null===e||void 0===e||null===(k=e.highlights)||void 0===k||null===(S=k[0])||void 0===S?void 0:S.name),highlights2:(0,p.Ju)(null===e||void 0===e||null===(q=e.highlights)||void 0===q||null===(U=q[1])||void 0===U?void 0:U.name),highlights3:(0,p.Ju)(null===e||void 0===e||null===(D=e.highlights)||void 0===D||null===(V=D[2])||void 0===V?void 0:V.name),highlights4:(0,p.Ju)(null===e||void 0===e||null===(P=e.highlights)||void 0===P||null===(L=P[3])||void 0===L?void 0:L.name),courseTitle:null===e||void 0===e?void 0:e.title,prerequisite:null===e||void 0===e?void 0:e.prerequisite,qualification:null===e||void 0===e?void 0:e.instructor_qualification,category:null===e||void 0===e||null===(E=e.category)||void 0===E?void 0:E.uuid,instructorName:null===e||void 0===e?void 0:e.instructor_name,assessmentCertification:null===e||void 0===e?void 0:e.is_certification,courseImageUploadFileName:null===e||void 0===e?void 0:e.course_image,addPrerequisite:!(null===e||void 0===e||!e.prerequisite),instructorImageUploadFileName:null===e||void 0===e?void 0:e.instructor_profile,courseDescription:null===e||void 0===e?void 0:e.description,categoryName:null===e||void 0===e||null===(R=e.category)||void 0===R?void 0:R.name,bannerImageUploadFileName:null===e||void 0===e?void 0:e.banner_image,templateId:null===e||void 0===e?void 0:e.template_uuid})};(0,i.useEffect)((()=>{if(pe&&_){var e;const l=null===pe||void 0===pe||null===(e=pe.getCourseDetailsById)||void 0===e?void 0:e.data;be(l)}}),[pe,ae]),(0,i.useEffect)((()=>{oe.length&&Y(oe)}),[oe]);const fe=(e,l,a)=>e?l:a,we=async(e,l,a)=>{try{var i,t,s,o,d,r,u,c,h,x,g,f,w,y,N,C,I,F,k,S,q,U,D,V,P,L,E,R,B,T,Q,z,Y,$,O,M,J,W,H,Z,G,K,X,ee,le,ae,ie,se,oe,de,re,ne;const pe=await ve({variables:{courseData:{course_id:"true"!==A?te:_,highlights:[{id:null!==(i=null===e||void 0===e?void 0:e.highlights1_id)&&void 0!==i?i:"",highlight:null!==(t=null===e||void 0===e?void 0:e.highlights1)&&void 0!==t?t:""},{id:null!==(s=null===e||void 0===e?void 0:e.highlights2_id)&&void 0!==s?s:"",highlight:null!==(o=null===e||void 0===e?void 0:e.highlights2)&&void 0!==o?o:""},{id:null!==(d=null===e||void 0===e?void 0:e.highlights3_id)&&void 0!==d?d:"",highlight:null!==(r=null===e||void 0===e?void 0:e.highlights3)&&void 0!==r?r:""},{id:null!==(u=null===e||void 0===e?void 0:e.highlights4_id)&&void 0!==u?u:"",highlight:null!==(c=null===e||void 0===e?void 0:e.highlights4)&&void 0!==c?c:""}],title:e.courseTitle,description:e.courseDescription,prerequisite:fe(null===e||void 0===e?void 0:e.addPrerequisite,null===e||void 0===e?void 0:e.prerequisite,""),category_uuid:(0,p.Ju)(e.category),course_image:e.courseImageUploadFileName,banner_image:e.bannerImageUploadFileName,instructor_profile:e.instructorImageUploadFileName,instructor_name:e.instructorName,instructor_qualification:e.qualification,is_draft:l,template_uuid:null!==(h=null===e||void 0===e?void 0:e.templateId)&&void 0!==h?h:_}}});var ue,ce,me;if(l||j((0,n.Fz)()),l&&!a&&b.oR.success("Draft has been saved succefully."),a)v("/".concat(m.bw.app,"/").concat(m.bw.tfsCoursesTemplates,"/").concat(m.bw.courseDetails,"/?uuid=").concat(null===pe||void 0===pe||null===(ue=pe.data)||void 0===ue||null===(ce=ue.courseCreateStepOne)||void 0===ce||null===(me=ce.data)||void 0===me?void 0:me.uuid,"&isViewAsLearner=true&step=0"));j((0,n.u6)({...e,id:te,highlights1_id:null===pe||void 0===pe||null===(x=pe.data)||void 0===x||null===(g=x.courseCreateStepOne)||void 0===g||null===(f=g.data)||void 0===f||null===(w=f.highlights)||void 0===w||null===(y=w[0])||void 0===y?void 0:y.uuid,highlights2_id:null===pe||void 0===pe||null===(N=pe.data)||void 0===N||null===(C=N.courseCreateStepOne)||void 0===C||null===(I=C.data)||void 0===I||null===(F=I.highlights)||void 0===F||null===(k=F[1])||void 0===k?void 0:k.uuid,highlights3_id:null===pe||void 0===pe||null===(S=pe.data)||void 0===S||null===(q=S.courseCreateStepOne)||void 0===q||null===(U=q.data)||void 0===U||null===(D=U.highlights)||void 0===D||null===(V=D[2])||void 0===V?void 0:V.uuid,highlights4_id:null===pe||void 0===pe||null===(P=pe.data)||void 0===P||null===(L=P.courseCreateStepOne)||void 0===L||null===(E=L.data)||void 0===E||null===(R=E.highlights)||void 0===R||null===(B=R[3])||void 0===B?void 0:B.uuid})),j((0,n.Bj)(null===pe||void 0===pe||null===(T=pe.data)||void 0===T||null===(Q=T.courseCreateStepOne)||void 0===Q||null===(z=Q.data)||void 0===z?void 0:z.uuid)),null===ge||void 0===ge||ge.setFieldValue("highlights1_id",null===pe||void 0===pe||null===(Y=pe.data)||void 0===Y||null===($=Y.courseCreateStepOne)||void 0===$||null===(O=$.data)||void 0===O||null===(M=O.highlights)||void 0===M||null===(J=M[0])||void 0===J?void 0:J.uuid),null===ge||void 0===ge||ge.setFieldValue("highlights2_id",null===pe||void 0===pe||null===(W=pe.data)||void 0===W||null===(H=W.courseCreateStepOne)||void 0===H||null===(Z=H.data)||void 0===Z||null===(G=Z.highlights)||void 0===G||null===(K=G[1])||void 0===K?void 0:K.uuid),null===ge||void 0===ge||ge.setFieldValue("highlights3_id",null===pe||void 0===pe||null===(X=pe.data)||void 0===X||null===(ee=X.courseCreateStepOne)||void 0===ee||null===(le=ee.data)||void 0===le||null===(ae=le.highlights)||void 0===ae||null===(ie=ae[2])||void 0===ie?void 0:ie.uuid),null===ge||void 0===ge||ge.setFieldValue("highlights4_id",null===pe||void 0===pe||null===(se=pe.data)||void 0===se||null===(oe=se.courseCreateStepOne)||void 0===oe||null===(de=oe.data)||void 0===de||null===(re=de.highlights)||void 0===re||null===(ne=re[3])||void 0===ne?void 0:ne.uuid)}catch(we){var pe,he,xe,be;b.oR.error(null===we||void 0===we||null===(pe=we.networkError)||void 0===pe||null===(he=pe.result)||void 0===he||null===(xe=he.errors)||void 0===xe||null===(be=xe[0])||void 0===be?void 0:be.message)}};(0,i.useEffect)((()=>{R(),L()}),[L]),(0,i.useEffect)((()=>{var e,l,a;if(0===(null===ie||void 0===ie?void 0:ie.length)&&pe&&_&&(null===pe||void 0===pe||null===(e=pe.getCourseDetailsById)||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.course_playlists)||void 0===a?void 0:a.length)>0){var i,t,s;const e=null===pe||void 0===pe||null===(i=pe.getCourseDetailsById)||void 0===i||null===(t=i.data)||void 0===t||null===(s=t.course_playlists)||void 0===s?void 0:s.map((e=>{var l,a;return{name:null===e||void 0===e||null===(l=e.playlist)||void 0===l?void 0:l.name,code:null===e||void 0===e||null===(a=e.playlist)||void 0===a?void 0:a.uuid}}));j((0,n.dY)(e))}}),[ie,pe]),(0,i.useEffect)((()=>{var e,l,a;const i=[];null===U||void 0===U||null===(e=U.getActiveCategories)||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.categories)||void 0===a||a.map((e=>{i.push({name:null===e||void 0===e?void 0:e.name,key:null===e||void 0===e?void 0:e.uuid})})),Q(i)}),[U]);const ye=(0,i.useCallback)((e=>{var l;let a;if(e.preventDefault(),K(!0),ee(!1),e.target&&(a=e.target.files),a&&(null===(l=a)||void 0===l?void 0:l.length)>0){const e=a[0];if(e.type.startsWith("image/"))if(e.size>m.w3)b.oR.error("Image size must be less than 5MB");else{const l=new FileReader;l.onload=()=>{Z(l.result),W(!0)},l.readAsDataURL(e)}else b.oR.error("Please select a valid image file")}ne.current&&(ne.current.value="")}),[]),Ne=(0,i.useCallback)((e=>{var l;let a;if(e.preventDefault(),K(!1),ee(!0),e.target&&(a=e.target.files),a&&(null===(l=a)||void 0===l?void 0:l.length)>0){const e=a[0];if(e.type.startsWith("image/"))if(e.size>m.w3)b.oR.error("Image size must be less than 5MB");else{const l=new FileReader;l.onload=()=>{Z(l.result),W(!0)},l.readAsDataURL(e)}else b.oR.error("Please select a valid image file")}ne.current&&(ne.current.value="")}),[]),je=(0,i.useCallback)((e=>{var l;let a;if(e.preventDefault(),K(!1),ee(!1),e.target&&(a=e.target.files),a&&(null===(l=a)||void 0===l?void 0:l.length)>0){const e=a[0];if(e.type.startsWith("image/"))if(e.size>m.w3)b.oR.error("Image size must be less than 5MB");else{const l=new FileReader;l.onload=()=>{Z(l.result),W(!0)},l.readAsDataURL(e)}else b.oR.error("Please select a valid image file")}ne.current&&(ne.current.value="")}),[]),Ce=(0,i.useCallback)((async e=>{const{courseImagePlanYourCourse:l,bannerImagePlanYourCourse:a}=e;if(l&&!a){const e={fileName:ge.values.courseImageUploadFileName};D.A.delete("".concat(m.hV,"/remove"),{data:e}).then((()=>{ge.setFieldValue("courseImageUploadFileName","")})).catch((e=>{var l,a;b.oR.error(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)}))}else if(!l&&a){const e={fileName:ge.values.bannerImageUploadFileName};D.A.delete("".concat(m.hV,"/remove"),{data:e}).then((()=>{ge.setFieldValue("bannerImageUploadFileName","")})).catch((e=>{var l,a;b.oR.error(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)}))}else{const e={fileName:ge.values.instructorImageUploadFileName};D.A.delete("".concat(m.hV,"/remove"),{data:e}).then((()=>{ge.setFieldValue("instructorImageUploadFileName","")})).catch((e=>{var l,a;b.oR.error(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)}))}}),[ge]),_e=(0,i.useCallback)((()=>{v("/".concat(m.bw.app,"/").concat(m.bw.tfsCoursesTemplates,"/?IsSelectCourseTemplate=true")),j((0,n.Bj)(""))}),[]),Ie=(0,i.useCallback)((e=>{ge.setFieldValue(e.target.name,(0,p.AW)(e))}),[]),Ae=()=>(0,I.jsxs)("div",{className:"flex justify-end gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Cancel",onClick:()=>W(!1),title:"Cancel"}),(0,I.jsx)(d.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Save",disabled:ue,onClick:()=>(async()=>{var e;const l=null===(e=le.current)||void 0===e?void 0:e.cropper;if(!l)return;ce(!0);let a,i=null;a=G?(0,m.Si)(l.getCroppedCanvas().toDataURL(),"courseImagePreview.png"):X?(0,m.Si)(l.getCroppedCanvas().toDataURL(),"BannerImagePreview.png"):(0,m.Si)(l.getCroppedCanvas().toDataURL(),"instructorProfilePreview.png");const t=new FormData;t.append("image",a);let s=X?"bannerImage":"courseImage";G||X||(s="instructorProfile"),i=await(0,m.V6)(t,s),i&&(!G&&X?ge.setFieldValue("bannerImageUploadFileName",i):G&&!X?ge.setFieldValue("courseImageUploadFileName",i):ge.setFieldValue("instructorImageUploadFileName",i)),W(!1),ce(!1)})(),title:"Save"})]}),Fe=()=>{v("/".concat(m.bw.app,"/").concat(m.bw.tfsCoursesTemplates,"/?IsSelectCourseTemplate=true"))},ke=e=>{var l,a,i;return null!==ge&&void 0!==ge&&null!==(l=ge.errors)&&void 0!==l&&l[e]&&null!==ge&&void 0!==ge&&null!==(a=ge.touched)&&void 0!==a&&a[e]?null===ge||void 0===ge||null===(i=ge.errors)||void 0===i?void 0:i[e]:""},Se=e=>{var l,a,i;return null!==ge&&void 0!==ge&&null!==(l=ge.errors)&&void 0!==l&&l[e]&&null!==ge&&void 0!==ge&&null!==(a=ge.touched)&&void 0!==a&&a[e]?(0,I.jsx)("span",{className:"-mt-1 md:text-xs-15 error",children:null===ge||void 0===ge||null===(i=ge.errors)||void 0===i?void 0:i[e]}):null};return(0,I.jsx)("div",{children:he||B||E?(0,I.jsx)(N.A,{}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("form",{className:"border border-solid border-border-primary rounded-xl",onSubmit:ge.handleSubmit,children:[!location.pathname.includes("/".concat(m.bw.app,"/").concat(m.bw.updateEducationAndEngagement))&&(null===m.ve||void 0===m.ve?void 0:m.ve.SUPER_ADMIN)!==(null===re||void 0===re||null===(e=re.getProfile)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.user_type)&&(0,I.jsxs)("div",{className:"p-3 pb-5 border-b border-solid md:p-5 md:pb-7 border-border-primary",children:[(0,I.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-3 md:gap-5 select-template",children:[(0,I.jsx)("h6",{children:a("Select From Template")}),(0,I.jsx)(d.A,{className:"btn btn-normal bg-primary text-white text-xs w-full md:w-[100px] h-[36px]",type:"button",onClick:_e,label:a("See All"),title:"See All"})]}),(0,I.jsx)("p",{className:"mb-3 md:mb-5",children:"These courses are created by TFS. You can select any of them to prefill all the details including course details and structure. You can edit/update it afterwards."}),(0,I.jsx)("div",{className:"w-full cursor-pointer lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",onClick:()=>Fe(),children:(0,I.jsx)(S.A,{className:"pointer-events-none",placeholder:a("Select Type"),label:a("Select Course"),onChange:Fe,value:ge.values.selectCourse,options:z,name:"selectCourse",id:"selectCourse",error:ke("selectCourse")})})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary last:border-none",children:[(0,I.jsx)("h6",{className:"mb-3 md:mb-5",children:a("Add Course Details")}),(0,I.jsxs)("div",{className:"flex flex-col gap-3 md:gap-5",children:[(0,I.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,I.jsx)(s.A,{placeholder:a("Insert your course title"),type:"text",id:"courseTitle",name:"courseTitle",label:a("Course Title"),value:ge.values.courseTitle,onChange:ge.handleChange,required:!0,error:ke("courseTitle"),onBlur:Ie})}),(0,I.jsx)("div",{className:"w-full 3xl:w-[66%]",children:(0,I.jsx)(F,{label:a("Course Description"),rows:7,value:ge.values.courseDescription,name:"courseDescription",required:!0,onChange:ge.handleChange,onBlur:Ie,placeholder:"Insert your course description",error:ke("courseDescription")})})]})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary last:border-none",children:[(0,I.jsx)("h6",{className:"mb-3 md:mb-5",children:a("Highlights of Course")}),(0,I.jsxs)("div",{className:"flex flex-wrap gap-3 md:gap-5",children:[(0,I.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,I.jsx)(s.A,{placeholder:a("Enter"),type:"text",id:"highlights1",name:"highlights1",label:a("Highlights 1"),value:ge.values.highlights1,onChange:ge.handleChange,error:ke("highlights1"),onBlur:Ie})}),(0,I.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,I.jsx)(s.A,{placeholder:a("Enter"),type:"text",id:"highlights2",name:"highlights2",label:a("Highlights 2"),value:ge.values.highlights2,onChange:ge.handleChange,error:ke("highlights2"),onBlur:Ie})}),(0,I.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,I.jsx)(s.A,{placeholder:a("Enter"),type:"text",id:"highlights3",name:"highlights3",label:a("Highlights 3"),value:ge.values.highlights3,onChange:ge.handleChange,error:ke("highlights3"),onBlur:Ie})}),(0,I.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,I.jsx)(s.A,{placeholder:a("Enter"),type:"text",id:"highlights4",name:"highlights4",label:a("Highlights 4"),value:ge.values.highlights4,onChange:ge.handleChange,error:ke("highlights4"),onBlur:Ie})})]})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary last:border-none",children:[(0,I.jsx)("h6",{className:"mb-3 md:mb-5",children:a("Add Tag")}),(0,I.jsx)("div",{className:"flex flex-wrap gap-3 md:gap-5",children:(0,I.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,I.jsx)(S.A,{placeholder:a("Select Tag"),name:"category",onChange:ge.handleChange,value:ge.values.category,options:T,id:"category",error:ke("category"),required:!1,label:a(""),className:"-mt-2"})})})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary last:border-none",children:[(0,I.jsx)("h6",{className:"mb-3 md:mb-5",children:a("Prerequisite")}),(0,I.jsxs)("div",{className:"mb-3 md:mb-5",children:[(0,I.jsxs)("label",{className:"flex",children:[(0,I.jsx)("input",{className:"mr-2",type:"checkbox",value:ge.values.addPrerequisite?1:0,name:"addPrerequisite",checked:ge.values.addPrerequisite,onChange:e=>ge.handleChange(e)}),(0,I.jsx)("span",{className:"font-normal",children:"Add Prerequisite"})]}),ge.errors.addPrerequisite&&(0,I.jsx)("p",{className:"mt-2 error",children:a(ge.errors.addPrerequisite)})]}),ge.values.addPrerequisite&&(0,I.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,I.jsx)(s.A,{placeholder:a("Add Prerequisite"),type:"text",id:"prerequisite",name:"prerequisite",label:a("Add Prerequisite"),onChange:ge.handleChange,value:ge.values.prerequisite,required:!0,error:ke("prerequisite"),onBlur:Ie})})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary last:border-none",children:[(0,I.jsxs)("h6",{className:"mb-3 md:mb-5",children:[a("Course Image"),(0,I.jsx)("span",{className:"text-error",children:" *"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{children:a("Upload Image")}),(0,I.jsxs)("div",{className:"flex flex-wrap gap-1 lg:gap-5",children:[(0,I.jsxs)("div",{className:"w-full min-h-[176px] flex flex-col lg:w-[calc(50%-10px)] xl:min-w-[480px] xl:w-[calc(33.3%-14px)]",children:[(0,I.jsxs)("label",{htmlFor:"Course Image",className:"relative flex items-center justify-center h-full overflow-hidden bg-white border border-solid cursor-pointer rounded-xl border-border-primary hover:bg-gray-100",children:[(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full rounded-xl",children:[!ge.values.courseImageUploadFileName&&(0,I.jsx)("span",{className:"text-xl-50",children:(0,I.jsx)(o.tu,{className:"mb-2 fill-secondary"})}),ge.values.courseImageUploadFileName&&(0,I.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(ge.values.courseImageUploadFileName),alt:"Course",className:"object-fill w-full h-full"}),!ge.values.courseImageUploadFileName&&(0,I.jsx)("p",{className:"text-xl text-light-grey",children:a("Upload Image")})]}),ge.values.courseImageUploadFileName&&(0,I.jsx)(d.A,{className:"absolute p-[6px] rounded-full cursor-pointer top-4 right-4 md:top-5 md:right-5 bg-error",type:"button",label:"",onClick:()=>Ce({courseImagePlanYourCourse:!0,bannerImagePlanYourCourse:!1}),children:(0,I.jsx)(o.YY,{className:"fill-white",fontSize:"12"})}),(0,I.jsx)("input",{id:"Course Image",type:"file",accept:".png, .jpeg",ref:ne,onChange:ye,className:"hidden"},(0,$.A)())]}),Se("courseImageUploadFileName")]}),(0,I.jsx)("p",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:a("Upload your course image here. It must meet our course image quality standards to be accepted. Important guidelines: 750x422 pixels; .jpg, .jpeg, or .png. no text on the image Max size is 5MB.")})]})]})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary last:border-none",children:[(0,I.jsxs)("h6",{className:"mb-3 md:mb-5",children:[a("Banner Image"),(0,I.jsx)("span",{className:"text-error",children:" *"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{children:a("Upload Image")}),(0,I.jsxs)("div",{className:"flex flex-wrap gap-1 lg:gap-5",children:[(0,I.jsxs)("div",{className:"w-full min-h-[176px] flex flex-col lg:w-[calc(50%-10px)] xl:min-w-[480px] xl:w-[calc(33.3%-14px)]",children:[(0,I.jsxs)("label",{htmlFor:"Banner Image",className:"relative flex items-center justify-center h-full overflow-hidden bg-white border border-solid cursor-pointer rounded-xl border-border-primary hover:bg-gray-100",children:[(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full rounded-xl",children:[!ge.values.bannerImageUploadFileName&&(0,I.jsx)("span",{className:"text-xl-50",children:(0,I.jsx)(o.tu,{className:"mb-2 fill-secondary"})}),ge.values.bannerImageUploadFileName&&(0,I.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(ge.values.bannerImageUploadFileName),alt:"Course",className:"object-fill w-full h-full"}),!ge.values.bannerImageUploadFileName&&(0,I.jsx)("p",{className:"text-xl text-light-grey",children:a("Upload Image")})]}),ge.values.bannerImageUploadFileName&&(0,I.jsx)(d.A,{className:"absolute p-[6px] rounded-full cursor-pointer top-4 right-4 md:top-5 md:right-5 bg-error",type:"button",label:"",onClick:()=>Ce({courseImagePlanYourCourse:!1,bannerImagePlanYourCourse:!0}),children:(0,I.jsx)(o.YY,{className:"fill-white",fontSize:"12"})}),(0,I.jsx)("input",{id:"bannerImage",type:"file",accept:".png, .jpeg",ref:ne,onChange:Ne},(0,$.A)())]}),Se("bannerImageUploadFileName")]}),(0,I.jsx)("p",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:a("Upload your banner image here. It must meet our banner image quality standards to be accepted. Important guidelines: 750x422 pixels; .jpg, .jpeg, or .png. no text on the image Max size is 5MB.")})]})]})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary last:border-none",children:[(0,I.jsxs)("h6",{className:"mb-3 md:mb-5",children:[a("Instructor Profile"),(0,I.jsx)("span",{className:"text-red-500",children:" *"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{children:a("Upload Image")}),(0,I.jsxs)("div",{className:"flex flex-wrap gap-2 lg:gap-5",children:[(0,I.jsxs)("div",{className:"w-full flex flex-col h-[176px] lg:w-[calc(50%-10px)] xl:min-w-[480px] xl:w-[calc(33.3%-14px)]",children:[(0,I.jsxs)("label",{htmlFor:"Instructor Profile Image",className:"relative flex items-center justify-center h-full p-5 overflow-hidden bg-white border border-solid cursor-pointer rounded-xl border-border-primary hover:bg-gray-100",children:[(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center h-full overflow-hidden rounded-xl",children:[!ge.values.instructorImageUploadFileName&&(0,I.jsx)("span",{className:"text-xl-50",children:(0,I.jsx)(o.tu,{className:"mb-2 fill-secondary"})}),ge.values.instructorImageUploadFileName&&(0,I.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(ge.values.instructorImageUploadFileName),alt:"Instructor Profile",className:"object-fill w-full h-full"}),!ge.values.instructorImageUploadFileName&&(0,I.jsx)("p",{className:"text-xl text-light-grey",children:a("Upload Image")})]}),ge.values.instructorImageUploadFileName&&(0,I.jsx)(d.A,{className:"absolute p-[6px] rounded-full cursor-pointer top-4 right-4 md:top-5 md:right-5 bg-error",type:"button",label:"",onClick:()=>Ce({courseImagePlanYourCourse:!1,bannerImagePlanYourCourse:!1}),children:(0,I.jsx)(o.YY,{className:"fill-white",fontSize:"12"})}),(0,I.jsx)("input",{id:"InstructorProfileImage",type:"file",accept:".png, .jpeg",ref:ne,onChange:je},(0,$.A)())]}),Se("instructorImageUploadFileName")]}),(0,I.jsxs)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:[(0,I.jsx)("div",{className:"w-full mb-3 md:mb-5",children:(0,I.jsx)(s.A,{placeholder:a("Add Name here"),type:"text",id:"instructorName",name:"instructorName",label:a("Instructor Name"),onChange:ge.handleChange,value:ge.values.instructorName,required:!0,error:ke("instructorName"),onBlur:Ie})}),(0,I.jsx)("div",{className:"w-full",children:(0,I.jsx)(s.A,{placeholder:a("Add Qualification here"),type:"text",id:"qualification",name:"qualification",label:a("Qualification"),onChange:ge.handleChange,value:ge.values.qualification,error:ke("qualification"),onBlur:Ie})})]})]})]})]})]}),(0,I.jsx)(V.l,{className:"custom-dialog",header:"Crop Image",visible:J,style:{width:"50vw",borderRadius:"12px"},onHide:()=>W(!1),footer:()=>Ae(),children:H&&(0,I.jsx)(P.A,{ref:le,style:{height:400,width:"100%"},zoomTo:.5,aspectRatio:G?1.8:X?3.67:1,preview:".img-preview",src:H,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0,cropBoxResizable:!1})}),(0,I.jsxs)("div",{className:"flex flex-wrap justify-between gap-2 mt-5 md:gap-7.5",children:[(0,I.jsxs)("div",{className:"flex flex-col sm:flex-row w-full md:w-auto gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:w-[180px] whitespace-nowrap",type:"button",label:a("View as a Learner"),title:"View as a Learner",onClick:async()=>{try{await q.validate({courseTitle:ge.values.courseTitle}),we(ge.values,!0,!0)}catch(e){b.oR.error(ge.errors.courseTitle)}}}),(!se||de)&&(0,I.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:a("Save as Draft"),title:"Save as Draft",onClick:async()=>{try{await q.validate({courseTitle:ge.values.courseTitle}),we(ge.values,!0)}catch(e){b.oR.error(ge.errors.courseTitle)}},disabled:me})]}),(0,I.jsx)(d.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",onClick:ge.handleSubmit,label:a("Save & Next"),title:"Next",disabled:me})]})]})})};var W=a(18232),H=a(79217),Z=a(81410),G=a(91188);const K=()=>{var e,l,a,v,p,N,j,C,_,A,F,k,S,q;const{t:U}=(0,t.Bd)(),L=(0,r.wA)(),E=(0,w.Zp)(),{PublishCourseSchema:R}=(0,c.A)(),[B]=(0,y.ok)(),T=B.get("uuid"),Q=B.get("isViewAsLearner"),[z,Y]=(0,i.useState)(!1),[O,M]=(0,i.useState)(!1),{data:J,refetch:K,loading:X}=(0,x.I)(f.zq,{variables:{limit:500,page:1,sortField:"createdAt",sortOrder:"descend",search:""},fetchPolicy:"network-only"}),[ee,le]=(0,h.n)(g.uk),{planYourCourseDetails:ae,course_id:ie,stepFourData:te,is_published:se,is_draft:oe}=(0,r.d4)((e=>e.coursesManagement)),{loading:de,refetch:re}=(0,x.I)(f.Wb,{skip:!0,fetchPolicy:"no-cache"}),{userProfileData:ne}=(0,r.d4)((e=>e.userProfile)),ue=null===ne||void 0===ne||null===(e=ne.getProfile)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.user_type,[ce,ve]=(0,i.useState)([]),[me,pe]=(0,i.useState)(!1),[he,xe]=(0,i.useState)(""),[ge,be]=(0,i.useState)(!1),fe=(0,i.createRef)(),[we,ye]=(0,i.useState)({}),[Ne,je]=(0,i.useState)(!1),[Ce,_e]=(0,i.useState)(!1),[Ie,Ae]=(0,i.useState)(!1),[Fe,ke]=(0,i.useState)(!1),[Se,qe]=(0,i.useState)(!1),Ue={selectedPlayList:[],playlistName:"",minutes:0,hours:0,assessmentCertification:!1,availability:m.Qw.AVAILABLE_FOR_ALL,is_editable:m.Qw.RESTRICTED},De=(0,u.Wx)({initialValues:Ue,validationSchema:R,onSubmit:e=>{60*(null===e||void 0===e?void 0:e.hours)+Number(e.minutes)?(e=>{if(we.instructorImageUploadFileName&&we.courseImageUploadFileName&&we.bannerImageUploadFileName){var l,a;const i={course_id:"true"===Q?T:ie,estimate_time:60*(null===e||void 0===e?void 0:e.hours)+Number(e.minutes),course_image:we.courseImageUploadFileName,banner_image:we.bannerImageUploadFileName,is_certification:null===e||void 0===e?void 0:e.assessmentCertification,availability:+(null===e||void 0===e?void 0:e.is_editable)===(null===m.Qw||void 0===m.Qw?void 0:m.Qw.AVAILABLE_FOR_ALL)?1:+(null===e||void 0===e?void 0:e.availability),playlist_ids:null!==(l=null===e||void 0===e||null===(a=e.selectedPlayList)||void 0===a?void 0:a.map((e=>null===e||void 0===e?void 0:e.code)))&&void 0!==l?l:[],is_editable:+(null===e||void 0===e?void 0:e.is_editable)===(null===m.Qw||void 0===m.Qw?void 0:m.Qw.AVAILABLE_FOR_ALL),is_draft:!1};ee({variables:{courseData:i}}).then((e=>{const l=e.data.courseCreateStepFour;b.oR.success(null===l||void 0===l?void 0:l.message),Y(!1),M(!0)})).catch((e=>{var l,a,i,t;b.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(i=a.errors)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.message)}))}L((0,n.j_)({is_certification:e.assessmentCertification,estimate_time:60*(null===e||void 0===e?void 0:e.hours)+Number(e.minutes),availability:null===e||void 0===e?void 0:e.availability,playlist_ids:null===e||void 0===e?void 0:e.selectedPlayList,is_editable:+(null===e||void 0===e?void 0:e.is_editable)===(null===m.Qw||void 0===m.Qw?void 0:m.Qw.AVAILABLE_FOR_ALL)})),we.courseImageUploadFileName||we.instructorImageUploadFileName||we.bannerImageUploadFileName?we.bannerImageUploadFileName?we.courseImageUploadFileName?we.instructorImageUploadFileName||Ae(!0):je(!0):_e(!0):(je(!0),Ae(!0),_e(!0))})(e):b.oR.error("Hours and minutes cannot be empty or zero.")}});(0,i.useEffect)((()=>{if(te){const e=(0,m.bZ)(null===te||void 0===te?void 0:te.estimate_time);De.setFieldValue("selectedPlayList",null===te||void 0===te?void 0:te.playlist_ids),De.setFieldValue("availability",null===te||void 0===te?void 0:te.availability),De.setFieldValue("is_editable",null!==te&&void 0!==te&&te.is_editable&&ue===(null===m.ve||void 0===m.ve?void 0:m.ve.SUPER_ADMIN)?1:2),De.setFieldValue("assessmentCertification",null===te||void 0===te?void 0:te.is_certification),De.setFieldValue("minutes",null===e||void 0===e?void 0:e.minutes),De.setFieldValue("hours",null===e||void 0===e?void 0:e.hours)}}),[te]),(0,i.useEffect)((()=>{var e,l,a;const i=[];null===J||void 0===J||null===(e=J.getPlayLists)||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.playlists)||void 0===a||a.map((e=>{i.push({name:null===e||void 0===e?void 0:e.name,code:null===e||void 0===e?void 0:e.uuid})})),ve(i)}),[J]),(0,i.useEffect)((()=>{""===ie&&re({courseId:T}).then((e=>{var l,a,i,t,s,o,d,r,n,u,c,v,p,h,x,g,b,f,w,y,N,j,C;const _=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.getCourseDetailsById)||void 0===a?void 0:a.data;ye({selectCourse:null===_||void 0===_?void 0:_.uuid,highlights1_id:null===_||void 0===_||null===(i=_.highlights)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.uuid,highlights2_id:null===_||void 0===_||null===(s=_.highlights)||void 0===s||null===(o=s[1])||void 0===o?void 0:o.uuid,highlights3_id:null===_||void 0===_||null===(d=_.highlights)||void 0===d||null===(r=d[2])||void 0===r?void 0:r.uuid,highlights4_id:null===_||void 0===_||null===(n=_.highlights)||void 0===n||null===(u=n[3])||void 0===u?void 0:u.uuid,highlights1:null===_||void 0===_||null===(c=_.highlights)||void 0===c||null===(v=c[0])||void 0===v?void 0:v.name,highlights2:null===_||void 0===_||null===(p=_.highlights)||void 0===p||null===(h=p[1])||void 0===h?void 0:h.name,highlights3:null===_||void 0===_||null===(x=_.highlights)||void 0===x||null===(g=x[2])||void 0===g?void 0:g.name,highlights4:null===_||void 0===_||null===(b=_.highlights)||void 0===b||null===(f=b[3])||void 0===f?void 0:f.name,courseTitle:null===_||void 0===_?void 0:_.title,prerequisite:null===_||void 0===_?void 0:_.prerequisite,qualification:null===_||void 0===_?void 0:_.instructor_qualification,instructorName:null===_||void 0===_?void 0:_.instructor_name,category:null===_||void 0===_||null===(w=_.category)||void 0===w?void 0:w.uuid,assessmentCertification:null===_||void 0===_?void 0:_.is_certification,addPrerequisite:!(null===_||void 0===_||!_.prerequisite),courseImageUploadFileName:null===_||void 0===_?void 0:_.course_image,instructorImageUploadFileName:null===_||void 0===_?void 0:_.instructor_profile,categoryName:null===_||void 0===_||null===(y=_.category)||void 0===y?void 0:y.name,courseDescription:null===_||void 0===_?void 0:_.description,bannerImageUploadFileName:null===_||void 0===_?void 0:_.banner_image,templateId:null===_||void 0===_?void 0:_.template_uuid}),null!==_&&void 0!==_&&_.template_uuid&&0===+(null===_||void 0===_?void 0:_.estimate_time)&&re({courseId:null===_||void 0===_?void 0:_.template_uuid}).then((e=>{var l,a,i,t,s;const o=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.getCourseDetailsById)||void 0===a?void 0:a.data;De.setValues({selectedPlayList:null===o||void 0===o||null===(i=o.playlists)||void 0===i?void 0:i.map((e=>({name:null===e||void 0===e?void 0:e.name,code:null===e||void 0===e?void 0:e.uuid}))),playlistName:"",minutes:null===(t=(0,m.bZ)(null===o||void 0===o?void 0:o.estimate_time))||void 0===t?void 0:t.minutes,hours:null===(s=(0,m.bZ)(null===o||void 0===o?void 0:o.estimate_time))||void 0===s?void 0:s.hours,assessmentCertification:null===o||void 0===o?void 0:o.is_certification,availability:null===o||void 0===o?void 0:o.availability,is_editable:null!==o&&void 0!==o&&o.is_editable?null===m.Qw||void 0===m.Qw?void 0:m.Qw.AVAILABLE_FOR_ALL:null===m.Qw||void 0===m.Qw?void 0:m.Qw.RESTRICTED})})),De.setValues({selectedPlayList:null===_||void 0===_||null===(N=_.playlists)||void 0===N?void 0:N.map((e=>({name:null===e||void 0===e?void 0:e.name,code:null===e||void 0===e?void 0:e.uuid}))),playlistName:"",minutes:null===(j=(0,m.bZ)(null===_||void 0===_?void 0:_.estimate_time))||void 0===j?void 0:j.minutes,hours:null===(C=(0,m.bZ)(null===_||void 0===_?void 0:_.estimate_time))||void 0===C?void 0:C.hours,assessmentCertification:null===_||void 0===_?void 0:_.is_certification,availability:null===_||void 0===_?void 0:_.availability,is_editable:null!==_&&void 0!==_&&_.is_editable?null===m.Qw||void 0===m.Qw?void 0:m.Qw.AVAILABLE_FOR_ALL:null===m.Qw||void 0===m.Qw?void 0:m.Qw.RESTRICTED})}))}),[ie]),(0,i.useEffect)((()=>{ae&&ye(ae)}),[ae]);const Ve=(0,i.useCallback)((e=>{let l;if(e.preventDefault(),Ae(!1),be(!1),ke(!1),e.target&&(l=e.target.files),l&&l.length>0){const e=l[0];if(e.type.startsWith("image/"))if(e.size>m.w3)b.oR.error("Image size must be less than 5MB");else{const l=new FileReader;l.onload=()=>{xe(l.result),pe(!0)},l.readAsDataURL(e)}else b.oR.error("Please select a valid image file")}}),[]),Pe=(0,i.useCallback)((e=>{let l;if(e.preventDefault(),je(!1),be(!0),ke(!1),e.target&&(l=e.target.files),l&&l.length>0){const e=l[0];if(e.type.startsWith("image/"))if(e.size>m.w3)b.oR.error("Image size must be less than 5MB");else{const l=new FileReader;l.onload=()=>{xe(l.result),pe(!0)},l.readAsDataURL(e)}else b.oR.error("Please select a valid image file")}}),[]),Le=(0,i.useCallback)((e=>{let l;if(e.preventDefault(),_e(!1),be(!1),ke(!0),e.target&&(l=e.target.files),l&&l.length>0){const e=l[0];if(e.type.startsWith("image/"))if(e.size>m.w3)b.oR.error("Image size must be less than 5MB");else{const l=new FileReader;l.onload=()=>{xe(l.result),pe(!0)},l.readAsDataURL(e)}else b.oR.error("Please select a valid image file")}}),[]),Ee=()=>(0,I.jsxs)("div",{className:"flex justify-end gap-5",children:[(0,I.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Cancel",onClick:()=>pe(!1)}),(0,I.jsx)(d.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Save",disabled:Se,onClick:()=>(async()=>{var e;const l=null===(e=fe.current)||void 0===e?void 0:e.cropper;if(!l)return;qe(!0);let a,i=null;a=ge?(0,m.Si)(l.getCroppedCanvas().toDataURL(),"courseImagePreview.png"):Fe?(0,m.Si)(l.getCroppedCanvas().toDataURL(),"BannerImagePreview.png"):(0,m.Si)(l.getCroppedCanvas().toDataURL(),"instructorProfilePreview.png");const t=new FormData;t.append("image",a);let s=Fe?"bannerImage":"courseImage";ge||Fe||(s="instructorProfile"),i=await(0,m.V6)(t,s),i&&(!ge&&Fe?(ye({...we,bannerImageUploadFileName:i}),(0,n.u6)({...ae,bannerImageUploadFileName:i})):ge&&!Fe?(ye({...we,courseImageUploadFileName:i}),(0,n.u6)({...ae,bannerImageUploadFileName:i})):(ye({...we,instructorImageUploadFileName:i}),(0,n.u6)({...ae,instructorImageUploadFileName:i}))),pe(!1),qe(!1)})()})]}),Re=(0,i.useCallback)((()=>{0!==Object.keys(we).length&&(L((0,n.u6)(we)),L((0,n.Y9)()))}),[we]),Be=(0,i.useCallback)((()=>{L((0,n.w9)())}),[]),Te=(0,i.useCallback)((()=>{var e,l,a,i;L((0,n.j_)({is_certification:De.values.assessmentCertification,estimate_time:60*(null===(e=De.values)||void 0===e?void 0:e.hours)+Number(De.values.minutes),availability:null===(l=De.values)||void 0===l?void 0:l.availability,playlist_ids:null===(a=De.values)||void 0===a?void 0:a.selectedPlayList,is_editable:+(null===(i=De.values)||void 0===i?void 0:i.is_editable)===(null===m.Qw||void 0===m.Qw?void 0:m.Qw.AVAILABLE_FOR_ALL)})),L((0,n.sU)(1))}),[De]),Qe=(0,i.useCallback)((async e=>{const{courseImagePublishYourCourse:l,bannerImagePublishYourCourse:a}=e;if(l&&!a){const e={fileName:null===we||void 0===we?void 0:we.courseImageUploadFileName};D.A.delete("".concat(m.hV,"/remove"),{data:e}).then((()=>{ye({...we,courseImageUploadFileName:""})})).catch((e=>{var l,a;b.oR.error(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)}))}else if(!l&&a){const e={fileName:null===we||void 0===we?void 0:we.bannerImageUploadFileName};D.A.delete("".concat(m.hV,"/remove"),{data:e}).then((()=>{ye({...we,bannerImageUploadFileName:""})})).catch((e=>{var l,a;b.oR.error(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)}))}else{const e={fileName:null===we||void 0===we?void 0:we.instructorImageUploadFileName};D.A.delete("".concat(m.hV,"/remove"),{data:e}).then((()=>{ye({...we,instructorImageUploadFileName:""})})).catch((e=>{var l,a;b.oR.error(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)}))}}),[we]),ze=(e,l,a)=>e?l:a,Ye=async e=>{try{var l;return await R.validate({hours:null===De||void 0===De||null===(l=De.values)||void 0===l?void 0:l[e]}),!1}catch(t){var a,i;const l=null!==(a=null===De||void 0===De||null===(i=De.errors)||void 0===i?void 0:i[e])&&void 0!==a?a:"";if(""!==l)return b.oR.error(l),!0}},$e=(0,i.useCallback)((async e=>{var l,a,i,t;const s=await Ye("hours"),o=await Ye("minutes");if(we.instructorImageUploadFileName&&we.courseImageUploadFileName&&we.bannerImageUploadFileName&&!o&&!s){var d,r,u,c,v,p,h;const l={course_id:ze("true"===Q,T,ie),estimate_time:60*(null===De||void 0===De||null===(d=De.values)||void 0===d?void 0:d.hours)+Number(De.values.minutes),course_image:we.courseImageUploadFileName,banner_image:we.bannerImageUploadFileName,is_certification:null===De||void 0===De||null===(r=De.values)||void 0===r?void 0:r.assessmentCertification,availability:+(null===De||void 0===De||null===(u=De.values)||void 0===u?void 0:u.availability),playlist_ids:null!==(c=null===De||void 0===De||null===(v=De.values)||void 0===v||null===(p=v.selectedPlayList)||void 0===p?void 0:p.map((e=>null===e||void 0===e?void 0:e.code)))&&void 0!==c?c:[],is_editable:ze(+(null===De||void 0===De||null===(h=De.values)||void 0===h?void 0:h.is_editable)===(null===m.Qw||void 0===m.Qw?void 0:m.Qw.AVAILABLE_FOR_ALL),!0,!1),is_draft:!0};ee({variables:{courseData:l}}).then((()=>{Y(!1),e?E("/".concat(m.bw.app,"/").concat(m.bw.tfsCoursesTemplates,"/").concat(m.bw.courseDetails,"/?uuid=").concat(ze("true"===Q,T,ie),"&isViewAsLearner=true&step=3")):b.oR.success("Draft has been saved succefully.")})).catch((e=>{var l,a,i,t;b.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(i=a.errors)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.message)}))}L((0,n.j_)({is_certification:De.values.assessmentCertification,estimate_time:60*(null===(l=De.values)||void 0===l?void 0:l.hours)+Number(De.values.minutes),availability:null===(a=De.values)||void 0===a?void 0:a.availability,playlist_ids:null===(i=De.values)||void 0===i?void 0:i.selectedPlayList,is_editable:ze(+(null===(t=De.values)||void 0===t?void 0:t.is_editable)===(null===m.Qw||void 0===m.Qw?void 0:m.Qw.AVAILABLE_FOR_ALL),!0,!1)})),we.courseImageUploadFileName||we.instructorImageUploadFileName||we.bannerImageUploadFileName?we.bannerImageUploadFileName?we.courseImageUploadFileName?we.instructorImageUploadFileName||Ae(!0):je(!0):_e(!0):(je(!0),Ae(!0),_e(!0))}),[T,we,De]),Oe=(0,i.useCallback)((()=>{De.resetForm(),L((0,n.u6)([])),L((0,n.rk)([])),L((0,n.MP)([])),L((0,n.bD)({chapters:[]})),L((0,n.Y9)()),E("/".concat(m.bw.app,"/").concat(m.bw.allCourses))}),[]),Me=(0,i.useCallback)((()=>{De.resetForm(),window.location.href="/".concat(m.bw.app,"/").concat(m.bw.educationAndEngagement)}),[]),Je=(0,i.useCallback)(((e,l)=>{Y(e),null!==l&&void 0!==l&&l.refetch&&K()}),[]),We=e=>{var l,a,i;return null!==De&&void 0!==De&&null!==(l=De.errors)&&void 0!==l&&l[e]&&null!==De&&void 0!==De&&null!==(a=De.touched)&&void 0!==a&&a[e]?null===De||void 0===De||null===(i=De.errors)||void 0===i?void 0:i[e]:""};return(0,I.jsxs)(I.Fragment,{children:[((null===le||void 0===le?void 0:le.loading)||X||de)&&(0,I.jsx)(Z.A,{}),(0,I.jsxs)("form",{onSubmit:De.handleSubmit,children:[(0,I.jsxs)("div",{className:"border border-solid border-border-primary rounded-xl ".concat((null===le||void 0===le?void 0:le.loading)&&"pointer-events-none"),children:[(0,I.jsxs)("div",{className:"p-3 pb-5 border-b border-solid md:p-5 md:pb-7 border-border-primary",children:[(0,I.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4 md:gap-5",children:[(0,I.jsx)("h6",{className:"break-all",children:U("Review the Course")}),(0,I.jsx)("div",{children:(0,I.jsx)(d.A,{onClick:Re,label:U(""),type:"button",children:(0,I.jsx)(o.ff,{className:"cursor-pointer fill-primary"})})})]}),(0,I.jsx)("div",{className:"flex flex-wrap justify-between gap-4 mb-4",children:(0,I.jsxs)("p",{className:"w-full lg:w-[calc(50%-10px)] break-all",children:[U("Course Title"),": ",(0,I.jsx)("span",{className:"font-bold break-all",children:null===we||void 0===we?void 0:we.courseTitle})]})}),(0,I.jsxs)("div",{className:"mb-4",children:[(0,I.jsxs)("p",{className:"mb-1",children:[U("Course Description"),":"]}),(0,I.jsx)("p",{className:"font-bold break-all",dangerouslySetInnerHTML:{__html:null===we||void 0===we?void 0:we.courseDescription}})]}),(0,I.jsx)("div",{className:"flex flex-wrap justify-between gap-4",children:(0,I.jsxs)("p",{className:"w-full lg:w-[calc(50%-10px)]",children:[U("Category"),": ",(0,I.jsx)("span",{className:"font-bold",children:we.categoryName})]})})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary",children:[(0,I.jsx)("h6",{className:"mb-3 md:mb-5",children:U("Add estimated time to complete the course")}),(0,I.jsxs)("div",{className:"flex gap-3 md:gap-5",children:[(0,I.jsx)("div",{className:"w-full max-w-[220px] form-group",children:(0,I.jsx)(s.A,{placeholder:U("Enter Hours"),type:"text",id:"hours",name:"hours",label:"Hours",value:null===De||void 0===De||null===(a=De.values)||void 0===a?void 0:a.hours,onChange:De.handleChange,className:"-mt-2",error:We("hours")})}),(0,I.jsx)("div",{className:"w-full max-w-[220px] form-group",children:(0,I.jsx)(s.A,{placeholder:U("Enter Minutes"),type:"text",id:"minutes",name:"minutes",label:"Minutes",value:null===De||void 0===De||null===(v=De.values)||void 0===v?void 0:v.minutes,onChange:De.handleChange,className:"-mt-2",error:We("minutes")})})]})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary last:border-none",children:[(0,I.jsx)("h6",{className:"mb-3 md:mb-5",children:U("Assessment and Certification")}),(0,I.jsxs)("label",{className:"flex",children:[(0,I.jsx)("input",{className:"mr-2 min-w-[18px] cursor-pointer disabled:cursor-not-allowed",type:"checkbox",name:"assessmentCertification",onChange:e=>De.setFieldValue("assessmentCertification",e.target.checked),checked:null===De||void 0===De||null===(p=De.values)||void 0===p?void 0:p.assessmentCertification,disabled:se&&!oe}),(0,I.jsx)("span",{className:"font-normal break-all",children:U("Upon successful completion of the course requirements, participants will receive a certificate of completion.")})]})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary",children:[(0,I.jsx)("h6",{className:"mb-3 md:mb-5",children:U("Course Image")}),(0,I.jsxs)("div",{className:"flex flex-wrap gap-1 lg:gap-5",children:[(0,I.jsxs)("div",{className:"flex flex-col w-full lg:w-[calc(50%-10px)] xl:min-w-[480px] xl:w-[calc(33.3%-14px)]",children:[(0,I.jsxs)("label",{htmlFor:"Course Image",className:"relative flex items-center justify-center bg-white overflow-hidden border border-solid cursor-pointer rounded-xl border-border-primary hover:bg-gray-100 w-full min-h-[176px] xl:h-[270px]",children:[(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[!we.courseImageUploadFileName&&(0,I.jsx)("span",{className:"text-xl-50",children:(0,I.jsx)(o.tu,{className:"mb-2 fill-secondary"})}),we.courseImageUploadFileName&&(0,I.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(we.courseImageUploadFileName),alt:"Course",className:"object-fill w-full h-full"}),!we.courseImageUploadFileName&&(0,I.jsx)("p",{className:"text-xl text-light-grey",children:U("Upload Image")})]}),we.courseImageUploadFileName&&(0,I.jsx)(d.A,{className:"absolute p-[6px] rounded-full cursor-pointer top-4 right-4 md:top-5 md:right-5 bg-error",type:"button",label:"",onClick:()=>Qe({courseImagePublishYourCourse:!0,bannerImagePublishYourCourse:!1}),children:(0,I.jsx)(o.YY,{className:"fill-white",fontSize:"12"})}),(0,I.jsx)("input",{id:"Course Image",type:"file",accept:".png, .jpeg",onChange:Pe,className:"hidden"},(0,$.A)())]}),Ne&&(0,I.jsx)("span",{className:"-mt-1 md:text-xs-15 error",children:"Please upload course image"})]}),(0,I.jsx)("p",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:U("Upload your course image here. It must meet our course image quality standards to be accepted. Important guidelines: 750x422 pixels; .jpg, .jpeg,. gif, or .png. no text on the image.")})]})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary",children:[(0,I.jsx)("h6",{className:"mb-3 md:mb-5",children:U("Banner Image")}),(0,I.jsxs)("div",{className:"flex flex-wrap gap-1 lg:gap-5",children:[(0,I.jsxs)("div",{className:"flex flex-col w-full lg:w-[calc(50%-10px)] xl:min-w-[480px] xl:w-[calc(33.3%-14px)]",children:[(0,I.jsxs)("label",{htmlFor:"Banner Image",className:"relative flex items-center justify-center bg-white overflow-hidden border border-solid cursor-pointer rounded-xl border-border-primary hover:bg-gray-100 w-full min-h-[176px] xl:h-[270px]",children:[(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[!we.bannerImageUploadFileName&&(0,I.jsx)("span",{className:"text-xl-50",children:(0,I.jsx)(o.tu,{className:"mb-2 fill-secondary"})}),we.bannerImageUploadFileName&&(0,I.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(we.bannerImageUploadFileName),alt:"Course",className:"object-fill w-full h-full"}),!we.bannerImageUploadFileName&&(0,I.jsx)("p",{className:"text-xl text-light-grey",children:U("Upload Image")})]}),we.bannerImageUploadFileName&&(0,I.jsx)(d.A,{className:"absolute p-[6px] rounded-full cursor-pointer top-4 right-4 md:top-5 md:right-5 bg-error",type:"button",label:"",onClick:()=>Qe({courseImagePublishYourCourse:!1,bannerImagePublishYourCourse:!0}),children:(0,I.jsx)(o.YY,{className:"fill-white",fontSize:"12"})}),(0,I.jsx)("input",{id:"Banner Image",type:"file",accept:".png, .jpeg",onChange:Le,className:"hidden"},(0,$.A)())]}),Ce&&(0,I.jsx)("span",{className:"-mt-1 md:text-xs-15 error",children:"Please upload Banner image"})]}),(0,I.jsx)("p",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:U("Upload your banner image here. It must meet our banner image quality standards to be accepted. Important guidelines: 750x422 pixels; .jpg, .jpeg,. gif, or .png. no text on the image.")})]})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary",children:[(0,I.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4 md:gap-5",children:[(0,I.jsx)("h6",{children:U("Instructor Profile")}),(0,I.jsx)("div",{children:(0,I.jsx)(d.A,{onClick:Re,label:U(""),type:"button",children:(0,I.jsx)(o.ff,{className:"cursor-pointer fill-primary"})})})]}),(0,I.jsxs)("div",{className:"flex flex-wrap gap-3 lg:gap-5",children:[(0,I.jsxs)("div",{className:"w-full min-h-[176px] lg:w-[calc(50%-10px)] flex flex-col xl:min-w-[480px] xl:w-[calc(33.3%-14px)] max-h-[176px]",children:[(0,I.jsxs)("label",{htmlFor:"Instructor Profile Image",className:"relative flex items-center justify-center h-full p-5 overflow-hidden bg-white border border-solid cursor-pointer rounded-xl border-border-primary hover:bg-gray-100",children:[(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center h-full overflow-hidden rounded-xl",children:[!we.instructorImageUploadFileName&&(0,I.jsx)("span",{className:"text-xl-50",children:(0,I.jsx)(o.tu,{className:"mb-2 fill-secondary"})}),we.instructorImageUploadFileName&&(0,I.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(we.instructorImageUploadFileName),alt:"Instructor Profile",className:"object-fill w-full"}),!we.instructorImageUploadFileName&&(0,I.jsx)("p",{className:"text-xl text-light-grey",children:U("Upload Image")})]}),we.instructorImageUploadFileName&&(0,I.jsx)(d.A,{className:"absolute p-[6px] rounded-full cursor-pointer top-4 right-4 md:top-5 md:right-5 bg-error",type:"button",label:"",onClick:()=>Qe({courseImagePublishYourCourse:!1,bannerImagePublishYourCourse:!1}),disabled:!0,children:(0,I.jsx)(o.YY,{className:"fill-white",fontSize:"12"})}),(0,I.jsx)("input",{id:"Instructor Profile Image",type:"file",accept:".png, .jpeg",onChange:Ve,className:"hidden",disabled:!0},(0,$.A)())]}),Ie&&(0,I.jsx)("span",{className:"-mt-1 md:text-xs-15 error",children:"Please upload instructor profile"})]}),(0,I.jsxs)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:[(0,I.jsxs)("p",{className:"mb-4 last:mb-0",children:[U("Instructor Name"),": ",(0,I.jsx)("span",{className:"font-bold",children:we.instructorName})]}),(0,I.jsxs)("p",{className:"mb-4 last:mb-0",children:[U("Qualification"),": ",(0,I.jsx)("span",{className:"font-bold",children:we.qualification})]})]})]})]}),(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary",children:[(0,I.jsxs)("div",{className:"flex flex-wrap items-center justify-between mb-3 gap-x-5 gap-y-3 md:mb-1",children:[(0,I.jsx)("h6",{children:U("Add to Playlist")}),(0,I.jsx)(d.A,{className:"btn btn-normal bg-primary text-white text-xs w-full md:w-[100px] h-[36px]",label:U("Add New"),onClick:()=>{Y(!0),M(!1)}})]}),(0,I.jsx)("p",{className:"mb-4 font-semibold",children:"Select from Existing"}),(0,I.jsx)("div",{className:"max-h-[206px] overflow-auto pb-3",children:(0,I.jsx)(W.q,{multiple:!0,value:De.values.selectedPlayList,onChange:e=>{De.setFieldValue("selectedPlayList",e.value)},options:ce,optionLabel:"name",className:"w-full md:w-14rem"})})]}),(null===ne||void 0===ne||null===(N=ne.getProfile)||void 0===N||null===(j=N.data)||void 0===j?void 0:j.user_type)===m.ve.SUPER_ADMIN&&(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary",children:[(0,I.jsx)("h6",{className:"mb-3 md:mb-5",children:U("Select Course Type")}),(0,I.jsx)("div",{className:"inline-block w-full",children:(0,I.jsx)(G.A,{required:!1,name:"is_editable",radioOptions:[{name:"Editable course",key:1,info:"The course can be used as a template by other course creators.",disabled:se&&!oe},{name:"Non-editable course",key:2,info:"The course cannot be used as a template.",disabled:se&&!oe}],label:U(""),onChange:De.handleChange,checked:null===De||void 0===De||null===(C=De.values)||void 0===C?void 0:C.is_editable})})]}),(+(null===De||void 0===De||null===(_=De.values)||void 0===_?void 0:_.is_editable)===m.Qw.RESTRICTED||(null===ne||void 0===ne||null===(A=ne.getProfile)||void 0===A||null===(F=A.data)||void 0===F?void 0:F.user_type)===(null===m.ve||void 0===m.ve?void 0:m.ve.SUBSCRIBER_ADMIN)||(null===ne||void 0===ne||null===(k=ne.getProfile)||void 0===k||null===(S=k.data)||void 0===S?void 0:S.is_course_creator))&&(0,I.jsxs)("div",{className:"px-3 py-5 border-b border-solid md:px-5 md:py-7 border-border-primary",children:[(0,I.jsx)("h6",{className:"mb-3 md:mb-5",children:U("Course Availability Settings")}),(0,I.jsx)("div",{className:"inline-block w-full",children:(0,I.jsx)(G.A,{required:!1,name:"availability",radioOptions:[{name:"Available for All",key:1,info:"The course will be accessible in all learners' course libraries upon publication.",disabled:se&&!oe},{name:"Restricted",key:2,info:"The course will only be available to course administrators for assignment to learners.",disabled:se&&!oe}],label:U(""),onChange:De.handleChange,checked:null===De||void 0===De||null===(q=De.values)||void 0===q?void 0:q.availability})})]}),(0,I.jsx)("div",{className:"px-3 py-5 md:px-5 md:py-7",children:(0,I.jsx)(d.A,{className:"btn btn-primary btn-normal w-full md:w-auto min-w-[220px]",label:U("Review Curriculum"),onClick:Te})}),(0,I.jsx)(H.A,{playListCallBack:Je,playList:z}),(0,I.jsx)(V.l,{className:"custom-dialog",header:"Crop Image",visible:me,style:{width:"50vw",borderRadius:"12px"},onHide:()=>pe(!1),footer:()=>Ee(),children:he&&(0,I.jsx)(P.I,{ref:fe,style:{height:400,width:"100%"},zoomTo:.5,aspectRatio:ge?1.8:Fe?3.67:1,preview:".img-preview",src:he,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0,cropBoxResizable:!1})}),O&&(0,I.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(O?"":"hidden"),children:(0,I.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(O?"":"opacity-0 transform -translate-y-full scale-150 "," transition-all duration-300 "),children:(0,I.jsx)("div",{className:"w-full mx-5 max-w-[500px]",children:(0,I.jsxs)("div",{className:"relative p-10 overflow-hidden bg-white rounded-xl",children:[(0,I.jsx)(d.A,{onClick:()=>Oe(),className:"absolute right-5 top-5",label:U(""),children:(0,I.jsx)("span",{className:"text-xl-22",children:(0,I.jsx)(o.YY,{className:"text-error"})})}),(0,I.jsxs)("div",{className:"mb-5 -mx-5 text-center bg-white md:mx-0 max-h-[calc(100vh-260px)] overflow-auto",children:[(0,I.jsxs)("div",{className:"mb-1 text-center",children:[(0,I.jsx)("div",{className:"inline-block p-[23px] rounded-full bg-success",children:(0,I.jsx)(o.Jl,{className:"text-white",fontSize:"34"})}),(0,I.jsx)("p",{className:"h1 text-primary",children:"Awesome!"})]}),(0,I.jsx)("p",{className:"text-lg font-bold md:text-xl",children:"Your Course has been published"})]}),(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 -mx-5 md:mx-0 md:gap-7 md:flex-row",children:[(0,I.jsx)(d.A,{className:"btn-primary btn-normal w-full md:w-[130px] whitespace-nowrap",label:U("Open Course"),onClick:()=>Oe(),title:"".concat(U("Open Course"))}),(0,I.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:w-[130px] whitespace-nowrap",label:U("Add New"),onClick:()=>Me(),title:"".concat(U("Add New"))})]})]})})})})]}),(0,I.jsxs)("div",{className:"flex flex-wrap justify-between gap-5 mt-3 md:mt-7.5 md:flex-nowrap md:gap-5",children:[(0,I.jsxs)("div",{className:"flex flex-col sm:flex-row w-full gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"btn-secondary btn-normal w-full md:w-[180px] whitespace-nowrap",type:"button",label:U("View as a Learner"),title:"View as a Learner",disabled:null===le||void 0===le?void 0:le.loading,onClick:()=>$e(!0)}),(!se||oe)&&(0,I.jsx)(d.A,{className:"btn-primary btn-normal w-full md:w-40 whitespace-nowrap",type:"button",label:U("Save as Draft"),disabled:null===le||void 0===le?void 0:le.loading,onClick:()=>$e(),title:"Save as Draft"})]}),(0,I.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end w-full gap-3 md:gap-5",children:[(0,I.jsx)(d.A,{className:"btn bg-default btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap ",type:"button",label:U("Back"),title:"Back",onClick:Be}),(0,I.jsx)(d.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"submit",label:U("Publish"),disabled:null===le||void 0===le?void 0:le.loading,title:"Publish"})]})]})]})]})};var X=a(37352),ee=a(12209);const le=()=>{const{t:e}=(0,t.Bd)(),l=(0,r.wA)(),a=[{title:"".concat(e("Plan Your Course")),icon:(0,I.jsx)(o.my,{}),content:(0,I.jsx)("div",{children:(0,I.jsx)(J,{})})},{title:"".concat(e("Create Your Content")),icon:(0,I.jsx)(o.bZ,{}),content:(0,I.jsx)("div",{children:(0,I.jsx)(Y,{})})},{title:"".concat(e("FAQ")),icon:(0,I.jsx)(o.l5,{}),content:(0,I.jsx)("div",{children:(0,I.jsx)(k,{})})},{title:"".concat(e("Review Your Course")),icon:(0,I.jsx)(o.hO,{}),content:(0,I.jsx)("div",{children:(0,I.jsx)(K,{})})}];return(0,i.useEffect)((()=>()=>{l((0,n.Dt)())}),[]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ee.A,{headerTitle:"Education & Engagement"}),(0,I.jsx)("div",{children:(0,I.jsx)("div",{children:(0,I.jsx)(X.A,{steps:a,createYourContent:!0})})})]})}}}]);
//# sourceMappingURL=9734.29c75e24.chunk.js.map