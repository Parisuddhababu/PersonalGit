"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[959],{62245:(e,l,s)=>{s.d(l,{A:()=>i});var a=s(65043),t=s(70579);const r=e=>{let{label:l,onClick:s,type:r="button",primary:i,secondary:o,warning:n,className:d,children:c,disabled:m=!1,title:u}=e;const x=a.useMemo((()=>i?"bg-primary":o?"bg-secondary":n?"bg-warning":"bg-default"),[]);return(0,t.jsxs)("button",{className:"btn ".concat(x," ").concat(d," "),type:r,title:u,onClick:s,disabled:m,children:[c,l]})},i=a.memo(r)},75289:(e,l,s)=>{s.d(l,{A:()=>n});var a=s(65043),t=s(74117),r=s(41290),i=s(33556),o=s(70579);const n=e=>{let{onClose:l,action:s,show:n,warningText:d,disabled:c,isLoading:m}=e;const{t:u}=(0,t.Bd)(),[x,b]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{n&&setTimeout((()=>{b(!0)}),100)}),[n]),(0,o.jsxs)(o.Fragment,{children:[m&&(0,o.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%]"}),(0,o.jsxs)("div",{className:"".concat(n?"":"hidden"," absolute top-0 left-0 right-0 z-[1000] h-full bg-modal"),children:["Are you sure want to delete this record ?"!==d&&"Are you sure want to change status ?"!==d&&(0,o.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,o.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,o.jsxs)("div",{className:"relative bg-white shadow rounded-xl",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between px-5 py-6 border-b bg-accents-2 rounded-t-xl",children:[(0,o.jsxs)("div",{className:"flex items-center ",children:[(0,o.jsx)(i.io,{className:"inline-block mr-3 fill-baseColor",fontSize:"20"}),(0,o.jsx)("span",{className:"text-xl font-bold text-baseColor",children:u("Confirmation")})]}),(0,o.jsx)(r.A,{onClick:l,label:"",children:(0,o.jsx)(i.YY,{className:"text-error",fontSize:"14"})})]}),(0,o.jsx)("div",{className:"p-5 space-y-6 font-normal text-center border-b border-solid border-border-primary",children:(0,o.jsx)("p",{children:u(d)})}),(0,o.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 md:space-x-3 md:flex-row",children:[(0,o.jsx)(r.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[160px]",onClick:s,label:u("Yes"),disabled:c,title:"Yes"}),(0,o.jsx)(r.A,{className:"btn-secondary btn-normal w-full md:w-auto min-w-[160px]",onClick:l,label:u("No"),title:"No"})]})]})})}),"Are you sure want to change status ?"==d&&(0,o.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,o.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,o.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,o.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[(0,o.jsx)("span",{className:"p-[10px] bg-primary min-w-min rounded-full mb-3 overflow-hidden text-xl-44 md:text-6xl",children:(0,o.jsx)(i.ZI,{className:"fill-white bg-primary"})}),(0,o.jsx)("h4",{children:u("Confirmation")})]}),(0,o.jsx)("h6",{className:"font-semibold text-center mb-7 md:mb-10",children:u(d)}),(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,o.jsx)(r.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:s,label:u("Yes"),disabled:c,title:"Yes"}),(0,o.jsx)(r.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:l,label:u("No"),title:"No"})]})]})})}),"Are you sure want to delete this record ?"==d&&(0,o.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,o.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,o.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,o.jsx)("div",{className:"flex justify-center mb-5",children:(0,o.jsx)("span",{className:"p-[22px] md:p-[26px] rounded-full bg-error text-xl-35 md:text-5xl",children:(0,o.jsx)(i.Vl,{className:"stroke-2 fill-white"})})}),(0,o.jsx)("h6",{className:"font-bold text-center mb-7 md:mb-10",children:u(d)}),(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,o.jsx)(r.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:s,label:u("Yes"),disabled:c,title:"Yes"}),(0,o.jsx)(r.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:l,label:u("No"),title:"No"})]})]})})})]})]})}},50959:(e,l,s)=>{s.r(l),s.d(l,{default:()=>A});var a,t=s(65043),r=s(74117),i=s(33556),o=s(41290),n=s(12209),d=s(73216),c=s(42145),m=s(31881),u=s(88250),x=s(79456),b=s(64526),v=s(24108),p=s(10959),h=s(34764),f=s(57528);const j=(0,s(70459).J1)(a||(a=(0,f.A)(["\n  mutation DeletePlaylist($playlistId: String!) {\n    deletePlaylist(playlistId: $playlistId) {\n      message\n    }\n  }\n"])));var w=s(75289),y=s(62245),g=s(85290),N=s(75958),C=s(70579);const A=()=>{var e,l,s,a,f,A,_;const{t:k}=(0,r.Bd)(),S=(0,d.Zp)(),I=new URLSearchParams(location.search).get("playlist_id"),[P,E]=(0,m.n)(j),{templates:M}=(0,x.d4)((e=>e.rolesManagement)),[R,D]=(0,t.useState)(!1),{data:L,refetch:Y,loading:z}=(0,u.I)(v.A4,{variables:{filterData:{limit:8,page:1,playlist_id:I,search:"",sortField:"createdAt",sortOrder:"desc"}}}),[F,U]=(0,t.useState)({limit:8,page:1,playlist_id:I,sortField:"createdAt",sortOrder:"desc",search:""}),[B,T]=(0,t.useState)(!1),[Z,O]=(0,t.useState)(!1),[W,$]=(0,t.useState)([]);(0,t.useEffect)((()=>{var e,l,s;const a=[];null===L||void 0===L||null===(e=L.getPlaylistWiseCourses)||void 0===e||null===(l=e.data)||void 0===l||null===(s=l.courses)||void 0===s||s.map((e=>{a.push(e)})),B?($([...W,...a]),T(null!==B&&void 0!==B?B:!B)):$(a)}),[L]),(0,t.useEffect)((()=>{F&&(async()=>{O(!0);try{await Y({filterData:{...F}})}catch(t){var e,l,s,a;b.oR.error(null===t||void 0===t||null===(e=t.networkError)||void 0===e||null===(l=e.result)||void 0===l||null===(s=l.errors)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.message)}finally{O(!1),T(null!==B&&void 0!==B?B:!B)}})()}),[F]);const H=(0,t.useCallback)((e=>{U({...F,search:e.target.value})}),[F]),{userProfileData:J}=(0,x.d4)((e=>e.userProfile)),V=null!==(e=null===J||void 0===J||null===(l=J.getProfile)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.user_type)&&void 0!==e?e:"",q=(0,t.useCallback)((()=>{D(!0)}),[]),G=(0,t.useCallback)((()=>{P({variables:{playlistId:I}}).then((e=>{const l=e.data.deleteCourse;b.oR.success(null===l||void 0===l?void 0:l.message),Y(),S(-1)})).catch((e=>{var l,s,a,t;b.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(s=l.result)||void 0===s||null===(a=s.errors)||void 0===a||null===(t=a[0])||void 0===t?void 0:t.message)}))}),[]),K=e=>{var l,s,a,t,r;return[null===c.ve||void 0===c.ve?void 0:c.ve.SUPER_ADMIN,null===c.ve||void 0===c.ve?void 0:c.ve.SUBSCRIBER_ADMIN].includes(+(null===e||void 0===e||null===(l=e.created_by)||void 0===l?void 0:l.user_type))||(null===J||void 0===J||null===(s=J.getProfile)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.is_course_admin)||(null===J||void 0===J||null===(t=J.getProfile)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.is_course_creator)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(n.A,{headerActionConst:()=>(0,C.jsx)(C.Fragment,{children:(null===M||void 0===M?void 0:M.write)&&(0,C.jsx)(o.A,{label:"Delete Playlist",className:"btn-secondary btn-normal md:w-[150px] whitespace-nowrap",onClick:q})})}),(0,C.jsx)("div",{className:"mb-7",children:(0,C.jsxs)("div",{className:"p-5 border border-solid border-border-primary rounded-xl",children:[(0,C.jsxs)("div",{className:"flex flex-wrap justify-between gap-3 mb-5 md:gap-5",children:[(0,C.jsx)("h6",{children:k("Playlist all courses")}),(0,C.jsx)(h.A,{placeholder:k("Search"),type:"text",id:"table-search",value:F.search,onChange:H,inputIcon:(0,C.jsx)(i.vj,{fontSize:"18"})})]}),z||Z&&!B?(0,C.jsx)(p.A,{}):(0,C.jsx)("div",{className:"flex flex-wrap items-start justify-center gap-5 mb-7 sm:justify-start",children:(null===L||void 0===L||null===(a=L.getPlaylistWiseCourses)||void 0===a||null===(f=a.data)||void 0===f?void 0:f.count)>0?(0,C.jsx)(C.Fragment,{children:null===W||void 0===W?void 0:W.map((e=>(0,C.jsxs)("button",{className:"w-full 2xl:w-[calc(25%-15px)] text-left xl:w-[calc(33.3%-15px)] lg:w-[calc(50%-15px)] border-border-primary  h-full",title:"",children:[(0,C.jsx)("picture",{className:"w-full block relative border-b border-solid border-border-primary",children:(0,C.jsx)("img",{src:""!==(null===e||void 0===e?void 0:e.course_image)&&null!==e&&void 0!==e&&e.course_image?"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(e.course_image):g,alt:"Course Image",title:"Course Image",className:"object-cover w-full h-full rounded-t-xl"})}),(0,C.jsx)("div",{className:"flex flex-col w-full p-5 border-b border-solid border-x border-border-primary rounded-b-xl min-h-340px",children:(0,C.jsxs)("div",{className:"".concat(V!==c.ve.SUBSCRIBER_EMPLOYEE?"cursor-pointer":"pointer-events-auto"," flex flex-col flex-1"),onClick:()=>{return l=e.uuid,void S("/".concat(c.bw.app,"/").concat(c.bw.tfsCoursesTemplates,"/").concat(c.bw.courseDetails,"/?uuid=").concat(l));var l},children:[(0,C.jsxs)("div",{className:"flex-wrap flex items-center justify-between mb-2.5 gap-2",children:[(0,C.jsx)("div",{children:(0,C.jsx)("span",{className:"h-9 flex items-center justify-center bg-p-list-box-btn font-bold text-white md:mb-0  px-4 rounded-xl min-w-[100px] text-sm mr-4",children:null===e||void 0===e?void 0:e.category.name})}),K(e)&&(0,C.jsxs)("div",{className:"relative group",children:[(0,C.jsx)(i.mo,{className:"text-base md:text-lg cursor-pointer fill-primary"}),(0,C.jsx)("p",{className:"absolute whitespace-nowrap left-auto shadow-infos p-1.5 md:p-2.5 bg-white border border-border-primary rounded-xl md:right-0 xd:left-1 -top-[68px] md:-top-14 hidden group-hover:inline-block z-10",children:null!==e&&void 0!==e&&e.is_editable?"Editable Course":"Non-Editable Course"})]})]}),(0,C.jsx)("h4",{className:"text-base hover:text-primary mb-2.5 truncate",children:null===e||void 0===e?void 0:e.title}),(0,C.jsx)("p",{className:"leading-6 mb-3 md:mb-5 w-full text-ellipsis line-clamp-3 break-words",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.description}}),(0,C.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-2 mt-auto",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("picture",{className:"w-[40px] h-[40px] flex items-center justify-center rounded-full overflow-hidden border border-solid border-border-primary",children:(0,C.jsx)("img",{src:""!==(null===e||void 0===e?void 0:e.instructor_profile)&&null!==e&&void 0!==e&&e.instructor_profile?"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(null===e||void 0===e?void 0:e.instructor_profile):N,alt:"Profile",title:"Profile",className:"object-cover w-full h-full"})}),(0,C.jsx)("p",{className:"font-semibold",children:null===e||void 0===e?void 0:e.instructor_name})]}),(0,C.jsx)("div",{className:"time max-xmd:my-2.5",children:(0,C.jsxs)("span",{className:"flex text-xs",children:[(0,C.jsx)("span",{className:"mr-1 text-base",children:(0,C.jsx)(i.zD,{className:"fill-secondary"})}),(0,C.jsx)("span",{children:"".concat((0,c.bZ)(null===e||void 0===e?void 0:e.estimate_time).hours," h ").concat((0,c.bZ)(null===e||void 0===e?void 0:e.estimate_time).minutes," m")})]})})]})]})})]},null===e||void 0===e?void 0:e.uuid)))}):(0,C.jsx)("div",{children:"No Records Found!!!"})}),(0,C.jsx)("div",{className:"flex items-center justify-center",children:(0,C.jsx)(y.A,{className:"btn-secondary btn-normal w-full md:w-[120px]",label:k(Z&&B?"Loading...!":"Load More"),onClick:()=>(T(!0),void U({...F,page:F.page+1})),disabled:z||Z||(null===L||void 0===L||null===(A=L.getPlaylistWiseCourses)||void 0===A||null===(_=A.data)||void 0===_?void 0:_.count)===W.length,title:"".concat(k(Z&&B?"Loading...!":"Load More"))})})]})}),R&&(0,C.jsx)(w.A,{disabled:null===E||void 0===E?void 0:E.loading,isLoading:null===E||void 0===E?void 0:E.loading,warningText:c.jl,onClose:()=>{D(!1)},action:()=>G(),show:R})]})}}}]);
//# sourceMappingURL=959.55fa2641.chunk.js.map