"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[7210],{7648:(e,l,a)=>{a.d(l,{A:()=>m});var s=a(65043),i=a(74117),n=a(73216),t=a(35475),o=a(42145),r=a(79456),d=a(66925),u=a(70579);const c=()=>{var e,l,a;const{t:c}=(0,i.Bd)(),m=(0,n.zy)(),v=new URLSearchParams(m.search).get("uuid"),{id:x}=(0,n.g)(),{userProfileData:p}=(0,r.d4)((e=>e.userProfile)),h=null!==(e=null===p||void 0===p||null===(l=p.getProfile)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.user_type)&&void 0!==e?e:"",b=e=>{var l;let a="";if(null!==(l=e.split("/")[2])&&void 0!==l&&l.includes("-")){return e.split("/")[2].split("-").forEach((e=>{var l;return a=a+(null===(l=e[0])||void 0===l?void 0:l.toUpperCase())+e.slice(1)+" ",a})),a}var s;return a=(null===(s=e.split("/")[2][0])||void 0===s?void 0:s.toUpperCase())+e.split("/")[2].slice(1),a},f=e=>{let l="";if(null!==e&&void 0!==e&&e.includes("-")){l=null===e||void 0===e?void 0:e.replace(/-|\s/g," ");const a=l.split(" ");for(let e=0;e<a.length;e++)a[e]=a[e][0].toUpperCase()+a[e].substring(1);return l=a.join(" "),l}var a;return l=(null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" ",l},j=e=>{let l="";return null!==e&&void 0!==e&&e.includes("-")||(l=(null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" "),l;var a},g=m.pathname.split("/"),N=(0,s.useCallback)((()=>{if((null===g||void 0===g?void 0:g.length)>0){const e=null===g||void 0===g?void 0:g.length;if(e<4)return(0,u.jsx)("span",{className:"text-primary",children:g[2]&&"".concat(c(f(g[2])))});if(e<5)return""!==g[3]?g[3].length>32?(0,u.jsxs)(u.Fragment,{children:[j(g[3])&&(0,u.jsx)("span",{className:"text-primary",children:(0,u.jsx)(t.k2,{to:"/".concat(o.bw.app,"/").concat(g[2]),className:"text-light-grey hover:underline",children:"".concat(c(b(m.pathname)))})}),j(g[3])&&(0,u.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),!j(g[3])&&(0,u.jsx)("span",{className:"text-primary",children:g[2]&&"".concat(c(f(g[2])))}),(0,u.jsx)("span",{className:"text-primary",children:g[3]&&"".concat(c(j(g[3])))})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"text-primary",children:(0,u.jsx)(t.k2,{to:"/".concat(o.bw.app,"/").concat(g[2]),className:"text-light-grey hover:underline",children:"".concat(c(b(m.pathname)))})}),(0,u.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,u.jsx)("span",{className:"text-primary",children:g[3]&&"".concat(c(f(g[3])))})]}):(0,u.jsx)("span",{className:"text-primary",children:g[2]&&"".concat(c(f(g[2])))});if(e<6)return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"text-primary",children:(0,u.jsx)(t.k2,{to:"/".concat(o.bw.app,"/").concat(g[2]),className:"text-light-grey hover:underline",children:"".concat(c(b(m.pathname)))})}),(0,u.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,u.jsx)("span",{className:"text-primary",children:g[3]&&"".concat(c(f(g[3])))})]});if(e<7){let e="";return v?e="?uuid=".concat(v):x&&(e="?uuid=".concat(x)),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"text-primary",children:(0,u.jsx)(t.k2,{to:"/".concat(o.bw.app,"/").concat(g[2]),className:"text-light-grey hover:underline",children:c(f(g[2]))})}),(0,u.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,u.jsx)("span",{className:"text-primary",children:(0,u.jsx)(t.k2,{to:"/".concat(o.bw.app,"/").concat(g[2],"/").concat(g[3],"/").concat((""!==v||""!==x)&&e),className:"text-light-grey hover:underline",children:c(f(g[3]))})}),(0,u.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,u.jsx)("span",{className:"text-primary",children:g[5]&&"".concat(c(f(g[4])))})]})}}}),[g]);return(0,u.jsx)("div",{className:"w-full",children:(0,u.jsxs)("p",{className:"max-xs:text-xs text-xs-14 max-md:truncate",children:[(0,u.jsxs)("span",{children:[(0,u.jsx)(t.k2,{to:(0,d.Go)(h,o.ve.SUPER_ADMIN,"/".concat(o.bw.app,"/").concat(o.bw.dashboard),"/".concat(o.bw.app,"/").concat(o.bw.subscriber)),className:"cursor-pointer text-light-grey hover:underline",children:c("Home")}),(0,u.jsx)("span",{className:"mx-2 text-light-grey",children:">"})]}),N()]})})},m=s.memo(c)},75289:(e,l,a)=>{a.d(l,{A:()=>r});var s=a(65043),i=a(74117),n=a(41290),t=a(33556),o=a(70579);const r=e=>{let{onClose:l,action:a,show:r,warningText:d,disabled:u,isLoading:c}=e;const{t:m}=(0,i.Bd)(),[v,x]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{r&&setTimeout((()=>{x(!0)}),100)}),[r]),(0,o.jsxs)(o.Fragment,{children:[c&&(0,o.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%]"}),(0,o.jsxs)("div",{className:"".concat(r?"":"hidden"," absolute top-0 left-0 right-0 z-[1000] h-full bg-modal"),children:["Are you sure want to delete this record ?"!==d&&"Are you sure want to change status ?"!==d&&(0,o.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(v?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,o.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,o.jsxs)("div",{className:"relative bg-white shadow rounded-xl",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between px-5 py-6 border-b bg-accents-2 rounded-t-xl",children:[(0,o.jsxs)("div",{className:"flex items-center ",children:[(0,o.jsx)(t.io,{className:"inline-block mr-3 fill-baseColor",fontSize:"20"}),(0,o.jsx)("span",{className:"text-xl font-bold text-baseColor",children:m("Confirmation")})]}),(0,o.jsx)(n.A,{onClick:l,label:"",children:(0,o.jsx)(t.YY,{className:"text-error",fontSize:"14"})})]}),(0,o.jsx)("div",{className:"p-5 space-y-6 font-normal text-center border-b border-solid border-border-primary",children:(0,o.jsx)("p",{children:m(d)})}),(0,o.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 md:space-x-3 md:flex-row",children:[(0,o.jsx)(n.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[160px]",onClick:a,label:m("Yes"),disabled:u,title:"Yes"}),(0,o.jsx)(n.A,{className:"btn-secondary btn-normal w-full md:w-auto min-w-[160px]",onClick:l,label:m("No"),title:"No"})]})]})})}),"Are you sure want to change status ?"==d&&(0,o.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(v?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,o.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,o.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,o.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[(0,o.jsx)("span",{className:"p-[10px] bg-primary min-w-min rounded-full mb-3 overflow-hidden text-xl-44 md:text-6xl",children:(0,o.jsx)(t.ZI,{className:"fill-white bg-primary"})}),(0,o.jsx)("h4",{children:m("Confirmation")})]}),(0,o.jsx)("h6",{className:"font-semibold text-center mb-7 md:mb-10",children:m(d)}),(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,o.jsx)(n.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:a,label:m("Yes"),disabled:u,title:"Yes"}),(0,o.jsx)(n.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:l,label:m("No"),title:"No"})]})]})})}),"Are you sure want to delete this record ?"==d&&(0,o.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(v?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,o.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,o.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,o.jsx)("div",{className:"flex justify-center mb-5",children:(0,o.jsx)("span",{className:"p-[22px] md:p-[26px] rounded-full bg-error text-xl-35 md:text-5xl",children:(0,o.jsx)(t.Vl,{className:"stroke-2 fill-white"})})}),(0,o.jsx)("h6",{className:"font-bold text-center mb-7 md:mb-10",children:m(d)}),(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,o.jsx)(n.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:a,label:m("Yes"),disabled:u,title:"Yes"}),(0,o.jsx)(n.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:l,label:m("No"),title:"No"})]})]})})})]})]})}},81410:(e,l,a)=>{a.d(l,{A:()=>i});a(65043);var s=a(70579);const i=function(){return(0,s.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%] z-[9999]"})}},12209:(e,l,a)=>{a.d(l,{A:()=>c});var s=a(65043),i=a(74117),n=a(73216),t=a(7648),o=a(33556),r=a(79456),d=a(75214),u=a(70579);const c=e=>{let{headerActionConst:l,headerTitle:a}=e;const{t:c}=(0,i.Bd)(),m=(0,r.wA)(),{show:v}=(0,r.d4)((e=>e.coursesManagement)),x=(0,n.zy)(),p=(0,s.useCallback)((()=>{m((0,d.oM)(!v))}),[v]);return(0,u.jsxs)("header",{className:"sticky top-0 z-20 flex bg-white border-b shadow-header xl:shadow-none xl:h-auto xl:block border-border-primary xl:px-2 xl:pt-0",children:[(0,u.jsx)("div",{onClick:p,className:"pt-5 cursor-pointer text-xl-22 xl:hidden",children:(0,u.jsx)(o.Rt,{className:"ml-4"})}),(0,u.jsx)("div",{className:"p-2.5 xl:p-[18px] xl:shadow-header max-xl:w-[calc(100%-47px)]",children:(0,u.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:[(0,u.jsxs)("div",{className:"w-full xl:w-auto",children:[(0,u.jsx)("h1",{className:"mb-1 text-2xl max-xl:truncate xl:text-3xl",children:c(null!==a&&void 0!==a?a:(e=>{let l="";if(e.split("/")[2].includes("-")){return e.split("/")[2].split("-").forEach((e=>(l=l+e[0].toUpperCase()+e.slice(1)+" ",l))),l}return l=e.split("/")[2][0].toUpperCase()+e.split("/")[2].slice(1),l})(x.pathname))}),(0,u.jsx)(t.A,{})]}),l&&(0,u.jsx)("div",{className:"flex gap-2.5 max-xl:w-[calc(100%+40px)] lg:gap-5",children:(()=>{if(l)return l()})()})]})})]})}},76479:(e,l,a)=>{a.d(l,{aT:()=>v,i9:()=>x,wR:()=>c,xG:()=>m,xP:()=>u});var s,i,n,t,o,r=a(57528),d=a(70459);const u=(0,d.J1)(s||(s=(0,r.A)(["query FindAllCourseCreator($filterData: CourseCreatorListDto!) {\n  findAllCourseCreator(filterData: $filterData) {\n    message\n    data {\n      data {\n        user_uuid\n        full_name\n        locations {\n          location\n          uuid\n        }\n      }\n      count\n    }\n  }\n}"]))),c=(0,d.J1)(i||(i=(0,r.A)(["query GetLocations {\n  getLocations {\n    message\n    data {\n      uuid\n      location      \n    }\n  }\n}"]))),m=(0,d.J1)(n||(n=(0,r.A)(["query GetAllSubscriberUsers($userType: GetUserDto!) {\n  getAllSubscriberUsers(userType: $userType) {\n    message\n    data {\n      email\n      uuid\n      status\n      pronounce\n      first_name\n      last_name\n    }\n  }\n}"]))),v=(0,d.J1)(t||(t=(0,r.A)(["query GetCourseCreatorById($userUuid: String!) {\n  getCourseCreatorById(userUUID: $userUuid) {\n    message\n    data {\n      uuid\n      user {\n        first_name \n        last_name\n        email\n        uuid\n      }\n      location {\n        uuid\n        location\n      }\n    }\n  }\n}"]))),x=(0,d.J1)(o||(o=(0,r.A)(["mutation DeleteCourseCreator($courseCreatorIds: [String!]!) {\n  deleteCourseCreator(courseCreatorIds: $courseCreatorIds) {\n    message\n  }\n}"])))},87210:(e,l,a)=>{a.r(l),a.d(l,{default:()=>R});var s,i,n,t,o=a(65043),r=a(31881),d=a(88250),u=a(77654),c=a(41290),m=a(12209),v=a(33556),x=a(42145),p=a(74117),h=a(8848),b=a(57528),f=a(70459);const j=(0,f.J1)(s||(s=(0,b.A)(["mutation CreateCourseAdministrator($courseAdministratorData: CreateCourseAdministratorDto!) {\n  createCourseAdministrator(courseAdministratorData: $courseAdministratorData) {\n    message\n  }\n}"]))),g=(0,f.J1)(i||(i=(0,b.A)(["mutation UpdateCourseAdministrator($courseData: UpdatedCreateCourseAdministratorDto!) {\n  updateCourseAdministrator(courseData: $courseData) {\n    message\n  }\n}"]))),N=(0,f.J1)(n||(n=(0,b.A)(["mutation DeleteCourseAdministrator($courseAdministratorIds: [String!]!) {\n  deleteCourseAdministrator(courseAdministratorIds: $courseAdministratorIds) {\n    message\n  }\n}"]))),y=(0,f.J1)(t||(t=(0,b.A)(["mutation CourseAdminDelete($userId: String!) {\n  courseAdminDelete(userId: $userId) {\n    message\n  }\n}"])));var w,A;const C=(0,f.J1)(w||(w=(0,b.A)(["query FindAllCourseAdministrator($filterData: CourseCreateAdministratorListDto!) {\n  findAllCourseAdministrator(filterData: $filterData) {\n    message\n    data {\n      data {\n        full_name\n        user_type\n        user_uuid\n        locations {\n          uuid\n          location\n        }\n\n      }\n      count\n    }\n  }\n}"]))),_=(0,f.J1)(A||(A=(0,b.A)(["query GetCourseAdministratorById($userUuid: String!) {\n  getCourseAdministratorById(userUUID: $userUuid) {\n    message\n    data {\n      uuid\n      user {\n        id\n        email\n        uuid\n      }\n      location {\n        uuid\n        location\n        city\n      }\n    }\n  }\n}"])));var k=a(76479),D=a(12352),S=a(63516),I=a(64526),U=a(70579);const F=e=>{var l,a,s,i,n,t;let{onClose:u,isAdd:m,editId:p}=e;const{refetch:b}=(0,d.I)(_,{fetchPolicy:"network-only",skip:!0}),[f,{loading:y}]=(0,r.n)(g),[w,{loading:A}]=(0,r.n)(j),[C]=(0,r.n)(N),{data:F}=(0,d.I)(k.xG,{fetchPolicy:"network-only",variables:{userType:{user_type:x.ve.SUPER_ADMIN}}}),{data:E}=(0,d.I)(k.wR),[T,$]=(0,o.useState)([]),{createOrUpdateCourseAdmin:R}=(0,D.A)(),[P,L]=(0,o.useState)([]);(0,o.useEffect)((()=>{""!==p&&b({userUuid:p}).then((e=>{var l,a,s,i,n,t,o,r,d,u;const c=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.getCourseAdministratorById)||void 0===a?void 0:a.data;P.push({name:(null===c||void 0===c||null===(s=c[0])||void 0===s||null===(i=s.user)||void 0===i?void 0:i.first_name)+" "+(null===c||void 0===c||null===(n=c[0])||void 0===n||null===(t=n.user)||void 0===t?void 0:t.last_name),uuid:null===c||void 0===c||null===(o=c[0])||void 0===o||null===(r=o.user)||void 0===r?void 0:r.uuid}),z.setFieldValue("courseAdminData.user_id",null===c||void 0===c||null===(d=c[0])||void 0===d||null===(u=d.user)||void 0===u?void 0:u.uuid),z.setFieldValue("courseAdminData.locations",null===c||void 0===c?void 0:c.map((e=>{var l;return{location_id:null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.uuid,uuid:null===e||void 0===e?void 0:e.uuid}})))})).catch((e=>{var l,a,s;I.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(s=a.errors[0])||void 0===s?void 0:s.message)}))}),[m]),(0,o.useEffect)((()=>{var e,l;null!==E&&void 0!==E&&E.getLocations&&$(null===E||void 0===E||null===(e=E.getLocations)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>({name:null===e||void 0===e?void 0:e.location,key:null===e||void 0===e?void 0:e.uuid}))))}),[null===E||void 0===E?void 0:E.getLocations]),(0,o.useEffect)((()=>{var e,l;null!==F&&void 0!==F&&F.getAllSubscriberUsers&&L(null===F||void 0===F||null===(e=F.getAllSubscriberUsers)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>({name:(null===e||void 0===e?void 0:e.first_name)+" "+(null===e||void 0===e?void 0:e.last_name),key:e.uuid}))))}),[null===F||void 0===F?void 0:F.getAllSubscriberUsers]);const z=(0,S.Wx)({initialValues:{courseAdminIds:[],courseAdminData:{user_id:"",locations:[{location_id:"",uuid:""}]}},validationSchema:R,onSubmit(e){var l,a;p?(async()=>{var e;const l=await C({variables:{courseAdministratorIds:null===z||void 0===z||null===(e=z.values)||void 0===e?void 0:e.courseAdminIds}});var a,s,i;null!==l&&void 0!==l&&l.errors?I.oR.error("Something went wrong"):f({variables:{courseData:{data:null===z||void 0===z||null===(a=z.values)||void 0===a||null===(s=a.courseAdminData)||void 0===s||null===(i=s.locations)||void 0===i?void 0:i.map((e=>{var l,a;return{location_id:null===e||void 0===e?void 0:e.location_id,user_id:null===z||void 0===z||null===(l=z.values)||void 0===l||null===(a=l.courseAdminData)||void 0===a?void 0:a.user_id,uuid:null===e||void 0===e?void 0:e.uuid}}))}}}).then((e=>{var l,a;const s=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.updateCourseAdministrator)||void 0===a?void 0:a.message;I.oR.success(s),M()})).catch((e=>{var l,a,s;I.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(s=a.errors[0])||void 0===s?void 0:s.message)}))})():w({variables:{courseAdministratorData:{location_id:null===e||void 0===e||null===(l=e.courseAdminData)||void 0===l?void 0:l.locations.map((e=>null===e||void 0===e?void 0:e.location_id)),user_id:null===e||void 0===e||null===(a=e.courseAdminData)||void 0===a?void 0:a.user_id}}}).then((e=>{var l,a;I.oR.success(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.createCourseAdministrator)||void 0===a?void 0:a.message),M()})).catch((e=>{var l,a,s;I.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(s=a.errors[0])||void 0===s?void 0:s.message)}))}}),J=()=>{var e,l;z.setFieldValue("courseAdminData.locations",[...null===z||void 0===z||null===(e=z.values)||void 0===e||null===(l=e.courseAdminData)||void 0===l?void 0:l.locations,{location_id:"",uuid:""}])},O=(0,o.useCallback)(((e,l)=>{var a;""!==l&&z.setFieldValue("courseAdminIds",[...null===z||void 0===z||null===(a=z.values)||void 0===a?void 0:a.courseAdminIds,l]);z.values.courseAdminData.locations.splice(e,1),z.setFieldValue("courseAdminData.locations",z.values.courseAdminData.locations)}),[null===z||void 0===z?void 0:z.values]),M=(0,o.useCallback)((()=>{z.resetForm(),u()}),[]),Y=null===z||void 0===z||null===(l=z.errors)||void 0===l?void 0:l.courseAdminData;return(0,U.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 right-0 left-0 z-50 h-full bg-modal modal ".concat(m?"":"hidden"),children:(0,U.jsx)("div",{id:"AdminUpdateModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"flex items-center justify-center h-full py-5 transition-all duration-300",children:(0,U.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,U.jsxs)("div",{className:"relative bg-white rounded-xl",children:[(0,U.jsxs)("div",{className:"flex  justify-between items-center px-5 py-4 border-b md:py-6 bg-accents-2 rounded-t-xl",children:[(0,U.jsx)("p",{className:"text-lg font-bold md:text-xl text-baseColor",children:""!==p?"Update Course Admin":"Add New Course Admin"}),(0,U.jsx)(c.A,{onClick:M,title:"Close",label:"",children:(0,U.jsx)("span",{className:"text-xl-22",children:(0,U.jsx)(v.YY,{className:"text-error"})})})]}),(0,U.jsx)("div",{className:"w-full",children:(0,U.jsxs)("form",{onSubmit:z.handleSubmit,children:[(0,U.jsxs)("div",{className:"p-5 max-h-[calc(100vh-260px)] overflow-auto",children:[(0,U.jsx)("div",{className:"mb-3 first-letter:md:mb-5 sm:inline-block w-full sm:w-1/2",children:(0,U.jsx)(h.A,{placeholder:"Select Employee",name:"courseAdminData.user_id",onChange:z.handleChange,value:z.values.courseAdminData.user_id,id:"courseAdminData.user_id",label:"Select Employee",required:!0,options:P,disabled:""!==p,error:null!==Y&&void 0!==Y&&Y.user_id&&null!==z&&void 0!==z&&null!==(a=z.touched)&&void 0!==a&&null!==(s=a.courseAdminData)&&void 0!==s&&s.user_id?null===Y||void 0===Y?void 0:Y.user_id:""})}),(0,U.jsxs)("div",{children:[(0,U.jsxs)("label",{htmlFor:"location1",children:["Assign Locations ",(0,U.jsx)("span",{className:"text-error",children:" *"})]}),null===z||void 0===z||null===(i=z.values)||void 0===i||null===(n=i.courseAdminData)||void 0===n||null===(t=n.locations)||void 0===t?void 0:t.map(((e,l)=>{var a,s,i,n,t,o,r,d,u,c,m,x,p,b,f,j,g,N;const y=l+(null===e||void 0===e?void 0:e.location_id);return(0,U.jsxs)("div",{className:"w-full  flex items-center sm:w-1/2 justify-start gap-3 mb-3",children:[l+1===(null===z||void 0===z||null===(a=z.values)||void 0===a||null===(s=a.courseAdminData)||void 0===s||null===(i=s.locations)||void 0===i?void 0:i.length)&&(0,U.jsx)("button",{className:"btn btn-primary btn-small",type:"button",onClick:J,children:(0,U.jsx)(v.FW,{fontSize:"14"})}),(0,U.jsx)(h.A,{placeholder:"Location",className:"w-full -mt-2",label:"",name:"courseAdminData.locations.[".concat(l,"].location_id"),id:"location2",value:null===z||void 0===z||null===(n=z.values)||void 0===n||null===(t=n.courseAdminData)||void 0===t||null===(o=t.locations)||void 0===o||null===(r=o[l])||void 0===r?void 0:r.location_id,onChange:z.handleChange,options:T,error:null!==Y&&void 0!==Y&&null!==(d=Y.locations)&&void 0!==d&&null!==(u=d[l])&&void 0!==u&&u.location_id&&null!==z&&void 0!==z&&null!==(c=z.touched)&&void 0!==c&&null!==(m=c.courseAdminData)&&void 0!==m&&null!==(x=m.locations)&&void 0!==x&&null!==(p=x[l])&&void 0!==p&&p.location_id?null===Y||void 0===Y||null===(b=Y.locations)||void 0===b||null===(f=b[l])||void 0===f?void 0:f.location_id:""}),(0,U.jsx)("button",{type:"button",className:"btn btn-primary btn-small",onClick:()=>O(l,null===e||void 0===e?void 0:e.uuid),disabled:1===(null===z||void 0===z||null===(j=z.values)||void 0===j||null===(g=j.courseAdminData)||void 0===g||null===(N=g.locations)||void 0===N?void 0:N.length),children:(0,U.jsx)(v.Hs,{fontSize:"14"})})]},y)}))]})]}),(0,U.jsx)("div",{className:"flex flex-col items-center justify-end p-5 border-t border-solid md:space-x-3 sm:flex-row border-border-primary",children:(0,U.jsx)(c.A,{className:"btn-primary btn-normal w-full sm:w-auto min-w-[160px]",type:"submit",label:""!==p?"Update":"Add",disabled:y||A})})]})})]})})})},"addPopUp")};var E=a(81410),T=a(75289),$=a(34764);const R=()=>{var e,l,a,s,i,n,t,b,f,j,g,N;const{t:w}=(0,p.Bd)(),[A,_]=(0,o.useState)(!1),[D,R]=(0,o.useState)(!1),[P,L]=(0,o.useState)({limit:x.Wt,page:x.k2,location:"",sortOrder:"descend",full_name:"",sortField:"full_name",user_type:null,index:0}),[z,J]=(0,o.useState)(P.limit),[O,{loading:M}]=(0,r.n)(y),{data:Y,refetch:B,loading:G}=(0,d.I)(C,{fetchPolicy:"network-only",variables:{filterData:{limit:x.Wt,page:x.k2,location:"",sortOrder:"descend",user_type:null,full_name:"",sortField:"full_name"}}}),[V,q]=(0,o.useState)(!1),[W,H]=(0,o.useState)(""),Z=[{name:w("Sr.No"),sortable:!1},{name:w("Name of Course Admin"),sortable:!0,fieldName:"full_name"},{name:w("User Type"),sortable:!0,fieldName:"user_type"},{name:w("Assigned Locations"),sortable:!1,fieldName:"locations.location"}],{data:K}=(0,d.I)(k.wR),Q=(0,S.Wx)({initialValues:{adminName:"",location:"",userType:null},onSubmit(){}}),X=(0,o.useCallback)((()=>{Q.resetForm(),ne()}),[]),ee=(0,o.useCallback)((()=>{q(!1),R(!1),H(""),B().catch((e=>{var l,a,s;I.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(s=a.errors[0])||void 0===s?void 0:s.message)}))}),[]),le=(0,o.useCallback)((()=>{q(!0)}),[]),ae=null===Y||void 0===Y||null===(e=Y.findAllCourseAdministrator)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.count,se=Math.ceil(ae/z),ie=(0,o.useCallback)((e=>{var l,a,s;const i={...P,location:null===Q||void 0===Q||null===(l=Q.values)||void 0===l?void 0:l.location,full_name:null===Q||void 0===Q||null===(a=Q.values)||void 0===a?void 0:a.adminName,user_type:Number(null===Q||void 0===Q||null===(s=Q.values)||void 0===s?void 0:s.userType),page:e,index:(e-1)*P.limit};L(i)}),[P.limit]);(0,o.useEffect)((()=>{J(P.limit)}),[P.limit]),(0,o.useEffect)((()=>{var e,l,a;const s={filterData:{location:null===Q||void 0===Q||null===(e=Q.values)||void 0===e?void 0:e.location,full_name:null===Q||void 0===Q||null===(l=Q.values)||void 0===l?void 0:l.adminName,user_type:Number(null===Q||void 0===Q||null===(a=Q.values)||void 0===a?void 0:a.userType),limit:null===P||void 0===P?void 0:P.limit,page:null===P||void 0===P?void 0:P.page,sortOrder:null===P||void 0===P?void 0:P.sortOrder,sortField:null===P||void 0===P?void 0:P.sortField}};B(s).catch((e=>{var l,a,s;I.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(s=a.errors[0])||void 0===s?void 0:s.message)}))}),[P]);const ne=(0,o.useCallback)((()=>{var e,l,a;const s={...P,location:null===Q||void 0===Q||null===(e=Q.values)||void 0===e?void 0:e.location,full_name:null===Q||void 0===Q||null===(l=Q.values)||void 0===l?void 0:l.adminName,user_type:null===Q||void 0===Q||null===(a=Q.values)||void 0===a?void 0:a.userType};L(s)}),[P,Q]),te=(0,o.useCallback)((e=>{H(e),q(!0)}),[]),oe=(0,o.useCallback)((e=>{H(e),R(!0)}),[]),re=(0,o.useCallback)((()=>{O({variables:{userId:W}}).then((e=>{var l,a;I.oR.success(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.courseAdminDelete)||void 0===a?void 0:a.message),ee()})).catch((e=>{var l,a,s;I.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(a=l.result)||void 0===a||null===(s=a.errors[0])||void 0===s?void 0:s.message)}))}),[W]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(m.A,{headerActionConst:()=>(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(c.A,{className:" ".concat(A?"btn-primary":"btn-secondary"," btn-normal md:w-[50px]"),label:"",onClick:()=>_(!A),title:"Filter",children:(0,U.jsx)(v.dJ,{})}),(0,U.jsx)(c.A,{label:"+ Create Course Admin",className:"btn-primary  btn-normal md:min-w-[150px] whitespace-nowrap",onClick:()=>le(),title:"+ Create Course Admin"})]})}),(0,U.jsxs)("div",{children:[A&&(0,U.jsx)("form",{onSubmit:Q.handleSubmit,children:(0,U.jsxs)("div",{className:"flex justify-start flex-wrap 2xl:flex-nowrap p-5 mb-5 border border-border-primary rounded-xl bg-light-blue gap-1 md:gap-2 2xl:gap-[18px] xl:gap-y-2 xl:gap-3 lg:gap-0.5 lg:gap-x-2.5 items-end",children:[(0,U.jsx)("div",{className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)]",children:(0,U.jsx)($.A,{value:Q.values.adminName,placeholder:"Name of Course Admin",type:"text",id:"highlights1",name:"adminName",onChange:Q.handleChange})}),(0,U.jsx)(h.A,{value:null!==(a=Q.values.userType)&&void 0!==a?a:"",placeholder:"User Type",className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)] -mt-2",label:"",name:"userType",id:"location",onChange:Q.handleChange,options:x.NJ}),(0,U.jsx)(h.A,{value:Q.values.location,placeholder:"Location",className:"w-full lg:w-[calc(50%-10px)] xl:w-[calc(33.3%-14px)] -mt-2",label:"",name:"location",id:"location",onChange:Q.handleChange,options:null===K||void 0===K||null===(s=K.getLocations)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.map((e=>({name:e.location,key:e.location})))}),(0,U.jsx)(c.A,{type:"button",className:"btn-primary btn-normal w-full md:min-w-[160px] md:w-auto lg:mt-0",label:"Search",onClick:ne}),(0,U.jsx)(c.A,{type:"button",className:"btn-secondary btn-normal w-full md:min-w-[160px] md:w-auto lg:mt-0",label:"Reset",onClick:X})]})}),(0,U.jsxs)("div",{className:"bg-white rounded-xl overflow-auto border border-[#c8ced3] p-3 md:p-5",children:[(0,U.jsx)("div",{className:"flex flex-col justify-between gap-3 mb-3 md:gap-5 md:mb-5 btn-group md:flex-row",children:(0,U.jsx)("h6",{className:"w-full leading-7 xmd:w-auto",children:w("Course admin List")})}),(0,U.jsxs)("div",{className:"w-full mb-3 overflow-auto bg-white border sm:w-auto rounded-t-xl custom-dataTable border-border-primary",children:[(0,U.jsxs)("table",{children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[null===Z||void 0===Z?void 0:Z.map(((e,l)=>{const a=e.fieldName+l;return(0,U.jsx)("th",{scope:"col",children:(0,U.jsxs)("div",{className:"flex items-center ".concat("Status"==e.name?"justify-center":""),children:[e.name,e.sortable&&(0,U.jsxs)("button",{onClick:()=>(e=>{var l,a,s;const i={...P,location:null===Q||void 0===Q||null===(l=Q.values)||void 0===l?void 0:l.location,full_name:null===Q||void 0===Q||null===(a=Q.values)||void 0===a?void 0:a.adminName,user_type:Number(null===Q||void 0===Q||null===(s=Q.values)||void 0===s?void 0:s.userType),sortField:e,sortOrder:"ascend"===P.sortOrder?"descend":"ascend"};L(i)})(e.fieldName),children:[(""===P.sortOrder||P.sortField!==e.fieldName)&&(0,U.jsx)(v.xs,{className:"w-3 h-3 ml-1 fill-white"}),"ascend"===P.sortOrder&&P.sortField===e.fieldName&&(0,U.jsx)(v.xD,{className:"ml-1 fill-white"}),"descend"===P.sortOrder&&P.sortField===e.fieldName&&(0,U.jsx)(v.xR,{className:"ml-1 fill-white"})]})]})},a)})),(0,U.jsx)("th",{scope:"col",children:(0,U.jsx)("div",{className:"flex items-center",children:w("Action")})})]})}),(0,U.jsx)("tbody",{children:null===Y||void 0===Y||null===(n=Y.findAllCourseAdministrator)||void 0===n||null===(t=n.data)||void 0===t||null===(b=t.data)||void 0===b?void 0:b.map(((e,l)=>{const a=(null===P||void 0===P?void 0:P.index)+l+1;return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{scope:"row",className:"text-center",children:a}),(0,U.jsx)("td",{className:"text-left",children:e.full_name}),(0,U.jsx)("td",{className:"text-left",children:null===x.zO||void 0===x.zO?void 0:x.zO[e.user_type]}),(0,U.jsx)("td",{className:"text-left",children:e.locations.map((e=>null===e||void 0===e?void 0:e.location)).join(", ")}),(0,U.jsx)("td",{children:(0,U.jsxs)("div",{className:"flex justify-start btn-group",children:[(0,U.jsx)(c.A,{className:"bg-transparent btn-default",onClick:()=>te(null===e||void 0===e?void 0:e.user_uuid),label:"",title:"Edit",children:(0,U.jsx)(v.ff,{})}),(0,U.jsx)(c.A,{className:"bg-transparent btn-default",onClick:()=>oe(null===e||void 0===e?void 0:e.user_uuid),label:"",title:"Delete",children:(0,U.jsx)(v.lM,{className:"fill-error"})})]})})]},e.user_uuid)}))})]}),G&&(0,U.jsx)("div",{className:"w-full px-2.5 py-2 bg-white bg-opacity-75 flex justify-center ",children:(0,U.jsx)("div",{className:"text-xl",children:(0,U.jsx)(E.A,{})})}),(0===(null===Y||void 0===Y||null===(f=Y.findAllCourseAdministrator)||void 0===f||null===(j=f.data)||void 0===j?void 0:j.count)||null===(null===Y||void 0===Y||null===(g=Y.findAllCourseAdministrator)||void 0===g||null===(N=g.data)||void 0===N?void 0:N.data))&&(0,U.jsx)("div",{className:"flex justify-center",children:(0,U.jsx)("div",{children:w("No Data")})})]}),(0,U.jsxs)("div",{className:"flex flex-wrap items-center mt-2",children:[(0,U.jsxs)("div",{className:"flex items-center mr-3 md:mr-7",children:[(0,U.jsx)("span",{className:"text-sm font-normal text-gray-700 whitespace-nowrap ",children:w("Per Page")}),(0,U.jsx)("select",{value:P.limit,onChange:e=>{var l,a,s,i;const n=Number(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value),t={...P,location:null===Q||void 0===Q||null===(a=Q.values)||void 0===a?void 0:a.location,full_name:null===Q||void 0===Q||null===(s=Q.values)||void 0===s?void 0:s.adminName,user_type:Number(null===Q||void 0===Q||null===(i=Q.values)||void 0===i?void 0:i.userType),limit:n,page:1,index:0};L(t)},className:"border border-border-primary rounded-xl ml-2 px-3 text-sm py-1.5 text-gray-500 w-[70px] h-[36px] appearance-none bg-white",children:null===x.aj||void 0===x.aj?void 0:x.aj.map((e=>(0,U.jsx)("option",{children:e},e)))})]}),(0,U.jsx)(u.A,{currentPage:P.page,totalPages:se,onPageChange:ie,recordsPerPage:z})]}),V&&(0,U.jsx)(F,{isAdd:V,onClose:ee,editId:W})]}),D&&(0,U.jsx)(T.A,{warningText:x.jl,onClose:()=>ee(),action:re,show:D,disabled:M})]})]})}}}]);
//# sourceMappingURL=7210.67102f4d.chunk.js.map