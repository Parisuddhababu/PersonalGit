"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[4212],{19873:(e,l,i)=>{i.d(l,{D:()=>u,V:()=>t});var o,d,n=i(57528),a=i(70459);const t=(0,a.J1)(o||(o=(0,n.A)(["mutation UpdateDiversionReportSettings($diversionSettingsData: UpdateDiversionReportSettingsDto!) {\n    updateDiversionReportSettings(diversionSettingsData: $diversionSettingsData) {\n      message\n      data {\n        frequency\n        start_date\n        end_date\n        start_month\n        end_month\n      }\n    }\n  }"]))),u=(0,a.J1)(d||(d=(0,n.A)(["mutation GetDiversionReportSettingById($locationId: String!) {\n    getDiversionReportSettingById(locationId: $locationId) {\n      message\n      data {\n        frequency\n        start_date\n        end_date\n        start_month\n        end_month\n      }\n    }\n  }"])))},24212:(e,l,i)=>{i.r(l),i.d(l,{default:()=>L});var o,d=i(65043),n=i(12209),a=i(33556),t=i(74117),u=i(42145),r=i(34764),s=i(63516),v=i(41290),c=i(8848),m=i(88250),p=i(31881),h=i(57528);const x=(0,i(70459).J1)(o||(o=(0,h.A)(["query GetAllDiversionReports($companyId: String!, $limit: Float!, $page: Float!) {\n  getAllDiversionReports(companyId: $companyId, limit: $limit, page: $page) {\n    message\n    data {\n      diversionReports {\n        add_units\n        is_material_updated\n        is_material_type_updated\n        is_equipment_updated\n        is_volume_updated\n        is_service_type_updated\n        approx_weight_per_month\n        approx_weight_per_unit\n        lifts\n        contractor_company {\n          uuid\n          name\n        }\n        document\n        end_date\n        equipment {\n          name\n          uuid\n        }\n        frequency {\n          uuid\n          frequency_type\n          frequency\n        }\n        frequency_time\n        invoice\n        is_draft\n        is_full_site\n        is_submitted\n        location {\n          uuid\n          location\n        }\n        material {\n          uuid\n          name\n        }\n        material_type {\n          type\n          uuid\n          weight\n        }\n        service_type\n        start_date\n        subscriber {\n          uuid\n        }\n        user {\n          first_name\n          last_name\n          uuid\n        }\n        volume {\n          uuid\n          volume\n          volume_cubic_yard\n        }\n        zone {\n          location\n          uuid\n        }\n        uuid\n        lift {\n          uuid\n          name\n          date\n          weight\n        }\n      }\n      count\n    }\n  }\n}"])));var _=i(79456),f=i(16484),g=i(12283),b=i(10541),y=i(95295),w=i(64526),j=i(72856),N=i(31899),D=i.n(N),q=(i(25015),i(86178)),k=i.n(q),F=i(72545),A=i(12352),R=i(86213),C=i(19873),S=i(66925),V=i(75289),M=i(92073),I=i(16515),P=i(70579);const L=()=>{var e,l,i,o,h,N,q,L,Y,E,T,z,U,W,B,H,$,O,J,Z,G,Q,K,X,ee,le,ie,oe,de,ne,ae,te,ue,re,se,ve,ce,me,pe,he,xe,_e,fe,ge,be,ye,we,je,Ne,De,qe,ke,Fe,Ae,Re,Ce,Se,Ve,Me,Ie,Pe,Le,Ye,Ee,Te,ze,Ue,We,Be,He,$e,Oe,Je,Ze,Ge,Qe,Ke,Xe,el,ll,il,ol,dl,nl,al,tl,ul,rl,sl,vl,cl;const{t:ml}=(0,t.Bd)(),pl=(0,_.wA)(),hl=(0,_.d4)((e=>e.addWeightsManagement)),{userProfileData:xl}=(0,_.d4)((e=>e.userProfile)),{data:_l,refetch:fl}=(0,m.I)(x,{fetchPolicy:"network-only",skip:!(null!==xl&&void 0!==xl&&null!==(e=xl.getProfile)&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&null!==(i=l.company_id)&&void 0!==i&&i.uuid),variables:{companyId:null===xl||void 0===xl||null===(o=xl.getProfile)||void 0===o||null===(h=o.data)||void 0===h||null===(N=h.company_id)||void 0===N?void 0:N.uuid,limit:10,page:1}}),[gl]=(0,p.n)(y.NR),[bl]=(0,p.n)(C.D),{createOrUpdateWeightsValidationSchema:yl,weightsTableValidationschema:wl}=(0,A.A)(),[jl,{loading:Nl}]=(0,p.n)(F.H),{refetch:Dl}=(0,m.I)(f.HV,{fetchPolicy:"network-only",skip:!0}),{refetch:ql}=(0,m.I)(f.ci,{fetchPolicy:"network-only",skip:!0}),{refetch:kl}=(0,m.I)(g.Z,{fetchPolicy:"network-only",skip:!0}),{refetch:Fl}=(0,m.I)(b.cu,{fetchPolicy:"network-only",skip:!0}),[Al]=(0,p.n)(I.Mq),[Rl,Cl]=(0,d.useState)(!1),[Sl,Vl]=(0,d.useState)(!1),[Ml,Il]=(0,d.useState)(!1),[Pl,Ll]=(0,d.useState)([{name:"Select Volume Type",key:""}]),[Yl]=(0,d.useState)({limit:u.Wt,page:u.k2,sortOrder:"descend",search:"",sortField:"createdAt",index:0}),El=[{name:ml("Sr.No"),sortable:!1},{name:ml("Zone"),sortable:!1},{name:ml("Service Type"),sortable:!1},{name:ml("Material Category"),sortable:!1,fieldName:"Material Category"},{name:ml("Material Type"),sortable:!1,fieldName:"Material Type"},{name:ml("Equipment"),sortable:!1,fieldName:"Equipment"},{name:ml("Volume"),sortable:!1,fieldName:"Volume"},{name:ml("Frequency"),sortable:!1,fieldName:"Frequency"},{name:ml("Unit"),sortable:!1,fieldName:"Unit"},{name:ml("Lifts"),sortable:!1,fieldName:"Lifts"},{name:ml("Approx Weight Per Unit"),sortable:!1,fieldName:"Approx Weight Per Unit"},{name:ml("Weight Per Month"),sortable:!1,fieldName:"Weight Per Month"}],Tl=[{name:ml("Lifts"),sortable:!1,fieldName:"Lifts"},{name:ml("Insert Date"),sortable:!1,fieldName:"Insert Date"},{name:ml("Input Weight"),sortable:!1,fieldName:"Input Weight"}];(0,d.useEffect)((()=>{var e,l,i,o,d,n,a;null!==xl&&void 0!==xl&&null!==(e=xl.getProfile)&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&null!==(i=l.company_id)&&void 0!==i&&i.uuid&&bl({variables:{locationId:null===xl||void 0===xl||null===(o=xl.getProfile)||void 0===o||null===(d=o.data)||void 0===d||null===(n=d.branch_locations)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.uuid}}).then((e=>{var l,i,o;pl((0,j.gO)(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.getDiversionReportSettingById)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.frequency))})).catch((e=>{var l,i,o;return w.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(i=l.result)||void 0===i||null===(o=i.errors[0])||void 0===o?void 0:o.message)}))}),[null===xl||void 0===xl||null===(q=xl.getProfile)||void 0===q||null===(L=q.data)||void 0===L||null===(Y=L.company_id)||void 0===Y?void 0:Y.uuid]),(0,d.useEffect)((()=>{var e,l,i;null!==_l&&void 0!==_l&&_l.getAllDiversionReports&&(null===_l||void 0===_l||null===(e=_l.getAllDiversionReports)||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.diversionReports)||void 0===i||i.map(((e,l)=>{var i;zl.setFieldValue("reportData.[".concat(l,"].equipment"),null===e||void 0===e||null===(i=e.equipment)||void 0===i?void 0:i.name),zl.setFieldValue("reportData.[".concat(l,"].service_type"),null===e||void 0===e?void 0:e.service_type),zl.setFieldValue("reportData[".concat(l,"].approx_weight_per_month"),null===e||void 0===e?void 0:e.approx_weight_per_month),zl.setFieldValue("docFileName",null===e||void 0===e?void 0:e.document),zl.setFieldValue("fileName",null===e||void 0===e?void 0:e.invoice),zl.setFieldValue("attachments",null===e||void 0===e?void 0:e.invoice),zl.setFieldValue("documents",null===e||void 0===e?void 0:e.document),null!==e&&void 0!==e&&e.lift.length?(zl.setFieldValue("compactor_lifts[".concat(l,"]"),null===e||void 0===e?void 0:e.lift.map((e=>({name:null===e||void 0===e?void 0:e.name,uuid:null===e||void 0===e?void 0:e.uuid,weight:null===e||void 0===e?void 0:e.weight,date:new Date(null===e||void 0===e?void 0:e.date)})))),zl.setFieldValue("reportData[".concat(l,"].lifts"),null===e||void 0===e?void 0:e.lift.length)):(zl.setFieldValue("reportData[".concat(l,"].lifts"),null===e||void 0===e?void 0:e.lifts),zl.setFieldValue("compactor_lifts[".concat(l,"]"),null===e||void 0===e?void 0:e.lift))})))}),[null===_l||void 0===_l?void 0:_l.getAllDiversionReports,null===xl||void 0===xl?void 0:xl.getProfile]);const zl=(0,s.Wx)({initialValues:{reportData:[],compactor_lifts:[],attachments:"",fileName:"",documents:"",docFileName:"",delete_lifts:[],popupData:[],isSubmitted:!1,validationArray:[]},validationSchema:wl,onSubmit:e=>{var l,i;const o=null===_l||void 0===_l||null===(l=_l.getAllDiversionReports)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.diversionReports.map(((l,i)=>{var o,d,n,a,t,u,r,s,v,c,m,p,h,x,_,f,g,b,y,w,j,N,D,q,F,A,R;const C=((null===l||void 0===l||null===(o=l.material_type)||void 0===o?void 0:o.weight)*(null===l||void 0===l||null===(d=l.volume)||void 0===d?void 0:d.volume_cubic_yard)).toFixed(2);return{zone_id:(0,S.Ju)(null===l||void 0===l||null===(n=l.zone)||void 0===n?void 0:n.uuid),service_type:null===l||void 0===l?void 0:l.service_type,material_id:null===l||void 0===l||null===(a=l.material)||void 0===a?void 0:a.uuid,material_type_id:null===l||void 0===l||null===(t=l.material_type)||void 0===t?void 0:t.uuid,equipment_id:null===l||void 0===l||null===(u=l.equipment)||void 0===u?void 0:u.uuid,frequency_id:null===l||void 0===l||null===(r=l.frequency)||void 0===r?void 0:r.uuid,volume_id:null===l||void 0===l||null===(s=l.volume)||void 0===s?void 0:s.uuid,add_units:+(null===l||void 0===l?void 0:l.add_units),lifts:null!==(v=Number(null===e||void 0===e||null===(c=e.reportData)||void 0===c||null===(m=c[i])||void 0===m?void 0:m.lifts))&&void 0!==v?v:+(null===l||void 0===l?void 0:l.lifts),approx_weight_per_unit:+C,approx_weight_per_month:null!==(p=Number(null===e||void 0===e||null===(h=e.reportData)||void 0===h||null===(x=h[i])||void 0===x?void 0:x.approx_weight_per_month))&&void 0!==p?p:+(null===l||void 0===l?void 0:l.approx_weight_per_month),user_id:null===xl||void 0===xl||null===(_=xl.getProfile)||void 0===_||null===(f=_.data)||void 0===f?void 0:f.uuid,report_id:(0,S.Ju)(null===l||void 0===l?void 0:l.uuid),compactor_lifts:null!==(g=null===(b=e.compactor_lifts)||void 0===b?void 0:b[i])&&void 0!==g?g:[],company_id:null===xl||void 0===xl||null===(y=xl.getProfile)||void 0===y||null===(w=y.data)||void 0===w||null===(j=w.company_id)||void 0===j?void 0:j.uuid,delete_lifts:null!==(N=null===(D=e.delete_lifts)||void 0===D?void 0:D[i])&&void 0!==N?N:[],document:(0,S.Ju)(e.documents),invoice:(0,S.Ju)(e.attachments),location_id:null===xl||void 0===xl||null===(q=xl.getProfile)||void 0===q||null===(F=q.data)||void 0===F||null===(A=F.branch_locations[0])||void 0===A?void 0:A.uuid,start_date:k()(null===l||void 0===l?void 0:l.start_date).startOf("day").format("YYYY-MM-DD HH:mm:ss"),end_date:k()(null===l||void 0===l?void 0:l.end_date).endOf("day").format("YYYY-MM-DD HH:mm:ss"),frequency_time:null!==(R=null===l||void 0===l?void 0:l.frequency_time)&&void 0!==R?R:null===hl||void 0===hl?void 0:hl.frequencyTime,diversion_history_id:""}}));o&&jl({variables:{reportData:o,isSubmitted:null===e||void 0===e?void 0:e.isSubmitted}}).then((e=>{var l,i;w.oR.success(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.createDiversionReport)||void 0===i?void 0:i.message),zl.resetForm(),ii.resetForm(),fl().then((e=>{var l,i,o,d;null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.getAllDiversionReports)||void 0===i||null===(o=i.data)||void 0===o||null===(d=o.diversionReports)||void 0===d||d.map(((e,l)=>{var i;zl.setFieldValue("reportData.[".concat(l,"].equipment"),null===e||void 0===e||null===(i=e.equipment)||void 0===i?void 0:i.name),zl.setFieldValue("reportData.[".concat(l,"].service_type"),null===e||void 0===e?void 0:e.service_type),zl.setFieldValue("reportData[".concat(l,"].approx_weight_per_month"),+(null===e||void 0===e?void 0:e.approx_weight_per_month.toFixed(2))),zl.setFieldValue("documents",null===e||void 0===e?void 0:e.document),zl.setFieldValue("fileName",null===e||void 0===e?void 0:e.invoice),zl.setFieldValue("docFileName",null===e||void 0===e?void 0:e.document),zl.setFieldValue("attachments",null===e||void 0===e?void 0:e.invoice),null!==e&&void 0!==e&&e.lift.length?(zl.setFieldValue("reportData[".concat(l,"].lifts"),null===e||void 0===e?void 0:e.lift.length),zl.setFieldValue("compactor_lifts[".concat(l,"]"),null===e||void 0===e?void 0:e.lift.map((e=>({name:null===e||void 0===e?void 0:e.name,uuid:null===e||void 0===e?void 0:e.uuid,weight:null===e||void 0===e?void 0:e.weight,date:new Date(null===e||void 0===e?void 0:e.date)}))))):(zl.setFieldValue("reportData[".concat(l,"].lifts"),+(null===e||void 0===e?void 0:e.lifts.toFixed(2))),zl.setFieldValue("compactor_lifts[".concat(l,"]"),null===e||void 0===e?void 0:e.lift))}))})).catch((e=>{var l,i,o;return w.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(i=l.result)||void 0===i||null===(o=i.errors[0])||void 0===o?void 0:o.message)}))})).catch((e=>{var l,i,o;return w.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(i=l.result)||void 0===i||null===(o=i.errors[0])||void 0===o?void 0:o.message)}))}}),Ul=(0,d.useCallback)(((e,l)=>{var i,o;e&&void 0!==l&&(zl.setFieldValue("popupData",null===zl||void 0===zl||null===(i=zl.values)||void 0===i||null===(o=i.compactor_lifts)||void 0===o?void 0:o[l]),pl((0,j.gG)(l)));Il(!0)}),[zl.values]),[Wl,Bl]=(0,d.useState)(!1),[Hl,$l]=(0,d.useState)([{name:"Select Material Catergory",key:""}]),[Ol,Jl]=(0,d.useState)([{name:"Select Frequency",key:""}]),[Zl,Gl]=(0,d.useState)([{name:"Select Material Type"}]),[Ql,Kl]=(0,d.useState)([{name:"Select Equipment",key:""}]),[Xl,ei]=(0,d.useState)([{name:"Select Zone",key:""}]),li=(0,d.useCallback)((()=>{var e,l,i,o;gl({variables:{siteId:null===xl||void 0===xl||null===(e=xl.getProfile)||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.branch_locations)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.uuid}}).then((e=>{var l,i,o;const d=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.getZoneBySiteId)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.map((e=>({name:null===e||void 0===e?void 0:e.location,key:null===e||void 0===e?void 0:e.uuid})));d&&ei([{name:"Select Zone",key:""},{name:"Full Site",key:"full_site"},...d])})).catch((e=>{var l,i,o;return w.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(i=l.result)||void 0===i||null===(o=i.errors[0])||void 0===o?void 0:o.message)})),ql().then((e=>{var l,i,o;const d=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.getMaterials)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.map((e=>({name:null===e||void 0===e?void 0:e.name,key:null===e||void 0===e?void 0:e.uuid,uuid:null===e||void 0===e?void 0:e.uuid})));d&&$l([{name:"Select Material Catergory",key:""},...d])})).catch((e=>{var l,i,o;return w.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(i=l.result)||void 0===i||null===(o=i.errors[0])||void 0===o?void 0:o.message)})),kl().then((e=>{var l,i,o,d,n,a;const t={},u=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.getEquipments)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.map((e=>{var l,i,o;return t["".concat(null===e||void 0===e?void 0:e.uuid)]={volume:null===e||void 0===e||null===(l=e.volume)||void 0===l?void 0:l.volume,uuid:null===e||void 0===e||null===(i=e.volume)||void 0===i?void 0:i.uuid,cubic:null===e||void 0===e||null===(o=e.volume)||void 0===o?void 0:o.volume_cubic_yard,equipment:null===e||void 0===e?void 0:e.name},{name:null===e||void 0===e?void 0:e.volume,key:null===e||void 0===e?void 0:e.uuid,uuid:null===e||void 0===e?void 0:e.uuid}})),r=null===e||void 0===e||null===(d=e.data)||void 0===d||null===(n=d.getEquipments)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.map((e=>("compactor"===(null===e||void 0===e?void 0:e.name.toLocaleLowerCase())&&pl((0,j.eL)(null===e||void 0===e?void 0:e.uuid)),{name:null===e||void 0===e?void 0:e.name,key:null===e||void 0===e?void 0:e.name})));u&&pl((0,j.bZ)(t)),r&&Kl([{name:"Select Equipment",key:""},...r])})).catch((e=>{var l,i,o;return w.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(i=l.result)||void 0===i||null===(o=i.errors[0])||void 0===o?void 0:o.message)})),Fl().then((e=>{var l,i,o,d,n,a;const t=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.getFrequencies)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.map((e=>({name:null===e||void 0===e?void 0:e.frequency_type,key:null===e||void 0===e?void 0:e.uuid,code:null===e||void 0===e?void 0:e.uuid})));t&&Jl([{name:"Select Frequency",key:""},...t]);const u={},r=null===e||void 0===e||null===(d=e.data)||void 0===d||null===(n=d.getFrequencies)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.map((e=>(u[null===e||void 0===e?void 0:e.uuid]=null===e||void 0===e?void 0:e.frequency,e)));r&&pl((0,j.zW)(u))})).catch((e=>{var l,i,o;return w.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(i=l.result)||void 0===i||null===(o=i.errors[0])||void 0===o?void 0:o.message)})),Bl(!0)}),[null===xl||void 0===xl||null===(E=xl.getProfile)||void 0===E?void 0:E.data]),ii=(0,s.Wx)({initialValues:{zone_id:"",service_type:"",material_id:"",material_type_id:"",equipment_id:"",volume_id:"",equipment:"",frequency_id:"",add_units:0,lifts:0,volume:"",approx_weight_per_unit:0,approx_weight_per_month:0,volume_name:""},validationSchema:yl,onSubmit:e=>{var l,i,o,d,n,a,t,u,r,s,v,c,m,p,h,x,_,f,g,b,y,j,N,D,q,F,A,R;null!==xl&&void 0!==xl&&null!==(l=xl.getProfile)&&void 0!==l&&null!==(i=l.data)&&void 0!==i&&i.uuid&&null!==xl&&void 0!==xl&&null!==(o=xl.getProfile)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&null!==(n=d.company_id)&&void 0!==n&&n.uuid&&null!==xl&&void 0!==xl&&null!==(a=xl.getProfile)&&void 0!==a&&null!==(t=a.data)&&void 0!==t&&t.branch_locations.length&&jl({variables:{isSubmitted:!1,reportData:[{zone_id:"full_site"===(null===e||void 0===e?void 0:e.zone_id)?"":null===e||void 0===e?void 0:e.zone_id,service_type:null===e||void 0===e?void 0:e.service_type,material_id:null===e||void 0===e?void 0:e.material_id,material_type_id:null===e||void 0===e?void 0:e.material_type_id,equipment_id:null===e||void 0===e?void 0:e.equipment_id,volume_id:null===e||void 0===e?void 0:e.volume_id,frequency_id:null===e||void 0===e?void 0:e.frequency_id,add_units:+(null===e||void 0===e?void 0:e.add_units),lifts:+(null===e||void 0===e?void 0:e.lifts),approx_weight_per_unit:+(null===e||void 0===e?void 0:e.approx_weight_per_unit),approx_weight_per_month:+(null===e||void 0===e?void 0:e.approx_weight_per_month),report_id:"",user_id:null===xl||void 0===xl||null===(u=xl.getProfile)||void 0===u||null===(r=u.data)||void 0===r?void 0:r.uuid,compactor_lifts:[],delete_lifts:[],company_id:null===xl||void 0===xl||null===(s=xl.getProfile)||void 0===s||null===(v=s.data)||void 0===v||null===(c=v.company_id)||void 0===c?void 0:c.uuid,document:"",invoice:"",location_id:null===xl||void 0===xl||null===(m=xl.getProfile)||void 0===m||null===(p=m.data)||void 0===p||null===(h=p.branch_locations[0])||void 0===h?void 0:h.uuid,start_date:k()(null===_l||void 0===_l||null===(x=_l.getAllDiversionReports)||void 0===x||null===(_=x.data)||void 0===_||null===(f=_.diversionReports)||void 0===f||null===(g=f[0])||void 0===g?void 0:g.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:k()(null===_l||void 0===_l||null===(b=_l.getAllDiversionReports)||void 0===b||null===(y=b.data)||void 0===y||null===(j=y.diversionReports)||void 0===j||null===(N=j[0])||void 0===N?void 0:N.end_date).format("YYYY-MM-DD HH:mm:ss"),frequency_time:null!==(D=null===_l||void 0===_l||null===(q=_l.getAllDiversionReports)||void 0===q||null===(F=q.data)||void 0===F||null===(A=F.diversionReports)||void 0===A||null===(R=A[0])||void 0===R?void 0:R.frequency_time)&&void 0!==D?D:null===hl||void 0===hl?void 0:hl.frequencyTime,diversion_history_id:""}]}}).then((e=>{var l,i;w.oR.success(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.createDiversionReport)||void 0===i?void 0:i.message),Bl(!1),fl().catch((e=>{var l,i,o;return w.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(i=l.result)||void 0===i||null===(o=i.errors[0])||void 0===o?void 0:o.message)})),ii.resetForm()})).catch((e=>{var l,i,o;return w.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(i=l.result)||void 0===i||null===(o=i.errors[0])||void 0===o?void 0:o.message)}))}});(0,d.useEffect)((()=>{var e,l;null!==ii&&void 0!==ii&&null!==(e=ii.values)&&void 0!==e&&e.material_id&&Dl({materialId:null===ii||void 0===ii||null===(l=ii.values)||void 0===l?void 0:l.material_id}).then((e=>{var l,i,o,d,n,a,t;ii.setFieldValue("approx_weight_per_unit",""),ii.setFieldValue("material_type_id","");const u=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.getMaterialById)||void 0===i||null===(o=i.data)||void 0===o||null===(d=o.material_types)||void 0===d?void 0:d.map((e=>({name:null===e||void 0===e?void 0:e.type,key:null===e||void 0===e?void 0:e.uuid,uuid:null===e||void 0===e?void 0:e.uuid}))),r={};u&&Gl([{name:"Select Material Type",key:""},...u]);const s=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.getMaterialById)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.material_types.map((e=>(r[null===e||void 0===e?void 0:e.uuid]=null===e||void 0===e?void 0:e.weight,e)));s&&pl((0,j.cY)(r))})).catch((e=>{var l,i,o;w.oR.error(null===e||void 0===e||null===(l=e.networkError)||void 0===l||null===(i=l.result)||void 0===i||null===(o=i.errors[0])||void 0===o?void 0:o.message)}))}),[null===ii||void 0===ii||null===(T=ii.values)||void 0===T?void 0:T.material_id]),(0,d.useEffect)((()=>{var e,l,i,o;null!==ii&&void 0!==ii&&null!==(e=ii.values)&&void 0!==e&&e.frequency_id&&null!==ii&&void 0!==ii&&null!==(l=ii.values)&&void 0!==l&&l.add_units&&ii.setFieldValue("lifts",(hl.frequencyData[null===ii||void 0===ii||null===(i=ii.values)||void 0===i?void 0:i.frequency_id]*(null===ii||void 0===ii||null===(o=ii.values)||void 0===o?void 0:o.add_units)).toFixed(2))}),[null===ii||void 0===ii||null===(z=ii.values)||void 0===z?void 0:z.frequency_id,null===ii||void 0===ii||null===(U=ii.values)||void 0===U?void 0:U.add_units]),(0,d.useEffect)((()=>{var e,l,i,o,d,n;null!==ii&&void 0!==ii&&null!==(e=ii.values)&&void 0!==e&&e.material_type_id&&null!==ii&&void 0!==ii&&null!==(l=ii.values)&&void 0!==l&&l.volume_name&&ii.setFieldValue("approx_weight_per_unit",(hl.materialData[null===ii||void 0===ii||null===(i=ii.values)||void 0===i?void 0:i.material_type_id]*+(null===ii||void 0===ii||null===(o=ii.values)||void 0===o||null===(d=o.volume_name)||void 0===d||null===(n=d.split("_"))||void 0===n?void 0:n[2])).toFixed(2))}),[null===ii||void 0===ii||null===(W=ii.values)||void 0===W?void 0:W.material_type_id,null===ii||void 0===ii||null===(B=ii.values)||void 0===B?void 0:B.volume_name]),(0,d.useEffect)((()=>{var e,l,i,o;null!==ii&&void 0!==ii&&null!==(e=ii.values)&&void 0!==e&&e.approx_weight_per_unit&&null!==ii&&void 0!==ii&&null!==(l=ii.values)&&void 0!==l&&l.lifts&&ii.setFieldValue("approx_weight_per_month",((null===ii||void 0===ii||null===(i=ii.values)||void 0===i?void 0:i.approx_weight_per_unit)*(null===ii||void 0===ii||null===(o=ii.values)||void 0===o?void 0:o.lifts)).toFixed(2))}),[null===ii||void 0===ii||null===(H=ii.values)||void 0===H?void 0:H.approx_weight_per_unit,null===ii||void 0===ii||null===($=ii.values)||void 0===$?void 0:$.lifts]);const oi=(0,d.useCallback)((e=>{if(void 0!==(null===hl||void 0===hl?void 0:hl.liftIndex)){var l,i,o;const d=null!==(l=null===(i=zl.values.delete_lifts)||void 0===i?void 0:i[null===hl||void 0===hl?void 0:hl.liftIndex])&&void 0!==l?l:[],n=[],a=null===zl||void 0===zl||null===(o=zl.values)||void 0===o?void 0:o.popupData.filter(((l,i)=>{if(i===e&&null!==l&&void 0!==l&&l.uuid&&n.push(null===l||void 0===l?void 0:l.uuid),i!==e)return l}));a&&(zl.setFieldValue("delete_lifts.[".concat(null===hl||void 0===hl?void 0:hl.liftIndex,"]"),[...d,...n]),zl.setFieldValue("popupData",a),zl.setFieldValue("compactor_lifts.[".concat(null===hl||void 0===hl?void 0:hl.liftIndex,"]"),a.length))}}),[null===zl||void 0===zl||null===(O=zl.values)||void 0===O?void 0:O.delete_lifts,null===zl||void 0===zl||null===(J=zl.values)||void 0===J?void 0:J.popupData,null===hl||void 0===hl?void 0:hl.liftIndex]),di=(0,d.useRef)(null),ni=(0,d.useRef)(null),ai=(0,d.useCallback)((()=>{zl.setFieldValue("isSubmitted",!1),zl.handleSubmit()}),[null===_l||void 0===_l?void 0:_l.getAllDiversionReports,null===zl||void 0===zl?void 0:zl.values,null===ii||void 0===ii?void 0:ii.values,null===hl||void 0===hl?void 0:hl.frequencyTime,zl.errors.compactor_lifts]),ti=(0,d.useCallback)((()=>{zl.setFieldValue("isSubmitted",!0),zl.handleSubmit()}),[null===_l||void 0===_l?void 0:_l.getAllDiversionReports,null===zl||void 0===zl?void 0:zl.values,null===ii||void 0===ii?void 0:ii.values,null===hl||void 0===hl?void 0:hl.frequencyTime]),ui=(0,d.useCallback)((()=>{var e,l;const i=[...zl.values.popupData],o={name:"Lift-".concat((null===zl||void 0===zl||null===(e=zl.values)||void 0===e||null===(l=e.popupData)||void 0===l?void 0:l.length)+1),uuid:"",date:new Date,weight:0};i.push(o),zl.setFieldValue("popupData",i)}),[null===zl||void 0===zl||null===(Z=zl.values)||void 0===Z?void 0:Z.popupData]),ri=null===zl||void 0===zl||null===(G=zl.errors)||void 0===G?void 0:G.popupData,si=null===zl||void 0===zl||null===(Q=zl.touched)||void 0===Q?void 0:Q.popupData,vi=null===zl||void 0===zl||null===(K=zl.errors)||void 0===K?void 0:K.reportData,ci=null===zl||void 0===zl||null===(X=zl.touched)||void 0===X?void 0:X.reportData,mi=(0,d.useCallback)((()=>{const e=[],l=zl.values.popupData.reduce(((l,i)=>{const o=+i.weight;return e.push({...i,weight:o,date:i.date}),l+o}),0);void 0!==l&&(zl.setFieldValue("compactor_lifts.[".concat(null===hl||void 0===hl?void 0:hl.liftIndex,"]"),e),zl.setFieldValue("reportData.[".concat(null===hl||void 0===hl?void 0:hl.liftIndex,"].lifts"),zl.values.popupData.length),zl.setFieldValue("reportData.[".concat(null===hl||void 0===hl?void 0:hl.liftIndex,"].approx_weight_per_month"),l)),Il(!1)}),[zl.values.popupData]),pi=(0,d.useCallback)((e=>{zl.setFieldValue(e.target.name,(0,S.AW)(e))}),[]),hi=(0,d.useCallback)((()=>{Cl(!0)}),[]),xi=(0,d.useCallback)((()=>{Vl(!0)}),[]),_i=(0,d.useCallback)((e=>{var l;if(null!==e&&void 0!==e&&null!==(l=e.target)&&void 0!==l&&l.value){var i,o,d;ii.setFieldValue("volume_name",null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value);const l=null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value.split("_");var n;if(ii.setFieldValue("equipment_id",l[1]),ii.setFieldValue("volume_id",l[0]),null!==ii&&void 0!==ii&&null!==(d=ii.values)&&void 0!==d&&d.material_type_id)ii.setFieldValue("approx_weight_per_unit",(hl.materialData[null===ii||void 0===ii||null===(n=ii.values)||void 0===n?void 0:n.material_type_id]*+l[2]).toFixed(2))}}),[null===ii||void 0===ii?void 0:ii.values]),fi=(0,d.useCallback)((()=>{const e={fileName:zl.values.fileName};R.A.delete("".concat(u.hV,"/remove"),{data:e}).then((()=>{Cl(!1),zl.setFieldValue("attachments",""),zl.setFieldValue("fileName","")})).catch((e=>{var l,i;Cl(!1),w.oR.error(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)}))}),[zl.values.fileName]),gi=(0,d.useCallback)((()=>{const e={fileName:zl.values.docFileName};R.A.delete("".concat(u.hV,"/remove"),{data:e}).then((()=>{Vl(!1),zl.setFieldValue("documents",""),zl.setFieldValue("docFileName","")})).catch((e=>{var l,i;Vl(!1),w.oR.error(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)}))}),[zl.values.docFileName]),bi=(0,d.useCallback)((()=>{Cl(!1),Vl(!1)}),[]),yi=e=>{var l,i,o;return null!==ii&&void 0!==ii&&null!==(l=ii.errors)&&void 0!==l&&l[e]&&null!==ii&&void 0!==ii&&null!==(i=ii.touched)&&void 0!==i&&i[e]?null===ii||void 0===ii||null===(o=ii.errors)||void 0===o?void 0:o[e]:""},wi=(e,l,i)=>e?l:i;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(n.A,{headerTitle:"Add Weights"}),null!==_l&&void 0!==_l&&null!==(ee=_l.getAllDiversionReports)&&void 0!==ee&&null!==(le=ee.data)&&void 0!==le&&null!==(ie=le.diversionReports)&&void 0!==ie&&ie.length?(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"bg-accents-2 border border-border-primary rounded-xl p-3 md:p-5 mb-5 md:mb-7 flex justify-between items-center gap-3 flex-wrap",children:[(0,P.jsxs)("div",{className:"flex items-center gap-x-20 xmd:gap-x-48 flex-wrap gap-y-3",children:[(0,P.jsxs)("p",{className:"whitespace-nowrap",children:[(0,P.jsx)("span",{children:"Start Date: "}),(0,P.jsx)("span",{className:"font-bold",children:null!==(oe=k()(null===_l||void 0===_l||null===(de=_l.getAllDiversionReports)||void 0===de||null===(ne=de.data)||void 0===ne||null===(ae=ne.diversionReports)||void 0===ae||null===(te=ae[0])||void 0===te?void 0:te.start_date).format("DD/MM/YYYY"))&&void 0!==oe?oe:""})]}),(0,P.jsxs)("p",{className:"whitespace-nowrap",children:[(0,P.jsx)("span",{children:"Due Date: "}),(0,P.jsx)("span",{className:"font-bold",children:null!==(ue=k()(null===_l||void 0===_l||null===(re=_l.getAllDiversionReports)||void 0===re||null===(se=re.data)||void 0===se||null===(ve=se.diversionReports)||void 0===ve||null===(ce=ve[0])||void 0===ce?void 0:ce.end_date).format("DD/MM/YYYY"))&&void 0!==ue?ue:""})]})]}),!(null!==_l&&void 0!==_l&&null!==(me=_l.getAllDiversionReports)&&void 0!==me&&null!==(pe=me.data)&&void 0!==pe&&pe.diversionReports[0].is_submitted)&&(0,P.jsx)(v.A,{className:"btn-normal btn btn-secondary whitespace-nowrap w-full sm:w-auto",type:"button",label:ml("+ Add Other Material"),title:"".concat(ml("Add Other Material")),onClick:li})]}),(0,P.jsxs)("form",{onSubmit:zl.handleSubmit,children:[(0,P.jsxs)("div",{className:"px-3 py-5 md:px-5 border rounded-xl",children:[(0,P.jsxs)("div",{className:"flex flex-col justify-between gap-3 mb-3 sm:gap-5 md:mb-5 btn-group sm:flex-row",children:[(0,P.jsx)("h6",{className:"w-full leading-7 xmd:w-auto whitespace-nowrap",children:ml("Service List")}),!(null!==_l&&void 0!==_l&&null!==(he=_l.getAllDiversionReports)&&void 0!==he&&null!==(xe=he.data)&&void 0!==xe&&xe.diversionReports[0].is_submitted)&&(0,P.jsxs)("div",{className:"flex items-center flex-wrap sm:flex-nowrap gap-3",children:[(0,P.jsxs)(v.A,{className:"btn btn-secondary btn-normal relative !pr-12 min-w-[210px] w-full md:w-[260px] !justify-start",label:ml("Upload Invoice"),onClick:()=>{var e;null===di||void 0===di||null===(e=di.current)||void 0===e||e.click()},children:[(0,P.jsx)("input",{id:"attachments",type:"file",name:"attachments",multiple:!0,className:"focus:bg-transparent hidden",accept:".pdf",onChange:e=>(e=>{const l=e.currentTarget.files;if(l){const e=u.w3,o=["pdf"],d=Array.from(l).filter((l=>{var i;const d=l.size,n=null===(i=l.name.split(".").pop())||void 0===i?void 0:i.toLowerCase();return o.includes(n)?!(d>e)||(w.oR.error("Please make sure your file is must be less than 5MB."),!1):(w.oR.error("Invalid file type: ".concat(l.name)),!1)}));if(d.length>0){var i;const e=new FormData;zl.setFieldValue("fileName",null===d||void 0===d||null===(i=d[0])||void 0===i?void 0:i.name),e.append("file",d[0]),R.A.post("".concat(u.hV,"/attachment"),e,{headers:u.Q1}).then((e=>{var l,i;zl.setFieldValue("attachments",null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.key)})).catch((e=>{w.oR.error(null===e||void 0===e?void 0:e.message)}))}else zl.setFieldError("attachments","Invalid file type Please enter valid attachment")}})(e),ref:di,style:{display:"none"}},(0,M.A)()),(0,P.jsx)("span",{className:"w-5 h-5 absolute top-1/2 right-5 transform -translate-y-1/2",children:(0,P.jsx)(a.ef,{fontSize:"20",className:"w-5 h-5"})})]}),(0,P.jsxs)(v.A,{className:"btn btn-secondary btn-normal relative !pr-16 min-w-[210px] w-full md:w-[260px] !justify-start",label:ml("Upload Document"),onClick:()=>{var e;null===ni||void 0===ni||null===(e=ni.current)||void 0===e||e.click()},children:[(0,P.jsx)("input",{id:"documents",type:"file",name:"documents",multiple:!0,className:"focus:bg-transparent hidden",accept:".doc, .docx,application/msword",onChange:e=>(e=>{const l=e.currentTarget.files;if(l){const e=u.w3,o=["doc","docx","application/msword"],d=Array.from(l).filter((l=>{var i;const d=null===(i=l.name.split(".").pop())||void 0===i?void 0:i.toLowerCase(),n=l.size;return o.includes(d)?!(n>e)||(w.oR.error("Please make sure your file is must be less than 5MB."),!1):(w.oR.error("Invalid file type: ".concat(l.name)),!1)}));if(d.length>0){var i;const e=new FormData;zl.setFieldValue("docFileName",null===d||void 0===d||null===(i=d[0])||void 0===i?void 0:i.name),e.append("file",d[0]),R.A.post("".concat(u.hV,"/attachment"),e,{headers:u.Q1}).then((e=>{var l,i;zl.setFieldValue("documents",null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.key)})).catch((e=>w.oR.error(null===e||void 0===e?void 0:e.message)))}else zl.setFieldError("documents","Invalid file type Please enter valid attachment")}})(e),ref:ni,style:{display:"none"}},(0,M.A)()),(0,P.jsx)("span",{className:"w-5 h-5 absolute top-1/2 right-5 transform -translate-y-1/2",children:(0,P.jsx)(a.ef,{fontSize:"20",className:"w-5 h-5"})})]})]})]}),(0,P.jsxs)("div",{className:"w-full mb-3 overflow-auto bg-white border sm:w-auto rounded-t-xl custom-dataTable border-border-primary",children:[(0,P.jsxs)("table",{children:[(0,P.jsx)("thead",{children:(0,P.jsx)("tr",{children:null===El||void 0===El?void 0:El.map(((e,l)=>{const i=e.fieldName+l+1;return(0,P.jsx)("th",{scope:"col",children:(0,P.jsx)("div",{className:"flex items-center ".concat("Status"==e.name?"justify-center":""),children:e.name})},i)}))})}),(0,P.jsx)("tbody",{children:null===_l||void 0===_l||null===(_e=_l.getAllDiversionReports)||void 0===_e||null===(fe=_e.data)||void 0===fe||null===(ge=fe.diversionReports)||void 0===ge?void 0:ge.map(((e,l)=>{var i,o,d,n,t,u,s,v,c,m,p,h,x,_,f,g,b,y,w,j,N,D,q,k,F,A,R;const C=(null===Yl||void 0===Yl?void 0:Yl.index)+l+1,S=(null===e||void 0===e||null===(i=e.material_type)||void 0===i?void 0:i.weight)*(null===e||void 0===e||null===(o=e.volume)||void 0===o?void 0:o.volume_cubic_yard),V=(null===e||void 0===e?void 0:e.uuid)+l;return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"text-left",children:C}),(0,P.jsx)("td",{className:"text-left whitespace-nowrap",children:null!==e&&void 0!==e&&e.is_full_site?"Full Site":null===e||void 0===e||null===(d=e.zone)||void 0===d?void 0:d.location}),(0,P.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.service_type}),(0,P.jsx)("td",{className:"text-left",children:(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)("span",{children:null===e||void 0===e||null===(n=e.material)||void 0===n?void 0:n.name}),(null===e||void 0===e?void 0:e.is_material_updated)&&(0,P.jsx)("span",{className:"absolute -top-3 -right-2 bg-green-badge-bg px-1 py-0.5 text-bright-green-shade text-[10px] leading-4 inline-block rounded",children:"Updated"})]})}),(0,P.jsx)("td",{className:"text-left",children:(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)("span",{children:null===e||void 0===e||null===(t=e.material_type)||void 0===t?void 0:t.type}),(null===e||void 0===e?void 0:e.is_material_type_updated)&&(0,P.jsx)("span",{className:"absolute -top-3 -right-2 bg-green-badge-bg px-1 py-0.5 text-bright-green-shade text-[10px] leading-4 inline-block rounded",children:"Updated"})]})}),(0,P.jsx)("td",{className:"text-left",children:(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)("span",{children:null===e||void 0===e||null===(u=e.equipment)||void 0===u?void 0:u.name}),(null===e||void 0===e?void 0:e.is_equipment_updated)&&(0,P.jsx)("span",{className:"absolute -top-3 -right-2 bg-green-badge-bg px-1 py-0.5 text-bright-green-shade text-[10px] leading-4 inline-block rounded",children:"Updated"})]})}),(0,P.jsx)("td",{className:"text-left",children:(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)("span",{children:null===e||void 0===e||null===(s=e.volume)||void 0===s?void 0:s.volume}),(null===e||void 0===e?void 0:e.is_volume_updated)&&(0,P.jsx)("span",{className:"absolute -top-3 -right-2 bg-green-badge-bg px-1 py-0.5 text-bright-green-shade text-[10px] leading-4 inline-block rounded",children:"Updated"})]})}),(0,P.jsx)("td",{className:"text-left",children:null===e||void 0===e||null===(v=e.frequency)||void 0===v?void 0:v.frequency_type}),(0,P.jsx)("td",{className:"text-left",children:"compactor"===(null===e||void 0===e||null===(c=e.equipment)||void 0===c?void 0:c.name.toLocaleLowerCase())||"Regular on call"===(null===e||void 0===e?void 0:e.service_type)?"NA":null===e||void 0===e?void 0:e.add_units}),(0,P.jsx)("td",{className:"text-left",children:(0,P.jsxs)("div",{className:"flex items-center space-x-2.5",children:[(0,P.jsxs)("div",{className:"w-[4.125rem] table-input",children:["compactor"!==(null===e||void 0===e||null===(m=e.equipment)||void 0===m?void 0:m.name.toLocaleLowerCase())&&"Regular on call"===(null===e||void 0===e?void 0:e.service_type),(0,P.jsx)(r.A,{placeholder:ml(""),name:"reportData.[".concat(l,"].lifts"),onBlur:pi,onChange:e=>{zl.setFieldValue("reportData.[".concat(l,"].lifts"),e.target.value),zl.setFieldValue("reportData.[".concat(l,"].approx_weight_per_month"),(+e.target.value*S).toFixed(2))},required:!0,value:null!==(p=null===zl||void 0===zl||null===(h=zl.values)||void 0===h||null===(x=h.reportData)||void 0===x||null===(_=x[l])||void 0===_?void 0:_.lifts)&&void 0!==p?p:"NA",disabled:"compactor"===(null===e||void 0===e||null===(f=e.equipment)||void 0===f?void 0:f.name.toLocaleLowerCase())||(null===e||void 0===e?void 0:e.is_submitted),error:null!==vi&&void 0!==vi&&null!==(g=vi[l])&&void 0!==g&&g.lifts&&null!==ci&&void 0!==ci&&null!==(b=ci[l])&&void 0!==b&&b.lifts?null===vi||void 0===vi||null===(y=vi[l])||void 0===y?void 0:y.lifts:""})]}),"Compactor"===(null===e||void 0===e||null===(w=e.equipment)||void 0===w?void 0:w.name)&&(0,P.jsx)("button",{type:"button",onClick:()=>Ul(e,l),children:(0,P.jsx)("span",{className:"text-primary cursor-pointer",children:(0,P.jsx)(a.yq,{})})})]})}),(0,P.jsx)("td",{className:"text-left",children:"compactor"===(null===e||void 0===e||null===(j=e.equipment)||void 0===j?void 0:j.name.toLocaleLowerCase())?"NA":S.toFixed(2)}),(0,P.jsx)("td",{className:"text-left",children:(0,P.jsx)("div",{className:"w-28 table-input",children:(0,P.jsx)(r.A,{placeholder:ml(""),name:"reportData.[".concat(l,"].approx_weight_per_month"),onBlur:pi,onChange:zl.handleChange,required:!0,value:null===zl||void 0===zl||null===(N=zl.values)||void 0===N||null===(D=N.reportData)||void 0===D||null===(q=D[l])||void 0===q?void 0:q.approx_weight_per_month,disabled:"compactor"===(null===e||void 0===e||null===(k=e.equipment)||void 0===k?void 0:k.name.toLocaleLowerCase())||(null===e||void 0===e?void 0:e.is_submitted),error:null!==vi&&void 0!==vi&&null!==(F=vi[l])&&void 0!==F&&F.approx_weight_per_month&&null!==ci&&void 0!==ci&&null!==(A=ci[l])&&void 0!==A&&A.approx_weight_per_month?null===vi||void 0===vi||null===(R=vi[l])||void 0===R?void 0:R.approx_weight_per_month:""})})})]},V)}))})]}),wi(0===(null===_l||void 0===_l||null===(be=_l.getAllDiversionReports)||void 0===be||null===(ye=be.data)||void 0===ye?void 0:ye.count)||null===(null===_l||void 0===_l||null===(we=_l.getAllDiversionReports)||void 0===we||null===(je=we.data)||void 0===je?void 0:je.data),!0,!1)&&(0,P.jsx)("div",{className:"flex justify-center",children:(0,P.jsx)("div",{children:ml("No Data")})})]})]}),(0,P.jsxs)("div",{className:"flex justify-between flex-wrap ",children:[!(null!==_l&&void 0!==_l&&null!==(Ne=_l.getAllDiversionReports)&&void 0!==Ne&&null!==(De=Ne.data)&&void 0!==De&&De.diversionReports[0].is_submitted)&&(0,P.jsxs)("div",{className:"flex flex-wrap justify-start gap-2 mt-5 md:gap-5",children:[(0,P.jsx)("button",{className:"btn bg-default btn-primary btn-normal w-full xs:w-[160px] whitespace-nowrap ",title:"".concat(ml("Save as Draft")),type:"button",onClick:ai,disabled:Nl,children:"Save as Draft"}),(0,P.jsx)("button",{className:"btn bg-default btn-secondary btn-normal w-full xs:w-[160px] whitespace-nowrap ",type:"button",disabled:Nl,title:"".concat(ml("Confirm")),onClick:ti,children:"Confirm"})]}),(0,P.jsxs)("div",{className:"p-4 w-1/2 ",children:[null!==zl&&void 0!==zl&&null!==(qe=zl.values)&&void 0!==qe&&qe.fileName?(0,P.jsxs)("div",{className:"flex justify-between text-lg font-bold mb-4 truncate",children:[(0,P.jsxs)("div",{className:"break-words truncate",children:[(0,P.jsx)("span",{className:"text-primary",children:"Invoice : "}),null===zl||void 0===zl||null===(ke=zl.values)||void 0===ke?void 0:ke.fileName]}),"  ",(0,P.jsx)(v.A,{className:"bg-transparent cursor-pointer btn-default",onClick:hi,label:"",title:"".concat(ml("Delete")),disabled:null===_l||void 0===_l||null===(Fe=_l.getAllDiversionReports)||void 0===Fe||null===(Ae=Fe.data)||void 0===Ae?void 0:Ae.diversionReports[0].is_submitted,children:(0,P.jsx)(a.lM,{className:"fill-error"})})]}):"",null!==zl&&void 0!==zl&&null!==(Re=zl.values)&&void 0!==Re&&Re.docFileName?(0,P.jsxs)("div",{className:"flex justify-between text-lg font-bold truncate ",children:[(0,P.jsxs)("div",{className:"break-words truncate ",children:[(0,P.jsx)("span",{className:"text-primary",children:"Document : "}),null===zl||void 0===zl||null===(Ce=zl.values)||void 0===Ce?void 0:Ce.docFileName]})," ",(0,P.jsx)(v.A,{className:"bg-transparent cursor-pointer btn-default",onClick:xi,label:"",title:"".concat(ml("Delete")),disabled:null===_l||void 0===_l||null===(Se=_l.getAllDiversionReports)||void 0===Se||null===(Ve=Se.data)||void 0===Ve?void 0:Ve.diversionReports[0].is_submitted,children:(0,P.jsx)(a.lM,{className:"fill-error"})})]}):""]})]})]}),Wl&&(0,P.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"".concat(wi(Wl,"","hidden")," fixed top-0 left-0 right-0 z-50 h-full bg-modal modal"),children:(0,P.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"flex items-center justify-center h-full py-5 transition-all duration-300",children:(0,P.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,P.jsxs)("div",{className:"relative bg-white rounded-xl",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b md:py-6 bg-accents-2 rounded-t-xl",children:[(0,P.jsx)("p",{className:"text-lg font-bold md:text-xl text-baseColor",children:"Add Other Material"}),(0,P.jsx)(v.A,{onClick:()=>{Bl(!1),ii.resetForm()},label:ml(""),title:"".concat(ml("Close")),children:(0,P.jsx)("span",{className:"text-xl-22",children:(0,P.jsx)(a.YY,{className:"text-error"})})})]}),(0,P.jsx)("div",{className:"w-full",children:(0,P.jsxs)("form",{onSubmit:ii.handleSubmit,children:[(0,P.jsxs)("div",{className:"p-5 max-h-[calc(100vh-260px)] overflow-auto grid grid-cols-1 sm:grid-cols-2 sm:gap-4",children:[(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(c.A,{value:null===ii||void 0===ii||null===(Me=ii.values)||void 0===Me?void 0:Me.zone_id,name:"zone_id",onChange:null===ii||void 0===ii?void 0:ii.handleChange,id:"zone_id",label:ml("Zone"),required:!0,options:Xl,error:yi("zone_id")})}),(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(c.A,{placeholder:ml("Select Service Type"),name:"service_type",id:"service_type",value:null===ii||void 0===ii||null===(Ie=ii.values)||void 0===Ie?void 0:Ie.service_type,label:ml("Service Type"),onChange:e=>{var l;ii.setFieldValue("service_type",null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value),"Regular on call"===e.target.value&&(null===Ol||void 0===Ol||Ol.map((e=>{"1"==(null===e||void 0===e?void 0:e.name)&&ii.setFieldValue("frequency_id",null===e||void 0===e?void 0:e.key)})))},required:!0,options:u.dj,error:yi("service_type")})}),(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(c.A,{value:null===ii||void 0===ii||null===(Pe=ii.values)||void 0===Pe?void 0:Pe.material_id,name:"material_id",onChange:ii.handleChange,id:"material_id",label:ml("Material Category"),required:!0,options:Hl,error:yi("material_id")})}),(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(c.A,{value:null===ii||void 0===ii||null===(Le=ii.values)||void 0===Le?void 0:Le.material_type_id,name:"material_type_id",onChange:ii.handleChange,id:"materail_type_id",label:ml("Material Type"),required:!0,options:Zl,error:yi("material_type_id")})}),(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(c.A,{value:null===ii||void 0===ii||null===(Ye=ii.values)||void 0===Ye?void 0:Ye.equipment,name:"equipment",onChange:e=>{var l,i,o;null!==e&&void 0!==e&&null!==(l=e.target)&&void 0!==l&&l.value&&(Al({variables:{equipmentName:null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value}}).then((e=>{var l,i,o;const d=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.getEquipmentByName)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.map((e=>{var l,i,o;return{name:null===e||void 0===e||null===(l=e.volume)||void 0===l?void 0:l.volume,key:"".concat(null===e||void 0===e||null===(i=e.volume)||void 0===i?void 0:i.uuid,"_").concat(null===e||void 0===e?void 0:e.uuid,"_").concat(null===e||void 0===e||null===(o=e.volume)||void 0===o?void 0:o.volume_cubic_yard)}}));d&&Ll([{name:"Select Volume Type",key:""},...d])})).catch((e=>{w.oR.error(e.networkError.result.errors[0].message)})),ii.setFieldValue("equipment",null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value))},id:"equipment",label:ml("Equipment"),required:!0,options:Ql,error:yi("equipment")})}),(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(c.A,{value:null===ii||void 0===ii||null===(Ee=ii.values)||void 0===Ee?void 0:Ee.frequency_id,name:"frequency_id",onChange:ii.handleChange,id:"frequency_id",label:ml("Frequency"),required:!0,disabled:"Regular on call"===(null===ii||void 0===ii||null===(Te=ii.values)||void 0===Te?void 0:Te.service_type),options:"Regular on call"===(null===ii||void 0===ii||null===(ze=ii.values)||void 0===ze?void 0:ze.service_type)?Ol:null===Ol||void 0===Ol?void 0:Ol.filter((e=>"1"!==(null===e||void 0===e?void 0:e.name))),error:yi("frequency_id")})}),(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(c.A,{value:null===ii||void 0===ii||null===(Ue=ii.values)||void 0===Ue?void 0:Ue.volume_name,name:"volume_name",onChange:_i,id:"volume_name",label:ml("Volume"),required:!0,options:Pl,error:yi("volume_name")})}),(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(r.A,{placeholder:ml("Add Units"),value:null===ii||void 0===ii||null===(We=ii.values)||void 0===We?void 0:We.add_units,name:"add_units",onChange:ii.handleChange,label:ml("Unit"),required:!0,error:yi("add_units"),disabled:"compactor"===(null===ii||void 0===ii||null===(Be=ii.values)||void 0===Be?void 0:Be.equipment.toLocaleLowerCase())||"Regular on call"===(null===ii||void 0===ii||null===(He=ii.values)||void 0===He?void 0:He.service_type)})}),(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(r.A,{placeholder:ml("Add lifts"),value:null===ii||void 0===ii||null===($e=ii.values)||void 0===$e?void 0:$e.lifts,name:"lifts",onChange:ii.handleChange,label:ml("Lifts"),required:!0,error:yi("lifts"),disabled:"compactor"===(null===ii||void 0===ii||null===(Oe=ii.values)||void 0===Oe?void 0:Oe.equipment.toLocaleLowerCase())||"Regular on call"===(null===ii||void 0===ii||null===(Je=ii.values)||void 0===Je?void 0:Je.service_type)})}),(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(r.A,{value:null===ii||void 0===ii||null===(Ze=ii.values)||void 0===Ze?void 0:Ze.approx_weight_per_unit,placeholder:ml("Add Weight"),name:"approx_weight_per_unit",onChange:ii.handleChange,label:ml("Approx Weight Per Unit (Autofill)"),disabled:!0,required:!0})}),(0,P.jsx)("div",{className:"max-sm:mb-3  sm:inline-block col-span-1",children:(0,P.jsx)(r.A,{value:null===ii||void 0===ii||null===(Ge=ii.values)||void 0===Ge?void 0:Ge.approx_weight_per_month,placeholder:ml("Add Weight"),onChange:ii.handleChange,name:"approx_weight_per_month",label:ml("Weight Per month (Autofill)"),required:!0,disabled:"compactor"===(null===ii||void 0===ii||null===(Qe=ii.values)||void 0===Qe?void 0:Qe.equipment.toLocaleLowerCase()),error:null!==ii&&void 0!==ii&&null!==(Ke=ii.errors)&&void 0!==Ke&&Ke.approx_weight_per_month&&"compactor"!==(null===ii||void 0===ii||null===(Xe=ii.values)||void 0===Xe?void 0:Xe.equipment.toLocaleLowerCase())&&null!==ii&&void 0!==ii&&null!==(el=ii.touched)&&void 0!==el&&el.approx_weight_per_month?null===ii||void 0===ii||null===(ll=ii.errors)||void 0===ll?void 0:ll.approx_weight_per_month:""})})]}),(0,P.jsx)("div",{className:"flex flex-col items-center justify-end p-5 border-t border-solid md:space-x-3 md:flex-row border-border-primary",children:(0,P.jsx)(v.A,{className:"btn-primary btn-normal w-full md:w-auto min-w-[160px]",type:"submit",label:ml("Add"),title:"".concat(ml("Add"))})})]})})]})})})}),Ml&&(0,P.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"".concat(wi(Ml,"","hidden")," fixed top-0 left-0 right-0 z-50 h-full bg-modal modal"),children:(0,P.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"flex items-center justify-center h-full py-5 transition-all duration-300",children:(0,P.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,P.jsx)("div",{className:"relative bg-white rounded-xl",children:(0,P.jsxs)("form",{onSubmit:zl.handleSubmit,children:[(0,P.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b md:py-6 bg-accents-2 rounded-t-xl",children:[(0,P.jsx)("p",{className:"text-lg font-bold md:text-xl text-baseColor",children:"Add Lifts"}),(0,P.jsx)(v.A,{label:ml(""),title:"".concat(ml("Close")),onClick:()=>Il(!1),children:(0,P.jsx)("span",{className:"text-xl-22",children:(0,P.jsx)(a.YY,{className:"text-error"})})})]}),(0,P.jsxs)("div",{className:"w-full max-h-[500px] p-5 mb-3 overflow-auto bg-white sm:w-auto custom-dataTable ",children:[(0,P.jsxs)("table",{children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[null===Tl||void 0===Tl?void 0:Tl.map(((e,l)=>{const i=e.fieldName+l+1;return(0,P.jsx)("th",{scope:"col",children:(0,P.jsx)("div",{className:"flex items-center ".concat("Status"==e.name?"justify-center":""),children:e.name})},i)})),(0,P.jsx)("th",{children:(0,P.jsx)("div",{className:"flex justify-center",children:ml("Action")})})]})}),(0,P.jsx)("tbody",{children:null!==zl&&void 0!==zl&&null!==(il=zl.values)&&void 0!==il&&null!==(ol=il.popupData)&&void 0!==ol&&ol.length?null===zl||void 0===zl||null===(dl=zl.values)||void 0===dl||null===(nl=dl.popupData)||void 0===nl?void 0:nl.map(((e,l)=>{var i,o,d,n,t,u,s,v,c,m,p,h,x,_,f,g,b,y;return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"text-left whitespace-nowrap",children:null===e||void 0===e?void 0:e.name}),(0,P.jsx)("td",{className:"text-left",children:(0,P.jsx)("div",{className:"flex items-center space-x-2.5",children:(0,P.jsxs)("div",{className:"w-32 md:w-[8.75rem] table-input",children:[(0,P.jsx)(D(),{id:"formik?.values?.popupData?.[".concat(l,"]?.date"),selected:null===zl||void 0===zl||null===(i=zl.values)||void 0===i||null===(o=i.popupData)||void 0===o||null===(d=o[l])||void 0===d?void 0:d.date,onChange:e=>{zl.setFieldValue("popupData.[".concat(l,"].date"),e)},dateFormat:"dd/MM/yyyy",placeholderText:"dd/MM/yyyy",className:"customInput disabled:cursor-not-allowed",disabled:null===_l||void 0===_l||null===(n=_l.getAllDiversionReports)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.diversionReports[0].is_submitted,maxDate:new Date}),null!==ri&&void 0!==ri&&null!==(u=ri[l])&&void 0!==u&&u.date&&null!==si&&void 0!==si&&null!==(s=si[l])&&void 0!==s&&s.date?(0,P.jsx)("p",{className:"error",children:null===ri||void 0===ri||null===(v=ri[l])||void 0===v?void 0:v.date}):""]})})}),(0,P.jsx)("td",{className:"text-left",children:(0,P.jsx)("div",{className:"w-24 md:w-[7.5rem] table-input",children:(0,P.jsx)(r.A,{placeholder:ml(""),required:!0,id:"weight-".concat(l),name:"popupData[".concat(l,"].weight"),onChange:zl.handleChange,value:null===zl||void 0===zl||null===(c=zl.values)||void 0===c||null===(m=c.popupData)||void 0===m||null===(p=m[l])||void 0===p?void 0:p.weight,error:null!==ri&&void 0!==ri&&null!==(h=ri[l])&&void 0!==h&&h.weight&&null!==si&&void 0!==si&&null!==(x=si[l])&&void 0!==x&&x.weight?null===ri||void 0===ri||null===(_=ri[l])||void 0===_?void 0:_.weight:"",disabled:null===_l||void 0===_l||null===(f=_l.getAllDiversionReports)||void 0===f||null===(g=f.data)||void 0===g?void 0:g.diversionReports[0].is_submitted})})}),(0,P.jsx)("td",{children:(0,P.jsx)("button",{type:"button",className:"btn bg-transparent cursor-pointer btn-default",onClick:()=>oi(l),disabled:null===_l||void 0===_l||null===(b=_l.getAllDiversionReports)||void 0===b||null===(y=b.data)||void 0===y?void 0:y.diversionReports[0].is_submitted,children:(0,P.jsx)(a.lM,{className:"fill-error"})})})]},"popupData-".concat(l+1))})):null})]}),wi(0===(null===zl||void 0===zl||null===(al=zl.values)||void 0===al||null===(tl=al.popupData)||void 0===tl?void 0:tl.length)||null===(null===zl||void 0===zl||null===(ul=zl.values)||void 0===ul?void 0:ul.popupData),!0,!1)&&(0,P.jsx)("div",{className:"flex justify-center",children:(0,P.jsx)("div",{children:ml("No Data")})})]}),!(null!==_l&&void 0!==_l&&null!==(rl=_l.getAllDiversionReports)&&void 0!==rl&&null!==(sl=rl.data)&&void 0!==sl&&sl.diversionReports[0].is_submitted)&&(0,P.jsxs)("p",{className:"p-5 pt-0 flex items-center space-x-2.5",children:[(0,P.jsx)("button",{onClick:()=>ui(),type:"button",children:(0,P.jsx)("span",{className:"text-primary cursor-pointer",children:(0,P.jsx)(a.yq,{})})}),(0,P.jsx)("span",{children:"Add New"})]}),(0,P.jsx)("div",{className:"flex flex-col items-center justify-end p-5 border-t border-solid md:space-x-3 md:flex-row border-border-primary",children:!(null!==_l&&void 0!==_l&&null!==(vl=_l.getAllDiversionReports)&&void 0!==vl&&null!==(cl=vl.data)&&void 0!==cl&&cl.diversionReports[0].is_submitted)&&(0,P.jsx)(v.A,{className:"btn-primary btn-normal w-full md:w-auto min-w-[160px]",label:ml("Add"),title:"".concat(ml("Add")),type:"submit",onClick:mi})})]})})})})}),Rl&&(0,P.jsx)(V.A,{warningText:u.jl,onClose:bi,action:fi,show:Rl}),Sl&&(0,P.jsx)(V.A,{warningText:u.jl,onClose:bi,action:gi,show:Sl})]}):(0,P.jsx)("div",{className:"flex justify-center items-center",children:(0,P.jsxs)("p",{className:"text-lg font-bold",children:[(0,P.jsx)("span",{className:"error",children:"Note : "}),"No records found"]})})]})}}}]);
//# sourceMappingURL=4212.552b8091.chunk.js.map