"use strict";(self.webpackChunkterraforma_systems=self.webpackChunkterraforma_systems||[]).push([[8759,9708],{7648:(e,a,t)=>{t.d(a,{A:()=>u});var l=t(65043),s=t(74117),n=t(73216),r=t(35475),i=t(42145),o=t(79456),d=t(66925),c=t(70579);const m=()=>{var e,a,t;const{t:m}=(0,s.Bd)(),u=(0,n.zy)(),x=new URLSearchParams(u.search).get("uuid"),{id:h}=(0,n.g)(),{userProfileData:p}=(0,o.d4)((e=>e.userProfile)),g=null!==(e=null===p||void 0===p||null===(a=p.getProfile)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.user_type)&&void 0!==e?e:"",v=e=>{var a;let t="";if(null!==(a=e.split("/")[2])&&void 0!==a&&a.includes("-")){return e.split("/")[2].split("-").forEach((e=>{var a;return t=t+(null===(a=e[0])||void 0===a?void 0:a.toUpperCase())+e.slice(1)+" ",t})),t}var l;return t=(null===(l=e.split("/")[2][0])||void 0===l?void 0:l.toUpperCase())+e.split("/")[2].slice(1),t},f=e=>{let a="";if(null!==e&&void 0!==e&&e.includes("-")){a=null===e||void 0===e?void 0:e.replace(/-|\s/g," ");const t=a.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e][0].toUpperCase()+t[e].substring(1);return a=t.join(" "),a}var t;return a=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" ",a},b=e=>{let a="";return null!==e&&void 0!==e&&e.includes("-")||(a=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))+" "),a;var t},j=u.pathname.split("/"),y=(0,l.useCallback)((()=>{if((null===j||void 0===j?void 0:j.length)>0){const e=null===j||void 0===j?void 0:j.length;if(e<4)return(0,c.jsx)("span",{className:"text-primary",children:j[2]&&"".concat(m(f(j[2])))});if(e<5)return""!==j[3]?j[3].length>32?(0,c.jsxs)(c.Fragment,{children:[b(j[3])&&(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(r.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:"".concat(m(v(u.pathname)))})}),b(j[3])&&(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),!b(j[3])&&(0,c.jsx)("span",{className:"text-primary",children:j[2]&&"".concat(m(f(j[2])))}),(0,c.jsx)("span",{className:"text-primary",children:j[3]&&"".concat(m(b(j[3])))})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(r.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:"".concat(m(v(u.pathname)))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:j[3]&&"".concat(m(f(j[3])))})]}):(0,c.jsx)("span",{className:"text-primary",children:j[2]&&"".concat(m(f(j[2])))});if(e<6)return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(r.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:"".concat(m(v(u.pathname)))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:j[3]&&"".concat(m(f(j[3])))})]});if(e<7){let e="";return x?e="?uuid=".concat(x):h&&(e="?uuid=".concat(h)),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(r.k2,{to:"/".concat(i.bw.app,"/").concat(j[2]),className:"text-light-grey hover:underline",children:m(f(j[2]))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:(0,c.jsx)(r.k2,{to:"/".concat(i.bw.app,"/").concat(j[2],"/").concat(j[3],"/").concat((""!==x||""!==h)&&e),className:"text-light-grey hover:underline",children:m(f(j[3]))})}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"}),(0,c.jsx)("span",{className:"text-primary",children:j[5]&&"".concat(m(f(j[4])))})]})}}}),[j]);return(0,c.jsx)("div",{className:"w-full",children:(0,c.jsxs)("p",{className:"max-xs:text-xs text-xs-14 max-md:truncate",children:[(0,c.jsxs)("span",{children:[(0,c.jsx)(r.k2,{to:(0,d.Go)(g,i.ve.SUPER_ADMIN,"/".concat(i.bw.app,"/").concat(i.bw.dashboard),"/".concat(i.bw.app,"/").concat(i.bw.subscriber)),className:"cursor-pointer text-light-grey hover:underline",children:m("Home")}),(0,c.jsx)("span",{className:"mx-2 text-light-grey",children:">"})]}),y()]})})},u=l.memo(m)},38133:(e,a,t)=>{t.d(a,{A:()=>r});t(65043);var l=t(41290),s=t(33556),n=t(70579);const r=e=>{let{data:a,onClick:t,className:r,setData:i}=e;return(0,n.jsx)(l.A,{className:"bg-transparent btn-default ".concat(r),onClick:()=>{t(null===a||void 0===a?void 0:a.uuid),i&&i(a)},label:"",title:"Edit",children:(0,n.jsx)(s.ff,{})})}},75289:(e,a,t)=>{t.d(a,{A:()=>o});var l=t(65043),s=t(74117),n=t(41290),r=t(33556),i=t(70579);const o=e=>{let{onClose:a,action:t,show:o,warningText:d,disabled:c,isLoading:m}=e;const{t:u}=(0,s.Bd)(),[x,h]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{o&&setTimeout((()=>{h(!0)}),100)}),[o]),(0,i.jsxs)(i.Fragment,{children:[m&&(0,i.jsx)("div",{className:"w-12 h-12 mx-auto rounded-[50%] border-solid border-4 border-[#E8E8EA] border-r-[#2575d6] animate-spin absolute left-[58%] top-[40%]"}),(0,i.jsxs)("div",{className:"".concat(o?"":"hidden"," absolute top-0 left-0 right-0 z-[1000] h-full bg-modal"),children:["Are you sure want to delete this record ?"!==d&&"Are you sure want to change status ?"!==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,i.jsxs)("div",{className:"relative bg-white shadow rounded-xl",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-5 py-6 border-b bg-accents-2 rounded-t-xl",children:[(0,i.jsxs)("div",{className:"flex items-center ",children:[(0,i.jsx)(r.io,{className:"inline-block mr-3 fill-baseColor",fontSize:"20"}),(0,i.jsx)("span",{className:"text-xl font-bold text-baseColor",children:u("Confirmation")})]}),(0,i.jsx)(n.A,{onClick:a,label:"",children:(0,i.jsx)(r.YY,{className:"text-error",fontSize:"14"})})]}),(0,i.jsx)("div",{className:"p-5 space-y-6 font-normal text-center border-b border-solid border-border-primary",children:(0,i.jsx)("p",{children:u(d)})}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 md:space-x-3 md:flex-row",children:[(0,i.jsx)(n.A,{className:"btn-primary btn-normal mb-2 md:mb-0 w-full md:w-auto min-w-[160px]",onClick:t,label:u("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(n.A,{className:"btn-secondary btn-normal w-full md:w-auto min-w-[160px]",onClick:a,label:u("No"),title:"No"})]})]})})}),"Are you sure want to change status ?"==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[(0,i.jsx)("span",{className:"p-[10px] bg-primary min-w-min rounded-full mb-3 overflow-hidden text-xl-44 md:text-6xl",children:(0,i.jsx)(r.ZI,{className:"fill-white bg-primary"})}),(0,i.jsx)("h4",{children:u("Confirmation")})]}),(0,i.jsx)("h6",{className:"font-semibold text-center mb-7 md:mb-10",children:u(d)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(n.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:t,label:u("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(n.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:a,label:u("No"),title:"No"})]})]})})}),"Are you sure want to delete this record ?"==d&&(0,i.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(x?"":"opacity-0 transform -translate-y-full scale-150 ","  transition-all duration-300 "),children:(0,i.jsx)("div",{className:"w-full mx-5 sm:max-w-[640px]",children:(0,i.jsxs)("div",{className:"relative p-5 text-center bg-white shadow rounded-xl md:p-7",children:[(0,i.jsx)("div",{className:"flex justify-center mb-5",children:(0,i.jsx)("span",{className:"p-[22px] md:p-[26px] rounded-full bg-error text-xl-35 md:text-5xl",children:(0,i.jsx)(r.Vl,{className:"stroke-2 fill-white"})})}),(0,i.jsx)("h6",{className:"font-bold text-center mb-7 md:mb-10",children:u(d)}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-5 md:flex-row",children:[(0,i.jsx)(n.A,{className:"btn-primary btn-normal min-w-[86px]",onClick:t,label:u("Yes"),disabled:c,title:"Yes"}),(0,i.jsx)(n.A,{className:"btn-secondary btn-normal min-w-[86px]",onClick:a,label:u("No"),title:"No"})]})]})})})]})]})}},62500:(e,a,t)=>{t.d(a,{A:()=>i});var l=t(65043),s=t(41290),n=t(33556),r=t(70579);const i=e=>{let{data:a,setObj:t,setIsDelete:i,className:o,customClick:d}=e;const c=(0,l.useCallback)((()=>{t(a),!d&&i(!0),d&&d(a)}),[]);return(0,r.jsx)(s.A,{className:"bg-transparent cursor-pointer btn-default btn-icon ".concat(o),onClick:c,label:"",title:"Delete",children:(0,r.jsx)(n.lM,{className:"fill-error"})})}},12209:(e,a,t)=>{t.d(a,{A:()=>m});var l=t(65043),s=t(74117),n=t(73216),r=t(7648),i=t(33556),o=t(79456),d=t(75214),c=t(70579);const m=e=>{let{headerActionConst:a,headerTitle:t}=e;const{t:m}=(0,s.Bd)(),u=(0,o.wA)(),{show:x}=(0,o.d4)((e=>e.coursesManagement)),h=(0,n.zy)(),p=(0,l.useCallback)((()=>{u((0,d.oM)(!x))}),[x]);return(0,c.jsxs)("header",{className:"sticky top-0 z-20 flex bg-white border-b shadow-header xl:shadow-none xl:h-auto xl:block border-border-primary xl:px-2 xl:pt-0",children:[(0,c.jsx)("div",{onClick:p,className:"pt-5 cursor-pointer text-xl-22 xl:hidden",children:(0,c.jsx)(i.Rt,{className:"ml-4"})}),(0,c.jsx)("div",{className:"p-2.5 xl:p-[18px] xl:shadow-header max-xl:w-[calc(100%-47px)]",children:(0,c.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:[(0,c.jsxs)("div",{className:"w-full xl:w-auto",children:[(0,c.jsx)("h1",{className:"mb-1 text-2xl max-xl:truncate xl:text-3xl",children:m(null!==t&&void 0!==t?t:(e=>{let a="";if(e.split("/")[2].includes("-")){return e.split("/")[2].split("-").forEach((e=>(a=a+e[0].toUpperCase()+e.slice(1)+" ",a))),a}return a=e.split("/")[2][0].toUpperCase()+e.split("/")[2].slice(1),a})(h.pathname))}),(0,c.jsx)(r.A,{})]}),a&&(0,c.jsx)("div",{className:"flex gap-2.5 max-xl:w-[calc(100%+40px)] lg:gap-5",children:(()=>{if(a)return a()})()})]})})]})}},90053:(e,a,t)=>{t.d(a,{CA:()=>d,E8:()=>c,Tr:()=>o});var l,s,n,r=t(57528),i=t(70459);const o=(0,i.J1)(l||(l=(0,r.A)(["\nmutation CreateManualCategory($manualCategoryData: CreateManualCategoryDto!) {\n    createManualCategory(manualCategoryData: $manualCategoryData) {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n        parent {\n          uuid\n          name\n          description\n          image_url\n        }\n      }\n    }\n  }\n"]))),d=(0,i.J1)(s||(s=(0,r.A)(["\nmutation UpdateManualCategory($categoryId: String!, $manualCategoryData: UpdateManualCategoryDto!) {\n    updateManualCategory(categoryId: $categoryId, manualCategoryData: $manualCategoryData) {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n      }\n    }\n  }\n"]))),c=(0,i.J1)(n||(n=(0,r.A)(["\nmutation DeleteManualCategory($manualCategoryId: String!) {\n  deleteManualCategory(manualCategoryId: $manualCategoryId) {\n    message\n    data {\n      uuid\n      name\n      description\n      image_url\n      parent {\n        uuid\n        name\n        description\n        image_url\n      }\n    }\n  }\n}"])))},57981:(e,a,t)=>{t.d(a,{AH:()=>d,jP:()=>m,sv:()=>u,xq:()=>c});var l,s,n,r,i=t(57528),o=t(70459);const d=(0,o.J1)(l||(l=(0,i.A)(["\nquery GetManualCategories($sortOrder: String!, $sortField: String!, $limit: Float!, $page: Float!, $search: String!) {\n  getManualCategories(sortOrder: $sortOrder, sortField: $sortField, limit: $limit, page: $page, search: $search) {\n    message\n    data {\n      manualCategories {\n        uuid\n        name\n        description\n        image_url\n      \n      }\n      count\n    }\n  }\n}\n  "]))),c=(0,o.J1)(s||(s=(0,i.A)(["\n  query GetAllParentCategory {\n    getAllParentCategory {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n      }\n    }\n  }"]))),m=(0,o.J1)(n||(n=(0,i.A)(["\n  query GetManualCategoryById($manualCategoryId: String!) {\n    getManualCategoryById(manualCategoryId: $manualCategoryId) {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n        parent {\n          uuid\n          name\n          description\n          image_url\n        }\n      }\n    }\n  }"]))),u=(0,o.J1)(r||(r=(0,i.A)(["\n  query GetManualParentCategoryById($manualCategoryId: String!) {\n    getManualParentCategoryById(manualCategoryId: $manualCategoryId) {\n      message\n      data {\n        uuid\n        name\n        description\n        image_url\n        children {\n          uuid\n          name\n          description\n          image_url\n        }\n      }\n    }\n  }"])))},89274:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var l=t(65043),s=t(82485),n=t(63516),r=t(64526),i=t(72096),o=t(25263),d=t(33556),c=t(34764),m=t(41290),u=t(31881),x=t(88250),h=t(57981),p=t(90053),g=t(42145),v=t(12352),f=t(73216),b=t(55797),j=t(66925),y=(t(15675),t(59140),t(9686),t(70579));const N=e=>{var a;const t=(0,f.g)(),[N]=(0,u.n)(p.Tr),[w]=(0,u.n)(p.CA),{refetch:C}=(0,x.I)(h.sv,{variables:{manualCategoryId:t.id},skip:!t.id}),{addTechnicalManualValidationSchema:A}=(0,v.A)(),[k,S]=(0,l.useState)(!1),[_,M]=(0,l.useState)(!1),[D,I]=(0,l.useState)(!1),[F,R]=(0,l.useState)(""),$=(0,l.createRef)(),[E,P]=(0,l.useState)(!1),U=(0,l.useRef)(null),[O,B]=(0,l.useState)(!1),z=(0,n.Wx)({initialValues:{name:"",description:"",image_url:"",parent_id:""},validationSchema:A,onSubmit:async a=>{if(e.onData.uuid){const t={name:a.name,description:a.description,parent_id:a.parent_id?a.parent_id:"",image_url:a.image_url};w({variables:{manualCategoryData:t,categoryId:String(e.onData.uuid)}}).then((a=>{var t;const l=a.data;r.oR.success(null===l||void 0===l||null===(t=l.updateManualCategory)||void 0===t?void 0:t.message),z.resetForm(),e.dataRefetch(),J(),e.onCloseAddForm()})).catch((e=>{var a,t,l;r.oR.error(null===e||void 0===e||null===(a=e.networkError)||void 0===a||null===(t=a.result)||void 0===t||null===(l=t.errors[0])||void 0===l?void 0:l.message)}))}else N({variables:{manualCategoryData:{name:a.name,description:a.description,parent_id:""===a.parent_id?"":a.parent_id,image_url:a.image_url}}}).then((a=>{var t;const l=a.data;r.oR.success(null===l||void 0===l||null===(t=l.createManualCategory)||void 0===t?void 0:t.message),z.resetForm(),e.onData(C),e.onCloseAddForm()})).catch((e=>{r.oR.error(e.networkError.result.errors[0].message)}))}});(0,l.useEffect)((()=>{var a;S(!0),M(!0),null!==e&&void 0!==e&&null!==(a=e.onData)&&void 0!==a&&a.uuid&&I(!0)}),[e]),(0,l.useEffect)((()=>{t.id&&C({manualCategoryId:t.id}).catch((e=>r.oR.error(e)))}),[t.id]);const Y=(0,l.useCallback)((e=>{e.preventDefault();const a=e.target.files;if(a&&a.length>0){const e=a[0];if(e.type.startsWith("image/"))if(e.size>5242880)r.oR.error("Image size must be less than 5MB");else{const a=new FileReader;a.onload=()=>{R(a.result),P(!0)},a.readAsDataURL(e)}else r.oR.error("Please select a valid image file")}U.current&&(U.current.value="")}),[]),T=e=>z.errors[e]&&z.touched[e]?z.errors[e]:"";(0,l.useEffect)((()=>{var a;null!==e&&void 0!==e&&null!==(a=e.onData)&&void 0!==a&&a.uuid&&z.setValues({name:e.onData.name,description:e.onData.description,parent_id:e.onData.parent_id,image_url:e.onData.image_url})}),[e]);const J=(0,l.useCallback)((()=>{S(!1)}),[]),q=(0,l.useCallback)((e=>{z.setFieldValue(e.target.name,(0,j.AW)(e))}),[]),V=()=>(0,y.jsxs)("div",{className:"flex justify-end gap-3 md:gap-5",children:[(0,y.jsx)(m.A,{className:"btn-secondary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",label:"Cancel",onClick:()=>P(!1),title:"".concat((0,i.t)("Cancel"))}),(0,y.jsx)(m.A,{className:"btn-primary btn-normal w-full md:w-[160px] whitespace-nowrap",type:"button",disabled:O,label:"Save",onClick:()=>(async()=>{var e;if("undefined"!==typeof(null===(e=$.current)||void 0===e?void 0:e.cropper)){var a;await B(!0);let e=null;const t=(0,g.Si)(null===(a=$.current)||void 0===a?void 0:a.cropper.getCroppedCanvas().toDataURL(),"image.png"),l=new FormData;l.append("image",t),e=await(0,g.V6)(l,""),e&&(z.setFieldValue("image_url",e),P(!1)),await B(!1)}})()})]});return(0,y.jsxs)(y.Fragment,{children:[k&&(0,y.jsx)("div",{id:"defaultModal",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"fixed top-0 left-0 right-0 z-50 h-full bg-modal modal ".concat(k?"":"hidden"),children:(0,y.jsx)("div",{id:"changeUserStatusModel",tabIndex:-1,"data-modal-show":!0,"aria-hidden":"false",className:"py-5 flex items-center justify-center h-full ".concat(_?"":"opacity-0 transform -translate-y-full scale-150 "," transition-all duration-300 "),children:(0,y.jsx)("div",{className:"w-full mx-5 sm:max-w-[780px]",children:(0,y.jsxs)("div",{className:"relative bg-white rounded-xl",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between p-5 border-b md:py-6 bg-accents-2 rounded-t-xl",children:[(0,y.jsx)("h6",{children:D?"Update Manual":"Add Manual"}),D?(0,y.jsx)(m.A,{onClick:J,label:(0,i.t)(""),children:(0,y.jsx)("span",{className:"text-xl-22",children:(0,y.jsx)(d.YY,{className:"text-error"})})}):(0,y.jsx)(m.A,{onClick:e.onCloseAddForm,label:(0,i.t)(""),children:(0,y.jsx)("span",{className:"text-xl-22",children:(0,y.jsx)(d.YY,{className:"text-error"})})})]}),(0,y.jsx)("div",{className:"w-full ",children:(0,y.jsxs)("form",{onSubmit:z.handleSubmit,children:[(0,y.jsxs)("div",{className:"p-5 bg-white max-h-[calc(100vh-260px)] overflow-auto",children:[(0,y.jsxs)("div",{className:"mb-2 text-right",children:[(0,i.t)("Fields marked with")," ",(0,y.jsx)("span",{className:"text-red-500",children:"*"})," ",(0,i.t)("are mandatory.")]}),(0,y.jsx)("div",{className:"mb-3",children:(0,y.jsxs)("div",{className:"box-border flex flex-col items-center justify-center p-5 mb-5 border border-solid border-border-primary rounded-xl",children:[(0,y.jsxs)("label",{htmlFor:"image_url",className:"relative flex flex-col items-center justify-center",children:[(0,y.jsx)("div",{className:"flex items-center justify-center w-32 h-32 overflow-hidden border border-gray-300 border-solid rounded-full cursor-pointer sm:w-44 sm:h-44",children:null!==z&&void 0!==z&&null!==(a=z.values)&&void 0!==a&&a.image_url?(0,y.jsx)("img",{src:"".concat("https://terraforma-staging.s3.us-west-2.amazonaws.com","/").concat(z.values.image_url),alt:"image_url",className:"object-contain w-full h-full bg-black"}):(0,y.jsx)("img",{src:o,alt:"image_url",className:"object-contain w-full h-full bg-black"})}),(0,y.jsx)("input",{type:"file",id:"image_url",name:"image_url",accept:"image/*",onChange:Y,ref:U,className:"hidden"}),(0,y.jsx)("div",{className:"absolute bottom-0 p-2 text-2xl font-bold text-white rounded-full right-1 sm:right-2 bg-primary",children:(0,y.jsx)(d.i7,{})})]}),z.errors.image_url&&z.touched.image_url?(0,y.jsx)("span",{className:"relative mt-2 md:text-xs-15 error",children:z.errors.image_url}):""]})}),(0,y.jsx)("div",{className:"mb-3",children:(0,y.jsx)(c.A,{onBlur:q,placeholder:(0,i.t)("Name"),required:!0,name:"name",onChange:z.handleChange,label:(0,i.t)("Name"),value:z.values.name,error:T("name")})}),(0,y.jsx)("div",{children:(0,y.jsx)(c.A,{onBlur:q,placeholder:(0,i.t)("Description"),required:!0,name:"description",onChange:z.handleChange,label:(0,i.t)("Description"),value:z.values.description,error:T("description")})})]}),(0,y.jsxs)("div",{className:"flex flex-col items-center justify-end p-5 border-t border-solid md:space-x-5 md:flex-row border-border-primary",children:[(0,y.jsx)(m.A,{className:"btn-primary btn-normal mb-3 md:mb-0 w-full md:w-[160px]",type:"submit",label:(0,i.t)("Save"),title:"".concat((0,i.t)("Save"))}),D?(0,y.jsx)(m.A,{className:"btn-secondary btn-normal w-full md:w-[160px]",label:(0,i.t)("Cancel"),onClick:J,title:"".concat((0,i.t)("Cancel"))}):(0,y.jsx)(m.A,{className:"btn-secondary btn-normal w-full md:w-[160px]",label:(0,i.t)("Cancel"),onClick:e.onCloseAddForm,title:"".concat((0,i.t)("Cancel"))})]})]})})]})})})}),(0,y.jsx)(b.l,{className:"custom-dialog",header:"Crop Image",visible:E,style:{width:"50vw"},onHide:()=>P(!1),footer:()=>V(),children:F&&(0,y.jsx)(s.A,{ref:$,style:{height:400,width:"100%"},zoomTo:.5,aspectRatio:1,preview:".img-preview",src:F,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0,cropBoxResizable:!1})})]})}},87377:(e,a,t)=>{t.r(a),t.d(a,{default:()=>C});var l=t(65043),s=t(74117),n=t(64526),r=t(42145),i=t(41290),o=t(75289),d=t(33556),c=t(34764),m=t(32254),u=t(77654),x=t(62500),h=t(31881),p=t(88250),g=t(57981),v=t(89274),f=t(90053),b=t(38133),j=t(79456),y=t(12209),N=t(70579);const w=()=>{var e,a,t,w,C,A,k,S,_;const[M,D]=(0,l.useState)({}),[I,F]=(0,l.useState)(!1),[R,$]=(0,l.useState)({}),[E,P]=(0,h.n)(f.E8),{t:U}=(0,s.Bd)(),[O,B]=(0,l.useState)(!1),[z,Y]=(0,l.useState)(!1),{technicalManualsGuides:T}=(0,j.d4)((e=>e.rolesManagement)),[J,q]=(0,l.useState)({limit:r.Wt,page:r.k2,sortField:"createdAt",sortOrder:"descend",search:"",index:0}),{data:V,refetch:G}=(0,p.I)(g.AH,{variables:{sortOrder:J.sortOrder,limit:J.limit,page:J.page,search:J.search,sortField:J.sortField}}),L=[{name:U("Sr.No"),sortable:!1},{name:U("Image"),sortable:!1,fieldName:"image_url"},{name:U("Name"),sortable:!0,fieldName:"name"},{name:U("Description"),sortable:!0,fieldName:"description"}];(0,l.useEffect)((()=>{var e;null!==V&&void 0!==V&&V.getManualCategories&&D(null===V||void 0===V||null===(e=V.getManualCategories)||void 0===e?void 0:e.data)}),[null===V||void 0===V?void 0:V.getManualCategories]);const W=(0,l.useCallback)((()=>{F(!1)}),[]),H=(0,l.useCallback)((e=>{q({...J,search:e.target.value})}),[]),Z=(0,l.useCallback)((()=>{E({variables:{manualCategoryId:R.uuid}}).then((e=>{const a=e.data;n.oR.success(a.deleteManualCategory.message),G(J).catch((e=>n.oR.error(e))),F(!1)})).catch((e=>{400===e.networkError.statusCode?(n.oR.error(e.networkError.result.errors[0].message),F(!1)):n.oR.error(e.networkError.result.errors[0].message)}))}),[I]);(0,l.useEffect)((()=>{G(J).catch((e=>n.oR.error(e)))}),[J]);const[X,K]=(0,l.useState)(J.limit),Q=(null===V||void 0===V||null===(e=V.getManualCategories)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.count)||0,ee=Math.ceil(Q/X),ae=(0,l.useCallback)((e=>{const a={...J,page:e,index:(e-1)*J.limit};q(a),m.A.saveState("filterCategoryManagementListingData",JSON.stringify(a))}),[J.limit]);(0,l.useEffect)((()=>{K(J.limit)}),[J.limit]);const[te,le]=(0,l.useState)("");return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(y.A,{headerActionConst:()=>(0,N.jsx)(N.Fragment,{children:(null===T||void 0===T?void 0:T.write)&&(0,N.jsx)(i.A,{className:"btn-normal btn btn-secondary ",onClick:()=>{le(""),Y(!1),B(!0)},type:"button",label:U("Create Technical Manuals")})})}),(0,N.jsxs)("div",{className:"p-3 mb-3 overflow-auto bg-white border rounded-xl border-border-primary mx-7 md:p-5",children:[(0,N.jsxs)("div",{className:"flex flex-col justify-between gap-3 mb-3 md:items-center md:gap-5 md:mb-5 btn-group md:flex-row",children:[(0,N.jsx)("h6",{children:U("Categories")}),(0,N.jsxs)("div",{className:"flex flex-wrap w-full md:w-auto ",children:[(0,N.jsx)("div",{className:"flex flex-col justify-start text-slate-700 w-full md:w-auto md:max-w-[487px]",children:(0,N.jsx)(c.A,{placeholder:U("Search"),name:"search",type:"text",onChange:H,inputIcon:(0,N.jsx)(d.vj,{fontSize:"18",className:"font-normal"})})}),(0,N.jsx)("div",{className:"flex flex-col btn-group md:flex-row w-full md:w-auto md:max-w-[487px]",children:O&&(0,N.jsx)(v.default,{onCloseAddForm:()=>B(!1),onData:G})})]})]}),(0,N.jsxs)("div",{className:"w-full mb-3 overflow-auto bg-white border sm:w-auto rounded-t-xl custom-dataTable border-border-primary",children:[(0,N.jsxs)("table",{children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[null===L||void 0===L?void 0:L.map(((e,a)=>(0,N.jsx)("th",{scope:"col",className:"items-center",children:(0,N.jsxs)("div",{className:"flex items-center ".concat(e.name==U("Status")||e.name==U("Sr.No")?"justify-center":""),children:[e.name,e.sortable&&(0,N.jsxs)("button",{onClick:()=>{return a=e.fieldName,void q({...J,sortField:a,sortOrder:"ascend"===J.sortOrder?"descend":"ascend"});var a},children:[(""===J.sortOrder||J.sortField!==e.fieldName)&&(0,N.jsx)(d.xs,{className:"fill-white"}),"ascend"===J.sortOrder&&J.sortField===e.fieldName&&(0,N.jsx)(d.xD,{className:"ml-1 fill-white"}),"descend"===J.sortOrder&&J.sortField===e.fieldName&&(0,N.jsx)(d.xR,{className:"ml-1 fill-white"})]})]})},"".concat(a+1)))),(0,N.jsx)("th",{className:"items-center",scope:"col",children:(0,N.jsx)("div",{className:"flex items-center justify-center",children:"Action"})})]})}),(0,N.jsx)("tbody",{children:null===V||void 0===V||null===(t=V.getManualCategories)||void 0===t||null===(w=t.data)||void 0===w||null===(C=w.manualCategories)||void 0===C?void 0:C.map(((e,a)=>{var t;const l=null!==e&&void 0!==e&&null!==(t=e.image_url)&&void 0!==t&&t.startsWith(r.ZX)?null===e||void 0===e?void 0:e.image_url:"".concat(r.ZX,"/").concat(null===e||void 0===e?void 0:e.image_url),s=(null===J||void 0===J?void 0:J.index)+a+1;return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"text-center",scope:"row",children:s}),(0,N.jsx)("td",{className:"py-3 text-left border-none",children:(0,N.jsx)("div",{className:"w-[60px] h-[60px] rounded-md overflow-hidden",children:(0,N.jsx)("img",{src:l})})}),(0,N.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.name}),(0,N.jsx)("td",{className:"text-left",children:null===e||void 0===e?void 0:e.description}),(0,N.jsx)("td",{children:(0,N.jsxs)("div",{className:"flex justify-center gap-2 btn-group",children:[(null===T||void 0===T?void 0:T.update)&&(0,N.jsx)(b.A,{data:e,onClick:()=>(le(e),Y(!z),void B(!1))}),(null===T||void 0===T?void 0:T.delete)&&(0,N.jsx)(x.A,{data:e,setObj:$,setIsDelete:F})]})})]},e.uuid)}))})]}),(0===(null===V||void 0===V||null===(A=V.getManualCategories)||void 0===A||null===(k=A.data)||void 0===k?void 0:k.count)||null===(null===V||void 0===V||null===(S=V.getManualCategories)||void 0===S||null===(_=S.data)||void 0===_?void 0:_.manualCategories))&&(0,N.jsx)("div",{className:"flex justify-center",children:(0,N.jsx)("div",{children:U("No Data")})})]}),(0,N.jsxs)("div",{className:"flex flex-wrap items-center gap-5 mt-2",children:[(0,N.jsx)("span",{className:"text-xs text-slate-400",children:"".concat(null===(null===M||void 0===M?void 0:M.count)||void 0===(null===M||void 0===M?void 0:M.count)?"0":null===M||void 0===M?void 0:M.count)+U(" Total Records")}),(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsx)("span",{className:"text-sm font-normal text-gray-700 whitespace-nowrap",children:U("Per Page")}),(0,N.jsx)("select",{className:"border border-border-primary rounded-xl ml-2 px-3 text-sm py-1.5 text-gray-500 w-[70px] h-[36px] appearance-none bg-white",onChange:e=>(e=>{K(Number(e));const a={...J,limit:parseInt(e),page:1,search:"",index:0};q(a),m.A.saveState("filterCategoryManagementListingData",JSON.stringify(a))})(e.target.value),value:J.limit,children:null===r.aj||void 0===r.aj?void 0:r.aj.map((e=>(0,N.jsx)("option",{children:e},e)))})]}),(0,N.jsx)(u.A,{currentPage:J.page,totalPages:ee,onPageChange:ae,recordsPerPage:X})]})]}),I&&(0,N.jsx)(o.A,{warningText:r.jl,onClose:W,action:Z,show:I,disabled:null===P||void 0===P?void 0:P.loading}),z&&(0,N.jsx)(v.default,{onCloseAddForm:()=>Y(!1),onData:te,dataRefetch:()=>G()})]})},C=()=>(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(w,{})})},25263:(e,a,t)=>{e.exports=t.p+"static/media/sidebar-logo.d6fce7850bbfb0f38fbe.png"}}]);
//# sourceMappingURL=8759.a0fe4b1a.chunk.js.map